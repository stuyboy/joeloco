function FirebaseIFrameScriptHolder(e,t,n,r){if(this.urlFn=r,this.onDisconnect=n,this.outstandingRequests=new fb.core.util.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,NODE_CLIENT)this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=fb.core.util.LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=e,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=t,this.myIFrame=this.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var i=document.domain;o='<script>document.domain="'+i+'";</script>'}var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){fb.core.util.log("frame writing exception"),s.stack&&fb.core.util.log(s.stack),fb.core.util.log(s)}}}if(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=X.type(e);return"function"===n||X.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(X.isFunction(t))return X.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return X.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return X.filter(t,e,n);t=X.filter(t,e)}return X.grep(e,function(e){return z.call(t,e)>=0!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function i(e){var t=de[e]={};return X.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){Z.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),X.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=X.expando+s.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(_e,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?X.parseJSON(n):n}catch(o){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return Z.activeElement}catch(e){}}function h(e,t){return X.nodeName(e,"table")&&X.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function d(e){var t=Re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)me.set(e[n],"globalEval",!t||me.get(t[n],"globalEval"))}function v(e,t){var n,r,o,i,a,s,u,l;if(1===t.nodeType){if(me.hasData(e)&&(i=me.access(e),a=me.set(t,i),l=i.events)){delete a.handle,a.events={};for(o in l)for(n=0,r=l[o].length;r>n;n++)X.event.add(t,o,l[o][n])}ye.hasData(e)&&(s=ye.access(e),u=X.extend({},s),ye.set(t,u))}}function m(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&X.nodeName(e,t)?X.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Se.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var r,o=X(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(o[0]))?r.display:X.css(o[0],"display");return o.detach(),i}function _(e){var t=Z,n=Ue[e];return n||(n=b(e,t),"none"!==n&&n||(je=(je||X("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=je[0].contentDocument,t.write(),t.close(),n=b(e,t),je.detach()),Ue[e]=n),n}function w(e,t,n){var r,o,i,a,s=e.style;return n=n||We(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||X.contains(e.ownerDocument,e)||(a=X.style(e,t)),Be.test(a)&&qe.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function E(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,o=Qe.length;o--;)if(t=Qe[o]+n,t in e)return t;return r}function S(e,t,n){var r=He.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function T(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>i;i+=2)"margin"===n&&(a+=X.css(e,n+Ee[i],!0,o)),r?("content"===n&&(a-=X.css(e,"padding"+Ee[i],!0,o)),"margin"!==n&&(a-=X.css(e,"border"+Ee[i]+"Width",!0,o))):(a+=X.css(e,"padding"+Ee[i],!0,o),"padding"!==n&&(a+=X.css(e,"border"+Ee[i]+"Width",!0,o)));return a}function A(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=We(e),a="border-box"===X.css(e,"boxSizing",!1,i);if(0>=o||null==o){if(o=w(e,t,i),(0>o||null==o)&&(o=e.style[t]),Be.test(o))return o;r=a&&(K.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+T(e,t,n||(a?"border":"content"),r,i)+"px"}function P(e,t){for(var n,r,o,i=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(i[a]=me.get(r,"olddisplay"),n=r.style.display,t?(i[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ce(r)&&(i[a]=me.access(r,"olddisplay",_(r.nodeName)))):(o=Ce(r),"none"===n&&o||me.set(r,"olddisplay",o?n:X.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[a]||"":"none"));return e}function x(e,t,n,r,o){return new x.prototype.init(e,t,n,r,o)}function $(){return setTimeout(function(){Ke=void 0}),Ke=X.now()}function O(e,t){var n,r=0,o={height:e};for(t=t?1:0;4>r;r+=2-t)n=Ee[r],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function L(e,t,n){for(var r,o=(nt[t]||[]).concat(nt["*"]),i=0,a=o.length;a>i;i++)if(r=o[i].call(n,t,e))return r}function N(e,t,n){var r,o,i,a,s,u,l,c,f=this,h={},p=e.style,d=e.nodeType&&Ce(e),g=me.get(e,"fxshow");n.queue||(s=X._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,X.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=X.css(e,"display"),c="none"===l?me.get(e,"olddisplay")||_(e.nodeName):l,"inline"===c&&"none"===X.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Je.exec(o)){if(delete t[r],i=i||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!g||void 0===g[r])continue;d=!0}h[r]=g&&g[r]||X.style(e,r)}else l=void 0;if(X.isEmptyObject(h))"inline"===("none"===l?_(e.nodeName):l)&&(p.display=l);else{g?"hidden"in g&&(d=g.hidden):g=me.access(e,"fxshow",{}),i&&(g.hidden=!d),d?X(e).show():f.done(function(){X(e).hide()}),f.done(function(){var t;me.remove(e,"fxshow");for(t in h)X.style(e,t,h[t])});for(r in h)a=L(d?g[r]:0,r,f),r in g||(g[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function D(e,t){var n,r,o,i,a;for(n in e)if(r=X.camelCase(n),o=t[r],i=e[n],X.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),a=X.cssHooks[r],a&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function I(e,t,n){var r,o,i=0,a=tt.length,s=X.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=Ke||$(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(i);return s.notifyWith(e,[l,i,n]),1>i&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:X.extend({},t),opts:X.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ke||$(),duration:n.duration,tweens:[],createTween:function(t,n){var r=X.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(D(c,l.opts.specialEasing);a>i;i++)if(r=tt[i].call(l,e,c,l.opts))return r;return X.map(c,L,l),X.isFunction(l.opts.start)&&l.opts.start.call(e,l),X.fx.timer(X.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(pe)||[];if(X.isFunction(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function o(s){var u;return i[s]=!0,X.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||i[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),u}var i={},a=e===bt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function k(e,t){var n,r,o=X.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&X.extend(!0,e,r),e}function F(e,t,n){for(var r,o,i,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}a||(a=o)}i=i||a}return i?(i!==u[0]&&u.unshift(i),n[i]):void 0}function j(e,t,n,r){var o,i,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=c.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(a=l[u+" "+i]||l["* "+i],!a)for(o in l)if(s=o.split(" "),s[1]===i&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[o]:l[o]!==!0&&(i=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}function U(e,t,n,r){var o;if(X.isArray(t))X.each(t,function(t,o){n||St.test(e)?r(e,o):U(e+"["+("object"==typeof o?t:"")+"]",o,n,r)});else if(n||"object"!==X.type(t))r(e,t);else for(o in t)U(e+"["+o+"]",t[o],n,r)}function q(e){return X.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],W=B.slice,V=B.concat,H=B.push,z=B.indexOf,G={},Y=G.toString,Q=G.hasOwnProperty,K={},Z=e.document,J="2.1.4",X=function(e,t){return new X.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};X.fn=X.prototype={jquery:J,constructor:X,selector:"",length:0,toArray:function(){return W.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:W.call(this)},pushStack:function(e){var t=X.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return X.each(this,e,t)},map:function(e){return this.pushStack(X.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:B.sort,splice:B.splice},X.extend=X.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||X.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(l&&r&&(X.isPlainObject(r)||(o=X.isArray(r)))?(o?(o=!1,i=n&&X.isArray(n)?n:[]):i=n&&X.isPlainObject(n)?n:{},a[t]=X.extend(l,i,r)):void 0!==r&&(a[t]=r));return a},X.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===X.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!X.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==X.type(e)||e.nodeType||X.isWindow(e)?!1:e.constructor&&!Q.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?G[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=X.trim(e),e&&(1===e.indexOf("use strict")?(t=Z.createElement("script"),t.text=e,Z.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var o,i=0,a=e.length,s=n(e);if(r){if(s)for(;a>i&&(o=t.apply(e[i],r),o!==!1);i++);else for(i in e)if(o=t.apply(e[i],r),o===!1)break}else if(s)for(;a>i&&(o=t.call(e[i],i,e[i]),o!==!1);i++);else for(i in e)if(o=t.call(e[i],i,e[i]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?X.merge(r,"string"==typeof e?[e]:e):H.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;n>r;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r,o=[],i=0,a=e.length,s=!n;a>i;i++)r=!t(e[i],i),r!==s&&o.push(e[i]);return o},map:function(e,t,r){var o,i=0,a=e.length,s=n(e),u=[];if(s)for(;a>i;i++)o=t(e[i],i,r),null!=o&&u.push(o);else for(i in e)o=t(e[i],i,r),null!=o&&u.push(o);return V.apply([],u)},guid:1,proxy:function(e,t){var n,r,o;return"string"==typeof t&&(n=e[t],t=e,e=n),X.isFunction(e)?(r=W.call(arguments,2),o=function(){return e.apply(t||this,r.concat(W.call(arguments)))},o.guid=e.guid=e.guid||X.guid++,o):void 0},now:Date.now,support:K}),X.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()});var oe=function(e){function t(e,t,n,r){var o,i,a,s,u,l,f,p,d,g;if((t?t.ownerDocument||t:U)!==N&&L(t),t=t||N,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&I){if(11!==s&&(o=ye.exec(e)))if(a=o[1]){if(9===s){if(i=t.getElementById(a),!i||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&F(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return J.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&w.getElementsByClassName)return J.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(p=f=j,d=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=T(e),(f=t.getAttribute("id"))?p=f.replace(_e,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+h(l[u]);d=be.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return J.apply(n,d.querySelectorAll(g)),n}catch(v){}finally{f||t.removeAttribute("id")}}}return P(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>E.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[j]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=e.length;r--;)E.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function h(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=B++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,u,l=[q,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(u=t[j]||(t[j]={}),(s=u[r])&&s[0]===q&&s[1]===i)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function d(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var o=0,i=n.length;i>o;o++)t(e,n[o],r);return r}function v(e,t,n,r,o){for(var i,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(i=e[s])&&(!n||n(i,r,o))&&(a.push(i),l&&t.push(s));return a}function m(e,t,n,o,i,a){return o&&!o[j]&&(o=m(o)),i&&!i[j]&&(i=m(i,a)),r(function(r,a,s,u){var l,c,f,h=[],p=[],d=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:v(m,h,e,s,u),b=n?i||(r?e:d||o)?[]:a:y;if(n&&n(y,b,s,u),o)for(l=v(b,p),o(l,[],s,u),c=l.length;c--;)(f=l[c])&&(b[p[c]]=!(y[p[c]]=f));if(r){if(i||e){if(i){for(l=[],c=b.length;c--;)(f=b[c])&&l.push(y[c]=f);i(null,b=[],l,u)}for(c=b.length;c--;)(f=b[c])&&(l=i?ee(r,f):h[c])>-1&&(r[l]=!(a[l]=f))}}else b=v(b===a?b.splice(d,b.length):b),i?i(null,a,b,u):J.apply(a,b)})}function y(e){for(var t,n,r,o=e.length,i=E.relative[e[0].type],a=i||E.relative[" "],s=i?1:0,u=p(function(e){return e===t},a,!0),l=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var o=!i&&(r||n!==x)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,o}];o>s;s++)if(n=E.relative[e[s].type])c=[p(d(c),n)];else{if(n=E.filter[e[s].type].apply(null,e[s].matches),n[j]){for(r=++s;o>r&&!E.relative[e[r].type];r++);return m(s>1&&d(c),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,r>s&&y(e.slice(s,r)),o>r&&y(e=e.slice(r)),o>r&&h(e))}c.push(n)}return d(c)}function b(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,s,u,l){var c,f,h,p=0,d="0",g=r&&[],m=[],y=x,b=r||i&&E.find.TAG("*",l),_=q+=null==y?1:Math.random()||.1,w=b.length;for(l&&(x=a!==N&&a);d!==w&&null!=(c=b[d]);d++){if(i&&c){for(f=0;h=e[f++];)if(h(c,a,s)){u.push(c);break}l&&(q=_)}o&&((c=!h&&c)&&p--,r&&g.push(c))}if(p+=d,o&&d!==p){for(f=0;h=n[f++];)h(g,m,a,s);if(r){if(p>0)for(;d--;)g[d]||m[d]||(m[d]=K.call(u));m=v(m)}J.apply(u,m),l&&!r&&m.length>0&&p+n.length>1&&t.uniqueSort(u)}return l&&(q=_,x=y),g};return o?r(a):a}var _,w,E,C,S,T,A,P,x,$,O,L,N,D,I,M,R,k,F,j="sizzle"+1*new Date,U=e.document,q=0,B=0,W=n(),V=n(),H=n(),z=function(e,t){return e===t&&(O=!0),0},G=1<<31,Y={}.hasOwnProperty,Q=[],K=Q.pop,Z=Q.push,J=Q.push,X=Q.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(ae),pe=new RegExp("^"+oe+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,_e=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{J.apply(Q=X.call(U.childNodes),U.childNodes),Q[U.childNodes.length].nodeType}catch(Se){J={apply:Q.length?function(e,t){Z.apply(e,X.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,D=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),I=!S(r),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(r.getElementsByClassName),w.getById=o(function(e){return D.appendChild(e).id=j,!r.getElementsByName||!r.getElementsByName(j).length}),w.getById?(E.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),E.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},E.find.CLASS=w.getElementsByClassName&&function(e,t){return I?t.getElementsByClassName(e):void 0},R=[],M=[],(w.qsa=me.test(r.querySelectorAll))&&(o(function(e){D.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||M.push(".#.+[+~]")}),o(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=me.test(k=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&o(function(e){w.disconnectedMatch=k.call(e,"div"),k.call(e,"[s!='']:x"),R.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),R=R.length&&new RegExp(R.join("|")),t=me.test(D.compareDocumentPosition),F=t||me.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===U&&F(U,e)?-1:t===r||t.ownerDocument===U&&F(U,t)?1:$?ee($,e)-ee($,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,o=0,i=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!i||!s)return e===r?-1:t===r?1:i?-1:s?1:$?ee($,e)-ee($,t):0;if(i===s)return a(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[o]===l[o];)o++;return o?a(u[o],l[o]):u[o]===U?-1:l[o]===U?1:0},r):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&L(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!I||R&&R.test(n)||M&&M.test(n)))try{var r=k.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(o){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&L(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&L(e);var n=E.attrHandle[t.toLowerCase()],r=n&&Y.call(E.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:w.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(O=!w.detectDuplicates,$=!w.sortStable&&e.slice(0),e.sort(z),O){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return $=null,e},C=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},E=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:n?(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(se," ")+" ").indexOf(r)>-1:"|="===n?i===r||i.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,h,p,d,g=i!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(v){if(i){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&y){for(c=v[j]||(v[j]={}),l=c[e]||[],p=l[0]===q&&l[1],h=l[0]===q&&l[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(h=p=0)||d.pop();)if(1===f.nodeType&&++h&&f===t){c[e]=[q,p,h];break}}else if(y&&(l=(t[j]||(t[j]={}))[e])&&l[0]===q)h=l[1];else for(;(f=++p&&f&&f[g]||(h=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++h||(y&&((f[j]||(f[j]={}))[e]=[q,h]),f!==t)););return h-=o,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,n){var o,i=E.pseudos[e]||E.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[j]?i(n):i.length>1?(o=[e,e,"",n],E.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=ee(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=A(e.replace(ue,"$1"));return o[j]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Ee),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ee).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},E.pseudos.nth=E.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})E.pseudos[_]=u(_);return f.prototype=E.filters=E.pseudos,E.setFilters=new f,T=t.tokenize=function(e,n){var r,o,i,a,s,u,l,c=V[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=E.preFilter;s;){(!r||(o=le.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),u.push(i=[])),r=!1,(o=ce.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(ue," ")}),s=s.slice(r.length));for(a in E.filter)!(o=de[a].exec(s))||l[a]&&!(o=l[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,u).slice(0)},A=t.compile=function(e,t){var n,r=[],o=[],i=H[e+" "];if(!i){for(t||(t=T(e)),n=t.length;n--;)i=y(t[n]),i[j]?r.push(i):o.push(i);i=H(e,b(o,r)),i.selector=e}return i},P=t.select=function(e,t,n,r){var o,i,a,s,u,l="function"==typeof e&&e,f=!r&&T(e=l.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&w.getById&&9===t.nodeType&&I&&E.relative[i[1].type]){if(t=(E.find.ID(a.matches[0].replace(we,Ee),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=de.needsContext.test(e)?0:i.length;o--&&(a=i[o],!E.relative[s=a.type]);)if((u=E.find[s])&&(r=u(a.matches[0].replace(we,Ee),be.test(i[0].type)&&c(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&h(i),!e)return J.apply(n,r),n;break}}return(l||A(e,f))(r,t,!I,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=j.split("").sort(z).join("")===j,w.detectDuplicates=!!O,L(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2);
}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);X.find=oe,X.expr=oe.selectors,X.expr[":"]=X.expr.pseudos,X.unique=oe.uniqueSort,X.text=oe.getText,X.isXMLDoc=oe.isXML,X.contains=oe.contains;var ie=X.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;X.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?X.find.matchesSelector(r,e)?[r]:[]:X.find.matches(e,X.grep(t,function(e){return 1===e.nodeType}))},X.fn.extend({find:function(e){var t,n=this.length,r=[],o=this;if("string"!=typeof e)return this.pushStack(X(e).filter(function(){for(t=0;n>t;t++)if(X.contains(o[t],this))return!0}));for(t=0;n>t;t++)X.find(e,o[t],r);return r=this.pushStack(n>1?X.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ie.test(e)?X(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=X.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof X?t[0]:t,X.merge(this,X.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),ae.test(n[1])&&X.isPlainObject(t))for(n in t)X.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Z.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Z,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):X.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(X):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),X.makeArray(e,this))};ce.prototype=X.fn,ue=X(Z);var fe=/^(?:parents|prev(?:Until|All))/,he={children:!0,contents:!0,next:!0,prev:!0};X.extend({dir:function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&X(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),X.fn.extend({has:function(e){var t=X(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(X.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=ie.test(e)||"string"!=typeof e?X(e,t||this.context):0;o>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&X.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?X.unique(i):i)},index:function(e){return e?"string"==typeof e?z.call(X(e),this[0]):z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(X.unique(X.merge(this.get(),X(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),X.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return X.dir(e,"parentNode")},parentsUntil:function(e,t,n){return X.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return X.dir(e,"nextSibling")},prevAll:function(e){return X.dir(e,"previousSibling")},nextUntil:function(e,t,n){return X.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return X.dir(e,"previousSibling",n)},siblings:function(e){return X.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return X.sibling(e.firstChild)},contents:function(e){return e.contentDocument||X.merge([],e.childNodes)}},function(e,t){X.fn[e]=function(n,r){var o=X.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=X.filter(r,o)),this.length>1&&(he[e]||X.unique(o),fe.test(e)&&o.reverse()),this.pushStack(o)}});var pe=/\S+/g,de={};X.Callbacks=function(e){e="string"==typeof e?de[e]||i(e):X.extend({},e);var t,n,r,o,a,s,u=[],l=!e.once&&[],c=function(i){for(t=e.memory&&i,n=!0,s=o||0,o=0,a=u.length,r=!0;u&&a>s;s++)if(u[s].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function i(t){X.each(t,function(t,n){var r=X.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),r?a=u.length:t&&(o=n,c(t))}return this},remove:function(){return u&&X.each(arguments,function(e,t){for(var n;(n=X.inArray(t,u,n))>-1;)u.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?X.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},X.extend({Deferred:function(e){var t=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return X.Deferred(function(n){X.each(t,function(t,i){var a=X.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&X.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?X.extend(e,r):r}},o={};return r.pipe=r.then,X.each(t,function(e,i){var a=i[2],s=i[3];r[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=W.call(arguments),a=i.length,s=1!==a||e&&X.isFunction(e.promise)?a:0,u=1===s?e:X.Deferred(),l=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?W.call(arguments):o,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>o;o++)i[o]&&X.isFunction(i[o].promise)?i[o].promise().done(l(o,r,i)).fail(u.reject).progress(l(o,n,t)):--s;return s||u.resolveWith(r,i),u.promise()}});var ge;X.fn.ready=function(e){return X.ready.promise().done(e),this},X.extend({isReady:!1,readyWait:1,holdReady:function(e){e?X.readyWait++:X.ready(!0)},ready:function(e){(e===!0?--X.readyWait:X.isReady)||(X.isReady=!0,e!==!0&&--X.readyWait>0||(ge.resolveWith(Z,[X]),X.fn.triggerHandler&&(X(Z).triggerHandler("ready"),X(Z).off("ready"))))}}),X.ready.promise=function(t){return ge||(ge=X.Deferred(),"complete"===Z.readyState?setTimeout(X.ready):(Z.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),ge.promise(t)},X.ready.promise();var ve=X.access=function(e,t,n,r,o,i,a){var s=0,u=e.length,l=null==n;if("object"===X.type(n)){o=!0;for(s in n)X.access(e,t,s,n[s],!0,i,a)}else if(void 0!==r&&(o=!0,X.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(X(e),n)})),t))for(;u>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):u?t(e[0],n):i};X.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=X.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,X.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,o=this.key(e),i=this.cache[o];if("string"==typeof t)i[t]=n;else if(X.isEmptyObject(i))X.extend(this.cache[o],t);else for(r in t)i[r]=t[r];return i},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,X.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,o,i=this.key(e),a=this.cache[i];if(void 0===t)this.cache[i]={};else{X.isArray(t)?r=t.concat(t.map(X.camelCase)):(o=X.camelCase(t),t in a?r=[t,o]:(r=o,r=r in a?[r]:r.match(pe)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!X.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var me=new s,ye=new s,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_e=/([A-Z])/g;X.extend({hasData:function(e){return ye.hasData(e)||me.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return me.access(e,t,n)},_removeData:function(e,t){me.remove(e,t)}}),X.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ye.get(i),1===i.nodeType&&!me.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=X.camelCase(r.slice(5)),u(i,r,o[r])));me.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ve(this,function(t){var n,r=X.camelCase(e);if(i&&void 0===t){if(n=ye.get(i,e),void 0!==n)return n;if(n=ye.get(i,r),void 0!==n)return n;if(n=u(i,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),X.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=me.get(e,t),n&&(!r||X.isArray(n)?r=me.access(e,t,X.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=X.queue(e,t),r=n.length,o=n.shift(),i=X._queueHooks(e,t),a=function(){X.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return me.get(e,n)||me.access(e,n,{empty:X.Callbacks("once memory").add(function(){me.remove(e,[t+"queue",n])})})}}),X.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?X.queue(this[0],e):void 0===t?this:this.each(function(){var n=X.queue(this,e,t);X._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&X.dequeue(this,e)})},dequeue:function(e){return this.each(function(){X.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=X.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=me.get(i[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===X.css(e,"display")||!X.contains(e.ownerDocument,e)},Se=/^(?:checkbox|radio)$/i;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),K.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";K.focusinBubbles="onfocusin"in e;var Ae=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,xe=/^(?:focusinfocus|focusoutblur)$/,$e=/^([^.]*)(?:\.(.+)|)$/;X.event={global:{},add:function(e,t,n,r,o){var i,a,s,u,l,c,f,h,p,d,g,v=me.get(e);if(v)for(n.handler&&(i=n,n=i.handler,o=i.selector),n.guid||(n.guid=X.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof X!==Te&&X.event.triggered!==t.type?X.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],l=t.length;l--;)s=$e.exec(t[l])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p&&(f=X.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=X.event.special[p]||{},c=X.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&X.expr.match.needsContext.test(o),namespace:d.join(".")},i),(h=u[p])||(h=u[p]=[],h.delegateCount=0,f.setup&&f.setup.call(e,r,d,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),X.event.global[p]=!0)},remove:function(e,t,n,r,o){var i,a,s,u,l,c,f,h,p,d,g,v=me.hasData(e)&&me.get(e);if(v&&(u=v.events)){for(t=(t||"").match(pe)||[""],l=t.length;l--;)if(s=$e.exec(t[l])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p){for(f=X.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,h=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=h.length;i--;)c=h[i],!o&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(i,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(e,c));a&&!h.length&&(f.teardown&&f.teardown.call(e,d,v.handle)!==!1||X.removeEvent(e,p,v.handle),delete u[p])}else for(p in u)X.event.remove(e,p+t[l],n,r,!0);X.isEmptyObject(u)&&(delete v.handle,me.remove(e,"events"))}},trigger:function(t,n,r,o){var i,a,s,u,l,c,f,h=[r||Z],p=Q.call(t,"type")?t.type:t,d=Q.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||Z,3!==r.nodeType&&8!==r.nodeType&&!xe.test(p+X.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[X.expando]?t:new X.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:X.makeArray(n,[t]),f=X.event.special[p]||{},o||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!o&&!f.noBubble&&!X.isWindow(r)){for(u=f.delegateType||p,xe.test(u+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||Z)&&h.push(s.defaultView||s.parentWindow||e)}for(i=0;(a=h[i++])&&!t.isPropagationStopped();)t.type=i>1?u:f.bindType||p,c=(me.get(a,"events")||{})[t.type]&&me.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&X.acceptData(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!X.acceptData(r)||l&&X.isFunction(r[p])&&!X.isWindow(r)&&(s=r[l],s&&(r[l]=null),X.event.triggered=p,r[p](),X.event.triggered=void 0,s&&(r[l]=s)),t.result}},dispatch:function(e){e=X.event.fix(e);var t,n,r,o,i,a=[],s=W.call(arguments),u=(me.get(this,"events")||{})[e.type]||[],l=X.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=X.event.handlers.call(this,e,u),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((X.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;s>n;n++)i=t[n],o=i.selector+" ",void 0===r[o]&&(r[o]=i.needsContext?X(o,this).index(u)>=0:X.find(o,this,null,[u]).length),r[o]&&r.push(i);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Z,r=n.documentElement,o=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[X.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Pe.test(o)?this.mouseHooks:Ae.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new X.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=Z),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&X.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return X.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=X.extend(new X.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?X.event.trigger(o,null,t):X.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},X.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},X.Event=function(e,t){return this instanceof X.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&X.extend(this,t),this.timeStamp=e&&e.timeStamp||X.now(),void(this[X.expando]=!0)):new X.Event(e,t)},X.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},X.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){X.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return(!o||o!==r&&!X.contains(r,o))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),K.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){X.event.simulate(t,e.target,X.event.fix(e),!0)};X.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=me.access(r,t);o||r.addEventListener(e,n,!0),me.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=me.access(r,t)-1;o?me.access(r,t,o):(r.removeEventListener(e,n,!0),me.remove(r,t))}}}),X.fn.extend({on:function(e,t,n,r,o){var i,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],o);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===o&&(i=r,r=function(e){return X().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=X.guid++)),this.each(function(){X.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,X(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){X.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){X.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?X.event.trigger(e,t,n,!0):void 0}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,Ne=/<|&#?\w+;/,De=/<(?:script|style|link)/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^$|\/(?:java|ecma)script/i,Re=/^true\/(.*)/,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,X.extend({clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),u=X.contains(e.ownerDocument,e);if(!(K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||X.isXMLDoc(e)))for(a=m(s),i=m(e),r=0,o=i.length;o>r;r++)y(i[r],a[r]);if(t)if(n)for(i=i||m(e),a=a||m(s),r=0,o=i.length;o>r;r++)v(i[r],a[r]);else v(e,s);return a=m(s,"script"),a.length>0&&g(a,!u&&m(e,"script")),s},buildFragment:function(e,t,n,r){for(var o,i,a,s,u,l,c=t.createDocumentFragment(),f=[],h=0,p=e.length;p>h;h++)if(o=e[h],o||0===o)if("object"===X.type(o))X.merge(f,o.nodeType?[o]:o);else if(Ne.test(o)){for(i=i||c.appendChild(t.createElement("div")),a=(Le.exec(o)||["",""])[1].toLowerCase(),s=Fe[a]||Fe._default,i.innerHTML=s[1]+o.replace(Oe,"<$1></$2>")+s[2],l=s[0];l--;)i=i.lastChild;X.merge(f,i.childNodes),i=c.firstChild,i.textContent=""}else f.push(t.createTextNode(o));for(c.textContent="",h=0;o=f[h++];)if((!r||-1===X.inArray(o,r))&&(u=X.contains(o.ownerDocument,o),i=m(c.appendChild(o),"script"),u&&g(i),n))for(l=0;o=i[l++];)Me.test(o.type||"")&&n.push(o);return c},cleanData:function(e){for(var t,n,r,o,i=X.event.special,a=0;void 0!==(n=e[a]);a++){if(X.acceptData(n)&&(o=n[me.expando],o&&(t=me.cache[o]))){if(t.events)for(r in t.events)i[r]?X.event.remove(n,r):X.removeEvent(n,r,t.handle);me.cache[o]&&delete me.cache[o]}delete ye.cache[n[ye.expando]]}}}),X.fn.extend({text:function(e){return ve(this,function(e){return void 0===e?X.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?X.filter(e,this):this,o=0;null!=(n=r[o]);o++)t||1!==n.nodeType||X.cleanData(m(n)),n.parentNode&&(t&&X.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(X.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return X.clone(this,e,t)})},html:function(e){return ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!Fe[(Le.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Oe,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(X.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,X.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=V.apply([],e);var n,r,o,i,a,s,u=0,l=this.length,c=this,f=l-1,h=e[0],g=X.isFunction(h);if(g||l>1&&"string"==typeof h&&!K.checkClone&&Ie.test(h))return this.each(function(n){var r=c.eq(n);g&&(e[0]=h.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=X.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(o=X.map(m(n,"script"),p),i=o.length;l>u;u++)a=n,u!==f&&(a=X.clone(a,!0,!0),i&&X.merge(o,m(a,"script"))),t.call(this[u],a,u);if(i)for(s=o[o.length-1].ownerDocument,X.map(o,d),u=0;i>u;u++)a=o[u],Me.test(a.type||"")&&!me.access(a,"globalEval")&&X.contains(s,a)&&(a.src?X._evalUrl&&X._evalUrl(a.src):X.globalEval(a.textContent.replace(ke,"")))}return this}}),X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){X.fn[e]=function(e){for(var n,r=[],o=X(e),i=o.length-1,a=0;i>=a;a++)n=a===i?this:this.clone(!0),X(o[a])[t](n),H.apply(r,n.get());return this.pushStack(r)}});var je,Ue={},qe=/^margin/,Be=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),We=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",o.appendChild(i);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,o.removeChild(i)}var n,r,o=Z.documentElement,i=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===a.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(a),e.getComputedStyle&&X.extend(K,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(Z.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",o.appendChild(i),t=!parseFloat(e.getComputedStyle(n,null).marginRight),o.removeChild(i),a.removeChild(n),t}}))}(),X.swap=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=n.apply(e,r||[]);for(i in t)e.style[i]=a[i];return o};var Ve=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+we+")(.*)$","i"),ze=new RegExp("^([+-])=("+we+")","i"),Ge={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Qe=["Webkit","O","Moz","ms"];X.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=X.camelCase(t),u=e.style;return t=X.cssProps[s]||(X.cssProps[s]=C(u,s)),a=X.cssHooks[t]||X.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:u[t]:(i=typeof n,"string"===i&&(o=ze.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(X.css(e,t)),i="number"),null!=n&&n===n&&("number"!==i||X.cssNumber[s]||(n+="px"),K.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var o,i,a,s=X.camelCase(t);return t=X.cssProps[s]||(X.cssProps[s]=C(e.style,s)),a=X.cssHooks[t]||X.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=w(e,t,r)),"normal"===o&&t in Ye&&(o=Ye[t]),""===n||n?(i=parseFloat(o),n===!0||X.isNumeric(i)?i||0:o):o}}),X.each(["height","width"],function(e,t){X.cssHooks[t]={get:function(e,n,r){return n?Ve.test(X.css(e,"display"))&&0===e.offsetWidth?X.swap(e,Ge,function(){return A(e,t,r)}):A(e,t,r):void 0},set:function(e,n,r){var o=r&&We(e);return S(e,n,r?T(e,t,r,"border-box"===X.css(e,"boxSizing",!1,o),o):0)}}}),X.cssHooks.marginRight=E(K.reliableMarginRight,function(e,t){return t?X.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),X.each({margin:"",padding:"",border:"Width"},function(e,t){X.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];4>r;r++)o[e+Ee[r]+t]=i[r]||i[r-2]||i[0];return o}},qe.test(e)||(X.cssHooks[e+t].set=S)}),X.fn.extend({css:function(e,t){return ve(this,function(e,t,n){var r,o,i={},a=0;if(X.isArray(t)){for(r=We(e),o=t.length;o>a;a++)i[t[a]]=X.css(e,t[a],!1,r);return i}return void 0!==n?X.style(e,t,n):X.css(e,t)},e,t,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?X(this).show():X(this).hide()})}}),X.Tween=x,x.prototype={constructor:x,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(X.cssNumber[n]?"":"px")},cur:function(){var e=x.propHooks[this.prop];return e&&e.get?e.get(this):x.propHooks._default.get(this)},run:function(e){var t,n=x.propHooks[this.prop];return this.options.duration?this.pos=t=X.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):x.propHooks._default.set(this),this}},x.prototype.init.prototype=x.prototype,x.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=X.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){X.fx.step[e.prop]?X.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[X.cssProps[e.prop]]||X.cssHooks[e.prop])?X.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},x.propHooks.scrollTop=x.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},X.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},X.fx=x.prototype.init,X.fx.step={};var Ke,Ze,Je=/^(?:toggle|show|hide)$/,Xe=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[N],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),o=Xe.exec(t),i=o&&o[3]||(X.cssNumber[e]?"":"px"),a=(X.cssNumber[e]||"px"!==i&&+r)&&Xe.exec(X.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==i){i=i||a[3],o=o||[],a=+r||1;do s=s||".5",a/=s,X.style(n.elem,e,a+i);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return o&&(a=n.start=+a||+r||0,n.unit=i,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};X.Animation=X.extend(I,{tweener:function(e,t){X.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,o=e.length;o>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),X.speed=function(e,t,n){var r=e&&"object"==typeof e?X.extend({},e):{complete:n||!n&&t||X.isFunction(e)&&e,duration:e,easing:n&&t||t&&!X.isFunction(t)&&t};return r.duration=X.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in X.fx.speeds?X.fx.speeds[r.duration]:X.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){X.isFunction(r.old)&&r.old.call(this),r.queue&&X.dequeue(this,r.queue)},r},X.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ce).css("opacity",0).show().end().animate({
opacity:t},e,n,r)},animate:function(e,t,n,r){var o=X.isEmptyObject(e),i=X.speed(t,n,r),a=function(){var t=I(this,X.extend({},e),i);(o||me.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||i.queue===!1?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=X.timers,a=me.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&et.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));(t||!n)&&X.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=me.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=X.timers,a=r?r.length:0;for(n.finish=!0,X.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),X.each(["toggle","show","hide"],function(e,t){var n=X.fn[t];X.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,r,o)}}),X.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){X.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),X.timers=[],X.fx.tick=function(){var e,t=0,n=X.timers;for(Ke=X.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||X.fx.stop(),Ke=void 0},X.fx.timer=function(e){X.timers.push(e),e()?X.fx.start():X.timers.pop()},X.fx.interval=13,X.fx.start=function(){Ze||(Ze=setInterval(X.fx.tick,X.fx.interval))},X.fx.stop=function(){clearInterval(Ze),Ze=null},X.fx.speeds={slow:600,fast:200,_default:400},X.fn.delay=function(e,t){return e=X.fx?X.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),n=t.appendChild(Z.createElement("option"));e.type="checkbox",K.checkOn=""!==e.value,K.optSelected=n.selected,t.disabled=!0,K.optDisabled=!n.disabled,e=Z.createElement("input"),e.value="t",e.type="radio",K.radioValue="t"===e.value}();var rt,ot,it=X.expr.attrHandle;X.fn.extend({attr:function(e,t){return ve(this,X.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){X.removeAttr(this,e)})}}),X.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return typeof e.getAttribute===Te?X.prop(e,t,n):(1===i&&X.isXMLDoc(e)||(t=t.toLowerCase(),r=X.attrHooks[t]||(X.expr.match.bool.test(t)?ot:rt)),void 0===n?r&&"get"in r&&null!==(o=r.get(e,t))?o:(o=X.find.attr(e,t),null==o?void 0:o):null!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void X.removeAttr(e,t))},removeAttr:function(e,t){var n,r,o=0,i=t&&t.match(pe);if(i&&1===e.nodeType)for(;n=i[o++];)r=X.propFix[n]||n,X.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!K.radioValue&&"radio"===t&&X.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),ot={set:function(e,t,n){return t===!1?X.removeAttr(e,n):e.setAttribute(n,n),n}},X.each(X.expr.match.bool.source.match(/\w+/g),function(e,t){var n=it[t]||X.find.attr;it[t]=function(e,t,r){var o,i;return r||(i=it[t],it[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,it[t]=i),o}});var at=/^(?:input|select|textarea|button)$/i;X.fn.extend({prop:function(e,t){return ve(this,X.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[X.propFix[e]||e]})}}),X.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,o,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return i=1!==a||!X.isXMLDoc(e),i&&(t=X.propFix[t]||t,o=X.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),K.optSelected||(X.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),X.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){X.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;X.fn.extend({addClass:function(e){var t,n,r,o,i,a,s="string"==typeof e&&e,u=0,l=this.length;if(X.isFunction(e))return this.each(function(t){X(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(i=0;o=t[i++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=X.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,o,i,a,s=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(X.isFunction(e))return this.each(function(t){X(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(i=0;o=t[i++];)for(;r.indexOf(" "+o+" ")>=0;)r=r.replace(" "+o+" "," ");a=e?X.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):X.isFunction(e)?this.each(function(n){X(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=X(this),i=e.match(pe)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===Te||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||e===!1?"":me.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;X.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=X.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,X(this).val()):e,null==o?o="":"number"==typeof o?o+="":X.isArray(o)&&(o=X.map(o,function(e){return null==e?"":e+""})),t=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=X.valHooks[o.type]||X.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),X.extend({valHooks:{option:{get:function(e){var t=X.find.attr(e,"value");return null!=t?t:X.trim(X.text(e))}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type||0>o,a=i?null:[],s=i?o+1:r.length,u=0>o?s:i?o:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==o||(K.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&X.nodeName(n.parentNode,"optgroup"))){if(t=X(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=X.makeArray(t),a=o.length;a--;)r=o[a],(r.selected=X.inArray(r.value,i)>=0)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),X.each(["radio","checkbox"],function(){X.valHooks[this]={set:function(e,t){return X.isArray(t)?e.checked=X.inArray(X(e).val(),t)>=0:void 0}},K.checkOn||(X.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){X.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),X.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=X.now(),ct=/\?/;X.parseJSON=function(e){return JSON.parse(e+"")},X.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&X.error("Invalid XML: "+e),t};var ft=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,dt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,vt=/^\/\//,mt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},_t="*/".concat("*"),wt=e.location.href,Et=mt.exec(wt.toLowerCase())||[];X.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:dt.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":X.parseJSON,"text xml":X.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?k(k(e,X.ajaxSettings),t):k(X.ajaxSettings,e)},ajaxPrefilter:M(yt),ajaxTransport:M(bt),ajax:function(e,t){function n(e,t,n,a){var u,c,m,y,_,E=t;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,i=a||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=F(f,w,n)),y=j(f,y,w,u),u?(f.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(X.lastModified[o]=_),_=w.getResponseHeader("etag"),_&&(X.etag[o]=_)),204===e||"HEAD"===f.type?E="nocontent":304===e?E="notmodified":(E=y.state,c=y.data,m=y.error,u=!m)):(m=E,(e||!E)&&(E="error",0>e&&(e=0))),w.status=e,w.statusText=(t||E)+"",u?d.resolveWith(h,[c,E,w]):d.rejectWith(h,[w,E,m]),w.statusCode(v),v=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:m]),g.fireWith(h,[w,E]),l&&(p.trigger("ajaxComplete",[w,f]),--X.active||X.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,i,a,s,u,l,c,f=X.ajaxSetup({},t),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?X(h):X.event,d=X.Deferred(),g=X.Callbacks("once memory"),v=f.statusCode||{},m={},y={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=pt.exec(i);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return b||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),n(0,t),this}};if(d.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(vt,Et[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=X.trim(f.dataType||"*").toLowerCase().match(pe)||[""],null==f.crossDomain&&(u=mt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===Et[1]&&u[2]===Et[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Et[3]||("http:"===Et[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=X.param(f.data,f.traditional)),R(yt,f,t,w),2===b)return w;l=X.event&&f.global,l&&0===X.active++&&X.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(ct.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ht.test(o)?o.replace(ht,"$1_="+lt++):o+(ct.test(o)?"&":"?")+"_="+lt++)),f.ifModified&&(X.lastModified[o]&&w.setRequestHeader("If-Modified-Since",X.lastModified[o]),X.etag[o]&&w.setRequestHeader("If-None-Match",X.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+_t+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(h,w,f)===!1||2===b))return w.abort();_="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=R(bt,f,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{b=1,r.send(m,n)}catch(E){if(!(2>b))throw E;n(-1,E)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return X.get(e,t,n,"json")},getScript:function(e,t){return X.get(e,void 0,t,"script")}}),X.each(["get","post"],function(e,t){X[t]=function(e,n,r,o){return X.isFunction(n)&&(o=o||r,r=n,n=void 0),X.ajax({url:e,type:t,dataType:o,data:n,success:r})}}),X._evalUrl=function(e){return X.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},X.fn.extend({wrapAll:function(e){var t;return X.isFunction(e)?this.each(function(t){X(this).wrapAll(e.call(this,t))}):(this[0]&&(t=X(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return X.isFunction(e)?this.each(function(t){X(this).wrapInner(e.call(this,t))}):this.each(function(){var t=X(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=X.isFunction(e);return this.each(function(n){X(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){X.nodeName(this,"body")||X(this).replaceWith(this.childNodes)}).end()}}),X.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},X.expr.filters.visible=function(e){return!X.expr.filters.hidden(e)};var Ct=/%20/g,St=/\[\]$/,Tt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;X.param=function(e,t){var n,r=[],o=function(e,t){t=X.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(e)||e.jquery&&!X.isPlainObject(e))X.each(e,function(){o(this.name,this.value)});else for(n in e)U(n,e[n],t,o);return r.join("&").replace(Ct,"+")},X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=X.prop(this,"elements");return e?X.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!X(this).is(":disabled")&&Pt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}}),X.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xt=0,$t={},Ot={0:200,1223:204},Lt=X.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in $t)$t[e]()}),K.cors=!!Lt&&"withCredentials"in Lt,K.ajax=Lt=!!Lt,X.ajaxTransport(function(e){var t;return K.cors||Lt&&!e.crossDomain?{send:function(n,r){var o,i=e.xhr(),a=++xt;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)i[o]=e.xhrFields[o];e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)i.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(delete $t[a],t=i.onload=i.onerror=null,"abort"===e?i.abort():"error"===e?r(i.status,i.statusText):r(Ot[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=t(),i.onerror=t("error"),t=$t[a]=t("abort");try{i.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),X.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return X.globalEval(e),e}}}),X.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),X.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,o){t=X("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Nt=[],Dt=/(=)\?(?=&|$)|\?\?/;X.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||X.expando+"_"+lt++;return this[e]=!0,e}}),X.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,a,s=t.jsonp!==!1&&(Dt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=X.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Dt,"$1"+o):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||X.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always(function(){e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Nt.push(o)),a&&X.isFunction(i)&&i(a[0]),a=i=void 0}),"script"):void 0}),X.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Z;var r=ae.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=X.buildFragment([e],t,o),o&&o.length&&X(o).remove(),X.merge([],r.childNodes))};var It=X.fn.load;X.fn.load=function(e,t,n){if("string"!=typeof e&&It)return It.apply(this,arguments);var r,o,i,a=this,s=e.indexOf(" ");return s>=0&&(r=X.trim(e.slice(s)),e=e.slice(0,s)),X.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&X.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?X("<div>").append(X.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},X.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){X.fn[t]=function(e){return this.on(t,e)}}),X.expr.filters.animated=function(e){return X.grep(X.timers,function(t){return e===t.elem}).length};var Mt=e.document.documentElement;X.offset={setOffset:function(e,t,n){var r,o,i,a,s,u,l,c=X.css(e,"position"),f=X(e),h={};"static"===c&&(e.style.position="relative"),s=f.offset(),i=X.css(e,"top"),u=X.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(i+u).indexOf("auto")>-1,l?(r=f.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(u)||0),X.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):f.css(h)}},X.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){X.offset.setOffset(this,e,t)});var t,n,r=this[0],o={top:0,left:0},i=r&&r.ownerDocument;if(i)return t=i.documentElement,X.contains(t,r)?(typeof r.getBoundingClientRect!==Te&&(o=r.getBoundingClientRect()),n=q(i),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===X.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),X.nodeName(e[0],"html")||(r=e.offset()),r.top+=X.css(e[0],"borderTopWidth",!0),r.left+=X.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-X.css(n,"marginTop",!0),left:t.left-r.left-X.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Mt;e&&!X.nodeName(e,"html")&&"static"===X.css(e,"position");)e=e.offsetParent;return e||Mt})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;X.fn[t]=function(o){return ve(this,function(t,o,i){var a=q(t);return void 0===i?a?a[n]:t[o]:void(a?a.scrollTo(r?e.pageXOffset:i,r?i:e.pageYOffset):t[o]=i)},t,o,arguments.length,null)}}),X.each(["top","left"],function(e,t){X.cssHooks[t]=E(K.pixelPosition,function(e,n){return n?(n=w(e,t),Be.test(n)?X(e).position()[t]+"px":n):void 0})}),X.each({Height:"height",Width:"width"},function(e,t){X.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){X.fn[r]=function(r,o){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||o===!0?"margin":"border");return ve(this,function(t,n,r){var o;return X.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?X.css(t,n,a):X.style(t,n,r,a)},t,i?r:void 0,i,null)}})}),X.fn.size=function(){return this.length},X.fn.andSelf=X.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return X});var Rt=e.jQuery,kt=e.$;return X.noConflict=function(t){return e.$===X&&(e.$=kt),t&&e.jQuery===X&&(e.jQuery=Rt),X},typeof t===Te&&(e.jQuery=e.$=X),X}),function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,o=2,i=arguments,a=i[0],s="["+(e?e+":":"")+a+"] ",u=i[1];for(s+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+o;return n<i.length?ye(i[n]):e}),s+="\nhttp://errors.angularjs.org/1.4.0/"+(e?e+"/":"")+a,r=o,n="?";r<i.length;r++,n="&")s+=n+"p"+(r-o)+"="+encodeURIComponent(ye(i[r]));return new t(s)}}function o(e){if(null==e||P(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===Gr&&t?!0:E(e)||Fr(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){var r,a;if(e)if(T(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(Fr(e)||o(e)){var s="object"!=typeof e;for(r=0,a=e.length;a>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==i)e.forEach(t,n,e);else if(w(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)wr.call(e,r)&&t.call(n,e[r],r,e);return e}function a(e,t,n){for(var r=Object.keys(e).sort(),o=0;o<r.length;o++)t.call(n,e[r[o]],r[o]);return r}function s(e){return function(t,n){e(n,t)}}function u(){return++Rr}function l(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var r=e.$$hashKey,o=0,i=t.length;i>o;++o){var a=t[o];if(_(a)||T(a))for(var s=Object.keys(a),u=0,f=s.length;f>u;u++){var h=s[u],p=a[h];n&&_(p)?(_(e[h])||(e[h]=Fr(p)?[]:{}),c(e[h],[p],!0)):e[h]=p}}return l(e,r),e}function f(e){return c(e,$r.call(arguments,1),!1)}function h(e){return c(e,$r.call(arguments,1),!0)}function p(e){return parseInt(e,10)}function d(e,t){return f(Object.create(e),t)}function g(){}function v(e){return e}function m(e){return function(){return e}}function y(e){return"undefined"==typeof e}function b(e){return"undefined"!=typeof e}function _(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!Dr(e)}function E(e){return"string"==typeof e}function C(e){return"number"==typeof e}function S(e){return"[object Date]"===Nr.call(e)}function T(e){return"function"==typeof e}function A(e){return"[object RegExp]"===Nr.call(e)}function P(e){return e&&e.window===e}function x(e){return e&&e.$evalAsync&&e.$watch}function $(e){return"[object File]"===Nr.call(e)}function O(e){return"[object FormData]"===Nr.call(e)}function L(e){return"[object Blob]"===Nr.call(e)}function N(e){return"boolean"==typeof e}function D(e){return e&&T(e.then)}function I(e){return jr.test(Nr.call(e))}function M(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function R(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function k(e){return _r(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function j(e,t,n,r){function o(e,t,n,r,o){var i=j(t,null,r,o);_(t)&&(r.push(t),o.push(i)),n[e]=i}if(P(e)||x(e))throw Ir("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(I(t))throw Ir("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t){if(e===t)throw Ir("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],_(e)){var a=n.indexOf(e);if(-1!==a)return r[a];n.push(e),r.push(t)}var s,u;if(Fr(e)){t.length=0;for(var c=0;c<e.length;c++)s=j(e[c],null,n,r),_(e[c])&&(n.push(e[c]),r.push(s)),t.push(s)}else{var f=t.$$hashKey;if(Fr(t)?t.length=0:i(t,function(e,n){delete t[n]}),w(e))for(u in e)o(u,e[u],t,n,r);else if(e&&"function"==typeof e.hasOwnProperty)for(u in e)e.hasOwnProperty(u)&&o(u,e[u],t,n,r);else for(u in e)wr.call(e,u)&&o(u,e[u],t,n,r);l(t,f)}}else if(t=e,e)if(Fr(e))t=j(e,[],n,r);else if(I(e))t=new e.constructor(e);else if(S(e))t=new Date(e.getTime());else if(A(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(_(e)){var h=Object.create(Dr(e));t=j(e,h,n,r)}return t}function U(e,t){if(Fr(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(_(e)){t=t||{};for(var o in e)("$"!==o.charAt(0)||"$"!==o.charAt(1))&&(t[o]=e[o])}return t||e}function q(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,o,i,a=typeof e,s=typeof t;if(a==s&&"object"==a){if(!Fr(e)){if(S(e))return S(t)?q(e.getTime(),t.getTime()):!1;if(A(e))return A(t)?e.toString()==t.toString():!1;if(x(e)||x(t)||P(e)||P(t)||Fr(t)||S(t)||A(t))return!1;i=ge();for(o in e)if("$"!==o.charAt(0)&&!T(e[o])){if(!q(e[o],t[o]))return!1;i[o]=!0}for(o in t)if(!(o in i||"$"===o.charAt(0)||t[o]===n||T(t[o])))return!1;return!0}if(!Fr(t))return!1;if((r=e.length)==t.length){for(o=0;r>o;o++)if(!q(e[o],t[o]))return!1;return!0}}return!1}function B(e,t,n){return e.concat($r.call(t,n))}function W(e,t){return $r.call(e,t||0)}function V(e,t){var n=arguments.length>2?W(arguments,2):[];return!T(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,B(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function H(e,r){var o=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?o=n:P(r)?o="$WINDOW":r&&t===r?o="$DOCUMENT":x(r)&&(o="$SCOPE"),o}function z(e,t){return"undefined"==typeof e?n:(C(t)||(t=t?2:null),JSON.stringify(e,H,t))}function G(e){return E(e)?JSON.parse(e):e}function Y(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Q(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function K(e,t,n){n=n?-1:1;var r=Y(t,e.getTimezoneOffset());return Q(e,n*(r-e.getTimezoneOffset()))}function Z(e){e=Ar(e).clone();try{e.empty()}catch(t){}var n=Ar("<div>").append(e).html();try{return e[0].nodeType===Qr?_r(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+_r(t)})}catch(t){return _r(n)}}function J(e){try{return decodeURIComponent(e)}catch(t){}}function X(e){var t,n,r={};return i((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=J(t[0]),b(n))){var o=b(t[1])?J(t[1]):!0;wr.call(r,n)?Fr(r[n])?r[n].push(o):r[n]=[r[n],o]:r[n]=o}}),r}function ee(e){var t=[];return i(e,function(e,n){Fr(e)?i(e,function(e){t.push(ne(n,!0)+(e===!0?"":"="+ne(e,!0)))}):t.push(ne(n,!0)+(e===!0?"":"="+ne(e,!0)))}),t.length?t.join("&"):""}function te(e){return ne(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ne(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function re(e,t){var n,r,o=Vr.length;for(r=0;o>r;++r)if(n=Vr[r]+t,E(n=e.getAttribute(n)))return n;return null}function oe(e,t){var n,r,o={};i(Vr,function(t){var o=t+"app";!n&&e.hasAttribute&&e.hasAttribute(o)&&(n=e,r=e.getAttribute(o))}),i(Vr,function(t){var o,i=t+"app";!n&&(o=e.querySelector("["+i.replace(":","\\:")+"]"))&&(n=o,r=o.getAttribute(i))}),n&&(o.strictDi=null!==re(n,"strict-di"),t(n,r?[r]:[],o))}function ie(n,r,o){_(o)||(o={});var a={strictDi:!1};o=f(a,o);var s=function(){if(n=Ar(n),n.injector()){var e=n[0]===t?"document":Z(n);throw Ir("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),o.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var i=Ke(r,o.strictDi);return i.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),i},u=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&u.test(e.name)&&(o.debugInfoEnabled=!0,e.name=e.name.replace(u,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),Mr.resumeBootstrap=function(e){return i(e,function(e){r.push(e)}),s()},void(T(Mr.resumeDeferredBootstrap)&&Mr.resumeDeferredBootstrap()))}function ae(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function se(e){var t=Mr.element(e).injector();if(!t)throw Ir("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ue(e,t){return t=t||"_",e.replace(Hr,function(e,n){return(n?t:"")+e.toLowerCase()})}function le(){var t;if(!zr){var r=Wr();Pr=e.jQuery,b(r)&&(Pr=null===r?n:e[r]),Pr&&Pr.fn.on?(Ar=Pr,f(Pr.fn,{scope:po.scope,isolateScope:po.isolateScope,controller:po.controller,injector:po.injector,inheritedData:po.inheritedData}),t=Pr.cleanData,Pr.cleanData=function(e){var n;if(kr)kr=!1;else for(var r,o=0;null!=(r=e[o]);o++)n=Pr._data(r,"events"),n&&n.$destroy&&Pr(r).triggerHandler("$destroy");t(e)}):Ar=Ae,Mr.element=Ar,zr=!0}}function ce(e,t,n){if(!e)throw Ir("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function fe(e,t,n){return n&&Fr(e)&&(e=e[e.length-1]),ce(T(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function he(e,t){if("hasOwnProperty"===e)throw Ir("badname","hasOwnProperty is not a valid {0} name",t)}function pe(e,t,n){if(!t)return e;for(var r,o=t.split("."),i=e,a=o.length,s=0;a>s;s++)r=o[s],e&&(e=(i=e)[r]);return!n&&T(e)?V(i,e):e}function de(e){var t=e[0],n=e[e.length-1],r=[t];do{if(t=t.nextSibling,!t)break;r.push(t)}while(t!==n);return Ar(r)}function ge(){return Object.create(null)}function ve(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),o=r("ng"),i=t(e,"angular",Object);return i.$$minErr=i.$$minErr||r,t(i,"module",function(){var e={};return function(r,i,a){var s=function(e,t){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),i&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r,o){return o||(o=t),function(){return o[r||"push"]([e,n,arguments]),l}}if(!i)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],o=[],s=[],u=e("$injector","invoke","push",o),l={_invokeQueue:t,_configBlocks:o,_runBlocks:s,requires:i,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:e("$provide","decorator"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:u,run:function(e){return s.push(e),this}};return a&&u(a),l})}})}function me(e){var t=[];return JSON.stringify(e,function(e,n){if(n=H(e,n),_(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function ye(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?me(e):e}function be(t){f(t,{bootstrap:ie,copy:j,extend:f,merge:h,equals:q,element:Ar,forEach:i,injector:Ke,noop:g,bind:V,toJson:z,fromJson:G,identity:v,isUndefined:y,isDefined:b,isString:E,
isFunction:T,isObject:_,isNumber:C,isElement:M,isArray:Fr,version:Xr,isDate:S,lowercase:_r,uppercase:Er,callbacks:{counter:0},getTestability:se,$$minErr:r,$$csp:Br,reloadWithDebugInfo:ae}),xr=ve(e);try{xr("ngLocale")}catch(n){xr("ngLocale",[]).provider("$locale",Ot)}xr("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:vn}),e.provider("$compile",st).directive({a:ci,input:Pi,textarea:Pi,form:gi,script:ba,select:Ea,style:Sa,option:Ca,ngBind:Oi,ngBindHtml:Ni,ngBindTemplate:Li,ngClass:Ii,ngClassEven:Ri,ngClassOdd:Mi,ngCloak:ki,ngController:Fi,ngForm:vi,ngHide:pa,ngIf:qi,ngInclude:Bi,ngInit:Vi,ngNonBindable:oa,ngPluralize:ua,ngRepeat:la,ngShow:ha,ngStyle:da,ngSwitch:ga,ngSwitchWhen:va,ngSwitchDefault:ma,ngOptions:sa,ngTransclude:ya,ngModel:ta,ngList:Hi,ngChange:Di,pattern:Aa,ngPattern:Aa,required:Ta,ngRequired:Ta,minlength:xa,ngMinlength:xa,maxlength:Pa,ngMaxlength:Pa,ngValue:$i,ngModelOptions:ra}).directive({ngInclude:Wi}).directive(fi).directive(ji),e.provider({$anchorScroll:Ze,$animate:$o,$$animateQueue:xo,$$AnimateRunner:Po,$browser:ot,$cacheFactory:it,$controller:ht,$document:pt,$exceptionHandler:dt,$filter:On,$interpolate:xt,$interval:$t,$http:St,$httpParamSerializer:vt,$httpParamSerializerJQLike:mt,$httpBackend:At,$location:Vt,$log:Ht,$parse:cn,$rootScope:gn,$q:fn,$$q:hn,$sce:_n,$sceDelegate:bn,$sniffer:wn,$templateCache:at,$templateRequest:En,$$testability:Cn,$timeout:Sn,$window:Pn,$$rAF:dn,$$asyncCallback:nt,$$jqLite:He,$$HashMap:yo,$$cookieReader:$n})}])}function _e(){return++to}function we(e){return e.replace(oo,function(e,t,n,r){return r?n.toUpperCase():n}).replace(io,"Moz$1")}function Ee(e){return!lo.test(e)}function Ce(e){var t=e.nodeType;return t===Gr||!t||t===Zr}function Se(e,t){var n,r,o,a,s=t.createDocumentFragment(),u=[];if(Ee(e))u.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(co.exec(e)||["",""])[1].toLowerCase(),o=ho[r]||ho._default,n.innerHTML=o[1]+e.replace(fo,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;u=B(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",i(u,function(e){s.appendChild(e)}),s}function Te(e,n){n=n||t;var r;return(r=uo.exec(e))?[n.createElement(r[1])]:(r=Se(e,n))?r.childNodes:[]}function Ae(e){if(e instanceof Ae)return e;var t;if(E(e)&&(e=Ur(e),t=!0),!(this instanceof Ae)){if(t&&"<"!=e.charAt(0))throw so("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ae(e)}t?Re(this,Te(e)):Re(this,e)}function Pe(e){return e.cloneNode(!0)}function xe(e,t){if(t||Oe(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,o=n.length;o>r;r++)Oe(n[r])}function $e(e,t,n,r){if(b(r))throw so("offargs","jqLite#off() does not support the `selector` argument");var o=Le(e),a=o&&o.events,s=o&&o.handle;if(s)if(t)i(t.split(" "),function(t){if(b(n)){var r=a[t];if(F(r||[],n),r&&r.length>0)return}ro(e,t,s),delete a[t]});else for(t in a)"$destroy"!==t&&ro(e,t,s),delete a[t]}function Oe(e,t){var r=e.ng339,o=r&&eo[r];if(o){if(t)return void delete o.data[t];o.handle&&(o.events.$destroy&&o.handle({},"$destroy"),$e(e)),delete eo[r],e.ng339=n}}function Le(e,t){var r=e.ng339,o=r&&eo[r];return t&&!o&&(e.ng339=r=_e(),o=eo[r]={events:{},data:{},handle:n}),o}function Ne(e,t,n){if(Ce(e)){var r=b(n),o=!r&&t&&!_(t),i=!t,a=Le(e,!o),s=a&&a.data;if(r)s[t]=n;else{if(i)return s;if(o)return s&&s[t];f(s,t)}}}function De(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Ie(e,t){t&&e.setAttribute&&i(t.split(" "),function(t){e.setAttribute("class",Ur((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Ur(t)+" "," ")))})}function Me(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");i(t.split(" "),function(e){e=Ur(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Ur(n))}}function Re(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function ke(e,t){return Fe(e,"$"+(t||"ngController")+"Controller")}function Fe(e,t,r){e.nodeType==Zr&&(e=e.documentElement);for(var o=Fr(t)?t:[t];e;){for(var i=0,a=o.length;a>i;i++)if((r=Ar.data(e,o[i]))!==n)return r;e=e.parentNode||e.nodeType===Jr&&e.host}}function je(e){for(xe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ue(e,t){t||xe(e);var n=e.parentNode;n&&n.removeChild(e)}function qe(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Ar(n).on("load",t)}function Be(e,t){var n=go[t.toLowerCase()];return n&&vo[k(e)]&&n}function We(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&mo[t]}function Ve(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var o=t[r||n.type],i=o?o.length:0;if(i){if(y(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},i>1&&(o=U(o));for(var s=0;i>s;s++)n.isImmediatePropagationStopped()||o[s].call(e,n)}};return n.elem=e,n}function He(){this.$get=function(){return f(Ae,{hasClass:function(e,t){return e.attr&&(e=e[0]),De(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Me(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Ie(e,t)}})}}function ze(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||u)():r+":"+e}function Ge(e,t){if(t){var n=0;this.nextUid=function(){return++n}}i(e,this.put,this)}function Ye(e){var t=e.toString().replace(Eo,""),n=t.match(bo);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Qe(e,t,n){var r,o,a,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw E(n)&&n||(n=e.name||Ye(e)),Co("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=e.toString().replace(Eo,""),a=o.match(bo),i(a[1].split(_o),function(e){e.replace(wo,function(e,t,n){r.push(n)})})}e.$inject=r}}else Fr(e)?(s=e.length-1,fe(e[s],"fn"),r=e.slice(0,s)):fe(e,"fn",!0);return r}function Ke(e,t){function r(e){return function(t,n){return _(t)?void i(t,s(e)):e(t,n)}}function o(e,t){if(he(e,"service"),(T(t)||Fr(t))&&(t=A.instantiate(t)),!t.$get)throw Co("pget","Provider '{0}' must define $get factory method.",e);return S[e+b]=t}function a(e,t){return function(){var n=x.invoke(t,this);if(y(n))throw Co("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function u(e,t,n){return o(e,{$get:n!==!1?a(e,t):t})}function l(e,t){return u(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return u(e,m(t),!1)}function f(e,t){he(e,"constant"),S[e]=t,P[e]=t}function h(e,t){var n=A.get(e+b),r=n.$get;n.$get=function(){var e=x.invoke(r,n);return x.invoke(t,null,{$delegate:e})}}function p(e){var t,n=[];return i(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],o=A.get(r[0]);o[r[1]].apply(o,r[2])}}if(!C.get(e)){C.put(e,!0);try{E(e)?(t=xr(e),n=n.concat(p(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):T(e)?n.push(A.invoke(e)):Fr(e)?n.push(A.invoke(e)):fe(e,"module")}catch(o){throw Fr(e)&&(e=e[e.length-1]),o.message&&o.stack&&-1==o.stack.indexOf(o.message)&&(o=o.message+"\n"+o.stack),Co("modulerr","Failed to instantiate module {0} due to:\n{1}",e,o.stack||o.message||o)}}}),n}function d(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===v)throw Co("cdep","Circular dependency found: {0}",t+" <- "+w.join(" <- "));return e[t]}try{return w.unshift(t),e[t]=v,e[t]=n(t,r)}catch(o){throw e[t]===v&&delete e[t],o}finally{w.shift()}}function o(e,n,o,i){"string"==typeof o&&(i=o,o=null);var a,s,u,l=[],c=Ke.$$annotate(e,t,i);for(s=0,a=c.length;a>s;s++){if(u=c[s],"string"!=typeof u)throw Co("itkn","Incorrect injection token! Expected service name as string, got {0}",u);l.push(o&&o.hasOwnProperty(u)?o[u]:r(u,i))}return Fr(e)&&(e=e[a]),e.apply(n,l)}function i(e,t,n){var r=Object.create((Fr(e)?e[e.length-1]:e).prototype||null),i=o(e,r,t,n);return _(i)||T(i)?i:r}return{invoke:o,instantiate:i,get:r,annotate:Ke.$$annotate,has:function(t){return S.hasOwnProperty(t+b)||e.hasOwnProperty(t)}}}t=t===!0;var v={},b="Provider",w=[],C=new Ge([],!0),S={$provide:{provider:r(o),factory:r(u),service:r(l),value:r(c),constant:r(f),decorator:h}},A=S.$injector=d(S,function(e,t){throw Mr.isString(t)&&w.push(t),Co("unpr","Unknown provider: {0}",w.join(" <- "))}),P={},x=P.$injector=d(P,function(e,t){var r=A.get(e+b,t);return x.invoke(r.$get,r,n,e)});return i(p(e),function(e){x.invoke(e||g)}),x}function Ze(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function o(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===k(e)?(t=e,!0):void 0}),t}function i(){var e=s.yOffset;if(T(e))e=e();else if(M(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else C(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=i();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=E(e)?e:n.hash();var t;e?(t=u.getElementById(e))?a(t):(t=o(u.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var u=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&qe(function(){r.$evalAsync(s)})}),s}]}function Je(e,t){return e||t?e?t?(Fr(e)&&(e=e.join(" ")),Fr(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function Xe(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===To)return n}}function et(e){E(e)&&(e=e.split(" "));var t=ge();return i(e,function(e){e.length&&(t[e]=!0)}),t}function tt(e){return _(e)?e:{}}function nt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function rt(e,t,n,r){function o(e){try{e.apply(null,W(arguments,1))}finally{if(b--,0===b)for(;_.length;)try{_.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t+1)}function s(){l(),c()}function u(){try{return p.state}catch(e){}}function l(){w=u(),w=y(w)?null:w,q(w,x)&&(w=x),x=w}function c(){(C!==f.url()||E!==w)&&(C=f.url(),E=w,i(A,function(e){e(f.url(),w)}))}var f=this,h=(t[0],e.location),p=e.history,d=e.setTimeout,v=e.clearTimeout,m={};f.isMock=!1;var b=0,_=[];f.$$completeOutstandingRequest=o,f.$$incOutstandingRequestCount=function(){b++},f.notifyWhenNoOutstandingRequests=function(e){0===b?e():_.push(e)};var w,E,C=h.href,S=t.find("base"),T=null;l(),E=w,f.url=function(t,n,o){if(y(o)&&(o=null),h!==e.location&&(h=e.location),p!==e.history&&(p=e.history),t){var i=E===o;if(C===t&&(!r.history||i))return f;var s=C&&Mt(C)===Mt(t);return C=t,E=o,!r.history||s&&i?(s||(T=t),n?h.replace(t):s?h.hash=a(t):h.href=t):(p[n?"replaceState":"pushState"](o,"",t),l(),E=w),f}return T||h.href.replace(/%27/g,"'")},f.state=function(){return w};var A=[],P=!1,x=null;f.onUrlChange=function(t){return P||(r.history&&Ar(e).on("popstate",s),Ar(e).on("hashchange",s),P=!0),A.push(t),t},f.$$applicationDestroyed=function(){Ar(e).off("hashchange popstate",s)},f.$$checkUrlChange=c,f.baseHref=function(){var e=S.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(e,t){var n;return b++,n=d(function(){delete m[n],o(e)},t||0),m[n]=!0,n},f.defer.cancel=function(e){return m[e]?(delete m[e],v(e),o(g),!0):!1}}function ot(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new rt(e,r,t,n)}]}function it(){this.$get=function(){function e(e,n){function o(e){e!=h&&(p?p==e&&(p=e.n):p=e,i(e.n,e.p),i(e,h),h=e,h.n=null)}function i(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=f({},n,{id:e}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},h=null,p=null;return t[e]={put:function(e,t){if(!y(t)){if(l<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});o(n)}return e in u||a++,u[e]=t,a>l&&this.remove(p.key),t}},get:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;o(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;t==h&&(h=t.p),t==p&&(p=t.n),i(t.n,t.p),delete c[e]}delete u[e],a--},removeAll:function(){u={},a=0,c={},h=p=null},destroy:function(){u=null,s=null,c=null,delete t[e]},info:function(){return f({},s,{size:a})}}}var t={};return e.info=function(){var e={};return i(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function at(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function st(e,r){function o(e,t,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,o={};return i(e,function(e,i){var a=e.match(r);if(!a)throw Oo("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e,n?"controller bindings definition":"isolate scope definition");o[i]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||i}}),o}function a(e,t){var n={isolateScope:null,bindToController:null};if(_(e.scope)&&(e.bindToController===!0?(n.bindToController=o(e.scope,t,!0),n.isolateScope={}):n.isolateScope=o(e.scope,t,!1)),_(e.bindToController)&&(n.bindToController=o(e.bindToController,t,!0)),_(n.bindToController)){var r=e.controller,i=e.controllerAs;if(!r)throw Oo("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!ft(r,i))throw Oo("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function u(e){var t=e.charAt(0);if(!t||t!==_r(t))throw Oo("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw Oo("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var l={},c="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,p=/(([\w\-]+)(?:\:([^;]+))?;?)/,y=R("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,C=/^(on[a-z]+|formaction)$/;this.directive=function A(t,n){return he(t,"directive"),E(t)?(u(t),ce(n,"directiveFactory"),l.hasOwnProperty(t)||(l[t]=[],e.factory(t+c,["$injector","$exceptionHandler",function(e,n){var r=[];return i(l[t],function(o,i){try{var s=e.invoke(o);T(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=i,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var u=s.$$bindings=a(s,s.name);_(u.isolateScope)&&(s.$$isolateBindings=u.isolateScope),r.push(s)}catch(l){n(l)}}),r}])),l[t].push(n)):i(t,s(A)),this},this.aHrefSanitizationWhitelist=function(e){return b(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(e){return b(e)?(S=e,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,o,a,s,u,m,b,A,P,$){function O(e,t){try{e.addClass(t)}catch(n){}}function L(e,t,n,r,o){e instanceof Ar||(e=Ar(e)),i(e,function(t,n){t.nodeType==Qr&&t.nodeValue.match(/\S+/)&&(e[n]=Ar(t).wrap("<span></span>").parent()[0])});var a=D(e,t,e,n,r,o);L.$$addScopeClass(e);var s=null;return function(t,n,r){ce(t,"scope"),r=r||{};var o=r.parentBoundTranscludeFn,i=r.transcludeControllers,u=r.futureParentElement;o&&o.$$boundTransclude&&(o=o.$$boundTransclude),s||(s=N(u));var l;if(l="html"!==s?Ar(J(s,Ar("<div>").append(e).html())):n?po.clone.call(e):e,i)for(var c in i)l.data("$"+c+"Controller",i[c].instance);return L.$$addScopeInfo(l,t),n&&n(l,t),a&&a(t,l,l,o),l}}function N(e){var t=e&&e[0];return t&&"foreignobject"!==k(t)&&t.toString().match(/SVG/)?"svg":"html"}function D(e,t,r,o,i,a){function s(e,r,o,i){var a,s,u,l,c,f,h,p,v;if(d){var m=r.length;for(v=new Array(m),c=0;c<g.length;c+=3)h=g[c],v[h]=r[h]}else v=r;for(c=0,f=g.length;f>c;)if(u=v[g[c++]],a=g[c++],s=g[c++],a){if(a.scope){l=e.$new(),L.$$addScopeInfo(Ar(u),l);var y=a.$$destroyBindings;y&&(a.$$destroyBindings=null,l.$on("$destroyed",y))}else l=e;p=a.transcludeOnThisElement?I(e,a.transclude,i,a.elementTranscludeOnThisElement):!a.templateOnThisElement&&i?i:!i&&t?I(e,t):null,a(s,l,u,o,p,a)}else s&&s(e,u.childNodes,n,i)}for(var u,l,c,f,h,p,d,g=[],v=0;v<e.length;v++)u=new ie,l=M(e[v],[],u,0===v?o:n,i),c=l.length?U(l,e[v],u,t,r,null,[],[],a):null,c&&c.scope&&L.$$addScopeClass(u.$$element),h=c&&c.terminal||!(f=e[v].childNodes)||!f.length?null:D(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||h)&&(g.push(v,c,h),p=!0,d=d||c),a=null;return p?s:null}function I(e,t,n,r){var o=function(r,o,i,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,o,{parentBoundTranscludeFn:n,transcludeControllers:i,futureParentElement:a})};return o}function M(e,t,n,r,o){var i,a,s=e.nodeType,u=n.$attr;switch(s){case Gr:V(t,ut(k(e)),"E",r,o);for(var l,c,f,d,g,v,m=e.attributes,y=0,b=m&&m.length;b>y;y++){var w=!1,C=!1;l=m[y],c=l.name,g=Ur(l.value),d=ut(c),(v=fe.test(d))&&(c=c.replace(Lo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var S=d.replace(/(Start|End)$/,"");H(S)&&d===S+"Start"&&(w=c,C=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=ut(c.toLowerCase()),u[f]=c,(v||!n.hasOwnProperty(f))&&(n[f]=g,Be(e,f)&&(n[f]=!0)),ee(e,t,g,f,v),V(t,f,"A",r,o,w,C)}if(a=e.className,_(a)&&(a=a.animVal),E(a)&&""!==a)for(;i=p.exec(a);)f=ut(i[2]),V(t,f,"C",r,o)&&(n[f]=Ur(i[3])),a=a.substr(i.index+i[0].length);break;case Qr:K(t,e.nodeValue);break;case Kr:try{i=h.exec(e.nodeValue),i&&(f=ut(i[1]),V(t,f,"M",r,o)&&(n[f]=Ur(i[2])))}catch(T){}}return t.sort(Y),t}function R(e,t,n){var r=[],o=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Oo("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Gr&&(e.hasAttribute(t)&&o++,e.hasAttribute(n)&&o--),r.push(e),e=e.nextSibling}while(o>0)}else r.push(e);return Ar(r)}function j(e,t,n){return function(r,o,i,a,s){return o=R(o[0],t,n),e(r,o,i,a,s)}}function U(e,r,i,a,s,l,c,f,h){function p(e,t,n,r){e&&(n&&(e=j(e,n,r)),e.require=y.require,e.directiveName=b,(O===y||y.$$isolateScope)&&(e=ne(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=j(t,n,r)),t.require=y.require,t.directiveName=b,(O===y||y.$$isolateScope)&&(t=ne(t,{isolateScope:!0})),f.push(t))}function d(e,t,n,r){var o;if(E(t)){var i=t.match(w),a=t.substring(i[0].length),s=i[1]||i[3],u="?"===i[2];if("^^"===s?n=n.parent():(o=r&&r[a],o=o&&o.instance),!o){var l="$"+a+"Controller";o=s?n.inheritedData(l):n.data(l)}if(!o&&!u)throw Oo("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,e)}else if(Fr(t)){o=[];for(var c=0,f=t.length;f>c;c++)o[c]=d(e,t[c],n,r)}return o||null}function g(e,t,n,r,o,i){var a=ge();for(var s in r){var l=r[s],c={$scope:l===O||l.$$isolateScope?o:i,$element:e,$attrs:t,$transclude:n},f=l.controller;"@"==f&&(f=t[l.name]);var h=u(f,c,!0,l.controllerAs);a[l.name]=h,F||e.data("$"+l.name+"Controller",h.instance)}return a}function v(e,t,o,a,s,u){function l(e,t,r){var o;return x(e)||(r=t,t=e,e=n),F&&(o=w),r||(r=F?C.parent():C),s(e,t,o,r,I)}var h,p,v,b,_,w,E,C,S;if(r===o?(S=i,C=i.$$element):(C=Ar(o),S=new ie(C,i)),O&&(_=t.$new(!0)),s&&(E=l,E.$$boundTransclude=s),$&&(w=g(C,S,E,$,_,t)),O&&(L.$$addScopeInfo(C,_,!0,!(N&&(N===O||N===O.$$originalDirective))),L.$$addScopeClass(C,!0),_.$$isolateBindings=O.$$isolateBindings,oe(t,S,_,_.$$isolateBindings,O,_)),w){var T,A,P=O||m;P&&w[P.name]&&(T=P.$$bindings.bindToController,b=w[P.name],b&&b.identifier&&T&&(A=b,u.$$destroyBindings=oe(t,S,b.instance,T,P)));for(h in w){b=w[h];var D=b();D!==b.instance&&(b.instance=D,C.data("$"+y.name+"Controller",D),b===A&&(u.$$destroyBindings(),u.$$destroyBindings=oe(t,S,D,T,P)))}}for(h=0,p=c.length;p>h;h++)v=c[h],re(v,v.isolateScope?_:t,C,S,v.require&&d(v.directiveName,v.require,C,w),E);var I=t;for(O&&(O.template||null===O.templateUrl)&&(I=_),e&&e(I,o.childNodes,n,s),h=f.length-1;h>=0;h--)v=f[h],re(v,v.isolateScope?_:t,C,S,v.require&&d(v.directiveName,v.require,C,w),E)}h=h||{};for(var m,y,b,C,S,A,P=-Number.MAX_VALUE,$=h.controllerDirectives,O=h.newIsolateScopeDirective,N=h.templateDirective,D=h.nonTlbTranscludeDirective,I=!1,k=!1,F=h.hasElementTranscludeDirective,U=i.$$element=Ar(r),q=l,V=a,H=0,Y=e.length;Y>H;H++){y=e[H];var K=y.$$start,X=y.$$end;if(K&&(U=R(r,K,X)),C=n,P>y.priority)break;if((A=y.scope)&&(y.templateUrl||(_(A)?(Q("new/isolated scope",O||m,y,U),O=y):Q("new/isolated scope",O,y,U)),m=m||y),b=y.name,!y.templateUrl&&y.controller&&(A=y.controller,$=$||ge(),Q("'"+b+"' controller",$[b],y,U),$[b]=y),(A=y.transclude)&&(I=!0,y.$$tlb||(Q("transclusion",D,y,U),D=y),"element"==A?(F=!0,P=y.priority,C=U,U=i.$$element=Ar(t.createComment(" "+b+": "+i[b]+" ")),r=U[0],te(s,W(C),r),V=L(C,a,P,q&&q.name,{nonTlbTranscludeDirective:D})):(C=Ar(Pe(r)).contents(),U.empty(),V=L(C,a))),y.template)if(k=!0,Q("template",N,y,U),N=y,A=T(y.template)?y.template(U,i):y.template,A=le(A),y.replace){if(q=y,C=Ee(A)?[]:ct(J(y.templateNamespace,Ur(A))),r=C[0],1!=C.length||r.nodeType!==Gr)throw Oo("tplrt","Template for directive '{0}' must have exactly one root element. {1}",b,"");te(s,U,r);var ee={$attr:{}},ae=M(r,[],ee),se=e.splice(H+1,e.length-(H+1));O&&B(ae),e=e.concat(ae).concat(se),z(i,ee),Y=e.length}else U.html(A);if(y.templateUrl)k=!0,Q("template",N,y,U),N=y,y.replace&&(q=y),v=G(e.splice(H,e.length-H),U,i,s,I&&V,c,f,{controllerDirectives:$,newIsolateScopeDirective:O,templateDirective:N,nonTlbTranscludeDirective:D}),Y=e.length;else if(y.compile)try{S=y.compile(U,i,V),T(S)?p(null,S,K,X):S&&p(S.pre,S.post,K,X)}catch(ue){o(ue,Z(U))}y.terminal&&(v.terminal=!0,P=Math.max(P,y.priority))}return v.scope=m&&m.scope===!0,v.transcludeOnThisElement=I,v.elementTranscludeOnThisElement=F,v.templateOnThisElement=k,v.transclude=V,h.hasElementTranscludeDirective=F,v}function B(e){for(var t=0,n=e.length;n>t;t++)e[t]=d(e[t],{$$isolateScope:!0})}function V(t,r,i,a,s,u,f){if(r===s)return null;var h=null;if(l.hasOwnProperty(r))for(var p,g=e.get(r+c),v=0,m=g.length;m>v;v++)try{p=g[v],(a===n||a>p.priority)&&-1!=p.restrict.indexOf(i)&&(u&&(p=d(p,{$$start:u,$$end:f})),t.push(p),h=p)}catch(y){o(y)}return h}function H(t){if(l.hasOwnProperty(t))for(var n,r=e.get(t+c),o=0,i=r.length;i>o;o++)if(n=r[o],n.multiElement)return!0;return!1}function z(e,t){var n=t.$attr,r=e.$attr,o=e.$$element;i(e,function(r,o){"$"!=o.charAt(0)&&(t[o]&&t[o]!==r&&(r+=("style"===o?";":" ")+t[o]),e.$set(o,r,!0,n[o]))}),i(t,function(t,i){"class"==i?(O(o,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==i?(o.attr("style",o.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==i.charAt(0)||e.hasOwnProperty(i)||(e[i]=t,r[i]=n[i])})}function G(e,t,n,r,o,s,u,l){var c,f,h=[],p=t[0],g=e.shift(),v=d(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),m=T(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),a(A.getTrustedResourceUrl(m)).then(function(a){var d,b,w,E;if(a=le(a),g.replace){if(w=Ee(a)?[]:ct(J(y,Ur(a))),d=w[0],1!=w.length||d.nodeType!==Gr)throw Oo("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,m);b={$attr:{}},te(r,t,d);var C=M(d,[],b);_(g.scope)&&B(C),e=C.concat(e),z(n,b)}else d=p,t.html(a);for(e.unshift(v),c=U(e,d,n,o,t,g,s,u,l),i(r,function(e,n){e==d&&(r[n]=t[0])}),f=D(t[0].childNodes,o);h.length;){var S=h.shift(),T=h.shift(),A=h.shift(),P=h.shift(),x=t[0];if(!S.$$destroyed){if(T!==p){var $=T.className;l.hasElementTranscludeDirective&&g.replace||(x=Pe(d)),te(A,Ar(T),x),O(Ar(x),$)}E=c.transcludeOnThisElement?I(S,c.transclude,P):P,c(f,S,x,r,E,c)}}h=null}),function(e,t,n,r,o){var i=o;t.$$destroyed||(h?h.push(t,n,r,i):(c.transcludeOnThisElement&&(i=I(t,c.transclude,o)),c(f,t,n,r,i,c)))}}function Y(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Q(e,t,n,r){if(t)throw Oo("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,Z(r))}function K(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&L.$$addBindingClass(t),function(e,t){var o=t.parent();r||L.$$addBindingClass(o),L.$$addBindingInfo(o,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function J(e,n){switch(e=_r(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function X(e,t){if("srcdoc"==t)return A.HTML;var n=k(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?A.RESOURCE_URL:void 0}function ee(e,t,n,o,i){var a=X(e,o);i=y[o]||i;var s=r(n,!0,a,i);if(s){if("multiple"===o&&"select"===k(e))throw Oo("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,u){var l=u.$$observers||(u.$$observers={});if(C.test(o))throw Oo("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[o];c!==n&&(s=c&&r(c,!0,a,i),n=c),s&&(u[o]=s(e),(l[o]||(l[o]=[])).$$inter=!0,(u.$$observers&&u.$$observers[o].$$scope||e).$watch(s,function(e,t){"class"===o&&e!=t?u.$updateClass(e,t):u.$set(o,e)}))}}}})}}function te(e,n,r){var o,i,a=n[0],s=n.length,u=a.parentNode;if(e)for(o=0,i=e.length;i>o;o++)if(e[o]==a){e[o++]=r;for(var l=o,c=l+s-1,f=e.length;f>l;l++,c++)f>c?e[l]=e[c]:delete e[l];e.length-=s-1,e.context===a&&(e.context=r);break}u&&u.replaceChild(r,a);var h=t.createDocumentFragment();h.appendChild(a),Ar(r).data(Ar(a).data()),Pr?(kr=!0,Pr.cleanData([a])):delete Ar.cache[a[Ar.expando]];for(var p=1,d=n.length;d>p;p++){var g=n[p];Ar(g).remove(),h.appendChild(g),delete n[p]}n[0]=r,n.length=1}function ne(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function re(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(s){o(s,Z(n))}}function oe(e,t,n,o,a,u){var l;i(o,function(o,i){var u,c,f,h,p=o.attrName,d=o.optional,v=o.mode;switch(v){case"@":t.$observe(p,function(e){n[i]=e}),t.$$observers[p].$$scope=e,t[p]&&(n[i]=r(t[p])(e));break;case"=":if(d&&!t[p])return;c=s(t[p]),h=c.literal?q:function(e,t){return e===t||e!==e&&t!==t},f=c.assign||function(){throw u=n[i]=c(e),Oo("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[p],a.name)},u=n[i]=c(e);var m=function(t){return h(t,n[i])||(h(t,u)?f(e,t=n[i]):n[i]=t),u=t};m.$stateful=!0;var y;y=o.collection?e.$watchCollection(t[p],m):e.$watch(s(t[p],m),null,c.literal),l=l||[],l.push(y);break;case"&":if(!t.hasOwnProperty(p)&&d)break;if(c=s(t[p]),c===g&&d)break;n[i]=function(t){return c(e,t)}}});var c=l?function(){for(var e=0,t=l.length;t>e;++e)l[e]()}:g;return u&&c!==g?(u.$on("$destroy",c),g):c}var ie=function(e,t){if(t){var n,r,o,i=Object.keys(t);for(n=0,r=i.length;r>n;n++)o=i[n],this[o]=t[o]}else this.$attr={};this.$$element=e};ie.prototype={$normalize:ut,$addClass:function(e){e&&e.length>0&&P.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&P.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=lt(e,t);n&&n.length&&P.addClass(this.$$element,n);var r=lt(t,e);r&&r.length&&P.removeClass(this.$$element,r)},$set:function(e,t,r,a){var s,u=this.$$element[0],l=Be(u,e),c=We(u,e),f=e;if(l?(this.$$element.prop(e,t),a=l):c&&(this[c]=t,f=c),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=ue(e,"-"))),s=k(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=$(t,"src"===e);else if("img"===s&&"srcset"===e){for(var h="",p=Ur(t),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,g=/\s/.test(p)?d:/(,)/,v=p.split(g),m=Math.floor(v.length/2),y=0;m>y;y++){var b=2*y;h+=$(Ur(v[b]),!0),h+=" "+Ur(v[b+1])}var _=Ur(v[2*y]).split(/\s/);h+=$(Ur(_[0]),!0),2===_.length&&(h+=" "+Ur(_[1])),this[e]=t=h}r!==!1&&(null===t||t===n?this.$$element.removeAttr(a):this.$$element.attr(a,t));var w=this.$$observers;w&&i(w[f],function(e){try{e(t)}catch(n){o(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ge()),o=r[e]||(r[e]=[]);return o.push(t),m.$evalAsync(function(){!o.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){F(o,t)}}};var ae=r.startSymbol(),se=r.endSymbol(),le="{{"==ae||"}}"==se?v:function(e){return e.replace(/\{\{/g,ae).replace(/}}/g,se)},fe=/^ngAttr[A-Z]/;return L.$$addBindingInfo=S?function(e,t){var n=e.data("$binding")||[];Fr(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:g,L.$$addBindingClass=S?function(e){O(e,"ng-binding")}:g,L.$$addScopeInfo=S?function(e,t,n,r){var o=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(o,t)}:g,L.$$addScopeClass=S?function(e,t){O(e,t?"ng-isolate-scope":"ng-scope")}:g,L}]}function ut(e){return we(e.replace(Lo,""))}function lt(e,t){var n="",r=e.split(/\s+/),o=t.split(/\s+/);e:for(var i=0;i<r.length;i++){for(var a=r[i],s=0;s<o.length;s++)if(a==o[s])continue e;n+=(n.length>0?" ":"")+a}return n}function ct(e){e=Ar(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===Kr&&Or.call(e,t,1)}return e}function ft(e,t){if(t&&E(t))return t;if(E(e)){var n=Do.exec(e);if(n)return n[3]}}function ht(){var e={},t=!1;this.register=function(t,n){he(t,"controller"),_(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(o,i){function a(e,t,n,o){if(!e||!_(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",o,t);e.$scope[t]=n}return function(r,s,u,l){var c,h,p,d;if(u=u===!0,l&&E(l)&&(d=l),E(r)){if(h=r.match(Do),!h)throw No("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);p=h[1],d=d||h[3],r=e.hasOwnProperty(p)?e[p]:pe(s.$scope,p,!0)||(t?pe(i,p,!0):n),fe(r,p,!0)}if(u){var g=(Fr(r)?r[r.length-1]:r).prototype;c=Object.create(g||null),d&&a(s,d,c,p||r.name);var v;return v=f(function(){var e=o.invoke(r,c,s,p);return e!==c&&(_(e)||T(e))&&(c=e,d&&a(s,d,c,p||r.name)),c},{instance:c,identifier:d})}return c=o.instantiate(r,s,p),d&&a(s,d,c,p||r.name),c}}]}function pt(){this.$get=["$window",function(e){return Ar(e.document)}]}function dt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function gt(e){return _(e)?S(e)?e.toISOString():z(e):e}function vt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return a(e,function(e,n){null===e||y(e)||(Fr(e)?i(e,function(e,r){t.push(ne(n)+"="+ne(gt(e)))}):t.push(ne(n)+"="+ne(gt(e))))}),t.join("&")}}}function mt(){this.$get=function(){return function(e){function t(e,r,o){null===e||y(e)||(Fr(e)?i(e,function(e){t(e,r+"[]")}):_(e)&&!S(e)?a(e,function(e,n){t(e,r+(o?"":"[")+n+(o?"":"]"))}):n.push(ne(r)+"="+ne(gt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function yt(e,t){if(E(e)){var n=e.replace(Fo,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(Io)||bt(n))&&(e=G(n))}}return e}function bt(e){var t=e.match(Ro);return t&&ko[t[0]].test(e)}function _t(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=ge();return E(e)?i(e.split("\n"),function(e){n=e.indexOf(":"),t(_r(Ur(e.substr(0,n))),Ur(e.substr(n+1)))}):_(e)&&i(e,function(e,n){t(_r(n),Ur(e))}),r}function wt(e){var t;return function(n){if(t||(t=_t(e)),n){var r=t[_r(n)];return void 0===r&&(r=null),r}return t}}function Et(e,t,n,r){return T(r)?r(e,t,n):(i(r,function(r){e=r(e,t,n)}),e)}function Ct(e){return e>=200&&300>e}function St(){var e=this.defaults={transformResponse:[yt],transformRequest:[function(e){return!_(e)||$(e)||L(e)||O(e)?e:z(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:U(Mo),put:U(Mo),patch:U(Mo)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return b(e)?(t=!!e,this):t};var o=this.interceptors=[];
this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,u,l,c,h){function p(t){function o(e){var t=f({},e);return e.data?t.data=Et(e.data,e.headers,e.status,u.transformResponse):t.data=e.data,Ct(e.status)?t:c.reject(t)}function a(e,t){var n,r={};return i(e,function(e,o){T(e)?(n=e(t),null!=n&&(r[o]=n)):r[o]=e}),r}function s(t){var n,r,o,i=e.headers,s=f({},t.headers);i=f({},i.common,i[_r(t.method)]);e:for(n in i){r=_r(n);for(o in s)if(_r(o)===r)continue e;s[n]=i[n]}return a(s,U(t))}if(!Mr.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var u=f({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);u.headers=s(t),u.method=Er(u.method),u.paramSerializer=E(u.paramSerializer)?h.get(u.paramSerializer):u.paramSerializer;var l=function(t){var r=t.headers,a=Et(t.data,wt(r),n,t.transformRequest);return y(a)&&i(r,function(e,t){"content-type"===_r(t)&&delete r[t]}),y(t.withCredentials)&&!y(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,a).then(o,o)},p=[l,n],d=c.when(u);for(i(C,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&p.push(e.response,e.responseError)});p.length;){var g=p.shift(),m=p.shift();d=d.then(g,m)}return d.success=function(e){return fe(e,"fn"),d.then(function(t){e(t.data,t.status,t.headers,u)}),d},d.error=function(e){return fe(e,"fn"),d.then(null,function(t){e(t.data,t.status,t.headers,u)}),d},d}function d(e){i(arguments,function(e){p[e]=function(t,n){return p(f({},n||{},{method:e,url:t}))}})}function g(e){i(arguments,function(e){p[e]=function(t,n,r){return p(f({},r||{},{method:e,url:t,data:n}))}})}function v(r,o){function i(e,n,r,o){function i(){u(n,e,r,o)}d&&(Ct(e)?d.put(S,[e,n,_t(r),o]):d.remove(S)),t?l.$applyAsync(i):(i(),l.$$phase||l.$apply())}function u(e,t,n,o){t=Math.max(t,0),(Ct(t)?v.resolve:v.reject)({data:e,status:t,headers:wt(n),config:r,statusText:o})}function f(e){u(e.data,e.status,U(e.headers()),e.statusText)}function h(){var e=p.pendingRequests.indexOf(r);-1!==e&&p.pendingRequests.splice(e,1)}var d,g,v=c.defer(),E=v.promise,C=r.headers,S=m(r.url,r.paramSerializer(r.params));if(p.pendingRequests.push(r),E.then(h,h),!r.cache&&!e.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(d=_(r.cache)?r.cache:_(e.cache)?e.cache:w),d&&(g=d.get(S),b(g)?D(g)?g.then(f,f):Fr(g)?u(g[1],g[0],U(g[2]),g[3]):u(g,200,{},"OK"):d.put(S,E)),y(g)){var T=An(r.url)?s()[r.xsrfCookieName||e.xsrfCookieName]:n;T&&(C[r.xsrfHeaderName||e.xsrfHeaderName]=T),a(r.method,S,o,i,C,r.timeout,r.withCredentials,r.responseType)}return E}function m(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var w=u("$http");e.paramSerializer=E(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var C=[];return i(o,function(e){C.unshift(E(e)?h.get(e):h.invoke(e))}),p.pendingRequests=[],d("get","delete","head","jsonp"),g("post","put","patch"),p.defaults=e,p}]}function Tt(){return new e.XMLHttpRequest}function At(){this.$get=["$browser","$window","$document",function(e,t,n){return Pt(e,Tt,e.defer,t.angular.callbacks,n[0])}]}function Pt(e,t,r,o,a){function s(e,t,n){var r=a.createElement("script"),i=null;return r.type="text/javascript",r.src=e,r.async=!0,i=function(e){ro(r,"load",i),ro(r,"error",i),a.body.removeChild(r),r=null;var s=-1,u="unknown";e&&("load"!==e.type||o[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},no(r,"load",i),no(r,"error",i),a.body.appendChild(r),i}return function(a,u,l,c,f,h,p,d){function v(){_&&_(),w&&w.abort()}function m(t,o,i,a,s){S!==n&&r.cancel(S),_=w=null,t(o,i,a,s),e.$$completeOutstandingRequest(g)}if(e.$$incOutstandingRequestCount(),u=u||e.url(),"jsonp"==_r(a)){var y="_"+(o.counter++).toString(36);o[y]=function(e){o[y].data=e,o[y].called=!0};var _=s(u.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(e,t){m(c,e,o[y].data,"",t),o[y]=g})}else{var w=t();w.open(a,u,!0),i(f,function(e,t){b(e)&&w.setRequestHeader(t,e)}),w.onload=function(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:"file"==Tn(u).protocol?404:0),m(c,n,t,w.getAllResponseHeaders(),e)};var E=function(){m(c,-1,null,null,"")};if(w.onerror=E,w.onabort=E,p&&(w.withCredentials=!0),d)try{w.responseType=d}catch(C){if("json"!==d)throw C}w.send(l)}if(h>0)var S=r(v,h);else D(h)&&h.then(v)}}function xt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,o){function i(e){return"\\\\\\"+e}function a(n){return n.replace(h,e).replace(p,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e}function u(i,u,h,p){function d(e){try{return e=x(e),p&&!b(e)?e:s(e)}catch(t){r(jo.interr(i,t))}}p=!!p;for(var g,v,m,_=0,w=[],E=[],C=i.length,S=[],A=[];C>_;){if(-1==(g=i.indexOf(e,_))||-1==(v=i.indexOf(t,g+l))){_!==C&&S.push(a(i.substring(_)));break}_!==g&&S.push(a(i.substring(_,g))),m=i.substring(g+l,v),w.push(m),E.push(n(m,d)),_=v+c,A.push(S.length),S.push("")}if(h&&S.length>1&&jo.throwNoconcat(i),!u||w.length){var P=function(e){for(var t=0,n=w.length;n>t;t++){if(p&&y(e[t]))return;S[A[t]]=e[t]}return S.join("")},x=function(e){return h?o.getTrusted(h,e):o.valueOf(e)};return f(function(e){var t=0,n=w.length,o=new Array(n);try{for(;n>t;t++)o[t]=E[t](e);return P(o)}catch(a){r(jo.interr(i,a))}},{exp:i,expressions:w,$$watchDelegate:function(e,t){var n;return e.$watchGroup(E,function(r,o){var i=P(r);T(t)&&t.call(this,i,r!==o?n:i,e),n=i})}})}}var l=e.length,c=t.length,h=new RegExp(e.replace(/./g,i),"g"),p=new RegExp(t.replace(/./g,i),"g");return u.startSymbol=function(){return e},u.endSymbol=function(){return t},u}]}function $t(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function o(o,a,s,u){var l=arguments.length>4,c=l?W(arguments,4):[],f=t.setInterval,h=t.clearInterval,p=0,d=b(u)&&!u,g=(d?r:n).defer(),v=g.promise;return s=b(s)?s:0,v.then(null,null,l?function(){o.apply(null,c)}:o),v.$$intervalId=f(function(){g.notify(p++),s>0&&p>=s&&(g.resolve(p),h(v.$$intervalId),delete i[v.$$intervalId]),d||e.$apply()},a),i[v.$$intervalId]=g,v}var i={};return o.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},o}]}function Ot(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(e){return 1===e?"one":"other"}}}}function Lt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=te(t[n]);return t.join("/")}function Nt(e,t){var n=Tn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||qo[n.protocol]||null}function Dt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Tn(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=X(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function It(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function Mt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Rt(e){return e.replace(/(#.+)|#$/,"$1")}function kt(e){return e.substr(0,Mt(e).lastIndexOf("/")+1)}function Ft(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function jt(e,t){this.$$html5=!0,t=t||"";var r=kt(e);Nt(e,this),this.$$parse=function(e){var t=It(r,e);if(!E(t))throw Bo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,r);Dt(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ee(this.$$search),t=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Lt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(o,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,s,u;return(a=It(e,o))!==n?(s=a,u=(a=It(t,a))!==n?r+(It("/",a)||a):e+s):(a=It(r,o))!==n?u=r+a:r==o+"/"&&(u=r),u&&this.$$parse(u),!!u}}function Ut(e,t){var n=kt(e);Nt(e,this),this.$$parse=function(r){function o(e,t,n){var r,o=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),o.exec(t)?e:(r=o.exec(e),r?r[1]:e)}var i,a=It(e,r)||It(n,r);"#"===a.charAt(0)?(i=It(t,a),y(i)&&(i=a)):i=this.$$html5?a:"",Dt(i,this),this.$$path=o(this.$$path,i,e),this.$$compose()},this.$$compose=function(){var n=ee(this.$$search),r=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Lt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Mt(e)==Mt(t)?(this.$$parse(t),!0):!1}}function qt(e,t){this.$$html5=!0,Ut.apply(this,arguments);var n=kt(e);this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var i,a;return e==Mt(r)?i=r:(a=It(n,r))?i=e+t+a:n===r+"/"&&(i=n),i&&this.$$parse(i),!!i},this.$$compose=function(){var n=ee(this.$$search),r=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Lt(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function Bt(e){return function(){return this[e]}}function Wt(e,t){return function(n){return y(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Vt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return b(t)?(e=t,this):e},this.html5Mode=function(e){return N(e)?(t.enabled=e,this):_(e)?(N(e.enabled)&&(t.enabled=e.enabled),N(e.requireBase)&&(t.requireBase=e.requireBase),N(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,o,i,a){function s(e,t,n){var o=l.url(),i=l.$$state;try{r.url(e,t,n),l.$$state=r.state()}catch(a){throw l.url(o),l.$$state=i,a}}function u(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,c,f,h=r.baseHref(),p=r.url();if(t.enabled){if(!h&&t.requireBase)throw Bo("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Ft(p)+(h||"/"),c=o.history?jt:qt}else f=Mt(p),c=Ut;l=new c(f,"#"+e),l.$$parseLinkUrl(p,p),l.$$state=r.state();var d=/^\s*(javascript|mailto):/i;i.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var o=Ar(e.target);"a"!==k(o[0]);)if(o[0]===i[0]||!(o=o.parent())[0])return;var s=o.prop("href"),u=o.attr("href")||o.attr("xlink:href");_(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Tn(s.animVal).href),d.test(s)||!s||o.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(s,u)&&(e.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Rt(l.absUrl())!=Rt(p)&&r.url(l.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){n.$evalAsync(function(){var r,o=l.absUrl(),i=l.$$state;l.$$parse(e),l.$$state=t,r=n.$broadcast("$locationChangeStart",e,o,t,i).defaultPrevented,l.absUrl()===e&&(r?(l.$$parse(o),l.$$state=i,s(o,!1,i)):(g=!1,u(o,i)))}),n.$$phase||n.$digest()}),n.$watch(function(){var e=Rt(r.url()),t=Rt(l.absUrl()),i=r.state(),a=l.$$replace,c=e!==t||l.$$html5&&o.history&&i!==l.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var t=l.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,l.$$state,i).defaultPrevented;l.absUrl()===t&&(r?(l.$$parse(e),l.$$state=i):(c&&s(t,a,i===l.$$state?null:l.$$state),u(e,i)))})),l.$$replace=!1}),l}]}function Ht(){var e=!0,t=this;this.debugEnabled=function(t){return b(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||g,a=!1;try{a=!!o.apply}catch(s){}return a?function(){var e=[];return i(arguments,function(t){e.push(r(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function zt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Vo("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Gt(e,t){if(e){if(e.constructor===e)throw Vo("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Vo("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Vo("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Vo("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Yt(e,t){if(e){if(e.constructor===e)throw Vo("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Ho||e===zo||e===Go)throw Vo("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Qt(e,t){return"undefined"!=typeof e?e:t}function Kt(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function Zt(e,t){var n=e(t);return!n.$stateful}function Jt(e,t){var n,r;switch(e.type){case Zo.Program:n=!0,i(e.body,function(e){Jt(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Zo.Literal:e.constant=!0,e.toWatch=[];break;case Zo.UnaryExpression:Jt(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Zo.BinaryExpression:Jt(e.left,t),Jt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Zo.LogicalExpression:Jt(e.left,t),Jt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Zo.ConditionalExpression:Jt(e.test,t),Jt(e.alternate,t),Jt(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Zo.Identifier:e.constant=!1,e.toWatch=[e];break;case Zo.MemberExpression:Jt(e.object,t),e.computed&&Jt(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Zo.CallExpression:n=e.filter?Zt(t,e.callee.name):!1,r=[],i(e.arguments,function(e){Jt(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&Zt(t,e.callee.name)?r:[e];break;case Zo.AssignmentExpression:Jt(e.left,t),Jt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Zo.ArrayExpression:n=!0,r=[],i(e.elements,function(e){Jt(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case Zo.ObjectExpression:n=!0,r=[],i(e.properties,function(e){Jt(e.value,t),n=n&&e.value.constant,e.value.constant||r.push.apply(r,e.value.toWatch)}),e.constant=n,e.toWatch=r;break;case Zo.ThisExpression:e.constant=!1,e.toWatch=[]}}function Xt(e){if(1==e.length){var t=e[0].expression,r=t.toWatch;return 1!==r.length?r:r[0]!==t?r:n}}function en(e){return e.type===Zo.Identifier||e.type===Zo.MemberExpression}function tn(e){return 1===e.body.length&&en(e.body[0].expression)?{type:Zo.AssignmentExpression,left:e.body[0].expression,right:{type:Zo.NGValueParameter},operator:"="}:void 0}function nn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Zo.Literal||e.body[0].expression.type===Zo.ArrayExpression||e.body[0].expression.type===Zo.ObjectExpression)}function rn(e){return e.constant}function on(e,t){this.astBuilder=e,this.$filter=t}function an(e,t){this.astBuilder=e,this.$filter=t}function sn(e,t,n,r){Gt(e,r);for(var o,i=t.split("."),a=0;i.length>1;a++){o=zt(i.shift(),r);var s=Gt(e[o],r);s||(s={},e[o]=s),e=s}return o=zt(i.shift(),r),Gt(e[o],r),e[o]=n,n}function un(e){return"constructor"==e}function ln(e){return T(e.valueOf)?e.valueOf():Xo.call(e)}function cn(){var e=ge(),t=ge();this.$get=["$filter","$sniffer",function(r,o){function a(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=ln(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function s(e,t,r,o,i){var s,u=o.inputs;if(1===u.length){var l=a;return u=u[0],e.$watch(function(e){var t=u(e);return a(t,l)||(s=o(e,n,n,[t]),l=t&&ln(t)),s},t,r,i)}for(var c=[],f=[],h=0,p=u.length;p>h;h++)c[h]=a,f[h]=null;return e.$watch(function(e){for(var t=!1,r=0,i=u.length;i>r;r++){var l=u[r](e);(t||(t=!a(l,c[r])))&&(f[r]=l,c[r]=l&&ln(l))}return t&&(s=o(e,n,n,f)),s},t,r,i)}function u(e,t,n,r){var o,i;return o=e.$watch(function(e){return r(e)},function(e,n,r){i=e,T(t)&&t.apply(this,arguments),b(e)&&r.$$postDigest(function(){b(i)&&o()})},n)}function l(e,t,n,r){function o(e){var t=!0;return i(e,function(e){b(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return r(e)},function(e,n,r){s=e,T(t)&&t.call(this,e,n,r),o(e)&&r.$$postDigest(function(){o(s)&&a()})},n)}function c(e,t,n,r){var o;return o=e.$watch(function(e){return r(e)},function(e,n,r){T(t)&&t.apply(this,arguments),o()},n)}function f(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==l&&n!==u,o=r?function(n,r,o,i){var a=e(n,r,o,i);return t(a,n,r)}:function(n,r,o,i){var a=e(n,r,o,i),s=t(a,n,r);return b(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==s?o.$$watchDelegate=e.$$watchDelegate:t.$stateful||(o.$$watchDelegate=s,o.inputs=e.inputs?e.inputs:[e]),o}var h={csp:o.csp,expensiveChecks:!1},p={csp:o.csp,expensiveChecks:!0};return function(n,o,i){var a,d,v;switch(typeof n){case"string":n=n.trim(),v=n;var m=i?t:e;if(a=m[v],!a){":"===n.charAt(0)&&":"===n.charAt(1)&&(d=!0,n=n.substring(2));var y=i?p:h,b=new Ko(y),_=new Jo(b,r,y);a=_.parse(n),a.constant?a.$$watchDelegate=c:d?a.$$watchDelegate=a.literal?l:u:a.inputs&&(a.$$watchDelegate=s),m[v]=a}return f(a,o);case"function":return f(n,o);default:return g}}}]}function fn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return pn(function(t){e.$evalAsync(t)},t)}]}function hn(){this.$get=["$browser","$exceptionHandler",function(e,t){return pn(function(t){e.defer(t)},t)}]}function pn(e,t){function o(e,t,n){function r(t){return function(n){o||(o=!0,t.call(e,n))}}var o=!1;return[r(t),r(n)]}function a(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function u(e){var r,o,i;i=e.pending,e.processScheduled=!1,e.pending=n;for(var a=0,s=i.length;s>a;++a){o=i[a][0],r=i[a][e.status];try{T(r)?o.resolve(r(e.value)):1===e.status?o.resolve(e.value):o.reject(e.value)}catch(u){o.reject(u),t(u)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){u(t)}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(e){var t=new c,n=0,r=Fr(e)?[]:{};return i(e,function(e,o){n++,m(e).then(function(e){r.hasOwnProperty(o)||(r[o]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(o)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var h=r("$q",TypeError),p=function(){return new c};a.prototype={then:function(e,t,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return v(t,!0,e)},function(t){return v(t,!1,e)},t)}},c.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=o(this,this.$$resolve,this.$$reject);try{(_(e)||T(e))&&(n=e&&e.then),T(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(i){r[1](i),t(i)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,o,i=0,a=r.length;a>i;i++){o=r[i][0],e=r[i][3];try{o.notify(T(e)?e(n):n)}catch(s){t(s)}}})}};var d=function(e){var t=new c;return t.reject(e),t.promise},g=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},v=function(e,t,n){var r=null;try{T(n)&&(r=n())}catch(o){return g(o,!1)}return D(r)?r.then(function(){return g(e,t)},function(e){return g(e,!1)}):g(e,t)},m=function(e,t,n,r){var o=new c;return o.resolve(e),o.promise.then(t,n,r)},y=function b(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!T(e))throw h("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof b))return new b(e);var r=new c;return e(t,n),r.promise};return y.defer=p,y.reject=d,y.when=m,y.all=f,y}function dn(){this.$get=["$window","$timeout",function(e,t){function n(){for(var e=0;e<c.length;e++){var t=c[e];t&&(c[e]=null,t())}l=c.length=0}function r(e){var t=c.length;return l++,c.push(e),0===t&&(u=s(n)),function(){t>=0&&(c[t]=null,t=null,0===--l&&u&&(u(),u=null,c.length=0))}}var o=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,a=!!o,s=a?function(e){var t=o(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};r.supported=a;var u,l=0,c=[];return r}]}function gn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,l,c,f){function h(e){e.currentScope.$$destroyed=!0}function p(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function d(e){if(S.$$phase)throw n("inprog","{0} already in progress",S.$$phase);S.$$phase=e}function v(){S.$$phase=null}function m(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function b(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function E(){for(;x.length;)try{x.shift()()}catch(e){l(e)}s=null}function C(){null===s&&(s=f.defer(function(){S.$apply(E)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",h),r},$watch:function(e,t,n,r){var o=c(e);if(o.$$watchDelegate)return o.$$watchDelegate(this,t,n,o,e);var i=this,s=i.$$watchers,u={fn:t,last:w,get:o,exp:r||e,eq:!!n};return a=null,T(t)||(u.fn=g),s||(s=i.$$watchers=[]),s.unshift(u),m(this,1),function(){F(s,u)>=0&&m(i,-1),a=null}},$watchGroup:function(e,t){function n(){u=!1,l?(l=!1,t(o,o,s)):t(o,r,s)}var r=new Array(e.length),o=new Array(e.length),a=[],s=this,u=!1,l=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(o,o,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,i){o[0]=e,r[0]=n,t(o,e===n?o:r,i)}):(i(e,function(e,t){var i=s.$watch(e,function(e,i){o[t]=e,r[t]=i,u||(u=!0,s.$evalAsync(n))});a.push(i)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){i=e;var t,n,r,s,u;if(!y(i)){if(_(i))if(o(i)){a!==p&&(a=p,v=a.length=0,f++),t=i.length,v!==t&&(f++,a.length=v=t);for(var l=0;t>l;l++)u=a[l],s=i[l],r=u!==u&&s!==s,r||u===s||(f++,a[l]=s)}else{a!==d&&(a=d={},v=0,f++),t=0;for(n in i)i.hasOwnProperty(n)&&(t++,s=i[n],u=a[n],n in a?(r=u!==u&&s!==s,r||u===s||(f++,a[n]=s)):(v++,a[n]=s,f++));if(v>t){f++;for(n in a)i.hasOwnProperty(n)||(v--,delete a[n])}}else a!==i&&(a=i,f++);return f}}function r(){if(g?(g=!1,t(i,i,u)):t(i,s,u),l)if(_(i))if(o(i)){s=new Array(i.length);for(var e=0;e<i.length;e++)s[e]=i[e]}else{s={};for(var n in i)wr.call(i,n)&&(s[n]=i[n])}else s=i}n.$stateful=!0;var i,a,s,u=this,l=t.length>1,f=0,h=c(e,n),p=[],d={},g=!0,v=0;return this.$watch(h,r)},$digest:function(){var e,r,o,i,u,c,h,p,g,m,y=t,b=this,_=[];d("$digest"),f.$$checkUrlChange(),this===S&&null!==s&&(f.defer.cancel(s),E()),a=null;do{for(c=!1,p=b;A.length;){try{m=A.shift(),m.scope.$eval(m.expression,m.locals)}catch(C){l(C)}a=null}e:do{if(i=p.$$watchers)for(u=i.length;u--;)try{if(e=i[u])if((r=e.get(p))===(o=e.last)||(e.eq?q(r,o):"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))){if(e===a){c=!1;break e}}else c=!0,a=e,e.last=e.eq?j(r,null):r,e.fn(r,o===w?r:o,p),5>y&&(g=4-y,_[g]||(_[g]=[]),_[g].push({msg:T(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:o}))}catch(C){l(C)}if(!(h=p.$$watchersCount&&p.$$childHead||p!==b&&p.$$nextSibling))for(;p!==b&&!(h=p.$$nextSibling);)p=p.$parent}while(p=h);if((c||A.length)&&!y--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,_)}while(c||A.length);for(v();P.length;)try{P.shift()()}catch(C){l(C)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===S&&f.$$applicationDestroyed(),m(this,-this.$$watchersCount);for(var t in this.$$listenerCount)b(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=g,this.$on=this.$watch=this.$watchGroup=function(){return g},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){S.$$phase||A.length||f.defer(function(){A.length&&S.$digest()}),A.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){P.push(e)},$apply:function(e){try{return d("$apply"),this.$eval(e)}catch(t){l(t)}finally{v();try{S.$digest()}catch(t){throw l(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&x.push(t),C()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var o=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,b(o,1,e))}},$emit:function(e,t){var n,r,o,i=[],a=this,s=!1,u={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=B([u],arguments,1);do{for(n=a.$$listeners[e]||i,u.currentScope=a,r=0,o=n.length;o>r;r++)if(n[r])try{n[r].apply(null,c)}catch(f){l(f)}else n.splice(r,1),r--,o--;if(s)return u.currentScope=null,u;a=a.$parent}while(a);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,o=n,i={name:e,targetScope:n,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return i;for(var a,s,u,c=B([i],arguments,1);r=o;){for(i.currentScope=r,a=r.$$listeners[e]||[],s=0,u=a.length;u>s;s++)if(a[s])try{a[s].apply(null,c)}catch(f){l(f)}else a.splice(s,1),s--,u--;if(!(o=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(o=r.$$nextSibling);)r=r.$parent}return i.currentScope=null,i}};var S=new p,A=S.$$asyncQueue=[],P=S.$$postDigestQueue=[],x=S.$$applyAsyncQueue=[];return S}]}function vn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return b(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(t=e,this):t},this.$get=function(){return function(n,r){var o,i=r?t:e;return o=Tn(n).href,""===o||o.match(i)?n:"unsafe:"+o}}}function mn(e){if("self"===e)return e;if(E(e)){if(e.indexOf("***")>-1)throw ei("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=qr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(A(e))return new RegExp("^"+e.source+"$");throw ei("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function yn(e){var t=[];return b(e)&&i(e,function(e){t.push(mn(e))}),t}function bn(){this.SCE_CONTEXTS=ti;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=yn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=yn(e)),t},this.$get=["$injector",function(r){function o(e,t){return"self"===e?An(t):!!e.exec(t.href)}function i(n){var r,i,a=Tn(n.toString()),s=!1;for(r=0,i=e.length;i>r;r++)if(o(e[r],a)){s=!0;break}if(s)for(r=0,i=t.length;i>r;r++)if(o(t[r],a)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=h.hasOwnProperty(e)?h[e]:null;if(!r)throw ei("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw ei("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function u(e){return e instanceof f?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||t===n||""===t)return t;var r=h.hasOwnProperty(e)?h[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===ti.RESOURCE_URL){if(i(t))return t;throw ei("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ti.HTML)return c(t);throw ei("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(e){throw ei("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var f=a(),h={};return h[ti.HTML]=a(f),h[ti.CSS]=a(f),h[ti.URL]=a(f),h[ti.JS]=a(f),h[ti.RESOURCE_URL]=a(h[ti.URL]),{trustAs:s,getTrusted:l,valueOf:u}}]}function _n(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Tr)throw ei("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=U(ti);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=v),r.parseAs=function(e,n){var o=t(n);return o.literal&&o.constant?o:t(n,function(t){return r.getTrusted(e,t)})};var o=r.parseAs,a=r.getTrusted,s=r.trustAs;return i(ti,function(e,t){var n=_r(t);r[we("parse_as_"+n)]=function(t){
return o(e,t)},r[we("get_trusted_"+n)]=function(t){return a(e,t)},r[we("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function wn(){this.$get=["$window","$document",function(e,t){var n,r,o={},i=p((/android (\d+)/.exec(_r((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,c=!1,f=!1;if(l){for(var h in l)if(r=u.exec(h)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||n+"Transition"in l),f=!!("animation"in l||n+"Animation"in l),!i||c&&f||(c=E(l.webkitTransition),f=E(l.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>i||a),hasEvent:function(e){if("input"===e&&11>=Tr)return!1;if(y(o[e])){var t=s.createElement("div");o[e]="on"+e in t}return o[e]},csp:Br(),vendorPrefix:n,transitions:c,animations:f,android:i}}]}function En(){this.$get=["$templateCache","$http","$q",function(e,t,n){function r(o,i){function a(e){if(!i)throw Oo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",o,e.status,e.statusText);return n.reject(e)}r.totalPendingRequests++;var s=t.defaults&&t.defaults.transformResponse;Fr(s)?s=s.filter(function(e){return e!==yt}):s===yt&&(s=null);var u={cache:e,transformResponse:s};return t.get(o,u)["finally"](function(){r.totalPendingRequests--}).then(function(t){return e.put(o,t.data),t.data},a)}return r.totalPendingRequests=0,r}]}function Cn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),o=[];return i(r,function(e){var r=Mr.element(e).data("$binding");r&&i(r,function(r){if(n){var i=new RegExp("(^|\\s)"+qr(t)+"(\\s|\\||$)");i.test(r)&&o.push(e)}else-1!=r.indexOf(t)&&o.push(e)})}),o},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],o=0;o<r.length;++o){var i=n?"=":"*=",a="["+r[o]+"model"+i+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Sn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,o){function i(i,s,u){T(i)||(u=s,s=i,i=g);var l,c=W(arguments,3),f=b(u)&&!u,h=(f?r:n).defer(),p=h.promise;return l=t.defer(function(){try{h.resolve(i.apply(null,c))}catch(t){h.reject(t),o(t)}finally{delete a[p.$$timeoutId]}f||e.$apply()},s),p.$$timeoutId=l,a[l]=h,p}var a={};return i.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},i}]}function Tn(e){var t=e;return Tr&&(ni.setAttribute("href",t),t=ni.href),ni.setAttribute("href",t),{href:ni.href,protocol:ni.protocol?ni.protocol.replace(/:$/,""):"",host:ni.host,search:ni.search?ni.search.replace(/^\?/,""):"",hash:ni.hash?ni.hash.replace(/^#/,""):"",hostname:ni.hostname,port:ni.port,pathname:"/"===ni.pathname.charAt(0)?ni.pathname:"/"+ni.pathname}}function An(e){var t=E(e)?Tn(e):e;return t.protocol===ri.protocol&&t.host===ri.host}function Pn(){this.$get=m(e)}function xn(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},o={},i="";return function(){var e,a,s,u,l,c=r.cookie||"";if(c!==i)for(i=c,e=i.split("; "),o={},s=0;s<e.length;s++)a=e[s],u=a.indexOf("="),u>0&&(l=t(a.substring(0,u)),o[l]===n&&(o[l]=t(a.substring(u+1))));return o}}function $n(){this.$get=xn}function On(e){function t(r,o){if(_(r)){var a={};return i(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Rn),t("date",Qn),t("filter",Ln),t("json",Kn),t("limitTo",Zn),t("lowercase",ui),t("number",kn),t("orderBy",Jn),t("uppercase",li)}function Ln(){return function(e,t,n){if(!o(e)){if(null==e)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}var i,a,s=Mn(t);switch(s){case"function":i=t;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":i=Dn(t,n,a);break;default:return e}return Array.prototype.filter.call(e,i)}}function Nn(e){return T(e.toString)&&e.toString!==Object.prototype.toString}function Dn(e,t,n){var r,o=_(e)&&"$"in e;return t===!0?t=q:T(t)||(t=function(e,t){return y(e)?!1:null===e||null===t?e===t:_(t)||_(e)&&!Nn(e)?!1:(e=_r(""+e),t=_r(""+t),-1!==e.indexOf(t))}),r=function(r){return o&&!_(r)?In(r,e.$,t,!1):In(r,e,t,n)}}function In(e,t,n,r,o){var i=Mn(e),a=Mn(t);if("string"===a&&"!"===t.charAt(0))return!In(e,t.substring(1),n,r);if(Fr(e))return e.some(function(e){return In(e,t,n,r)});switch(i){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&In(e[s],t,n,!0))return!0;return o?!1:In(e,t,n,!1)}if("object"===a){for(s in t){var u=t[s];if(!T(u)&&!y(u)){var l="$"===s,c=l?e:e[s];if(!In(c,u,n,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Mn(e){return null===e?"null":typeof e}function Rn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return y(n)&&(n=t.CURRENCY_SYM),y(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Fn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function kn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Fn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Fn(e,t,n,r,o){if(_(e))return"";var i=0>e;e=Math.abs(e);var a=e===1/0;if(!a&&!isFinite(e))return"";var s=e+"",u="",l=!1,c=[];if(a&&(u="∞"),!a&&-1!==s.indexOf("e")){var f=s.match(/([\d\.]+)e(-?)(\d+)/);f&&"-"==f[2]&&f[3]>o+1?e=0:(u=s,l=!0)}if(a||l)o>0&&1>e&&(u=e.toFixed(o),e=parseFloat(u));else{var h=(s.split(oi)[1]||"").length;y(o)&&(o=Math.min(Math.max(t.minFrac,h),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+o)).toString()+"e"+-o);var p=(""+e).split(oi),d=p[0];p=p[1]||"";var g,v=0,m=t.lgSize,b=t.gSize;if(d.length>=m+b)for(v=d.length-m,g=0;v>g;g++)(v-g)%b===0&&0!==g&&(u+=n),u+=d.charAt(g);for(g=v;g<d.length;g++)(d.length-g)%m===0&&0!==g&&(u+=n),u+=d.charAt(g);for(;p.length<o;)p+="0";o&&"0"!==o&&(u+=r+p.substr(0,o))}return 0===e&&(i=!1),c.push(i?t.negPre:t.posPre,u,i?t.negSuf:t.posSuf),c.join("")}function jn(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Un(e,t,n,r){return n=n||0,function(o){var i=o["get"+e]();return(n>0||i>-n)&&(i+=n),0===i&&-12==n&&(i=12),jn(i,t,r)}}function qn(e,t){return function(n,r){var o=n["get"+e](),i=Er(t?"SHORT"+e:e);return r[i][o]}}function Bn(e,t,n){var r=-1*n,o=r>=0?"+":"";return o+=jn(Math[r>0?"floor":"ceil"](r/60),2)+jn(Math.abs(r%60),2)}function Wn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function Vn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Hn(e){return function(t){var n=Wn(t.getFullYear()),r=Vn(t),o=+r-+n,i=1+Math.round(o/6048e5);return jn(i,e)}}function zn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Gn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Yn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Qn(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),o=0,i=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(o=p(t[9]+t[10]),i=p(t[9]+t[11])),a.call(r,p(t[1]),p(t[2])-1,p(t[3]));var u=p(t[4]||0)-o,l=p(t[5]||0)-i,c=p(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,o){var a,s,u="",l=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,E(n)&&(n=si.test(n)?p(n):t(n)),C(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;r;)s=ai.exec(r),s?(l=B(l,s,1),r=l.pop()):(l.push(r),r=null);var c=n.getTimezoneOffset();return o&&(c=Y(o,n.getTimezoneOffset()),n=K(n,o,!0)),i(l,function(t){a=ii[t],u+=a?a(n,e.DATETIME_FORMATS,c):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Kn(){return function(e,t){return y(t)&&(t=2),z(e,t)}}function Zn(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):p(t),isNaN(t)?e:(C(e)&&(e=e.toString()),Fr(e)||E(e)?(n=!n||isNaN(n)?0:p(n),n=0>n&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function Jn(e){return function(t,n,r){function i(e,t){for(var r=0;r<n.length;r++){var o=n[r](e,t);if(0!==o)return o}return 0}function a(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function u(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function l(e,t){var n=typeof e,r=typeof t;return n===r&&"object"===n&&(e=u(e),t=u(t)),n===r?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}return o(t)?(n=Fr(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,r=t||v;if(E(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return a(l,n);if(r=e(t),r.constant){var o=r();return a(function(e,t){return l(e[o],t[o])},n)}}return a(function(e,t){return l(r(e),r(t))},n)}),$r.call(t).sort(a(i,r))):t}}function Xn(e){return T(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function er(e,t){e.$name=t}function tr(e,t,r,o,a){var s=this,u=[],l=s.$$parentForm=e.parent().controller("form")||hi;s.$error={},s.$$success={},s.$pending=n,s.$name=a(t.name||t.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,l.$addControl(s),s.$rollbackViewValue=function(){i(u,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){i(u,function(e){e.$commitViewValue()})},s.$addControl=function(e){he(e.$name,"input"),u.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],i(s.$pending,function(t,n){s.$setValidity(n,null,e)}),i(s.$error,function(t,n){s.$setValidity(n,null,e)}),i(s.$$success,function(t,n){s.$setValidity(n,null,e)}),F(u,e)},vr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var o=r.indexOf(n);-1===o&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(F(r,n),0===r.length&&delete e[t])},parentForm:l,$animate:o}),s.$setDirty=function(){o.removeClass(e,Yi),o.addClass(e,Qi),s.$dirty=!0,s.$pristine=!1,l.$setDirty()},s.$setPristine=function(){o.setClass(e,Yi,Qi+" "+pi),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,i(u,function(e){e.$setPristine()})},s.$setUntouched=function(){i(u,function(e){e.$setUntouched()})},s.$setSubmitted=function(){o.addClass(e,pi),s.$submitted=!0,l.$setSubmitted()}}function nr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function rr(e,t,n,r,o,i){or(e,t,n,r,o,i),nr(r)}function or(e,t,n,r,o,i){var a=_r(t[0].type);if(!o.android){var s=!1;t.on("compositionstart",function(e){s=!0}),t.on("compositionend",function(){s=!1,u()})}var u=function(e){if(l&&(i.defer.cancel(l),l=null),!s){var o=t.val(),u=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(o=Ur(o)),(r.$viewValue!==o||""===o&&r.$$hasNativeValidators)&&r.$setViewValue(o,u)}};if(o.hasEvent("input"))t.on("input",u);else{var l,c=function(e,t,n){l||(l=i.defer(function(){l=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||c(e,this,this.value)}),o.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",u),r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function ir(e,t){if(S(e))return e;if(E(e)){Ci.lastIndex=0;var n=Ci.exec(e);if(n){var r=+n[1],o=+n[2],i=0,a=0,s=0,u=0,l=Wn(r),c=7*(o-1);return t&&(i=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(r,0,l.getDate()+c,i,a,s,u)}}return NaN}function ar(e,t){return function(n,r){var o,a;if(S(n))return n;if(E(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),mi.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},i(o,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function sr(e,t,r,o){return function(i,a,s,u,l,c,f){function h(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return b(e)?S(e)?e:r(e):n}ur(i,a,s,u),or(i,a,s,u,l,c);var d,g=u&&u.$options&&u.$options.timezone;if(u.$$parserName=e,u.$parsers.push(function(e){if(u.$isEmpty(e))return null;if(t.test(e)){var o=r(e,d);return g&&(o=K(o,g)),o}return n}),u.$formatters.push(function(e){if(e&&!S(e))throw Xi("datefmt","Expected `{0}` to be a date",e);return h(e)?(d=e,d&&g&&(d=K(d,g,!0)),f("date")(e,o,g)):(d=null,"")}),b(s.min)||s.ngMin){var v;u.$validators.min=function(e){return!h(e)||y(v)||r(e)>=v},s.$observe("min",function(e){v=p(e),u.$validate()})}if(b(s.max)||s.ngMax){var m;u.$validators.max=function(e){return!h(e)||y(m)||r(e)<=m},s.$observe("max",function(e){m=p(e),u.$validate()})}}}function ur(e,t,r,o){var i=t[0],a=o.$$hasNativeValidators=_(i.validity);a&&o.$parsers.push(function(e){var r=t.prop(br)||{};return r.badInput&&!r.typeMismatch?n:e})}function lr(e,t,r,o,i,a){if(ur(e,t,r,o),or(e,t,r,o,i,a),o.$$parserName="number",o.$parsers.push(function(e){return o.$isEmpty(e)?null:_i.test(e)?parseFloat(e):n}),o.$formatters.push(function(e){if(!o.$isEmpty(e)){if(!C(e))throw Xi("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),b(r.min)||r.ngMin){var s;o.$validators.min=function(e){return o.$isEmpty(e)||y(s)||e>=s},r.$observe("min",function(e){b(e)&&!C(e)&&(e=parseFloat(e,10)),s=C(e)&&!isNaN(e)?e:n,o.$validate()})}if(b(r.max)||r.ngMax){var u;o.$validators.max=function(e){return o.$isEmpty(e)||y(u)||u>=e},r.$observe("max",function(e){b(e)&&!C(e)&&(e=parseFloat(e,10)),u=C(e)&&!isNaN(e)?e:n,o.$validate()})}}function cr(e,t,n,r,o,i){or(e,t,n,r,o,i),nr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||yi.test(n)}}function fr(e,t,n,r,o,i){or(e,t,n,r,o,i),nr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||bi.test(n)}}function hr(e,t,n,r){y(n.name)&&t.attr("name",u());var o=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",o),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function pr(e,t,n,o,i){var a;if(b(o)){if(a=e(o),!a.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,o);return a(t)}return i}function dr(e,t,n,r,o,i,a,s){var u=pr(s,e,"ngTrueValue",n.ngTrueValue,!0),l=pr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return q(e,u)}),r.$parsers.push(function(e){return e?u:l})}function gr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var o=e[r],i=0;i<t.length;i++)if(o==t[i])continue e;n.push(o)}return n}function o(e){var t=[];return Fr(e)?(i(e,function(e){t=t.concat(o(e))}),t):E(e)?e.split(" "):_(e)?(i(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,u){function l(e){var t=f(e,1);u.$addClass(t)}function c(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||ge(),r=[];return i(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function h(e,t){var o=r(t,e),i=r(e,t);o=f(o,1),i=f(i,-1),o&&o.length&&n.addClass(s,o),i&&i.length&&n.removeClass(s,i)}function p(e){if(t===!0||a.$index%2===t){var n=o(e||[]);if(d){if(!q(e,d)){var r=o(d);h(r,n)}}else l(n)}d=U(e)}var d;a.$watch(u[e],p,!0),u.$observe("class",function(t){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var i=1&n;if(i!==(1&r)){var s=o(a.$eval(u[e]));i===t?l(s):c(s)}})}}}]}function vr(e){function t(e,t,u){t===n?r("$pending",e,u):o("$pending",e,u),N(t)?t?(f(s.$error,e,u),c(s.$$success,e,u)):(c(s.$error,e,u),f(s.$$success,e,u)):(f(s.$error,e,u),f(s.$$success,e,u)),s.$pending?(i(Ji,!0),s.$valid=s.$invalid=n,a("",null)):(i(Ji,!1),s.$valid=mr(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var l;l=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,a(e,l),h.$setValidity(e,l,s)}function r(e,t,n){s[e]||(s[e]={}),c(s[e],t,n)}function o(e,t,r){s[e]&&f(s[e],t,r),mr(s[e])&&(s[e]=n)}function i(e,t){t&&!l[e]?(p.addClass(u,e),l[e]=!0):!t&&l[e]&&(p.removeClass(u,e),l[e]=!1)}function a(e,t){e=e?"-"+ue(e,"-"):"",i(zi+e,t===!0),i(Gi+e,t===!1)}var s=e.ctrl,u=e.$element,l={},c=e.set,f=e.unset,h=e.parentForm,p=e.$animate;l[Gi]=!(l[zi]=u.hasClass(zi)),s.$setValidity=t}function mr(e){if(e)for(var t in e)return!1;return!0}var yr=/^\/(.+)\/([a-z]*)$/,br="validity",_r=function(e){return E(e)?e.toLowerCase():e},wr=Object.prototype.hasOwnProperty,Er=function(e){return E(e)?e.toUpperCase():e},Cr=function(e){return E(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Sr=function(e){return E(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(_r=Cr,Er=Sr);var Tr,Ar,Pr,xr,$r=[].slice,Or=[].splice,Lr=[].push,Nr=Object.prototype.toString,Dr=Object.getPrototypeOf,Ir=r("ng"),Mr=e.angular||(e.angular={}),Rr=0;Tr=t.documentMode,g.$inject=[],v.$inject=[];var kr,Fr=Array.isArray,jr=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Ur=function(e){return E(e)?e.trim():e},qr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Br=function(){if(b(Br.isActive_))return Br.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return Br.isActive_=e},Wr=function(){if(b(Wr.name_))return Wr.name_;var e,n,r,o,i=Vr.length;for(n=0;i>n;++n)if(r=Vr[n],e=t.querySelector("["+r.replace(":","\\:")+"jq]")){o=e.getAttribute(r+"jq");break}return Wr.name_=o},Vr=["ng-","data-ng-","ng:","x-ng-"],Hr=/[A-Z]/g,zr=!1,Gr=1,Yr=2,Qr=3,Kr=8,Zr=9,Jr=11,Xr={full:"1.4.0",major:1,minor:4,dot:0,codeName:"jaracimrman-existence"};Ae.expando="ng339";var eo=Ae.cache={},to=1,no=function(e,t,n){e.addEventListener(t,n,!1)},ro=function(e,t,n){e.removeEventListener(t,n,!1)};Ae._data=function(e){return this.cache[e[this.expando]]||{}};var oo=/([\:\-\_]+(.))/g,io=/^moz([A-Z])/,ao={mouseleave:"mouseout",mouseenter:"mouseover"},so=r("jqLite"),uo=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,lo=/<|&#?\w+;/,co=/<([\w:]+)/,fo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ho={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ho.optgroup=ho.option,ho.tbody=ho.tfoot=ho.colgroup=ho.caption=ho.thead,ho.th=ho.td;var po=Ae.prototype={ready:function(n){function r(){o||(o=!0,n())}var o=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),Ae(e).on("load",r))},toString:function(){var e=[];return i(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Ar(e>=0?this[e]:this[this.length+e])},length:0,push:Lr,sort:[].sort,splice:[].splice},go={};i("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){go[_r(e)]=e});var vo={};i("input,select,option,textarea,button,form,details".split(","),function(e){vo[e]=!0});var mo={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};i({data:Ne,removeData:Oe},function(e,t){Ae[t]=e}),i({data:Ne,inheritedData:Fe,scope:function(e){return Ar.data(e,"$scope")||Fe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Ar.data(e,"$isolateScope")||Ar.data(e,"$isolateScopeNoTemplate")},controller:ke,injector:function(e){return Fe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:De,css:function(e,t,n){return t=we(t),b(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var o=e.nodeType;if(o!==Qr&&o!==Yr&&o!==Kr){var i=_r(t);if(go[i]){if(!b(r))return e[t]||(e.attributes.getNamedItem(t)||g).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(b(r))e.setAttribute(t,r);else if(e.getAttribute){var a=e.getAttribute(t,2);return null===a?n:a}}},prop:function(e,t,n){return b(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(y(t)){var n=e.nodeType;return n===Gr||n===Qr?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(y(t)){if(e.multiple&&"select"===k(e)){var n=[];return i(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return y(t)?e.innerHTML:(xe(e,!0),void(e.innerHTML=t))},empty:je},function(e,t){Ae.prototype[t]=function(t,r){var o,i,a=this.length;if(e!==je&&(2==e.length&&e!==De&&e!==ke?t:r)===n){if(_(t)){for(o=0;a>o;o++)if(e===Ne)e(this[o],t);else for(i in t)e(this[o],i,t[i]);return this}for(var s=e.$dv,u=s===n?Math.min(a,1):a,l=0;u>l;l++){var c=e(this[l],t,r);s=s?s+c:c}return s}for(o=0;a>o;o++)e(this[o],t,r);return this}}),i({removeData:Oe,on:function $a(e,t,n,r){if(b(r))throw so("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ce(e)){var o=Le(e,!0),i=o.events,a=o.handle;a||(a=o.handle=Ve(e,i));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length;u--;){t=s[u];var l=i[t];l||(i[t]=[],"mouseenter"===t||"mouseleave"===t?$a(e,ao[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&a(e,t)}):"$destroy"!==t&&no(e,t,a),l=i[t]),l.push(n)}}},off:$e,one:function(e,t,n){e=Ar(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;xe(e),i(new Ae(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return i(e.childNodes,function(e){e.nodeType===Gr&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Gr||n===Jr){t=new Ae(t);for(var r=0,o=t.length;o>r;r++){var i=t[r];e.appendChild(i)}}},prepend:function(e,t){if(e.nodeType===Gr){var n=e.firstChild;i(new Ae(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Ar(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Ue,detach:function(e){Ue(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Ae(t);for(var o=0,i=t.length;i>o;o++){var a=t[o];r.insertBefore(a,n.nextSibling),n=a}},addClass:Me,removeClass:Ie,toggleClass:function(e,t,n){t&&i(t.split(" "),function(t){var r=n;y(r)&&(r=!De(e,t)),(r?Me:Ie)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Jr?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Pe,triggerHandler:function(e,t,n){var r,o,a,s=t.type||t,u=Le(e),l=u&&u.events,c=l&&l[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:g,type:s,target:e},t.type&&(r=f(r,t)),o=U(c),a=n?[r].concat(n):[r],i(o,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Ae.prototype[t]=function(t,n,r){for(var o,i=0,a=this.length;a>i;i++)y(o)?(o=e(this[i],t,n,r),b(o)&&(o=Ar(o))):Re(o,e(this[i],t,n,r));return b(o)?o:this},Ae.prototype.bind=Ae.prototype.on,Ae.prototype.unbind=Ae.prototype.off}),Ge.prototype={put:function(e,t){this[ze(e,this.nextUid)]=t},get:function(e){return this[ze(e,this.nextUid)]},remove:function(e){var t=this[e=ze(e,this.nextUid)];return delete this[e],t}};var yo=[function(){this.$get=[function(){return Ge}]}],bo=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,_o=/,/,wo=/^\s*(_?)(\S+?)\1\s*$/,Eo=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Co=r("$injector");Ke.$$annotate=Qe;var So=r("$animate"),To=1,Ao="ng-animate",Po=function(){this.$get=["$q","$$rAF",function(e,t){function n(){}return n.all=g,n.chain=g,n.prototype={end:g,cancel:g,resume:g,pause:g,complete:g,then:function(n,r){return e(function(e){t(function(){e()})}).then(n,r)}},n}]},xo=function(){var e=new Ge,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function o(n,o,a){var s=e.get(n);s||(e.put(n,s={}),t.push(n)),o&&i(o.split(" "),function(e){e&&(s[e]=!0)}),a&&i(a.split(" "),function(e){e&&(s[e]=!1)}),t.length>1||r.$$postDigest(function(){i(t,function(t){var n=e.get(t);if(n){var r=et(t.attr("class")),o="",a="";i(n,function(e,t){var n=!!r[t];e!==n&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),i(t,function(e){o&&Me(e,o),a&&Ie(e,a)}),e.remove(t)}}),t.length=0})}return{enabled:g,on:g,off:g,pin:g,push:function(e,t,r,i){return i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&o(e,r.addClass,r.removeClass),new n}}}]},$o=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw So("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var o=n+"-animation";t.$$registeredAnimations[n.substr(1)]=o,e.factory(o,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Ao+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw So("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Ao)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=Xe(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,o,i){return r=r&&Ar(r),o=o&&Ar(o),r=r||o.parent(),t(n,r,o),e.push(n,"enter",tt(i))},move:function(n,r,o,i){return r=r&&Ar(r),o=o&&Ar(o),r=r||o.parent(),t(n,r,o),e.push(n,"move",tt(i))},leave:function(t,n){return e.push(t,"leave",tt(n),function(){t.remove()})},addClass:function(t,n,r){return r=tt(r),r.addClass=Je(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=tt(r),r.removeClass=Je(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,o){return o=tt(o),o.addClass=Je(o.addClass,n),o.removeClass=Je(o.removeClass,r),e.push(t,"setClass",o)},animate:function(t,n,r,o,i){return i=tt(i),i.from=i.from?f(i.from,n):n,i.to=i.to?f(i.to,r):r,o=o||"ng-inline-animate",i.tempClasses=Je(i.tempClasses,o),e.push(t,"animate",i)}}}]}],Oo=r("$compile");st.$inject=["$provide","$$sanitizeUriProvider"];var Lo=/^((?:x|data)[\:\-_])/i,No=r("$controller"),Do=/^(\S+)(\s+as\s+(\w+))?$/,Io="application/json",Mo={"Content-Type":Io+";charset=utf-8"},Ro=/^\[|^\{(?!\{)/,ko={"[":/]$/,"{":/}$/},Fo=/^\)\]\}',?\n/,jo=Mr.$interpolateMinErr=r("$interpolate");jo.throwNoconcat=function(e){throw jo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},jo.interr=function(e,t){return jo("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Uo=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,qo={http:80,https:443,ftp:21},Bo=r("$location"),Wo={$$html5:!1,$$replace:!1,absUrl:Bt("$$absUrl"),url:function(e){if(y(e))return this.$$url;var t=Uo.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Bt("$$protocol"),host:Bt("$$host"),port:Bt("$$port"),path:Wt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(E(e)||C(e))e=e.toString(),this.$$search=X(e);else{if(!_(e))throw Bo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=j(e,{}),i(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:y(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Wt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};i([qt,Ut,jt],function(e){e.prototype=Object.create(Wo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==jt||!this.$$html5)throw Bo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=y(t)?null:t,this}});var Vo=r("$parse"),Ho=Function.prototype.call,zo=Function.prototype.apply,Go=Function.prototype.bind,Yo=ge();i("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Yo[e]=!0});var Qo={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Ko=function(e){this.options=e};Ko.prototype={constructor:Ko,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),o=Yo[t],i=Yo[n],a=Yo[r];if(o||i||a){var s=a?r:i?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=b(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Vo("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=_r(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,o=!1;this.index<this.text.length;){var i=this.text.charAt(this.index);if(r+=i,o){if("u"===i){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Qo[i];n+=s||i}o=!1}else if("\\"===i)o=!0;else{if(i===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=i}this.index++}this.throwError("Unterminated quote",t)}};
var Zo=function(e,t){this.lexer=e,this.options=t};Zo.Program="Program",Zo.ExpressionStatement="ExpressionStatement",Zo.AssignmentExpression="AssignmentExpression",Zo.ConditionalExpression="ConditionalExpression",Zo.LogicalExpression="LogicalExpression",Zo.BinaryExpression="BinaryExpression",Zo.UnaryExpression="UnaryExpression",Zo.CallExpression="CallExpression",Zo.MemberExpression="MemberExpression",Zo.Identifier="Identifier",Zo.Literal="Literal",Zo.ArrayExpression="ArrayExpression",Zo.Property="Property",Zo.ObjectExpression="ObjectExpression",Zo.ThisExpression="ThisExpression",Zo.NGValueParameter="NGValueParameter",Zo.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Zo.Program,body:e}},expressionStatement:function(){return{type:Zo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:Zo.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Zo.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Zo.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Zo.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Zo.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Zo.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Zo.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Zo.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Zo.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=j(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Zo.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Zo.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Zo.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Zo.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Zo.Identifier,name:e.text}},constant:function(){return{type:Zo.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Zo.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Zo.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Zo.ObjectExpression,properties:t}},throwError:function(e,t){throw Vo("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Vo("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Vo("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,o){if(this.tokens.length>e){var i=this.tokens[e],a=i.text;if(a===t||a===n||a===r||a===o||!t&&!n&&!r&&!o)return i}return!1},expect:function(e,t,n,r){var o=this.peek(e,t,n,r);return o?(this.tokens.shift(),o):!1},constants:{"true":{type:Zo.Literal,value:!0},"false":{type:Zo.Literal,value:!1},"null":{type:Zo.Literal,value:null},undefined:{type:Zo.Literal,value:n},"this":{type:Zo.ThisExpression}}},on.prototype={compile:function(e,t){var r=this,o=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Jt(o,r.$filter);var a,s="";if(this.stage="assign",a=tn(o)){this.state.computing="assign";var u=this.nextId();this.recurse(a,u),s="fn.assign="+this.generateFunction("assign","s,v,l")}var l=Xt(o.body);r.stage="inputs",i(l,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var o=r.nextId();r.recurse(e,o),r.return_(o),r.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(o);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",c)(this.$filter,zt,Gt,Yt,Qt,Kt,e);return this.state=this.stage=n,f.literal=nn(o),f.constant=rn(o),f},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return i(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return i(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,o,a,s){var u,l,c,f,h=this;if(o=o||g,!s&&b(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,o,a,!0));switch(e.type){case Zo.Program:i(e.body,function(t,r){h.recurse(t.expression,n,n,function(e){l=e}),r!==e.body.length-1?h.current().body.push(l,";"):h.return_(l)});break;case Zo.Literal:f=this.escape(e.value),this.assign(t,f),o(f);break;case Zo.UnaryExpression:this.recurse(e.argument,n,n,function(e){l=e}),f=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,f),o(f);break;case Zo.BinaryExpression:this.recurse(e.left,n,n,function(e){u=e}),this.recurse(e.right,n,n,function(e){l=e}),f="+"===e.operator?this.plus(u,l):"-"===e.operator?this.ifDefined(u,0)+e.operator+this.ifDefined(l,0):"("+u+")"+e.operator+"("+l+")",this.assign(t,f),o(f);break;case Zo.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),o(t);break;case Zo.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),o(t);break;case Zo.Identifier:t=t||this.nextId(),r&&(r.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),zt(e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),function(){h.if_("inputs"===h.stage||"s",function(){a&&1!==a&&h.if_(h.not(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),(h.state.expensiveChecks||un(e.name))&&h.addEnsureSafeObject(t),o(t);break;case Zo.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,u,n,function(){h.if_(h.notNull(u),function(){e.computed?(l=h.nextId(),h.recurse(e.property,l),h.addEnsureSafeMemberName(l),a&&1!==a&&h.if_(h.not(h.computedMember(u,l)),h.lazyAssign(h.computedMember(u,l),"{}")),f=h.ensureSafeObject(h.computedMember(u,l)),h.assign(t,f),r&&(r.computed=!0,r.name=l)):(zt(e.property.name),a&&1!==a&&h.if_(h.not(h.nonComputedMember(u,e.property.name)),h.lazyAssign(h.nonComputedMember(u,e.property.name),"{}")),f=h.nonComputedMember(u,e.property.name),(h.state.expensiveChecks||un(e.property.name))&&(f=h.ensureSafeObject(f)),h.assign(t,f),r&&(r.computed=!1,r.name=e.property.name)),o(t)})},!!a);break;case Zo.CallExpression:t=t||this.nextId(),e.filter?(l=h.filter(e.callee.name),c=[],i(e.arguments,function(e){var t=h.nextId();h.recurse(e,t),c.push(t)}),f=l+"("+c.join(",")+")",h.assign(t,f),o(t)):(l=h.nextId(),u={},c=[],h.recurse(e.callee,l,u,function(){h.if_(h.notNull(l),function(){h.addEnsureSafeFunction(l),i(e.arguments,function(e){h.recurse(e,h.nextId(),n,function(e){c.push(h.ensureSafeObject(e))})}),u.name?(h.state.expensiveChecks||h.addEnsureSafeObject(u.context),f=h.member(u.context,u.name,u.computed)+"("+c.join(",")+")"):f=l+"("+c.join(",")+")",f=h.ensureSafeObject(f),h.assign(t,f),o(t)})}));break;case Zo.AssignmentExpression:if(l=this.nextId(),u={},!en(e.left))throw Vo("lval","Trying to assing a value to a non l-value");this.recurse(e.left,n,u,function(){h.if_(h.notNull(u.context),function(){h.recurse(e.right,l),h.addEnsureSafeObject(h.member(u.context,u.name,u.computed)),f=h.member(u.context,u.name,u.computed)+e.operator+l,h.assign(t,f),o(t||f)})},1);break;case Zo.ArrayExpression:c=[],i(e.elements,function(e){h.recurse(e,h.nextId(),n,function(e){c.push(e)})}),f="["+c.join(",")+"]",this.assign(t,f),o(f);break;case Zo.ObjectExpression:c=[],i(e.properties,function(e){h.recurse(e.value,h.nextId(),n,function(t){c.push(h.escape(e.key.type===Zo.Identifier?e.key.name:""+e.key.value)+":"+t)})}),f="{"+c.join(",")+"}",this.assign(t,f),o(f);break;case Zo.ThisExpression:this.assign(t,"s"),o("s");break;case Zo.NGValueParameter:this.assign(t,"v"),o("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},lazyRecurse:function(e,t,n,r,o,i){var a=this;return function(){a.recurse(e,t,n,r,o,i)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(E(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(C(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Vo("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},an.prototype={compile:function(e,t){var n=this,r=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,Jt(r,n.$filter);var o,a;(o=tn(r))&&(a=this.recurse(o));var s,u=Xt(r.body);u&&(s=[],i(u,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var l=[];i(r.body,function(e){l.push(n.recurse(e.expression))});var c=0===r.body.length?function(){}:1===r.body.length?l[0]:function(e,t){var n;return i(l,function(r){n=r(e,t)}),n};return a&&(c.assign=function(e,t,n){return a(e,n,t)}),s&&(c.inputs=s),c.literal=nn(r),c.constant=rn(r),c},recurse:function(e,t,r){var o,a,s,u=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Zo.Literal:return this.value(e.value,t);case Zo.UnaryExpression:return a=this.recurse(e.argument),this["unary"+e.operator](a,t);case Zo.BinaryExpression:return o=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](o,a,t);case Zo.LogicalExpression:return o=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](o,a,t);case Zo.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Zo.Identifier:return zt(e.name,u.expression),u.identifier(e.name,u.expensiveChecks||un(e.name),t,r,u.expression);case Zo.MemberExpression:return o=this.recurse(e.object,!1,!!r),e.computed||(zt(e.property.name,u.expression),a=e.property.name),e.computed&&(a=this.recurse(e.property)),e.computed?this.computedMember(o,a,t,r,u.expression):this.nonComputedMember(o,a,u.expensiveChecks,t,r,u.expression);case Zo.CallExpression:return s=[],i(e.arguments,function(e){s.push(u.recurse(e))}),e.filter&&(a=this.$filter(e.callee.name)),e.filter||(a=this.recurse(e.callee,!0)),e.filter?function(e,r,o,i){for(var u=[],l=0;l<s.length;++l)u.push(s[l](e,r,o,i));var c=a.apply(n,u,i);return t?{context:n,name:n,value:c}:c}:function(e,n,r,o){var i,l=a(e,n,r,o);if(null!=l.value){Gt(l.context,u.expression),Yt(l.value,u.expression);for(var c=[],f=0;f<s.length;++f)c.push(Gt(s[f](e,n,r,o),u.expression));i=Gt(l.value.apply(l.context,c),u.expression)}return t?{value:i}:i};case Zo.AssignmentExpression:return o=this.recurse(e.left,!0,1),a=this.recurse(e.right),function(e,n,r,i){var s=o(e,n,r,i),l=a(e,n,r,i);return Gt(s.value,u.expression),s.context[s.name]=l,t?{value:l}:l};case Zo.ArrayExpression:return s=[],i(e.elements,function(e){s.push(u.recurse(e))}),function(e,n,r,o){for(var i=[],a=0;a<s.length;++a)i.push(s[a](e,n,r,o));return t?{value:i}:i};case Zo.ObjectExpression:return s=[],i(e.properties,function(e){s.push({key:e.key.type===Zo.Identifier?e.key.name:""+e.key.value,value:u.recurse(e.value)})}),function(e,n,r,o){for(var i={},a=0;a<s.length;++a)i[s[a].key]=s[a].value(e,n,r,o);return t?{value:i}:i};case Zo.ThisExpression:return function(e){return t?{value:e}:e};case Zo.NGValueParameter:return function(e,n,r,o){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,o,i){var a=e(n,r,o,i);return a=b(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,o,i){var a=e(n,r,o,i);return a=b(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,o,i){var a=!e(n,r,o,i);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a),u=t(r,o,i,a),l=Kt(s,u);return n?{value:l}:l}},"binary-":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a),u=t(r,o,i,a),l=(b(s)?s:0)-(b(u)?u:0);return n?{value:l}:l}},"binary*":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)*t(r,o,i,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)/t(r,o,i,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)%t(r,o,i,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)===t(r,o,i,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)!==t(r,o,i,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)==t(r,o,i,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)!=t(r,o,i,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)<t(r,o,i,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)>t(r,o,i,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)<=t(r,o,i,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)>=t(r,o,i,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)&&t(r,o,i,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)||t(r,o,i,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(o,i,a,s){var u=e(o,i,a,s)?t(o,i,a,s):n(o,i,a,s);return r?{value:u}:u}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,r,o,i){return function(a,s,u,l){var c=s&&e in s?s:a;o&&1!==o&&c&&!c[e]&&(c[e]={});var f=c?c[e]:n;return t&&Gt(f,i),r?{context:c,name:e,value:f}:f}},computedMember:function(e,t,n,r,o){return function(i,a,s,u){var l,c,f=e(i,a,s,u);return null!=f&&(l=t(i,a,s,u),zt(l,o),r&&1!==r&&f&&!f[l]&&(f[l]={}),c=f[l],Gt(c,o)),n?{context:f,name:l,value:c}:c}},nonComputedMember:function(e,t,r,o,i,a){return function(s,u,l,c){var f=e(s,u,l,c);i&&1!==i&&f&&!f[t]&&(f[t]={});var h=null!=f?f[t]:n;return(r||un(t))&&Gt(h,a),o?{context:f,name:t,value:h}:h}},inputs:function(e,t){return function(n,r,o,i){return i?i[t]:e(n,r,o)}}};var Jo=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Zo(this.lexer),this.astCompiler=n.csp?new an(this.ast,t):new on(this.ast,t)};Jo.prototype={constructor:Jo,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var Xo=(ge(),ge(),Object.prototype.valueOf),ei=r("$sce"),ti={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Oo=r("$compile"),ni=t.createElement("a"),ri=Tn(e.location.href);xn.$inject=["$document"],On.$inject=["$provide"],Rn.$inject=["$locale"],kn.$inject=["$locale"];var oi=".",ii={yyyy:Un("FullYear",4),yy:Un("FullYear",2,0,!0),y:Un("FullYear",1),MMMM:qn("Month"),MMM:qn("Month",!0),MM:Un("Month",2,1),M:Un("Month",1,1),dd:Un("Date",2),d:Un("Date",1),HH:Un("Hours",2),H:Un("Hours",1),hh:Un("Hours",2,-12),h:Un("Hours",1,-12),mm:Un("Minutes",2),m:Un("Minutes",1),ss:Un("Seconds",2),s:Un("Seconds",1),sss:Un("Milliseconds",3),EEEE:qn("Day"),EEE:qn("Day",!0),a:zn,Z:Bn,ww:Hn(2),w:Hn(1),G:Gn,GG:Gn,GGG:Gn,GGGG:Yn},ai=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,si=/^\-?\d+$/;Qn.$inject=["$locale"];var ui=m(_r),li=m(Er);Jn.$inject=["$parse"];var ci=m({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Nr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),fi={};i(go,function(e,t){function n(e,n,o){e.$watch(o[r],function(e){o.$set(t,!!e)})}if("multiple"!=e){var r=ut("ng-"+t),o=n;"checked"===e&&(o=function(e,t,o){o.ngModel!==o[r]&&n(e,t,o)}),fi[r]=function(){return{restrict:"A",priority:100,link:o}}}}),i(mo,function(e,t){fi[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var o=r.ngPattern.match(yr);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),i(["src","srcset","href"],function(e){var t=ut("ng-"+e);fi[t]=function(){return{priority:99,link:function(n,r,o){var i=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Nr.call(r.prop("href"))&&(a="xlinkHref",o.$attr[a]="xlink:href",i=null),o.$observe(t,function(t){return t?(o.$set(a,t),void(Tr&&i&&r.prop(i,o[a]))):void("href"===e&&o.$set(a,null))})}}}});var hi={$addControl:g,$$renameControl:er,$removeControl:g,$setValidity:g,$setDirty:g,$setPristine:g,$setSubmitted:g},pi="ng-submitted";tr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var di=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:tr,compile:function(r,o){r.addClass(Yi).addClass(zi);var i=o.name?"name":e&&o.ngForm?"ngForm":!1;return{pre:function(e,r,o,a){if(!("action"in o)){var s=function(t){e.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),t.preventDefault()};no(r[0],"submit",s),r.on("$destroy",function(){t(function(){ro(r[0],"submit",s)},0,!1)})}var u=a.$$parentForm;i&&(sn(e,a.$name,a,a.$name),o.$observe(i,function(t){a.$name!==t&&(sn(e,a.$name,n,a.$name),u.$$renameControl(a,t),sn(e,a.$name,a,a.$name))})),r.on("$destroy",function(){u.$removeControl(a),i&&sn(e,o[i],n,a.$name),f(a,hi)})}}}};return r}]},gi=di(),vi=di(!0),mi=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,yi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,bi=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,_i=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,wi=/^(\d{4})-(\d{2})-(\d{2})$/,Ei=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ci=/^(\d{4})-W(\d\d)$/,Si=/^(\d{4})-(\d\d)$/,Ti=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ai={text:rr,date:sr("date",wi,ar(wi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":sr("datetimelocal",Ei,ar(Ei,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:sr("time",Ti,ar(Ti,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:sr("week",Ci,ir,"yyyy-Www"),month:sr("month",Si,ar(Si,["yyyy","MM"]),"yyyy-MM"),number:lr,url:cr,email:fr,radio:hr,checkbox:dr,hidden:g,button:g,submit:g,reset:g,file:g},Pi=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,i,a,s){s[0]&&(Ai[_r(a.type)]||Ai.text)(o,i,a,s[0],t,e,n,r)}}}}],xi=/^(true|false|\d+)$/,$i=function(){return{restrict:"A",priority:100,compile:function(e,t){return xi.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Oi=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,o){e.$$addBindingInfo(r,o.ngBind),r=r[0],t.$watch(o.ngBind,function(e){r.textContent=e===n?"":e})}}}}],Li=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,o,i){var a=e(o.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(o,a.expressions),o=o[0],i.$observe("ngBindTemplate",function(e){o.textContent=e===n?"":e})}}}}],Ni=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,o){var i=t(o.ngBindHtml),a=t(o.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,o){n.$$addBindingInfo(r,o.ngBindHtml),t.$watch(a,function(){r.html(e.getTrustedHtml(i(t))||"")})}}}}],Di=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Ii=gr("",!0),Mi=gr("Odd",0),Ri=gr("Even",1),ki=Xn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Fi=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ji={},Ui={blur:!0,focus:!0};i("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=ut("ng-"+e);ji[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(o,i){var a=n(i[t],null,!0);return function(t,n){n.on(e,function(n){var o=function(){a(t,{$event:n})};Ui[e]&&r.$$phase?t.$evalAsync(o):t.$apply(o)})}}}}]});var qi=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,o,i,a){var s,u,l;n.$watch(o.ngIf,function(n){n?u||a(function(n,i){u=i,n[n.length++]=t.createComment(" end ngIf: "+o.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=de(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],Bi=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Mr.noop,compile:function(o,i){var a=i.ngInclude||i.src,s=i.onload||"",u=i.autoscroll;return function(o,i,l,c,f){var h,p,d,g=0,v=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).then(function(){p=null}),p=d,d=null)};o.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!b(u)||u&&!o.$eval(u)||t()},l=++g;r?(e(r,!0).then(function(e){if(l===g){var t=o.$new();c.template=e;var u=f(t,function(e){v(),n.enter(e,null,i).then(a)});h=t,d=u,h.$emit("$includeContentLoaded",r),o.$eval(s)}},function(){l===g&&(v(),o.$emit("$includeContentError",r))}),o.$emit("$includeContentRequested",r)):(v(),c.template=null)})}}}}],Wi=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,o,i){return/SVG/.test(r[0].toString())?(r.empty(),void e(Se(i.template,t).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(i.template),void e(r.contents())(n))}}}],Vi=Xn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Hi=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,o){var a=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?Ur(a):a,l=function(e){if(!y(e)){var t=[];return e&&i(e.split(u),function(e){e&&t.push(s?Ur(e):e)}),t}};o.$parsers.push(l),o.$formatters.push(function(e){return Fr(e)?e.join(a):n}),o.$isEmpty=function(e){return!e||!e.length}}}},zi="ng-valid",Gi="ng-invalid",Yi="ng-pristine",Qi="ng-dirty",Ki="ng-untouched",Zi="ng-touched",Ji="ng-pending",Xi=new r("ngModel"),ea=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,o,a,s,u,l,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(e);var h,p=a(r.ngModel),d=p.assign,v=p,m=d,_=null,w=this;this.$$setOptions=function(e){if(w.$options=e,e&&e.getterSetter){var t=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");v=function(e){var n=p(e);return T(n)&&(n=t(e)),n},m=function(e,t){T(p(e))?n(e,{$$$p:w.$modelValue}):d(e,w.$modelValue)}}else if(!p.assign)throw Xi("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,Z(o))},this.$render=g,this.$isEmpty=function(e){return y(e)||""===e||null===e||e!==e};var E=o.inheritedData("$formController")||hi,S=0;vr({ctrl:this,$element:o,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:E,$animate:s}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,s.removeClass(o,Qi),s.addClass(o,Yi)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,s.removeClass(o,Yi),s.addClass(o,Qi),E.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,s.setClass(o,Ki,Zi)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,s.setClass(o,Zi,Ki)},this.$rollbackViewValue=function(){u.cancel(_),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!C(w.$modelValue)||!isNaN(w.$modelValue)){var e=w.$$lastCommittedViewValue,t=w.$$rawModelValue,r=w.$valid,o=w.$modelValue,i=w.$options&&w.$options.allowInvalid;w.$$runValidators(t,e,function(e){i||r===e||(w.$modelValue=e?t:n,w.$modelValue!==o&&w.$$writeModelToScope())})}},this.$$runValidators=function(e,t,r){function o(){var e=w.$$parserName||"parse";return h!==n?(h||(i(w.$validators,function(e,t){u(t,null)}),i(w.$asyncValidators,function(e,t){u(t,null)})),u(e,h),h):(u(e,null),!0)}function a(){var n=!0;return i(w.$validators,function(r,o){var i=r(e,t);n=n&&i,u(o,i)}),n?!0:(i(w.$asyncValidators,function(e,t){u(t,null)}),!1)}function s(){var r=[],o=!0;i(w.$asyncValidators,function(i,a){var s=i(e,t);if(!D(s))throw Xi("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);u(a,n),r.push(s.then(function(){u(a,!0)},function(e){o=!1,u(a,!1)}))}),r.length?c.all(r).then(function(){l(o)},g):l(!0)}function u(e,t){f===S&&w.$setValidity(e,t)}function l(e){f===S&&r(e)}S++;var f=S;return o()&&a()?void s():void l(!1)},this.$commitViewValue=function(){var e=w.$viewValue;u.cancel(_),(w.$$lastCommittedViewValue!==e||""===e&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=e,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){w.$modelValue!==a&&w.$$writeModelToScope()}var r=w.$$lastCommittedViewValue,o=r;if(h=y(o)?n:!0)for(var i=0;i<w.$parsers.length;i++)if(o=w.$parsers[i](o),y(o)){h=!1;break}C(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=v(e));var a=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=o,s&&(w.$modelValue=o,t()),w.$$runValidators(o,w.$$lastCommittedViewValue,function(e){s||(w.$modelValue=e?o:n,t())})},this.$$writeModelToScope=function(){m(e,w.$modelValue),i(w.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){w.$viewValue=e,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,o=w.$options;o&&b(o.debounce)&&(n=o.debounce,C(n)?r=n:C(n[t])?r=n[t]:C(n["default"])&&(r=n["default"])),u.cancel(_),r?_=u(function(){w.$commitViewValue()},r):l.$$phase?w.$commitViewValue():e.$apply(function(){w.$commitViewValue()})},e.$watch(function(){var t=v(e);if(t!==w.$modelValue&&(w.$modelValue===w.$modelValue||t===t)){w.$modelValue=w.$$rawModelValue=t,h=n;for(var r=w.$formatters,o=r.length,i=t;o--;)i=r[o](i);w.$viewValue!==i&&(w.$viewValue=w.$$lastCommittedViewValue=i,w.$render(),w.$$runValidators(t,i,g))}return t})}],ta=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ea,priority:1,compile:function(t){return t.addClass(Yi).addClass(Ki).addClass(zi),{pre:function(e,t,n,r){var o=r[0],i=r[1]||hi;o.$$setOptions(r[2]&&r[2].$options),i.$addControl(o),n.$observe("name",function(e){o.$name!==e&&i.$$renameControl(o,e)}),e.$on("$destroy",function(){i.$removeControl(o)})},post:function(t,n,r,o){var i=o[0];i.$options&&i.$options.updateOn&&n.on(i.$options.updateOn,function(e){i.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){i.$touched||(e.$$phase?t.$evalAsync(i.$setTouched):t.$apply(i.$setTouched))})}}}}}],na=/(\s+|^)default(\s+|$)/,ra=function(){
return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=j(e.$eval(t.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Ur(this.$options.updateOn.replace(na,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},oa=Xn({terminal:!0,priority:1e3}),ia=r("ngOptions"),aa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,sa=["$compile","$parse",function(e,n){function r(e,t,r){function i(e,t,n,r,o){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=o}var a=e.match(aa);if(!a)throw ia("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Z(t));var s=a[5]||a[7],u=a[6],l=/ as /.test(a[0])&&a[1],c=a[9],f=n(a[2]?a[1]:s),h=l&&n(l),p=h||f,d=c&&n(c),g=c?function(e,t){return d(r,t)}:function(e){return ze(e)},v=function(e,t){return g(e,E(e,t))},m=n(a[2]||a[1]),y=n(a[3]||""),b=n(a[4]||""),_=n(a[8]),w={},E=u?function(e,t){return w[u]=t,w[s]=e,w}:function(e){return w[s]=e,w};return{trackBy:c,getTrackByValue:v,getWatchables:n(_,function(e){var t=[];return e=e||[],Object.keys(e).forEach(function(n){var o=E(e[n],n),i=g(e[n],o);if(t.push(i),a[2]||a[1]){var s=m(r,o);t.push(s)}if(a[4]){var u=b(r,o);t.push(u)}}),t}),getOptions:function(){var e,t=[],n={},a=_(r)||[];if(!u&&o(a))e=a;else{e=[];for(var s in a)a.hasOwnProperty(s)&&"$"!==s.charAt(0)&&e.push(s)}for(var l=e.length,f=0;l>f;f++){var h=a===e?f:e[f],d=a[h],w=E(d,h),C=p(r,w),S=g(C,w),T=m(r,w),A=y(r,w),P=b(r,w),x=new i(S,C,T,A,P);t.push(x),n[S]=x}return{items:t,selectValueMap:n,getOptionFromViewValue:function(e){return n[v(e)]},getViewValueFromOption:function(e){return c?Mr.copy(e.viewValue):e.viewValue}}}}}var a=t.createElement("option"),s=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,n,o,u){function l(e,t){e.element=t,t.disabled=e.disabled,e.value!==t.value&&(t.value=e.selectValue),e.label!==t.label&&(t.label=e.label,t.textContent=e.label)}function c(e,t,n,r){var o;return t&&_r(t.nodeName)===n?o=t:(o=r.cloneNode(!1),t?e.insertBefore(o,t):e.appendChild(o)),o}function f(e){for(var t;e;)t=e.nextSibling,Ue(e),e=t}function h(e){var t=g&&g[0],n=E&&E[0];if(t||n)for(;e&&(e===t||e===n);)e=e.nextSibling;return e}function p(){var e=C&&v.readValue();C=S.getOptions();var t={},r=n[0].firstChild;if(w&&n.prepend(g),r=h(r),C.items.forEach(function(e){var o,i,u;e.group?(o=t[e.group],o||(i=c(n[0],r,"optgroup",s),r=i.nextSibling,i.label=e.group,o=t[e.group]={groupElement:i,currentOptionElement:i.firstChild}),u=c(o.groupElement,o.currentOptionElement,"option",a),l(e,u),o.currentOptionElement=u.nextSibling):(u=c(n[0],r,"option",a),l(e,u),r=u.nextSibling)}),Object.keys(t).forEach(function(e){f(t[e].currentOptionElement)}),f(r),d.$render(),!d.$isEmpty(e)){var o=v.readValue();(S.trackBy&&!q(e,o)||e!==o)&&(d.$setViewValue(o),d.$render())}}var d=u[1];if(d){for(var g,v=u[0],m=o.multiple,y=0,b=n.children(),_=b.length;_>y;y++)if(""===b[y].value){g=b.eq(y);break}var w=!!g,E=Ar(a.cloneNode(!1));E.val("?");var C,S=r(o.ngOptions,n,t),T=function(){w||n.prepend(g),n.val(""),g.prop("selected",!0),g.attr("selected",!0)},A=function(){w||g.remove()},P=function(){n.prepend(E),n.val("?"),E.prop("selected",!0),E.attr("selected",!0)},x=function(){E.remove()};m?(d.$isEmpty=function(e){return!e||0===e.length},v.writeValue=function(e){C.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=C.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)})},v.readValue=function(){var e=n.val()||[],t=[];return i(e,function(e){var n=C.selectValueMap[e];n.disabled||t.push(C.getViewValueFromOption(n))}),t},S.trackBy&&t.$watchCollection(function(){return Fr(d.$viewValue)?d.$viewValue.map(function(e){return S.getTrackByValue(e)}):void 0},function(){d.$render()})):(v.writeValue=function(e){var t=C.getOptionFromViewValue(e);t&&!t.disabled?n[0].value!==t.selectValue&&(x(),A(),n[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===e||w?(x(),T()):(A(),P())},v.readValue=function(){var e=C.selectValueMap[n.val()];return e&&!e.disabled?(A(),x(),C.getViewValueFromOption(e)):null},S.trackBy&&t.$watch(function(){return S.getTrackByValue(d.$viewValue)},function(){d.$render()})),w?(g.remove(),e(g)(t),g.removeClass("ng-scope")):g=Ar(a.cloneNode(!1)),p(),t.$watchCollection(S.getWatchables,p)}}}}],ua=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function l(e){s.text(e||"")}var c,f=u.count,h=u.$attr.when&&s.attr(u.$attr.when),p=u.offset||0,d=a.$eval(h)||{},v={},m=t.startSymbol(),b=t.endSymbol(),_=m+f+"-"+p+b,w=Mr.noop;i(u,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+_r(n[2]);d[r]=s.attr(u.$attr[t])}}),i(d,function(e,n){v[n]=t(e.replace(r,_))}),a.$watch(f,function(t){var r=parseFloat(t),o=isNaN(r);if(o||r in d||(r=e.pluralCat(r-p)),r!==c&&!(o&&C(c)&&isNaN(c))){w();var i=v[r];y(i)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+h),w=g,l()):w=a.$watch(i,l),c=r}})}}}],la=["$parse","$animate",function(e,a){var s="$$NG_REMOVED",u=r("ngRepeat"),l=function(e,t,n,r,o,i,a){e[n]=r,o&&(e[o]=i),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,h){var p=h.ngRepeat,d=t.createComment(" end ngRepeat: "+p+" "),g=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var v=g[1],m=g[2],y=g[3],b=g[4];if(g=v.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!g)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var _=g[3]||g[1],w=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var E,C,S,T,A={$id:ze};return b?E=e(b):(S=function(e,t){return ze(t)},T=function(e){return e}),function(e,t,r,h,g){E&&(C=function(t,n,r){return w&&(A[w]=t),A[_]=n,A.$index=r,E(e,A)});var v=ge();e.$watchCollection(m,function(r){var h,m,b,E,A,P,x,$,O,L,N,D,I=t[0],M=ge();if(y&&(e[y]=r),o(r))O=r,$=C||S;else{$=C||T,O=[];for(var R in r)r.hasOwnProperty(R)&&"$"!==R.charAt(0)&&O.push(R)}for(E=O.length,N=new Array(E),h=0;E>h;h++)if(A=r===O?h:O[h],P=r[A],x=$(A,P,h),v[x])L=v[x],delete v[x],M[x]=L,N[h]=L;else{if(M[x])throw i(N,function(e){e&&e.scope&&(v[e.id]=e)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,x,P);N[h]={id:x,scope:n,clone:n},M[x]=!0}for(var k in v){if(L=v[k],D=de(L.clone),a.leave(D),D[0].parentNode)for(h=0,m=D.length;m>h;h++)D[h][s]=!0;L.scope.$destroy()}for(h=0;E>h;h++)if(A=r===O?h:O[h],P=r[A],L=N[h],L.scope){b=I;do b=b.nextSibling;while(b&&b[s]);c(L)!=b&&a.move(de(L.clone),null,Ar(I)),I=f(L),l(L.scope,h,_,P,w,A,E)}else g(function(e,t){L.scope=t;var n=d.cloneNode(!1);e[e.length++]=n,a.enter(e,null,Ar(I)),I=n,L.clone=e,M[L.id]=L,l(L.scope,h,_,P,w,A,E)});v=M})}}}}],ca="ng-hide",fa="ng-hide-animate",ha=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,ca,{tempClasses:fa})})}}}],pa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,ca,{tempClasses:fa})})}}}],da=Xn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&i(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),ga=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,o,a){var s=o.ngSwitch||o.on,u=[],l=[],c=[],f=[],h=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,o;for(r=0,o=c.length;o>r;++r)e.cancel(c[r]);for(c.length=0,r=0,o=f.length;o>r;++r){var s=de(l[r].clone);f[r].$destroy();var p=c[r]=e.leave(s);p.then(h(c,r))}l.length=0,f.length=0,(u=a.cases["!"+n]||a.cases["?"])&&i(u,function(n){n.transclude(function(r,o){f.push(o);var i=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var a={clone:r};l.push(a),e.enter(r,i.parent(),i)})})})}}}],va=Xn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,o){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:o,element:t})}}),ma=Xn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,o){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:o,element:t})}}),ya=Xn({restrict:"EAC",link:function(e,t,n,o,i){if(!i)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(t));i(function(e){t.empty(),t.append(e)})}}),ba=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,o=t[0].text;e.put(r,o)}}}}],_a={$setViewValue:g,$render:g},wa=["$element","$scope","$attrs",function(e,r,o){var i=this,a=new Ge;i.ngModelCtrl=_a,i.unknownOption=Ar(t.createElement("option")),i.renderUnknownOption=function(t){var n="? "+ze(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},r.$on("$destroy",function(){i.renderUnknownOption=g}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(e,t){he(e,'"option value"'),""===e&&(i.emptyOption=t);var n=a.get(e)||0;a.put(e,n+1)},i.removeOption=function(e){var t=a.get(e);t&&(1===t?(a.remove(e),""===e&&(i.emptyOption=n)):a.put(e,t-1))},i.hasOption=function(e){return!!a.get(e)}}],Ea=function(){return{restrict:"E",require:["select","?ngModel"],controller:wa,link:function(e,t,n,r){var o=r[1];if(o){var a=r[0];if(a.ngModelCtrl=o,o.$render=function(){a.writeValue(o.$viewValue)},t.on("change",function(){e.$apply(function(){o.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return i(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Ge(e);i(t.find("option"),function(e){e.selected=b(n.get(e.value))})};var s,u=NaN;e.$watch(function(){u!==o.$viewValue||q(s,o.$viewValue)||(s=U(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}}}},Ca=["$interpolate",function(e){function t(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,r){if(y(r.value)){var o=e(n.text(),!0);o||r.$set("value",n.text())}return function(e,n,r){var i="$selectController",a=n.parent(),s=a.data(i)||a.parent().data(i);s&&s.ngModelCtrl&&(o?e.$watch(o,function(e,o){r.$set("value",e),o!==e&&s.removeOption(o),s.addOption(e,n),s.ngModelCtrl.$render(),t(n)}):(s.addOption(r.value,n),s.ngModelCtrl.$render(),t(n)),n.on("$destroy",function(){s.removeOption(r.value),s.ngModelCtrl.$render()}))}}}}],Sa=m({restrict:"E",terminal:!1}),Ta=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Aa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,o,i){if(i){var a,s=o.ngPattern||o.pattern;o.$observe("pattern",function(e){if(E(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,Z(t));a=e||n,i.$validate()}),i.$validators.pattern=function(e){return i.$isEmpty(e)||y(a)||a.test(e)}}}}},Pa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var o=-1;n.$observe("maxlength",function(e){var t=p(e);o=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>o||r.$isEmpty(t)||t.length<=o}}}}},xa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var o=0;n.$observe("minlength",function(e){o=p(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=o}}}}};e.angular.bootstrap||(le(),be(Mr),Ar(t).ready(function(){oe(t,ie)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(e,t,n){"use strict";function r(e,r,o){function i(e,o,i){var s,u;i=i||{},u=i.expires,s=t.isDefined(i.path)?i.path:a,o===n&&(u="Thu, 01 Jan 1970 00:00:00 GMT",o=""),t.isString(u)&&(u=new Date(u));var l=encodeURIComponent(e)+"="+encodeURIComponent(o);l+=s?";path="+s:"",l+=i.domain?";domain="+i.domain:"",l+=u?";expires="+u.toUTCString():"",l+=i.secure?";secure":"";var c=l.length+1;return c>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),l}var a=o.baseHref(),s=e[0];return function(e,t,n){s.cookie=i(e,t,n)}}t.module("ngCookies",["ng"]).provider("$cookies",[function(){function e(e){return e?t.extend({},r,e):r}var r=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(r,o){return{get:function(e){return r()[e]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return r()},put:function(t,n,r){o(t,n,e(r))},putObject:function(e,n,r){this.put(e,t.toJson(n),r)},remove:function(t,r){o(t,n,e(r))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),r.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=r})}(window,window.angular),function(e,t,n){"use strict";function r(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&s.test("."+e)}function o(e,t){if(!r(t))throw a("badmember",'Dotted member path "@{0}" is invalid.',t);for(var o=t.split("."),i=0,s=o.length;s>i&&e!==n;i++){var u=o[i];e=null!==e?e[u]:n}return e}function i(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=e[r]);return n}var a=t.$$minErr("$resource"),s=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(r,s){function u(e){return l(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function l(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function c(t,n){this.template=t,this.defaults=d({},e.defaults,n),this.urlParams={}}function f(u,l,m,y){function b(e,t){var n={};return t=d({},l,t),p(t,function(t,r){v(t)&&(t=t()),n[r]=t&&t.charAt&&"@"==t.charAt(0)?o(e,t.substr(1)):t}),n}function _(e){return e.resource}function w(e){i(e||{},this)}var E=new c(u,y);return m=d({},e.defaults.actions,m),w.prototype.toJSON=function(){var e=d({},this);return delete e.$promise,delete e.$resolved,e},p(m,function(e,o){var u=/^(POST|PUT|PATCH)$/i.test(e.method);w[o]=function(l,c,f,m){var y,C,S,T={};switch(arguments.length){case 4:S=m,C=f;case 3:case 2:if(!v(c)){T=l,y=c,C=f;break}if(v(l)){C=l,S=c;break}C=c,S=f;case 1:v(l)?C=l:u?y=l:T=l;break;case 0:break;default:throw a("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof w,P=A?y:e.isArray?[]:new w(y),x={},$=e.interceptor&&e.interceptor.response||_,O=e.interceptor&&e.interceptor.responseError||n;p(e,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(x[t]=g(e))}),u&&(x.data=y),E.setUrlParams(x,d({},b(y,e.params||{}),T),e.url);var L=r(x).then(function(n){var r=n.data,s=P.$promise;if(r){if(t.isArray(r)!==!!e.isArray)throw a("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",o,e.isArray?"array":"object",t.isArray(r)?"array":"object",x.method,x.url);e.isArray?(P.length=0,p(r,function(e){"object"==typeof e?P.push(new w(e)):P.push(e)})):(i(r,P),P.$promise=s)}return P.$resolved=!0,n.resource=P,n},function(e){return P.$resolved=!0,(S||h)(e),s.reject(e)});return L=L.then(function(e){var t=$(e);return(C||h)(t,e.headers),t},O),A?L:(P.$promise=L,P.$resolved=!1,P)},w.prototype["$"+o]=function(e,t,n){v(e)&&(n=t,t=e,e={});var r=w[o].call(this,e,this,t,n);return r.$promise||r}}),w.bind=function(e){return f(u,d({},l,e),m)},w}var h=t.noop,p=t.forEach,d=t.extend,g=t.copy,v=t.isFunction;return c.prototype={setUrlParams:function(e,n,r){var o,i,s=this,l=r||s.template,c=s.urlParams={};p(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw a("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(c[e]=!0)}),l=l.replace(/\\:/g,":"),n=n||{},p(s.urlParams,function(e,r){o=n.hasOwnProperty(r)?n[r]:s.defaults[r],t.isDefined(o)&&null!==o?(i=u(o),l=l.replace(new RegExp(":"+r+"(\\W|$)","g"),function(e,t){return i+t})):l=l.replace(new RegExp("(/?):"+r+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),e.url=l.replace(/\/\\\./,"/."),p(n,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},f}]})}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return j(new(j(function(){},{prototype:e})),t)}function o(e){return F(arguments,function(t){t!==e&&F(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function i(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var t=[];return F(e,function(e,n){t.push(n)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in e&&e[r]===t)return r;return-1}function u(e,t,n,r){var o,u=i(n,r),l={},c=[];for(var f in u)if(u[f].params&&(o=a(u[f].params),o.length))for(var h in o)s(c,o[h])>=0||(c.push(o[h]),l[o[h]]=e[o[h]]);return j({},l,t)}function l(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var o=0;o<n.length;o++){var i=n[o];if(e[i]!=t[i])return!1}return!0}function c(e,t){var n={};return F(e,function(e){n[e]=t[e]}),n}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return F(n,function(n){n in e&&(t[n]=e[n])}),t}function h(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==s(n,r)&&(t[r]=e[r]);return t}function p(e,t){var n=k(e),r=n?[]:{};return F(e,function(e,o){t(e,o)&&(r[n?r.length:o]=e)}),r}function d(e,t){var n=k(e)?[]:{};return F(e,function(e,r){n[r]=t(e,r)}),n}function g(e,t){var r=1,i=2,u={},l=[],c=u,f=j(e.when(u),{$$promises:u,$$values:u});this.study=function(u){function p(e,n){if(y[n]!==i){if(m.push(n),y[n]===r)throw m.splice(0,s(m,n)),new Error("Cyclic dependency: "+m.join(" -> "));if(y[n]=r,M(e))v.push(n,[function(){return t.get(e)}],l);else{var o=t.annotate(e);F(o,function(e){e!==n&&u.hasOwnProperty(e)&&p(u[e],e)}),v.push(n,e,o)}m.pop(),y[n]=i}}function d(e){return R(e)&&e.then&&e.$$promises}if(!R(u))throw new Error("'invocables' must be an object");var g=a(u||{}),v=[],m=[],y={};return F(u,p),u=m=y=null,function(r,i,a){function s(){--_||(w||o(b,i.$$values),m.$$values=b,m.$$promises=m.$$promises||!0,delete m.$$inheritedValues,p.resolve(b))}function u(e){m.$$failure=e,p.reject(e)}function l(n,o,i){function l(e){f.reject(e),u(e)}function c(){if(!D(m.$$failure))try{f.resolve(t.invoke(o,a,b)),f.promise.then(function(e){b[n]=e,s()},l)}catch(e){l(e)}}var f=e.defer(),h=0;F(i,function(e){y.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(h++,y[e].then(function(t){b[e]=t,--h||c()},l))}),h||c(),y[n]=f.promise}if(d(r)&&a===n&&(a=i,i=r,r=null),r){if(!R(r))throw new Error("'locals' must be an object")}else r=c;if(i){if(!d(i))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else i=f;var p=e.defer(),m=p.promise,y=m.$$promises={},b=j({},r),_=1+v.length/3,w=!1;if(D(i.$$failure))return u(i.$$failure),m;i.$$inheritedValues&&o(b,h(i.$$inheritedValues,g)),j(y,i.$$promises),i.$$values?(w=o(b,h(i.$$values,g)),m.$$inheritedValues=h(i.$$values,g),s()):(i.$$inheritedValues&&(m.$$inheritedValues=h(i.$$inheritedValues,g)),i.then(s,u));for(var E=0,C=v.length;C>E;E+=3)r.hasOwnProperty(v[E])?s():l(v[E],v[E+1],v[E+2]);return m}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function v(e,t,n){this.fromConfig=function(e,t,n){return D(e.template)?this.fromString(e.template,t):D(e.templateUrl)?this.fromUrl(e.templateUrl,t):D(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return I(e)?e(t):e},this.fromUrl=function(n,r){return I(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function m(e,t,o){function i(t,n,r,o){if(v.push(t),d[t])return d[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(g[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return g[t]=new q.Param(t,n,r,o),g[t]}function a(e,t,n,r){var o=["",""],i=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return i;switch(n){case!1:o=["(",")"+(r?"?":"")];break;case!0:o=["?(",")?"];break;default:o=["("+n+"|",")?"]}return i+o[0]+t+o[1]}function s(o,i){var a,s,u,l,c;return a=o[2]||o[3],c=t.params[a],u=e.substring(h,o.index),s=i?o[4]:o[4]||("*"==o[1]?".*":null),l=q.type(s||"string")||r(q.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)}),{id:a,regexp:s,segment:u,type:l,cfg:c}}t=j({params:{}},R(t)?t:{});var u,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",h=0,p=this.segments=[],d=o?o.params:{},g=this.params=o?o.params.$$new():new q.ParamSet,v=[];this.source=e;for(var m,y,b;(u=l.exec(e))&&(m=s(u,!1),!(m.segment.indexOf("?")>=0));)y=i(m.id,m.type,m.cfg,"path"),f+=a(m.segment,y.type.pattern.source,y.squash,y.isOptional),p.push(m.segment),h=l.lastIndex;b=e.substring(h);var _=b.indexOf("?");if(_>=0){var w=this.sourceSearch=b.substring(_);if(b=b.substring(0,_),this.sourcePath=e.substring(0,h+_),w.length>0)for(h=0;u=c.exec(w);)m=s(u,!0),y=i(m.id,m.type,m.cfg,"search"),h=l.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=a(b)+(t.strict===!1?"/?":"")+"$",p.push(b),this.regexp=new RegExp(f,t.caseInsensitive?"i":n),this.prefix=p[0],this.$$paramNames=v}function y(e){j(this,e)}function b(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function o(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function i(){return{strict:g,caseInsensitive:h}}function u(e){return I(e)||k(e)&&I(e[e.length-1])}function l(){for(;E.length;){var e=E.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(_[e.name],f.invoke(e.def))}}function c(e){j(this,e||{})}q=this;var f,h=!1,g=!0,v=!1,_={},w=!0,E=[],C={string:{encode:e,decode:o,is:function(e){return null==e||!D(e)||"string"==typeof e},pattern:/[^/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return D(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};b.$$getDefaultValue=function(e){if(!u(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return D(e)&&(h=e),h},this.strictMode=function(e){return D(e)&&(g=e),g},this.defaultSquashPolicy=function(e){if(!D(e))return v;if(e!==!0&&e!==!1&&!M(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return v=e,e},this.compile=function(e,t){return new m(e,j(i(),t))},this.isMatcher=function(e){if(!R(e))return!1;var t=!0;return F(m.prototype,function(n,r){I(n)&&(t=t&&D(e[r])&&I(e[r]))}),t},this.type=function(e,t,n){if(!D(t))return _[e];if(_.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return _[e]=new y(j({name:e},t)),n&&(E.push({name:e,def:n}),w||l()),this},F(C,function(e,t){_[t]=new y(j({name:t},e))}),_=r(_,{}),this.$get=["$injector",function(e){return f=e,w=!1,l(),F(C,function(e,t){_[t]||(_[t]=new y(e))}),this}],this.Param=function(e,t,r,o){function i(e){var t=R(e)?a(e):[],n=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return n&&(e={value:e}),e.$$fn=u(e.value)?e.value:function(){return e.value},e}function l(t,n,r){if(t.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:t.type?t.type instanceof y?t.type:new y(t.type):"config"===r?_.any:_.string}function c(){var t={array:"search"===o?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return j(t,n,r).array}function h(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!D(n)||null==n)return v;if(n===!0||M(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function g(e,t,r,o){var i,a,u=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return i=k(e.replace)?e.replace:[],M(o)&&i.push({from:o,to:n}),a=d(i,function(e){return e.from}),p(u,function(e){return-1===s(a,e.from)}).concat(i)}function m(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(r.$$fn);if(null!==e&&e!==n&&!E.type.is(e))throw new Error("Default value ("+e+") for parameter '"+E.id+"' is not an instance of Type ("+E.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function n(e){var n=d(p(E.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),D(e)?E.type.$normalize(e):m()}function w(){return"{Param:"+e+" "+t+" squash: '"+T+"' optional: "+S+"}"}var E=this;r=i(r),t=l(r,t,o);var C=c();t=C?t.$asArray(C,"search"===o):t,"string"!==t.name||C||"path"!==o||r.value!==n||(r.value="");var S=r.value!==n,T=h(r,S),A=g(r,C,S,T);j(this,{id:e,type:t,location:o,array:C,squash:T,replace:A,isOptional:S,value:b,dynamic:n,config:r,toString:w})},c.prototype={$$new:function(){return r(this,j(new c,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(c.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),F(t,function(t){F(a(t),function(t){-1===s(e,t)&&-1===s(r,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return F(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return F(r.$$keys(),function(o){var i=e&&e[o],a=t&&t[o];r[o].type.equals(i,a)||(n=!1)}),n},$$validates:function(e){var r,o,i,a,s,u=this.$$keys();for(r=0;r<u.length&&(o=this[u[r]],i=e[u[r]],i!==n&&null!==i||!o.isOptional);r++){if(a=o.type.$normalize(i),!o.type.is(a))return!1;if(s=o.type.encode(a),t.isString(s)&&!o.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=c}function _(e,r){function o(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function i(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return D(r)?r:!0}function s(r,o,i,a){function s(e,t,n){return"/"===g?e:t?g.slice(0,-1)+e:n?g.slice(1)+e:e}function h(e){function t(e){var t=e(i,r);return t?(M(t)&&r.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){d&&r.url()===d;d=n;var o,a=l.length;for(o=0;a>o;o++)if(t(l[o]))return;c&&t(c)}}function p(){return u=u||o.$on("$locationChangeSuccess",h)}var d,g=a.baseHref(),v=r.url();return f||p(),{sync:function(){h()},listen:function(){return p()},update:function(e){return e?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(e,t,o){var i=e.format(t||{});null!==i&&t&&t["#"]&&(i+="#"+t["#"]),r.url(i),d=o&&o.$$avoidResync?r.url():n,o&&o.replace&&r.replace()},href:function(n,o,i){if(!n.validates(o))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled);var u=n.format(o);if(i=i||{},a||null===u||(u="#"+e.hashPrefix()+u),null!==u&&o&&o["#"]&&(u+="#"+o["#"]),u=s(u,a,i.absolute),!i.absolute||!u)return u;var l=!a&&u?"/":"",c=r.port();return c=80===c||443===c?"":":"+c,[r.protocol(),"://",r.host(),c,l,u].join("")}}}var u,l=[],c=null,f=!1;this.rule=function(e){if(!I(e))throw new Error("'rule' must be a function");return l.push(e),this},this.otherwise=function(e){if(M(e)){var t=e;e=function(){return t}}else if(!I(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var n,s=M(t);if(M(e)&&(e=r.compile(e)),!s&&!I(t)&&!k(t))throw new Error("invalid 'handler' in when()");var u={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),j(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:M(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return i(n,e)}]),j(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:o(e)})}},l={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function w(e,o){function i(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function h(e,t){if(!e)return n;var r=M(e),o=r?e:e.name,a=i(o);if(a){if(!t)throw new Error("No reference point given for path '"+o+"'");t=h(t);for(var s=o.split("."),u=0,l=s.length,c=t;l>u;u++)if(""!==s[u]||0!==u){
if("^"!==s[u])break;if(!c.parent)throw new Error("Path '"+o+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;s=s.slice(u).join("."),o=c.name+(c.name&&s?".":"")+s}var f=T[o];return!f||!r&&(r||f!==e&&f.self!==e)?n:f}function p(e,t){A[e]||(A[e]=[]),A[e].push(t)}function g(e){for(var t=A[e]||[];t.length;)v(t.shift())}function v(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!M(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(T.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var o=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):M(t.parent)?t.parent:R(t.parent)&&M(t.parent.name)?t.parent.name:"";if(o&&!T[o])return p(o,t.self);for(var i in x)I(x[i])&&(t[i]=x[i](t,x.$delegates[i]));return T[n]=t,!t[P]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){S.$current.navigable==t&&l(e,n)||S.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function m(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),n=S.$current.name.split("."),r=0,o=t.length;o>r;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length?!1:n.join("")===t.join("")}function b(e,t){return M(e)&&!D(t)?x[e]:I(t)&&M(e)?(x[e]&&!x.$delegates[e]&&(x.$delegates[e]=x[e]),x[e]=t,this):this}function _(e,t){return R(e)?t=e:t.name=e,v(t),this}function w(e,o,i,s,f,p,g,v,b){function _(t,n,r,i){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return g.update(),$;if(!a.retry)return null;if(i.$retry)return g.update(),O;var s=S.transition=o.when(a.retry);return s.then(function(){return s!==S.transition?A:(t.options.$retry=!0,S.transitionTo(t.to,t.toParams,t.options))},function(){return $}),g.update(),s}function w(e,n,r,a,u,l){function h(){var n=[];return F(e.views,function(r,o){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return i.load(o,{view:r,locals:u.globals,params:p,notify:l.notify})||""}],n.push(f.resolve(a,u.globals,u.resolve,e).then(function(n){if(I(r.controllerProvider)||k(r.controllerProvider)){var i=t.extend({},a,u.globals);n.$$controller=s.invoke(r.controllerProvider,null,i)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,u[o]=n}))}),o.all(n).then(function(){return u.globals})}var p=r?n:c(e.params.$$keys(),n),d={$stateParams:p};u.resolve=f.resolve(e.resolve,d,u.resolve,e);var g=[u.resolve.then(function(e){u.globals=e})];return a&&g.push(a),o.all(g).then(h).then(function(e){return u})}var A=o.reject(new Error("transition superseded")),x=o.reject(new Error("transition prevented")),$=o.reject(new Error("transition aborted")),O=o.reject(new Error("transition failed"));return C.locals={resolve:null,globals:{$stateParams:{}}},S={params:{},current:C.self,$current:C,transition:null},S.reload=function(e){return S.transitionTo(S.current,p,{reload:e||!0,inherit:!1,notify:!0})},S.go=function(e,t,n){return S.transitionTo(e,t,j({inherit:!0,relative:S.$current},n))},S.transitionTo=function(t,n,i){n=n||{},i=j({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},i||{});var a,l=S.$current,f=S.params,d=l.path,v=h(t,i.relative),m=n["#"];if(!D(v)){var y={to:t,toParams:n,options:i},b=_(y,l.self,f,i);if(b)return b;if(t=y.to,n=y.toParams,i=y.options,v=h(t,i.relative),!D(v)){if(!i.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+i.relative+"'")}}if(v[P])throw new Error("Cannot transition to abstract state '"+t+"'");if(i.inherit&&(n=u(p,n||{},S.$current,v)),!v.params.$$validates(n))return O;n=v.params.$$values(n),t=v;var T=t.path,$=0,L=T[$],N=C.locals,I=[];if(i.reload){if(M(i.reload)||R(i.reload)){if(R(i.reload)&&!i.reload.name)throw new Error("Invalid reload state object");var k=i.reload===!0?d[0]:h(i.reload);if(i.reload&&!k)throw new Error("No such reload state '"+(M(i.reload)?i.reload:i.reload.name)+"'");for(;L&&L===d[$]&&L!==k;)N=I[$]=L.locals,$++,L=T[$]}}else for(;L&&L===d[$]&&L.ownParams.$$equals(n,f);)N=I[$]=L.locals,$++,L=T[$];if(E(t,n,l,f,N,i))return m&&(n["#"]=m),S.params=n,U(S.params,p),i.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===i.location}),g.update(!0)),S.transition=null,o.when(S.current);if(n=c(t.params.$$keys(),n||{}),i.notify&&e.$broadcast("$stateChangeStart",t.self,n,l.self,f).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,l.self,f),g.update(),x;for(var F=o.when(N),q=$;q<T.length;q++,L=T[q])N=I[q]=r(N),F=w(L,n,L===t,F,N,i);var B=S.transition=F.then(function(){var r,o,a;if(S.transition!==B)return A;for(r=d.length-1;r>=$;r--)a=d[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=$;r<T.length;r++)o=T[r],o.locals=I[r],o.self.onEnter&&s.invoke(o.self.onEnter,o.self,o.locals.globals);return m&&(n["#"]=m),S.transition!==B?A:(S.$current=t,S.current=t.self,S.params=n,U(S.params,p),S.transition=null,i.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===i.location}),i.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,l.self,f),g.update(!0),S.current)},function(r){return S.transition!==B?A:(S.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,l.self,f,r),a.defaultPrevented||g.update(),o.reject(r))});return B},S.is=function(e,t,r){r=j({relative:S.$current},r||{});var o=h(e,r.relative);return D(o)?S.$current!==o?!1:t?l(o.params.$$values(t),p):!0:n},S.includes=function(e,t,r){if(r=j({relative:S.$current},r||{}),M(e)&&m(e)){if(!y(e))return!1;e=S.$current.name}var o=h(e,r.relative);return D(o)?D(S.$current.includes[o.name])?t?l(o.params.$$values(t),p,a(t)):!0:!1:n},S.href=function(e,t,r){r=j({lossy:!0,inherit:!0,absolute:!1,relative:S.$current},r||{});var o=h(e,r.relative);if(!D(o))return null;r.inherit&&(t=u(p,t||{},S.$current,o));var i=o&&r.lossy?o.navigable:o;return i&&i.url!==n&&null!==i.url?g.href(i.url,c(o.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},S.get=function(e,t){if(0===arguments.length)return d(a(T),function(e){return T[e].self});var n=h(e,t||S.$current);return n&&n.self?n.self:null},S}function E(e,t,n,r,o,i){function a(e,t,n){function r(t){return"search"!=e.params[t].location}var o=e.params.$$keys().filter(r),i=f.apply({},[e.params].concat(o)),a=new q.ParamSet(i);return a.$$equals(t,n)}return!i.reload&&e===n&&(o===n.locals||e.self.reloadOnSearch===!1&&a(n,r,t))?!0:void 0}var C,S,T={},A={},P="abstract",x={parent:function(e){if(D(e.parent)&&e.parent)return h(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?h(t[1]):C},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=j({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(M(t))return"^"==t.charAt(0)?o.compile(t.substring(1),n):(e.parent.navigable||C).url.concat(t,n);if(!t||o.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new q.ParamSet;return F(e.params||{},function(e,n){t[n]||(t[n]=new q.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?j(e.parent.params.$$new(),e.ownParams):new q.ParamSet},views:function(e){var t={};return F(D(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?j({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};C=v({name:"",url:"^",views:null,"abstract":!0}),C.navigable=null,this.decorator=b,this.state=_,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function E(){function e(e,t){return{load:function(n,r){var o,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=j(i,r),r.view&&(o=t.fromConfig(r.view,r.params,r.locals)),o&&r.notify&&e.$broadcast("$viewContentLoading",r),o}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function C(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function S(e,n,r,o){function i(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function a(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,t,n){var r=l.enter(e,null,t,n);r&&r.then&&r.then(n)},leave:function(e,t){var n=l.leave(e,t);n&&n.then&&n.then(t)}};if(u){var r=u&&u(t,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return n()}var s=i(),u=s("$animator"),l=s("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,i,s){return function(n,i,u){function l(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),h&&(m.leave(h,function(){f=null}),f=h,h=null)}function c(a){var c,f=A(n,u,i,o),y=f&&e.$current&&e.$current.locals[f];if(a||y!==d){c=n.$new(),d=e.$current.locals[f];var b=s(c,function(e){m.enter(e,i,function(){p&&p.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||n.$eval(v))&&r(e)}),l()});h=b,p=c,p.$emit("$viewContentLoaded"),p.$eval(g)}}var f,h,p,d,g=u.onload||"",v=u.autoscroll,m=a(u,n);n.$on("$stateChangeSuccess",function(){c(!1)}),n.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function T(e,t,n,r){return{restrict:"ECA",priority:-400,compile:function(o){var i=o.html();return function(o,a,s){var u=n.$current,l=A(o,s,a,r),c=u&&u.locals[l];if(c){a.data("$uiView",{name:l,state:c.$$state}),a.html(c.$template?c.$template:i);var f=e(a.contents());if(c.$$controller){c.$scope=o,c.$element=a;var h=t(c.$$controller,c);c.$$controllerAs&&(o[c.$$controllerAs]=h),a.data("$ngControllerController",h),a.children().data("$ngControllerController",h)}f(o)}}}}}function A(e,t,n,r){var o=r(t.uiView||t.name||"")(e),i=n.inheritedData("$uiView");return o.indexOf("@")>=0?o:o+"@"+(i?i.state.name:"")}function P(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function x(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function $(e,n){var r=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(o,i,a,s){var u=P(a.uiSref,e.current.name),l=null,c=x(i)||e.$current,f="[object SVGAnimatedString]"===Object.prototype.toString.call(i.prop("href"))?"xlink:href":"href",h=null,p="A"===i.prop("tagName").toUpperCase(),d="FORM"===i[0].nodeName,g=d?"action":f,v=!0,m={relative:c,inherit:!0},y=o.$eval(a.uiSrefOpts)||{};t.forEach(r,function(e){e in y&&(m[e]=y[e])});var b=function(n){if(n&&(l=t.copy(n)),v){h=e.href(u.state,l,m);var r=s[1]||s[0];return r&&r.$$addStateInfo(u.state,l),null===h?(v=!1,!1):void a.$set(g,h)}};u.paramExpr&&(o.$watch(u.paramExpr,function(e,t){e!==l&&b(e)},!0),l=t.copy(o.$eval(u.paramExpr))),b(),d||i.bind("click",function(t){var r=t.which||t.button;if(!(r>1||t.ctrlKey||t.metaKey||t.shiftKey||i.attr("target"))){var o=n(function(){e.go(u.state,l,m)});t.preventDefault();var a=p&&!h?1:0;t.preventDefault=function(){a--<=0&&n.cancel(o)}}})}}}function O(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,r,o){function i(){a()?r.addClass(u):r.removeClass(u)}function a(){for(var e=0;e<l.length;e++)if(s(l[e].state,l[e].params))return!0;return!1}function s(t,n){return"undefined"!=typeof o.uiSrefActiveEq?e.is(t.name,n):e.includes(t.name,n)}var u,l=[];u=n(o.uiSrefActiveEq||o.uiSrefActive||"",!1)(t),this.$$addStateInfo=function(t,n){var o=e.get(t,x(r));l.push({state:o||{name:t},params:n}),i()},t.$on("$stateChangeSuccess",i)}]}}function L(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function N(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var D=t.isDefined,I=t.isFunction,M=t.isString,R=t.isObject,k=t.isArray,F=t.forEach,j=t.extend,U=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var q;m.prototype.concat=function(e,t){var n={caseInsensitive:q.caseInsensitive(),strict:q.strictMode(),squash:q.defaultSquashPolicy()};return new m(this.sourcePath+e+this.sourceSearch,j(n,t),this)},m.prototype.toString=function(){return this.source},m.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var r=t(e).split(/-(?!\\)/),o=d(r,t);return d(o,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var o,i,a,s=this.parameters(),u=s.length,l=this.segments.length-1,c={};if(l!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(o=0;l>o;o++){a=s[o];var f=this.params[a],h=r[o+1];for(i=0;i<f.replace;i++)f.replace[i].from===h&&(h=f.replace[i].to);h&&f.array===!0&&(h=n(h)),c[a]=f.value(h)}for(;u>o;o++)a=s[o],c[a]=this.params[a].value(t[a]);return c},m.prototype.parameters=function(e){return D(e)?this.params[e]||null:this.$$paramNames},m.prototype.validates=function(e){return this.params.$$validates(e)},m.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),o=this.params;if(!this.validates(e))return null;var i,a=!1,s=n.length-1,u=r.length,l=n[0];for(i=0;u>i;i++){var c=s>i,f=r[i],h=o[f],p=h.value(e[f]),g=h.isOptional&&h.type.equals(h.value(),p),v=g?h.squash:!1,m=h.type.encode(p);if(c){var y=n[i+1];if(v===!1)null!=m&&(l+=k(m)?d(m,t).join("-"):encodeURIComponent(m)),l+=y;else if(v===!0){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=y.match(b)[1]}else M(v)&&(l+=v+y)}else{if(null==m||g&&v!==!1)continue;k(m)||(m=[m]),m=d(m,encodeURIComponent).join("&"+f+"="),l+=(a?"&":"?")+(f+"="+m),a=!0}}return l},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function o(e){return k(e)?e:D(e)?[e]:[]}function i(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){n=o(n);var r=d(n,e);return t===!0?0===p(r,a).length:i(r)}}function u(e){return function(t,n){var r=o(t),i=o(n);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!e(r[a],i[a]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=u(r(e,"equals")),this.pattern=e.pattern,this.$normalize=s(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",b),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),_.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",_),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",w),E.$inject=[],t.module("ui.router.state").provider("$view",E),t.module("ui.router.state").provider("$uiViewScroll",C),S.$inject=["$state","$injector","$uiViewScroll","$interpolate"],T.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",S),t.module("ui.router.state").directive("uiView",T),$.$inject=["$state","$timeout"],O.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",$).directive("uiSrefActive",O).directive("uiSrefActiveEq",O),L.$inject=["$state"],N.$inject=["$state"],t.module("ui.router.state").filter("isState",L).filter("includedByState",N)}(window,window.angular),function(e){"use strict";angular.module("firebase",[]).value("Firebase",e.Firebase)}(window),function(){"use strict";angular.module("firebase").factory("$firebaseArray",["$log","$firebaseUtils",function(e,t){function n(e){if(!(this instanceof n))return new n(e);var o=this;return this._observers=[],this.$list=[],this._ref=e,this._sync=new r(this),t.assertValidRef(e,"Must pass a valid Firebase reference to $firebaseArray (not a string or URL)"),this._indexCache={},t.getPublicMethods(o,function(e,t){o.$list[t]=e.bind(o)}),this._sync.init(this.$list),this.$list}function r(n){function r(e){if(!d.isDestroyed){d.isDestroyed=!0;var t=n.$ref();t.off("child_added",s),t.off("child_moved",l),t.off("child_changed",u),t.off("child_removed",c),n=null,p(e||"destroyed")}}function o(t){var r=n.$ref();r.on("child_added",s,h),r.on("child_moved",l,h),r.on("child_changed",u,h),r.on("child_removed",c,h),r.once("value",function(n){angular.isArray(n.val())&&e.warn("Storing data using array indices in Firebase can result in unexpected behavior. See https://www.firebase.com/docs/web/guide/understanding-data.html#section-arrays-in-firebase for more information."),p(null,t)},p)}function i(e,t){f||(f=!0,e?a.reject(e):a.resolve(t))}var a=t.defer(),s=function(e,r){var o=n.$$added(e,r);t.whenUnwrapped(o,function(e){n.$$process("child_added",e,r)})},u=function(e){var r=n.$getRecord(t.getKey(e));if(r){var o=n.$$updated(e);t.whenUnwrapped(o,function(){n.$$process("child_changed",r)})}},l=function(e,r){var o=n.$getRecord(t.getKey(e));if(o){var i=n.$$moved(e,r);t.whenUnwrapped(i,function(){n.$$process("child_moved",o,r)})}},c=function(e){var r=n.$getRecord(t.getKey(e));if(r){var o=n.$$removed(e);t.whenUnwrapped(o,function(){n.$$process("child_removed",r)})}},f=!1,h=t.batch(function(e){i(e),n&&n.$$error(e)}),p=t.batch(i),d={destroy:r,isDestroyed:!1,init:o,ready:function(){return a.promise}};return d}return n.prototype={$add:function(e){this._assertNotDestroyed("$add");var n=t.defer(),r=this.$ref().ref().push();return r.set(t.toJSON(e),t.makeNodeResolver(n)),n.promise.then(function(){return r})},$save:function(e){this._assertNotDestroyed("$save");var n=this,r=n._resolveItem(e),o=n.$keyAt(r);if(null!==o){var i=n.$ref().ref().child(o),a=t.toJSON(r);return t.doSet(i,a).then(function(){return n.$$notify("child_changed",o),i})}return t.reject("Invalid record; could determine key for "+e)},$remove:function(e){this._assertNotDestroyed("$remove");var n=this.$keyAt(e);if(null!==n){var r=this.$ref().ref().child(n);return t.doRemove(r).then(function(){return r})}return t.reject("Invalid record; could not determine key for "+e)},$keyAt:function(e){var t=this._resolveItem(e);return this.$$getKey(t)},$indexFor:function(e){var t=this,n=t._indexCache;if(!n.hasOwnProperty(e)||t.$keyAt(n[e])!==e){var r=t.$list.findIndex(function(n){return t.$$getKey(n)===e});-1!==r&&(n[e]=r)}return n.hasOwnProperty(e)?n[e]:-1},$loaded:function(e,t){var n=this._sync.ready();return arguments.length&&(n=n.then.call(n,e,t)),n},$ref:function(){return this._ref},$watch:function(e,t){var n=this._observers;return n.push([e,t]),function(){var r=n.findIndex(function(n){return n[0]===e&&n[1]===t});r>-1&&n.splice(r,1)}},$destroy:function(e){this._isDestroyed||(this._isDestroyed=!0,this._sync.destroy(e),this.$list.length=0)},$getRecord:function(e){var t=this.$indexFor(e);return t>-1?this.$list[t]:null},$$added:function(e){var n=this.$indexFor(t.getKey(e));if(-1===n){var r=e.val();return angular.isObject(r)||(r={$value:r}),r.$id=t.getKey(e),r.$priority=e.getPriority(),t.applyDefaults(r,this.$$defaults),r}return!1},$$removed:function(e){return this.$indexFor(t.getKey(e))>-1},$$updated:function(e){var n=!1,r=this.$getRecord(t.getKey(e));return angular.isObject(r)&&(n=t.updateRec(r,e),t.applyDefaults(r,this.$$defaults)),n},$$moved:function(e){var n=this.$getRecord(t.getKey(e));return angular.isObject(n)?(n.$priority=e.getPriority(),!0):!1},$$error:function(t){e.error(t),this.$destroy(t)},$$getKey:function(e){return angular.isObject(e)?e.$id:null},$$process:function(e,t,n){var r,o=this.$$getKey(t),i=!1;switch(e){case"child_added":r=this.$indexFor(o);break;case"child_moved":r=this.$indexFor(o),this._spliceOut(o);break;case"child_removed":i=null!==this._spliceOut(o);break;case"child_changed":i=!0;break;default:throw new Error("Invalid event type: "+e)}return angular.isDefined(r)&&(i=this._addAfter(t,n)!==r),i&&this.$$notify(e,o,n),i},$$notify:function(e,t,n){var r={event:e,key:t};angular.isDefined(n)&&(r.prevChild=n),angular.forEach(this._observers,function(e){e[0].call(e[1],r)})},_addAfter:function(e,t){var n;return null===t?n=0:(n=this.$indexFor(t)+1,0===n&&(n=this.$list.length)),this.$list.splice(n,0,e),this._indexCache[this.$$getKey(e)]=n,n},_spliceOut:function(e){var t=this.$indexFor(e);return t>-1?(delete this._indexCache[e],this.$list.splice(t,1)[0]):null},_resolveItem:function(e){var t=this.$list;if(angular.isNumber(e)&&e>=0&&t.length>=e)return t[e];if(angular.isObject(e)){var n=this.$$getKey(e),r=this.$getRecord(n);return r===e?r:null}return null},_assertNotDestroyed:function(e){if(this._isDestroyed)throw new Error("Cannot call "+e+" method on a destroyed $firebaseArray object")}},n.$extend=function(e,r){return 1===arguments.length&&angular.isObject(e)&&(r=e,e=function(t){return this instanceof e?(n.apply(this,arguments),this.$list):new e(t)}),t.inherit(e,n,r)},n}]),angular.module("firebase").factory("$FirebaseArray",["$log","$firebaseArray",function(e,t){return function(){return e.warn("$FirebaseArray has been renamed. Use $firebaseArray instead."),t.apply(null,arguments)}}])}(),function(){"use strict";var e;angular.module("firebase").factory("$firebaseAuth",["$q","$firebaseUtils",function(t,n){return function(r){var o=new e(t,n,r);return o.construct()}}]),e=function(e,t,n){if(this._q=e,this._utils=t,"string"==typeof n)throw new Error("Please provide a Firebase reference instead of a URL when creating a `$firebaseAuth` object.");this._ref=n,this._initialAuthResolver=this._initAuthResolver()},e.prototype={construct:function(){return this._object={$authWithCustomToken:this.authWithCustomToken.bind(this),$authAnonymously:this.authAnonymously.bind(this),$authWithPassword:this.authWithPassword.bind(this),$authWithOAuthPopup:this.authWithOAuthPopup.bind(this),$authWithOAuthRedirect:this.authWithOAuthRedirect.bind(this),$authWithOAuthToken:this.authWithOAuthToken.bind(this),$unauth:this.unauth.bind(this),$onAuth:this.onAuth.bind(this),$getAuth:this.getAuth.bind(this),$requireAuth:this.requireAuth.bind(this),$waitForAuth:this.waitForAuth.bind(this),$createUser:this.createUser.bind(this),$changePassword:this.changePassword.bind(this),$changeEmail:this.changeEmail.bind(this),$removeUser:this.removeUser.bind(this),$resetPassword:this.resetPassword.bind(this)},this._object},authWithCustomToken:function(e,t){var n=this._q.defer();try{this._ref.authWithCustomToken(e,this._utils.makeNodeResolver(n),t)}catch(r){n.reject(r)}return n.promise},authAnonymously:function(e){var t=this._q.defer();try{this._ref.authAnonymously(this._utils.makeNodeResolver(t),e)}catch(n){t.reject(n)}return t.promise},authWithPassword:function(e,t){var n=this._q.defer();try{this._ref.authWithPassword(e,this._utils.makeNodeResolver(n),t)}catch(r){n.reject(r)}return n.promise},authWithOAuthPopup:function(e,t){var n=this._q.defer();try{this._ref.authWithOAuthPopup(e,this._utils.makeNodeResolver(n),t)}catch(r){n.reject(r)}return n.promise},authWithOAuthRedirect:function(e,t){var n=this._q.defer();try{this._ref.authWithOAuthRedirect(e,this._utils.makeNodeResolver(n),t)}catch(r){n.reject(r)}return n.promise},authWithOAuthToken:function(e,t,n){var r=this._q.defer();try{this._ref.authWithOAuthToken(e,t,this._utils.makeNodeResolver(r),n)}catch(o){r.reject(o)}return r.promise},unauth:function(){null!==this.getAuth()&&this._ref.unauth()},onAuth:function(e,t){var n=this,r=this._utils.debounce(e,t,0);return this._ref.onAuth(r),function(){n._ref.offAuth(r)}},getAuth:function(){return this._ref.getAuth()},_routerMethodOnAuthPromise:function(e){var t=this._ref,n=this._utils;return this._initialAuthResolver.then(function(){var r=t.getAuth(),o=null;return o=e&&null===r?n.reject("AUTH_REQUIRED"):n.resolve(r)})},_initAuthResolver:function(){var e=this._ref;return this._utils.promise(function(t){function n(){e.offAuth(n),t()}e.onAuth(n)})},requireAuth:function(){return this._routerMethodOnAuthPromise(!0)},waitForAuth:function(){return this._routerMethodOnAuthPromise(!1)},createUser:function(e){var t=this._q.defer();if("string"==typeof e)throw new Error("$createUser() expects an object containing 'email' and 'password', but got a string.");try{this._ref.createUser(e,this._utils.makeNodeResolver(t))}catch(n){t.reject(n)}return t.promise},changePassword:function(e){var t=this._q.defer();if("string"==typeof e)throw new Error("$changePassword() expects an object containing 'email', 'oldPassword', and 'newPassword', but got a string.");try{this._ref.changePassword(e,this._utils.makeNodeResolver(t))}catch(n){t.reject(n)}return t.promise},changeEmail:function(e){var t=this._q.defer();if("function"!=typeof this._ref.changeEmail)throw new Error("$firebaseAuth.$changeEmail() requires Firebase version 2.1.0 or greater.");if("string"==typeof e)throw new Error("$changeEmail() expects an object containing 'oldEmail', 'newEmail', and 'password', but got a string.");try{this._ref.changeEmail(e,this._utils.makeNodeResolver(t))}catch(n){t.reject(n)}return t.promise},removeUser:function(e){var t=this._q.defer();if("string"==typeof e)throw new Error("$removeUser() expects an object containing 'email' and 'password', but got a string.");try{this._ref.removeUser(e,this._utils.makeNodeResolver(t))}catch(n){t.reject(n)}return t.promise},resetPassword:function(e){var t=this._q.defer();if("string"==typeof e)throw new Error("$resetPassword() expects an object containing 'email', but got a string.");try{this._ref.resetPassword(e,this._utils.makeNodeResolver(t))}catch(n){t.reject(n)}return t.promise}}}(),function(){"use strict";angular.module("firebase").factory("$firebaseObject",["$parse","$firebaseUtils","$log",function(e,t,n){function r(e){return this instanceof r?(this.$$conf={sync:new i(this,e),ref:e,binding:new o(this),listeners:[]},Object.defineProperty(this,"$$conf",{value:this.$$conf}),this.$id=t.getKey(e.ref()),this.$priority=null,t.applyDefaults(this,this.$$defaults),void this.$$conf.sync.init()):new r(e)}function o(e){this.subs=[],this.scope=null,this.key=null,this.rec=e}function i(e,r){function o(t){h.isDestroyed||(h.isDestroyed=!0,r.off("value",l),e=null,f(t||"destroyed"))}function i(){r.on("value",l,c),r.once("value",function(e){angular.isArray(e.val())&&n.warn("Storing data using array indices in Firebase can result in unexpected behavior. See https://www.firebase.com/docs/web/guide/understanding-data.html#section-arrays-in-firebase for more information. Also note that you probably wanted $firebaseArray and not $firebaseObject."),f(null)},f)}function a(t){s||(s=!0,t?u.reject(t):u.resolve(e))}var s=!1,u=t.defer(),l=t.batch(function(t){var n=e.$$updated(t);n&&e.$$notify()}),c=t.batch(function(t){a(t),e&&e.$$error(t)}),f=t.batch(a),h={isDestroyed:!1,destroy:o,init:i,ready:function(){return u.promise}};return h}return r.prototype={$save:function(){var e=this,n=e.$ref(),r=t.toJSON(e);return t.doSet(n,r).then(function(){return e.$$notify(),e.$ref()})},$remove:function(){var e=this;return t.trimKeys(e,{}),e.$value=null,t.doRemove(e.$ref()).then(function(){return e.$$notify(),e.$ref()})},$loaded:function(e,t){var n=this.$$conf.sync.ready();return arguments.length&&(n=n.then.call(n,e,t)),n},$ref:function(){return this.$$conf.ref},$bindTo:function(e,t){var n=this;return n.$loaded().then(function(){return n.$$conf.binding.bindTo(e,t)})},$watch:function(e,t){var n=this.$$conf.listeners;return n.push([e,t]),function(){var r=n.findIndex(function(n){return n[0]===e&&n[1]===t});r>-1&&n.splice(r,1)}},$destroy:function(e){var n=this;n.$isDestroyed||(n.$isDestroyed=!0,n.$$conf.sync.destroy(e),n.$$conf.binding.destroy(),t.each(n,function(e,t){delete n[t]}))},$$updated:function(e){var n=t.updateRec(this,e);return t.applyDefaults(this,this.$$defaults),n},$$error:function(e){n.error(e),this.$destroy(e)},$$scopeUpdated:function(e){var n=t.defer();return this.$ref().set(t.toJSON(e),t.makeNodeResolver(n)),n.promise},$$notify:function(){var e=this,t=this.$$conf.listeners.slice();angular.forEach(t,function(t){t[0].call(t[1],{event:"value",key:e.$id})})},forEach:function(e,n){return t.each(this,e,n)}},r.$extend=function(e,n){return 1===arguments.length&&angular.isObject(e)&&(n=e,e=function(t){return this instanceof e?void r.apply(this,arguments):new e(t)}),t.inherit(e,r,n)},o.prototype={assertNotBound:function(e){if(this.scope){var r="Cannot bind to "+e+" because this instance is already bound to "+this.key+"; one binding per instance (call unbind method or create another FirebaseObject instance)";return n.error(r),t.reject(r)}},bindTo:function(n,r){function o(o){function i(e){return angular.equals(e,c)&&e.$priority===c.$priority&&e.$value===c.$value}function a(e){l.assign(n,t.scopeData(e))}function s(){var e=l(n);return[e,e.$priority,e.$value]}var u=!1,l=e(r),c=o.rec;o.scope=n,o.varName=r;var f=t.debounce(function(e){var r=t.scopeData(e);c.$$scopeUpdated(r)["finally"](function(){u=!1,r.hasOwnProperty("$value")||(delete c.$value,delete l(n).$value)})},50,500),h=function(e){e=e[0],i(e)||(u=!0,f(e))},p=function(){u||i(l(n))||a(c)};return a(c),o.subs.push(n.$on("$destroy",o.unbind.bind(o))),o.subs.push(n.$watch(s,h,!0)),o.subs.push(c.$watch(p)),o.unbind.bind(o)}return this.assertNotBound(r)||o(this)},unbind:function(){this.scope&&(angular.forEach(this.subs,function(e){e()}),this.subs=[],this.scope=null,this.key=null)},destroy:function(){this.unbind(),this.rec=null}},r}]),angular.module("firebase").factory("$FirebaseObject",["$log","$firebaseObject",function(e,t){return function(){return e.warn("$FirebaseObject has been renamed. Use $firebaseObject instead."),t.apply(null,arguments)}}])}(),function(){"use strict";angular.module("firebase").factory("$firebase",function(){return function(){throw new Error("$firebase has been removed. You may instantiate $firebaseArray and $firebaseObject directly now. For simple write operations, just use the Firebase ref directly. See the AngularFire 1.0.0 changelog for details: https://www.firebase.com/docs/web/libraries/angular/changelog.html")}})}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError("'this' is null or not defined");var n=this.length>>>0;for(t=+t||0,Math.abs(t)===1/0&&(t=0),0>t&&(t+=n,0>t&&(t=0));n>t;t++)if(this[t]===e)return t;return-1}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)));
};return r.prototype=this.prototype,o.prototype=new r,o}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;r>i;i++)if(i in n&&(t=n[i],e.call(o,t,i,n)))return i;return-1}}),"function"!=typeof Object.create&&!function(){var e=function(){};Object.create=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw new TypeError("Argument must be an object");return e.prototype=t,new e}}(),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,a,s=[];for(i in o)e.call(o,i)&&s.push(i);if(t)for(a=0;r>a;a++)e.call(o,n[a])&&s.push(n[a]);return s}}()),"function"!=typeof Object.getPrototypeOf&&("object"==typeof"test".__proto__?Object.getPrototypeOf=function(e){return e.__proto__}:Object.getPrototypeOf=function(e){return e.constructor.prototype}),function(){"use strict";function e(t){if(!angular.isObject(t))return t;var n=angular.isArray(t)?[]:{};return angular.forEach(t,function(t,r){("string"!=typeof r||"$"!==r.charAt(0))&&(n[r]=e(t))}),n}angular.module("firebase").factory("$firebaseConfig",["$firebaseArray","$firebaseObject","$injector",function(e,t,n){return function(r){var o=angular.extend({},r);return"string"==typeof o.objectFactory&&(o.objectFactory=n.get(o.objectFactory)),"string"==typeof o.arrayFactory&&(o.arrayFactory=n.get(o.arrayFactory)),angular.extend({arrayFactory:e,objectFactory:t},o)}}]).factory("$firebaseUtils",["$q","$timeout","$rootScope",function(t,n,r){function o(e){function n(e){o.resolve(e)}function r(e){o.reject(e)}if(!angular.isFunction(e))throw new Error("missing resolver function");var o=t.defer();return e(n,r),o.promise}var i={batch:function(e,t){return function(){var n=Array.prototype.slice.call(arguments,0);i.compile(function(){e.apply(t,n)})}},debounce:function(e,t,n,r){function o(){l&&(l(),l=null),u&&Date.now()-u>r?f||(f=!0,i.compile(a)):(u||(u=Date.now()),l=i.wait(a,n))}function a(){l=null,u=null,f=!1,e.apply(t,c)}function s(){c=Array.prototype.slice.call(arguments,0),o()}var u,l,c,f;if("number"==typeof t&&(r=n,n=t,t=null),"number"!=typeof n)throw new Error("Must provide a valid integer for wait. Try 0 for a default");if("function"!=typeof e)throw new Error("Must provide a valid function to debounce");return r||(r=10*n||100),s.running=function(){return u>0},s},assertValidRef:function(e,t){if(!angular.isObject(e)||"function"!=typeof e.ref||"function"!=typeof e.ref().transaction)throw new Error(t||"Invalid Firebase reference")},inherit:function(e,t,n){var r=e.prototype;return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,angular.forEach(Object.keys(r),function(t){e.prototype[t]=r[t]}),angular.isObject(n)&&angular.extend(e.prototype,n),e},getPrototypeMethods:function(e,t,n){for(var r={},o=Object.getPrototypeOf({}),i=angular.isFunction(e)&&angular.isObject(e.prototype)?e.prototype:Object.getPrototypeOf(e);i&&i!==o;){for(var a in i)i.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(r[a]=!0,t.call(n,i[a],a,i));i=Object.getPrototypeOf(i)}},getPublicMethods:function(e,t,n){i.getPrototypeMethods(e,function(e,r){"function"==typeof e&&"_"!==r.charAt(0)&&t.call(n,e,r)})},defer:t.defer,reject:t.reject,resolve:t.when,whenUnwrapped:function(e,t){e&&i.resolve(e).then(function(e){e&&t(e)})},promise:angular.isFunction(t)?t:o,makeNodeResolver:function(e){return function(t,n){null===t?(arguments.length>2&&(n=Array.prototype.slice.call(arguments,1)),e.resolve(n)):e.reject(t)}},wait:function(e,t){var r=n(e,t||0);return function(){r&&(n.cancel(r),r=null)}},compile:function(e){return r.$evalAsync(e||function(){})},deepCopy:function(e){if(!angular.isObject(e))return e;var t=angular.isArray(e)?e.slice():angular.extend({},e);for(var n in t)t.hasOwnProperty(n)&&angular.isObject(t[n])&&(t[n]=i.deepCopy(t[n]));return t},trimKeys:function(e,t){i.each(e,function(n,r){t.hasOwnProperty(r)||delete e[r]})},scopeData:function(e){var t={$id:e.$id,$priority:e.$priority},n=!1;return i.each(e,function(e,r){n=!0,t[r]=i.deepCopy(e)}),!n&&e.hasOwnProperty("$value")&&(t.$value=e.$value),t},updateRec:function(e,t){var n=t.val(),r=angular.extend({},e);return angular.isObject(n)?delete e.$value:(e.$value=n,n={}),i.trimKeys(e,n),angular.extend(e,n),e.$priority=t.getPriority(),!angular.equals(r,e)||r.$value!==e.$value||r.$priority!==e.$priority},applyDefaults:function(e,t){return angular.isObject(t)&&angular.forEach(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)}),e},dataKeys:function(e){var t=[];return i.each(e,function(e,n){t.push(n)}),t},each:function(e,t,n){if(angular.isObject(e)){for(var r in e)if(e.hasOwnProperty(r)){var o=r.charAt(0);"_"!==o&&"$"!==o&&"."!==o&&t.call(n,e[r],r,e)}}else if(angular.isArray(e))for(var i=0,a=e.length;a>i;i++)t.call(n,e[i],i,e);return e},getKey:function(e){return"function"==typeof e.key?e.key():e.name()},toJSON:function(t){var n;return angular.isObject(t)||(t={$value:t}),angular.isFunction(t.toJSON)?n=t.toJSON():(n={},i.each(t,function(t,r){n[r]=e(t)})),angular.isDefined(t.$value)&&0===Object.keys(n).length&&null!==t.$value&&(n[".value"]=t.$value),angular.isDefined(t.$priority)&&Object.keys(n).length>0&&null!==t.$priority&&(n[".priority"]=t.$priority),angular.forEach(n,function(e,t){if(t.match(/[.$\[\]#\/]/)&&".value"!==t&&".priority"!==t)throw new Error("Invalid key "+t+" (cannot contain .$[]#)");if(angular.isUndefined(e))throw new Error("Key "+t+" was undefined. Cannot pass undefined in JSON. Use null instead.")}),n},doSet:function(e,t){var n=i.defer();if(angular.isFunction(e.set)||!angular.isObject(t))e.set(t,i.makeNodeResolver(n));else{var r=angular.extend({},t);e.once("value",function(t){t.forEach(function(e){r.hasOwnProperty(i.getKey(e))||(r[i.getKey(e)]=null)}),e.ref().update(r,i.makeNodeResolver(n))},function(e){n.reject(e)})}return n.promise},doRemove:function(e){var t=i.defer();return angular.isFunction(e.remove)?e.remove(i.makeNodeResolver(t)):e.once("value",function(n){var r=[];n.forEach(function(e){var n=i.defer();r.push(n.promise),e.ref().remove(i.makeNodeResolver(t))}),i.allPromises(r).then(function(){t.resolve(e)},function(e){t.reject(e)})},function(e){t.reject(e)}),t.promise},VERSION:"1.1.1",allPromises:t.all.bind(t)};return i}])}(),function(e,t){"use strict";var n=window.angulartics||(window.angulartics={});n.waitForVendorCount=0,n.waitForVendorApi=function(e,t,r,o,i){i||n.waitForVendorCount++,o||(o=r,r=void 0),!Object.prototype.hasOwnProperty.call(window,e)||void 0!==r&&void 0===window[e][r]?setTimeout(function(){n.waitForVendorApi(e,t,r,o,!0)},t):(n.waitForVendorCount--,o(window[e]))},e.module("angulartics",[]).provider("$analytics",function(){var t={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},r=["pageTrack","eventTrack","setAlias","setUsername","setAlias","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],o={},i={},a=function(e){return function(){n.waitForVendorCount&&(o[e]||(o[e]=[]),o[e].push(arguments))}},s=function(t,n){return i[t]||(i[t]=[]),i[t].push(n),function(){var n=arguments;e.forEach(i[t],function(e){e.apply(this,n)},this)}},u={settings:t},l=function(e,t){t?setTimeout(e,t):e()},c={$get:function(){return u},api:u,settings:t,virtualPageviews:function(e){this.settings.pageTracking.autoTrackVirtualPages=e},firstPageview:function(e){this.settings.pageTracking.autoTrackFirstPage=e},withBase:function(t){this.settings.pageTracking.basePath=t?e.element("base").attr("href").slice(0,-1):""},withAutoBase:function(e){this.settings.pageTracking.autoBasePath=e},developerMode:function(e){this.settings.developerMode=e}},f=function(n,r){u[n]=s(n,r);var i=t[n],a=i?i.bufferFlushDelay:null,c=null!==a?a:t.bufferFlushDelay;e.forEach(o[n],function(e,t){l(function(){r.apply(this,e)},t*c)})},h=function(e){return e.replace(/^./,function(e){return e.toUpperCase()})},p=function(e){var t="register"+h(e);c[t]=function(t){f(e,t)},u[e]=s(e,a(e))};return e.forEach(r,p),c}).run(["$rootScope","$window","$analytics","$injector",function(t,n,r,o){r.settings.pageTracking.autoTrackFirstPage&&o.invoke(["$location",function(e){var t=!0;if(o.has("$route")){var i=o.get("$route");for(var a in i.routes){t=!1;break}}else if(o.has("$state")){var s=o.get("$state");for(var u in s.get()){t=!1;break}}if(t)if(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=n.location.pathname),r.settings.pageTracking.trackRelativePath){var l=r.settings.pageTracking.basePath+e.url();r.pageTrack(l,e)}else r.pageTrack(e.absUrl(),e)}]),r.settings.pageTracking.autoTrackVirtualPages&&o.invoke(["$location",function(e){r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=n.location.pathname+"#"),o.has("$route")&&t.$on("$routeChangeSuccess",function(t,n){if(!n||!(n.$$route||n).redirectTo){var o=r.settings.pageTracking.basePath+e.url();r.pageTrack(o,e)}}),o.has("$state")&&t.$on("$stateChangeSuccess",function(t,n){var o=r.settings.pageTracking.basePath+e.url();r.pageTrack(o,e)})}]),r.settings.developerMode&&e.forEach(r,function(e,t){"function"==typeof e&&(r[t]=function(){})})}]).directive("analyticsOn",["$analytics",function(t){function n(e){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(e.tagName.toLowerCase()+":"+(e.type||""))>=0}function r(e){return n(e),"click"}function o(e){return n(e)?e.innerText||e.value:e.id||e.name||e.tagName}function i(e){return"analytics"===e.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(e.substr(9))}function a(e){var t=e.slice(9);return"undefined"!=typeof t&&null!==t&&t.length>0?t.substring(0,1).toLowerCase()+t.substring(1):t}return{restrict:"A",link:function(n,s,u){var l=u.analyticsOn||r(s[0]),c={};e.forEach(u.$attr,function(e,t){i(t)&&(c[a(t)]=u[t],u.$observe(t,function(e){c[a(t)]=e}))}),e.element(s[0]).bind(l,function(r){var i=u.analyticsEvent||o(s[0]);c.eventType=r.type,(!u.analyticsIf||n.$eval(u.analyticsIf))&&(u.analyticsProperties&&e.extend(c,n.$eval(u.analyticsProperties)),t.eventTrack(i,c))})}}}])}(angular),angular.module("geolocation",[]).constant("geolocation_msgs",{"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location","errors.location.timeout":"Service timeout has been reached"}),angular.module("geolocation").factory("geolocation",["$q","$rootScope","$window","geolocation_msgs",function(e,t,n,r){return{getLocation:function(o){var i=e.defer();return n.navigator&&n.navigator.geolocation?n.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){i.resolve(e)})},function(e){switch(e.code){case 1:t.$broadcast("error",r["errors.location.permissionDenied"]),t.$apply(function(){i.reject(r["errors.location.permissionDenied"])});break;case 2:t.$broadcast("error",r["errors.location.positionUnavailable"]),t.$apply(function(){i.reject(r["errors.location.positionUnavailable"])});break;case 3:t.$broadcast("error",r["errors.location.timeout"]),t.$apply(function(){i.reject(r["errors.location.timeout"])})}},o):(t.$broadcast("error",r["errors.location.unsupportedBrowser"]),t.$apply(function(){i.reject(r["errors.location.unsupportedBrowser"])})),i.promise}}}]),function(angular){"use strict";angular.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(e,t,n,r,o){return{restrict:"EA",replace:!0,scope:{center:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(t){this._leafletMap=e.defer(),this.getMap=function(){return this._leafletMap.promise},this.getLeafletScope=function(){return t}}],link:function(e,i,a,s){function u(){isNaN(a.width)?i.css("width",a.width):i.css("width",a.width+"px")}function l(){isNaN(a.height)?i.css("height",a.height):i.css("height",a.height+"px")}var c=r.isDefined,f=n.setDefaults(e.defaults,a.id),h=o.genDispatchMapEvent,p=o.getAvailableMapEvents();t.setDirectiveControls({},a.id),c(a.width)&&(u(),e.$watch(function(){return i[0].getAttribute("width")},function(){u(),d.invalidateSize()})),c(a.height)&&(l(),e.$watch(function(){return i[0].getAttribute("height")},function(){l(),d.invalidateSize()}));var d=new L.Map(i[0],n.getMapCreationDefaults(a.id));if(s._leafletMap.resolve(d),c(a.center)||d.setView([f.center.lat,f.center.lng],f.center.zoom),!c(a.tiles)&&!c(a.layers)){var g=L.tileLayer(f.tileLayer,f.tileLayerOptions);g.addTo(d),t.setTiles(g,a.id)}if(c(d.zoomControl)&&c(f.zoomControlPosition)&&d.zoomControl.setPosition(f.zoomControlPosition),c(d.zoomControl)&&f.zoomControl===!1&&d.zoomControl.removeFrom(d),c(d.zoomsliderControl)&&c(f.zoomsliderControl)&&f.zoomsliderControl===!1&&d.zoomsliderControl.removeFrom(d),!c(a.eventBroadcast))for(var v="broadcast",m=0;m<p.length;m++){var y=p[m];d.on(y,h(e,y,v),{eventName:y})}d.whenReady(function(){t.setMap(d,a.id)}),e.$on("$destroy",function(){n.reset(),d.remove(),t.unresolveMap(a.id)}),e.$on("invalidateSize",function(){d.invalidateSize()})}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(e,t){function n(e){return angular.isDefined(e)&&angular.isDefined(e.southWest)&&angular.isDefined(e.northEast)&&angular.isNumber(e.southWest.lat)&&angular.isNumber(e.southWest.lng)&&angular.isNumber(e.northEast.lat)&&angular.isNumber(e.northEast.lng)}var r=t.isArray,o=t.isNumber;return{createLeafletBounds:function(e){return n(e)?L.latLngBounds([e.southWest.lat,e.southWest.lng],[e.northEast.lat,e.northEast.lng]):void 0},isValidBounds:n,createBoundsFromArray:function(t){return r(t)&&2===t.length&&r(t[0])&&r(t[1])&&2===t[0].length&&2===t[1].length&&o(t[0][0])&&o(t[0][1])&&o(t[1][0])&&o(t[1][1])?{northEast:{lat:t[0][0],lng:t[0][1]},southWest:{lat:t[1][0],lng:t[1][1]}}:void e.error("[AngularJS - Leaflet] The bounds array is not valid.")}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletMapDefaults",function(e,t,n,r){var o=n.isDefined,i=n.isObject,a={},s=function(e,t,n){var a=r.getDefaults(n);if(!a.controls.layers.visible)return!1;var s=!1;return i(e)&&Object.keys(e).forEach(function(t){var n=e[t];o(n.layerOptions)&&n.layerOptions.showOnSelector===!1||(s=!0)}),i(t)&&Object.keys(t).forEach(function(e){var n=t[e];o(n.layerParams)&&n.layerParams.showOnSelector===!1||(s=!0)}),s},u=function(e){var t=r.getDefaults(e),n={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position,autoZIndex:!1};angular.extend(n,t.controls.layers.options);var i;return i=t.controls.layers&&o(t.controls.layers.control)?t.controls.layers.control.apply(this,[[],[],n]):new L.control.layers([],[],n)};return{layersControlMustBeVisible:s,updateLayersControl:function(e,t,n,r,i,l){var c,f=a[t],h=s(r,i,t);if(o(f)&&n){for(c in l.baselayers)f.removeLayer(l.baselayers[c]);for(c in l.overlays)f.removeLayer(l.overlays[c]);e.removeControl(f),delete a[t]}if(h){f=u(t),a[t]=f;for(c in r){var p=o(r[c].layerOptions)&&r[c].layerOptions.showOnSelector===!1;!p&&o(l.baselayers[c])&&f.addBaseLayer(l.baselayers[c],r[c].name)}for(c in i){var d=o(i[c].layerParams)&&i[c].layerParams.showOnSelector===!1;!d&&o(l.overlays[c])&&f.addOverlay(l.overlays[c],i[c].name)}e.addControl(f)}return h}}}]),angular.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(e,t,n){var r=n.getDefer,o=n.getUnresolvedDefer,i=n.setResolvedDefer,a={},s=this,u=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},l=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];l.forEach(function(e){a[e]={}}),this.unresolveMap=function(e){var t=n.obtainEffectiveMapId(a.map,e);l.forEach(function(e){a[e][t]=void 0})},l.forEach(function(e){var t=u(e);s["set"+t]=function(t,n){var r=o(a[e],n);r.resolve(t),i(a[e],n)},s["get"+t]=function(t){var n=r(a[e],t);return n.promise}})}]),angular.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["$log","leafletData","leafletHelpers",function(e,t,n){var r=n.isDefined,o=n.isString,i=n.isObject,a=n.errorHeader,s=a+"[leafletDirectiveControlsHelpers",u=function(n,a,u,l){var c=s+".extend] ",f={};if(!r(a))return void e.error(c+"thingToAddName cannot be undefined");if(o(a)&&r(u)&&r(l))f[a]={create:u,clean:l};else{if(!i(a)||r(u)||r(l))return void e.error(c+"incorrect arguments");f=a}t.getDirectiveControls().then(function(e){angular.extend(e,f),t.setDirectiveControls(e,n)})};return{extend:u}}]),angular.module("leaflet-directive").factory("leafletEvents",["leafletMapEvents","leafletMarkerEvents","leafletPathEvents",function(e,t,n){return angular.extend({},e,{bindMarkerEvents:t.bindEvents,getAvailableMarkerEvents:t.getAvailableEvents},n)}]),angular.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(e,t){var n=e,r=t,o=function(e,t){return this.lat=e,this.lng=t,this},i=function(e){return Array.isArray(e)&&2===e.length?e[1]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[1]:+e.lat},a=function(e){return Array.isArray(e)&&2===e.length?e[0]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[0]:+e.lng},s=function(e){if(n.isUndefined(e))return!1;if(n.isArray(e)){if(2===e.length&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0}else if(n.isDefined(e.type)&&"Point"===e.type&&n.isArray(e.coordinates)&&2===e.coordinates.length&&n.isNumber(e.coordinates[0])&&n.isNumber(e.coordinates[1]))return!0;var t=r.all(["lat","lng"],function(t){return n.isDefined(e[t])&&n.isNumber(e[t])});return t},u=function(e){if(e&&s(e)){var t=null;if(Array.isArray(e)&&2===e.length)t=new o(e[1],e[0]);else{if(!n.isDefined(e.type)||"Point"!==e.type)return e;t=new o(e.coordinates[1],e.coordinates[0])}return angular.extend(e,t)}};return{getLat:i,getLng:a,validateCoords:s,getCoords:u}}]),angular.module("leaflet-directive").factory("leafletHelpers",["$q","$log",function(e,t){function n(e,n){var r,i;if(angular.isDefined(n))r=n;else if(0===Object.keys(e).length)r="main";else if(Object.keys(e).length>=1)for(i in e)e.hasOwnProperty(i)&&(r=i);else 0===Object.keys(e).length?r="main":t.error(o+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return r}function r(t,r){var o,i=n(t,r);return angular.isDefined(t[i])&&t[i].resolvedDefer!==!0?o=t[i].defer:(o=e.defer(),t[i]={defer:o,resolvedDefer:!1}),o}var o="[AngularJS - Leaflet] ",i=angular.copy,a=i,s=function(e,t){var n;if(e&&angular.isObject(e))return null!==t&&angular.isString(t)?(n=e,t.split(".").forEach(function(e){n&&(n=n[e])}),n):t},u=function(e){return e.split(".").reduce(function(e,t){return e+'["'+t+'"]'})},l=function(e){return e.reduce(function(e,t){return e+"."+t})},c=function(e){return angular.isDefined(e)&&null!==e},f=function(e){return!c(e)};return{copy:i,clone:a,errorHeader:o,getObjectValue:s,getObjectArrayPath:u,getObjectDotPath:l,defaultTo:function(e,t){return c(e)?e:t},isTruthy:function(e){return"true"===e||e===!0},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:c,isUndefined:f,isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,isValidCenter:function(e){return angular.isDefined(e)&&angular.isNumber(e.lat)&&angular.isNumber(e.lng)&&angular.isNumber(e.zoom)},isValidPoint:function(e){return angular.isDefined(e)?angular.isArray(e)?2===e.length&&angular.isNumber(e[0])&&angular.isNumber(e[1]):angular.isNumber(e.lat)&&angular.isNumber(e.lng):!1},isSameCenterOnMap:function(e,t){var n=t.getCenter(),r=t.getZoom();return e.lat&&e.lng&&n.lat.toFixed(4)===e.lat.toFixed(4)&&n.lng.toFixed(4)===e.lng.toFixed(4)&&r===e.zoom?!0:!1},safeApply:function(e,t){var n=e.$root.$$phase;"$apply"===n||"$digest"===n?e.$eval(t):e.$evalAsync(t)},obtainEffectiveMapId:n,getDefer:function(e,t){var o,i=n(e,t);return o=angular.isDefined(e[i])&&e[i].resolvedDefer!==!1?e[i].defer:r(e,t)},getUnresolvedDefer:r,setResolvedDefer:function(e,t){var r=n(e,t);e[r].resolvedDefer=!0},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(e){return this.isLoaded()?e instanceof L.AwesomeMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},PolylineDecoratorPlugin:{isLoaded:function(){return angular.isDefined(L.PolylineDecorator)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.PolylineDecorator:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},MakiMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.MakiMarkers)&&angular.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.MakiMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},ExtraMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.ExtraMarkers)&&angular.isDefined(L.ExtraMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.ExtraMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(e){return this.isLoaded()?e instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(e){return this.isLoaded()?e instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(e){return this.isLoaded()?e instanceof L.GeoJSON.WFS:!1}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(e){return this.isLoaded()?e instanceof lvector.AGS:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(e){return this.isLoaded()?e instanceof L.Yandex:!1}},DynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.dynamicMapLayer:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(e){return this.isLoaded()?e instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(e){return this.isLoaded()?e instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(e){return e instanceof L.DivIcon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}},Icon:{is:function(e){return e instanceof L.Icon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("leaflet-directive").service("leafletIterators",["$log","leafletHelpers",function(e,t){var n,r=t,o=t.errorHeader+"leafletIterators: ",i=Object.keys,a=r.isFunction,s=r.isObject,u=Math.pow(2,53)-1,l=function(e){var t=null!==e&&e.length;return r.isNumber(t)&&t>=0&&u>=t},c=function(e){return e},f=function(e){return function(t){return null===t?void 0:t[e]}},h=function(e,t,n){if(void 0===t)return e;switch(null===n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},p=function(e,t){return function(n){var r=arguments.length;if(2>r||null===n)return n;for(var o=1;r>o;o++)for(var i=arguments[o],a=e(i),s=a.length,u=0;s>u;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=i[l])}return n}},d=null;n=d=p(i);var g,v=function(e,t){var n=i(t),r=n.length;if(null===e)return!r;for(var o=Object(e),a=0;r>a;a++){var s=n[a];if(t[s]!==o[s]||!(s in o))return!1}return!0},m=null;g=m=function(e){return e=n({},e),function(t){return v(t,e)}};var y,b=function(e,t,n){return null===e?c:a(e)?h(e,t,n):s(e)?g(e):f(e)},_=null;y=_=function(e,t,n){t=b(t,n);for(var r=!l(e)&&i(e),o=(r||e).length,a=0;o>a;a++){var s=r?r[a]:a;if(!t(e[s],s,e))return!1}return!0};var w=function(t,n,i,a){return i||r.isDefined(t)&&r.isDefined(n)?r.isFunction(n)?!1:(a=r.defaultTo(n,"cb"),e.error(o+a+" is not a function"),!0):!0},E=function(e,t,n){if(!w(void 0,n,!0,"internalCb")&&!w(e,t))for(var r in e)n(e[r],r)},C=function(e,t){E(e,t,function(e,n){t(e,n)})};return{each:C,forEach:C,every:y,all:_}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","leafletHelpers","leafletIterators",function($rootScope,$log,leafletHelpers,leafletIterators){function isValidLayerType(e){return isString(e.type)?-1===Object.keys(layerTypes).indexOf(e.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[e.type].mustHaveUrl&&!isString(e.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[e.type].mustHaveData&&!isDefined(e.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[e.type].mustHaveLayer&&!isDefined(e.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have an layer defined"),!1):layerTypes[e.type].mustHaveBounds&&!isDefined(e.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have bounds defined"),!1):layerTypes[e.type].mustHaveKey&&!isDefined(e.key)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have key defined"),!1):!0:($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(e){if(isValidLayerType(e)){if(!isString(e.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(e.layerParams)||(e.layerParams={}),isObject(e.layerOptions)||(e.layerOptions={});for(var t in e.layerParams)e.layerOptions[t]=e.layerParams[t];var n={url:e.url,data:e.data,options:e.layerOptions,layer:e.layer,type:e.layerType,bounds:e.bounds,key:e.key,pluginOptions:e.pluginOptions,user:e.user};return layerTypes[e.type].createLayer(n)}}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,$it=leafletIterators,utfGridCreateLayer=function(e){if(!Helpers.UTFGridPlugin.isLoaded())return void $log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");var t=new L.UtfGrid(e.url,e.pluginOptions);return t.on("mouseover",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",e)}),t.on("mouseout",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",e)}),t.on("click",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",e)}),t.on("mousemove",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMousemove",e)}),t},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer(e.url,e.options)}},mapbox:{mustHaveKey:!0,createLayer:function(e){var t="//{s}.tiles.mapbox.com/v3/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(e){return Helpers.GeoJSONPlugin.isLoaded()?new L.TileLayer.GeoJSON(e.url,e.pluginOptions,e.options):void 0}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){return e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(e)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png",n=L.tileLayer(t,e.options);e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json";var r=utfGridCreateLayer(e);return L.layerGroup([n,r])}},wms:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wms(e.url,e.options)}},wmts:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wmts(e.url,e.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(e){var t=[];return $it.each(e.options.layers,function(e){t.push(createLayer(e))}),L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"SATELLITE";if(Helpers.GoogleLayerPlugin.isLoaded())return new L.Google(t,e.options)}},china:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"";if(Helpers.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(t,e.options)}},ags:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSLayerPlugin.isLoaded()){var t=angular.copy(e.options);angular.extend(t,{url:e.url});var n=new lvector.AGS(t);return n.onAdd=function(e){this.setMap(e)},n.onRemove=function(){this.setMap(null)},n}}},dynamic:{mustHaveUrl:!0,createLayer:function(e){return Helpers.DynamicMapLayerPlugin.isLoaded()?L.esri.dynamicMapLayer(e.url,e.options):void 0}},markercluster:{mustHaveUrl:!1,createLayer:function(e){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(e.options):void $log.error("[AngularJS - Leaflet] The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(e){return Helpers.BingLayerPlugin.isLoaded()?new L.BingLayer(e.key,e.options):void 0}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(e.options);return isDefined(e.data)&&t.setData(e.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return isArray(e.data)&&t.setLatLngs(e.data),isObject(e.options)&&t.setOptions(e.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"map";if(Helpers.YandexLayerPlugin.isLoaded())return new L.Yandex(t,e.options);
}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(e){return L.imageOverlay(e.url,e.bounds,e.options)}},custom:{createLayer:function(e){return e.layer instanceof L.Class?angular.copy(e.layer):void $log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(e){return cartodb.createLayer(e.map,e.url)}}};return{createLayer:createLayer}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var e=function(e,t,n,r){if(e.innerHTML="",t.error)e.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"</div>";else if("arcgis"===n)for(var o=0;o<t.layers.length;o++){var i=t.layers[o];e.innerHTML+='<div class="info-title" data-layerid="'+i.layerId+'">'+i.layerName+"</div>";for(var a=0;a<i.legend.length;a++){var s=i.legend[a];e.innerHTML+='<div class="inline" data-layerid="'+i.layerId+'"><img src="data:'+s.contentType+";base64,"+s.imageData+'" /></div><div class="info-label" data-layerid="'+i.layerId+'">'+s.label+"</div>"}}else"image"===n&&(e.innerHTML='<img src="'+r+'"/>')},t=function(t,n,r,o){return function(){var i=L.DomUtil.create("div",n);return L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation)),e(i,t,r,o),i}},n=function(e,t){return function(){for(var n=L.DomUtil.create("div",t),r=0;r<e.colors.length;r++)n.innerHTML+='<div class="outline"><i style="background:'+e.colors[r]+'"></i></div><div class="info-label">'+e.labels[r]+"</div>";return L.Browser.touch?L.DomEvent.on(n,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"mousewheel",L.DomEvent.stopPropagation)),n}};return{getOnAddLegend:t,getOnAddArrayLegend:n,updateLegend:e}}),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(e,t){function n(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var r=t.isDefined,o=t.isObject,i=t.obtainEffectiveMapId,a={};return{reset:function(){a={}},getDefaults:function(e){var t=i(a,e);return a[t]},getMapCreationDefaults:function(e){var t=i(a,e),n=a[t],o={maxZoom:n.maxZoom,keyboard:n.keyboard,dragging:n.dragging,zoomControl:n.zoomControl,doubleClickZoom:n.doubleClickZoom,scrollWheelZoom:n.scrollWheelZoom,tap:n.tap,touchZoom:n.touchZoom,attributionControl:n.attributionControl,worldCopyJump:n.worldCopyJump,crs:n.crs};if(r(n.minZoom)&&(o.minZoom=n.minZoom),r(n.zoomAnimation)&&(o.zoomAnimation=n.zoomAnimation),r(n.fadeAnimation)&&(o.fadeAnimation=n.fadeAnimation),r(n.markerZoomAnimation)&&(o.markerZoomAnimation=n.markerZoomAnimation),n.map)for(var s in n.map)o[s]=n.map[s];return o},setDefaults:function(e,t){var s=n();r(e)&&(s.doubleClickZoom=r(e.doubleClickZoom)?e.doubleClickZoom:s.doubleClickZoom,s.scrollWheelZoom=r(e.scrollWheelZoom)?e.scrollWheelZoom:s.doubleClickZoom,s.tap=r(e.tap)?e.tap:s.tap,s.touchZoom=r(e.touchZoom)?e.touchZoom:s.doubleClickZoom,s.zoomControl=r(e.zoomControl)?e.zoomControl:s.zoomControl,s.zoomsliderControl=r(e.zoomsliderControl)?e.zoomsliderControl:s.zoomsliderControl,s.attributionControl=r(e.attributionControl)?e.attributionControl:s.attributionControl,s.tileLayer=r(e.tileLayer)?e.tileLayer:s.tileLayer,s.zoomControlPosition=r(e.zoomControlPosition)?e.zoomControlPosition:s.zoomControlPosition,s.keyboard=r(e.keyboard)?e.keyboard:s.keyboard,s.dragging=r(e.dragging)?e.dragging:s.dragging,r(e.controls)&&angular.extend(s.controls,e.controls),o(e.crs)?s.crs=e.crs:r(L.CRS[e.crs])&&(s.crs=L.CRS[e.crs]),r(e.center)&&angular.copy(e.center,s.center),r(e.tileLayerOptions)&&angular.copy(e.tileLayerOptions,s.tileLayerOptions),r(e.maxZoom)&&(s.maxZoom=e.maxZoom),r(e.minZoom)&&(s.minZoom=e.minZoom),r(e.zoomAnimation)&&(s.zoomAnimation=e.zoomAnimation),r(e.fadeAnimation)&&(s.fadeAnimation=e.fadeAnimation),r(e.markerZoomAnimation)&&(s.markerZoomAnimation=e.markerZoomAnimation),r(e.worldCopyJump)&&(s.worldCopyJump=e.worldCopyJump),r(e.map)&&(s.map=e.map),r(e.path)&&(s.path=e.path));var u=i(a,t);return a[u]=s,s}}}]),angular.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","$log","$compile","leafletGeoJsonHelpers",function(e,t,n,r,o,i){var a=n.isDefined,s=n.defaultTo,u=n.MarkerClusterPlugin,l=n.AwesomeMarkersPlugin,c=n.MakiMarkersPlugin,f=n.ExtraMarkersPlugin,h=n.safeApply,p=n,d=n.isString,g=n.isNumber,v=n.isObject,m={},y=i,b=n.errorHeader,_=function(e){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(n){t+=n+": "+s(e[n],"undefined")+" \n"}),"[leafletMarker] : \n"+t},w=function(e,t){var n=t?console:r;n.debug(_(e))},E=function(e){if(a(e)&&a(e.type)&&"awesomeMarker"===e.type)return l.isLoaded()||r.error(b+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(e);if(a(e)&&a(e.type)&&"makiMarker"===e.type)return c.isLoaded()||r.error(b+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(e);if(a(e)&&a(e.type)&&"extraMarker"===e.type)return f.isLoaded()||r.error(b+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(e);if(a(e)&&a(e.type)&&"div"===e.type)return new L.divIcon(e);if(a(e)&&a(e.type)&&"icon"===e.type)return e.icon;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return a(e)&&a(e.iconUrl)?new L.Icon(e):new L.Icon.Default({iconUrl:t,shadowUrl:n,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},C=function(e){a(m[e])&&m.splice(e,1)},S=function(){m={}},T=function(e,t,n){if(e.closePopup(),a(n)&&a(n.overlays))for(var r in n.overlays)if((n.overlays[r]instanceof L.LayerGroup||n.overlays[r]instanceof L.FeatureGroup)&&n.overlays[r].hasLayer(e))return void n.overlays[r].removeLayer(e);if(a(m))for(var o in m)m[o].hasLayer(e)&&m[o].removeLayer(e);t.hasLayer(e)&&t.removeLayer(e)},A=function(n,r){n.openPopup();var i=angular.isFunction(r.getMessageScope)?r.getMessageScope():e,s=a(r.compileMessage)?r.compileMessage:!0,u=function(e){if(a(e)&&a(e._contentNode)){var n=function(e){e._updateLayout(),e._updatePosition(),e.options.autoPan&&e._adjustPan()};if(o(e._contentNode)(i),e._contentNode.innerHTML.indexOf("ngInclude")>-1)var r=i.$on("$includeContentLoaded",function(){t(function(){n(e),r()})});else t(function(){n(e)})}};s&&u(n.getPopup())},P=function(t,n){var r=angular.isFunction(n.getMessageScope)?n.getMessageScope():e,i=angular.isFunction(n.getLabelScope)?n.getLabelScope():r,s=a(n.compileMessage)?n.compileMessage:!0;p.LabelPlugin.isLoaded()&&a(n.label)&&(a(n.label.options)&&n.label.options.noHide===!0&&t.showLabel(),s&&a(t.label)&&o(t.label._container)(i))};return{resetMarkerGroup:C,resetMarkerGroups:S,deleteMarker:T,manageOpenPopup:A,manageOpenLabel:P,createMarker:function(e){if(!a(e)||!y.validateCoords(e))return void r.error(b+"The marker definition is not valid.");var t=y.getCoords(e);if(!a(t))return void r.error(b+"Unable to get coordinates from markerData.");var n={icon:E(e.icon),title:a(e.title)?e.title:"",draggable:a(e.draggable)?e.draggable:!1,clickable:a(e.clickable)?e.clickable:!0,riseOnHover:a(e.riseOnHover)?e.riseOnHover:!1,zIndexOffset:a(e.zIndexOffset)?e.zIndexOffset:0,iconAngle:a(e.iconAngle)?e.iconAngle:0};for(var o in e)e.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=e[o]);var i=new L.marker(t,n);return d(e.message)||i.unbindPopup(),i},addMarkerToGroup:function(e,t,n,o){return d(t)?u.isLoaded()?(a(m[t])||(m[t]=new L.MarkerClusterGroup(n),o.addLayer(m[t])),void m[t].addLayer(e)):void r.error(b+"The MarkerCluster plugin is not loaded."):void r.error(b+"The marker group you have specified is invalid.")},listenMarkerEvents:function(e,t,n){e.on("popupopen",function(){h(n,function(){t.focus=!0,A(e,t)})}),e.on("popupclose",function(){h(n,function(){t.focus=!1})}),e.on("add",function(){h(n,function(){"label"in t&&P(e,t)})})},addMarkerWatcher:function(e,t,n,o,i,u){var l=p.getObjectArrayPath("markers."+t);u=s(u,!0);var c=n.$watch(l,function(t,n){if(!a(t))return T(e,i,o),void c();if(a(n)){if(!y.validateCoords(t))return r.warn("There are problems with lat-lng data, please verify your marker model"),void T(e,i,o);var s=t===n;if(a(t.iconAngle)&&n.iconAngle!==t.iconAngle&&e.setIconAngle(t.iconAngle),d(t.layer)||d(n.layer)&&(a(o.overlays[n.layer])&&o.overlays[n.layer].hasLayer(e)&&(o.overlays[n.layer].removeLayer(e),e.closePopup()),i.hasLayer(e)||i.addLayer(e)),(g(t.opacity)||g(parseFloat(t.opacity)))&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),d(t.layer)&&n.layer!==t.layer){if(d(n.layer)&&a(o.overlays[n.layer])&&o.overlays[n.layer].hasLayer(e)&&o.overlays[n.layer].removeLayer(e),e.closePopup(),i.hasLayer(e)&&i.removeLayer(e),!a(o.overlays[t.layer]))return void r.error(b+"You must use a name of an existing layer");var u=o.overlays[t.layer];if(!(u instanceof L.LayerGroup||u instanceof L.FeatureGroup))return void r.error(b+'A marker can only be added to a layer of type "group" or "featureGroup"');u.addLayer(e),i.hasLayer(e)&&t.focus===!0&&A(e,t)}if(t.draggable!==!0&&n.draggable===!0&&a(e.dragging)&&e.dragging.disable(),t.draggable===!0&&n.draggable!==!0&&(e.dragging?e.dragging.enable():L.Handler.MarkerDrag&&(e.dragging=new L.Handler.MarkerDrag(e),e.options.draggable=!0,e.dragging.enable())),v(t.icon)||v(n.icon)&&(e.setIcon(E()),e.closePopup(),e.unbindPopup(),d(t.message)&&e.bindPopup(t.message,t.popupOptions)),v(t.icon)&&v(n.icon)&&!angular.equals(t.icon,n.icon)){var l=!1;e.dragging&&(l=e.dragging.enabled()),e.setIcon(E(t.icon)),l&&e.dragging.enable(),e.closePopup(),e.unbindPopup(),d(t.message)&&e.bindPopup(t.message,t.popupOptions)}!d(t.message)&&d(n.message)&&(e.closePopup(),e.unbindPopup()),p.LabelPlugin.isLoaded()&&(a(t.label)&&a(t.label.message)?"label"in n&&"message"in n.label&&!angular.equals(t.label.message,n.label.message)?e.updateLabelContent(t.label.message):angular.isFunction(e.getLabel)?P(e,t):(e.bindLabel(t.label.message,t.label.options),P(e,t)):(!("label"in t)||"message"in t.label)&&angular.isFunction(e.unbindLabel)&&e.unbindLabel()),d(t.message)&&!d(n.message)&&e.bindPopup(t.message,t.popupOptions),d(t.message)&&d(n.message)&&t.message!==n.message&&e.setPopupContent(t.message);var f=!1;t.focus!==!0&&n.focus===!0&&(e.closePopup(),f=!0),(t.focus===!0&&(!a(n.focus)||n.focus===!1)||s&&t.focus===!0)&&(A(e,t),f=!0),n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset);var h=e.getLatLng(),m=d(t.layer)&&p.MarkerClusterPlugin.is(o.overlays[t.layer]);m?f?(t.lat!==n.lat||t.lng!==n.lng)&&(o.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),o.overlays[t.layer].addLayer(e)):h.lat!==t.lat||h.lng!==t.lng?(o.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),o.overlays[t.layer].addLayer(e)):t.lat!==n.lat||t.lng!==n.lng?(o.overlays[t.layer].removeLayer(e),e.setLatLng([t.lat,t.lng]),o.overlays[t.layer].addLayer(e)):v(t.icon)&&v(n.icon)&&!angular.equals(t.icon,n.icon)&&(o.overlays[t.layer].removeLayer(e),o.overlays[t.layer].addLayer(e)):(h.lat!==t.lat||h.lng!==t.lng)&&e.setLatLng([t.lat,t.lng])}},u)},string:_,log:w}}]),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(e,t,n){function r(e){return e.filter(function(e){return c(e)}).map(function(e){return o(e)})}function o(e){return u(e)?new L.LatLng(e[0],e[1]):new L.LatLng(e.lat,e.lng)}function i(e){return e.map(function(e){return r(e)})}function a(e,t){for(var n={},r=0;r<f.length;r++){var o=f[r];s(e[o])?n[o]=e[o]:s(t.path[o])&&(n[o]=t.path[o])}return n}var s=n.isDefined,u=n.isArray,l=n.isNumber,c=n.isValidPoint,f=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],h=function(e,t){for(var n={},r=0;r<f.length;r++){var o=f[r];s(t[o])&&(n[o]=t[o])}e.setStyle(t)},p=function(e){if(!u(e))return!1;for(var t=0;t<e.length;t++){var n=e[t];if(!c(n))return!1}return!0},d={polyline:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polyline([],e)},setPath:function(e,t){e.setLatLngs(r(t.latlngs)),h(e,t)}},multiPolyline:{isValid:function(e){var t=e.latlngs;if(!u(t))return!1;for(var n in t){var r=t[n];if(!p(r))return!1}return!0},createPath:function(e){return new L.multiPolyline([[[0,0],[1,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),h(e,t)}},polygon:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polygon([],e)},setPath:function(e,t){e.setLatLngs(r(t.latlngs)),h(e,t)}},multiPolygon:{isValid:function(e){var t=e.latlngs;if(!u(t))return!1;for(var n in t){var r=t[n];if(!p(r))return!1}return!0},createPath:function(e){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),h(e,t)}},rectangle:{isValid:function(e){var t=e.latlngs;if(!u(t)||2!==t.length)return!1;for(var n in t){var r=t[n];if(!c(r))return!1}return!0},createPath:function(e){return new L.Rectangle([[0,0],[1,1]],e)},setPath:function(e,t){e.setBounds(new L.LatLngBounds(r(t.latlngs))),h(e,t)}},circle:{isValid:function(e){var t=e.latlngs;return c(t)&&l(e.radius)},createPath:function(e){return new L.Circle([0,0],1,e)},setPath:function(e,t){e.setLatLng(o(t.latlngs)),s(t.radius)&&e.setRadius(t.radius),h(e,t)}},circleMarker:{isValid:function(e){var t=e.latlngs;return c(t)&&l(e.radius)},createPath:function(e){return new L.CircleMarker([0,0],e)},setPath:function(e,t){e.setLatLng(o(t.latlngs)),s(t.radius)&&e.setRadius(t.radius),h(e,t)}}},g=function(e){var t={};return e.latlngs&&(t.latlngs=e.latlngs),e.radius&&(t.radius=e.radius),t};return{setPathOptions:function(e,t,n){s(t)||(t="polyline"),d[t].setPath(e,n)},createPath:function(e,n,r){s(n.type)||(n.type="polyline");var o=a(n,r),i=g(n);return d[n.type].isValid(i)?d[n.type].createPath(o):void t.error("[AngularJS - Leaflet] Invalid data passed to the "+n.type+" path")}}}]),angular.module("leaflet-directive").service("leafletWatchHelpers",function(){var e=function(e,t,n,r,o){var i=e[t](n,function(e,t){o(e,t),r.doWatch||i()},r.isDeep);return i},t=function(t,n,r,o){return e(t,"$watch",n,r,o)},n=function(t,n,r,o){return e(t,"$watchCollection",n,r,o)};return{maybeWatch:t,maybeWatchCollection:n}}),angular.module("leaflet-directive").directive("bounds",["$log","$timeout","leafletHelpers","leafletBoundsHelpers",function(e,t,n,r){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","center"],link:function(o,i,a,s){var u=n.isDefined,l=r.createLeafletBounds,c=s[0].getLeafletScope(),f=s[0],h=function(e){return 0===e._southWest.lat&&0===e._southWest.lng&&0===e._northEast.lat&&0===e._northEast.lng};f.getMap().then(function(n){c.$on("boundsChanged",function(e){var t=e.currentScope,r=n.getBounds();if(!h(r)&&!t.settingBoundsFromScope){var o={northEast:{lat:r._northEast.lat,lng:r._northEast.lng},southWest:{lat:r._southWest.lat,lng:r._southWest.lng},options:r.options};angular.equals(t.bounds,o)||(t.bounds=o)}}),c.$watch("bounds",function(r){if(!u(r))return void e.error("[AngularJS - Leaflet] Invalid bounds");var i=l(r);i&&!n.getBounds().equals(i)&&(o.settingBoundsFromScope=!0,n.fitBounds(i,r.options),t(function(){o.settingBoundsFromScope=!1}))},!0)})}}}]),angular.module("leaflet-directive").directive("center",["$log","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(e,t,n,r,o,i,a,s){var u,l=i.isDefined,c=i.isNumber,f=i.isSameCenterOnMap,h=i.safeApply,p=i.isValidCenter,d=a.isValidBounds,g=i.isUndefinedOrEmpty,v=function(e,t){return l(e)&&d(e)&&g(t)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){u=t.defer(),this.getCenter=function(){return u.promise}},link:function(t,i,d,g){var m=g.getLeafletScope(),y=m.center;g.getMap().then(function(i){var g=o.getDefaults(d.id);if(-1!==d.center.search("-"))return e.error('The "center" variable can\'t use a "-" on his key name: "'+d.center+'".'),void i.setView([g.center.lat,g.center.lng],g.center.zoom);if(v(m.bounds,y))i.fitBounds(a.createLeafletBounds(m.bounds),m.bounds.options),y=i.getCenter(),h(m,function(e){e.center={lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1},angular.extend(e.center,{lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1})}),h(m,function(e){var t=i.getBounds();e.bounds={northEast:{lat:t._northEast.lat,lng:t._northEast.lng},southWest:{lat:t._southWest.lat,lng:t._southWest.lng}}});else{if(!l(y))return e.error('The "center" property is not defined in the main scope'),void i.setView([g.center.lat,g.center.lng],g.center.zoom);l(y.lat)&&l(y.lng)||l(y.autoDiscover)||angular.copy(g.center,y)}var b,_;if("yes"===d.urlHashCenter){var w=function(){var e,t=n.search();if(l(t.c)){var r=t.c.split(":");3===r.length&&(e={lat:parseFloat(r[0]),lng:parseFloat(r[1]),zoom:parseInt(r[2],10)})}return e};b=w(),m.$on("$locationChangeSuccess",function(e){var t=e.currentScope,n=w();l(n)&&!f(n,i)&&(t.center={lat:n.lat,lng:n.lng,zoom:n.zoom})})}m.$watch("center",function(t){return l(b)&&(angular.copy(b,t),b=void 0),p(t)||t.autoDiscover===!0?t.autoDiscover===!0?(c(t.zoom)||i.setView([g.center.lat,g.center.lng],g.center.zoom),void(c(t.zoom)&&t.zoom>g.center.zoom?i.locate({setView:!0,maxZoom:t.zoom}):l(g.maxZoom)?i.locate({setView:!0,maxZoom:g.maxZoom}):i.locate({setView:!0}))):void(_&&f(t,i)||(m.settingCenterFromScope=!0,i.setView([t.lat,t.lng],t.zoom),s.notifyCenterChangedToBounds(m,i),r(function(){m.settingCenterFromScope=!1}))):void e.warn("[AngularJS - Leaflet] invalid 'center'")},!0),i.whenReady(function(){_=!0}),i.on("moveend",function(){u.resolve(),s.notifyCenterUrlHashChanged(m,i,d,n.search()),f(y,i)||t.settingCenterFromScope||h(m,function(e){m.settingCenterFromScope||angular.extend(e.center,{lat:i.getCenter().lat,lng:i.getCenter().lng,zoom:i.getZoom(),autoDiscover:!1}),s.notifyCenterChangedToBounds(m,i)})}),y.autoDiscover===!0&&i.on("locationerror",function(){e.warn("[AngularJS - Leaflet] The Geolocation API is unauthorized on this page."),p(y)?(i.setView([y.lat,y.lng],y.zoom),s.notifyCenterChangedToBounds(m,i)):(i.setView([g.center.lat,g.center.lng],g.center.zoom),s.notifyCenterChangedToBounds(m,i))})})}}}]),angular.module("leaflet-directive").directive("controls",["$log","leafletHelpers",function(e,t){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(n,r,o,i){if(i){var a=t.isDefined,s=i.getLeafletScope(),u=s.controls;i.getMap().then(function(n){if(a(L.Control.Draw)&&a(u.draw)){a(u.edit)||(u.edit={featureGroup:new L.FeatureGroup},n.addLayer(u.edit.featureGroup));var r=new L.Control.Draw(u);n.addControl(r)}if(a(u.scale)){var o=new L.control.scale(u.scale);n.addControl(o)}if(a(u.fullscreen))if(t.FullScreenControlPlugin.isLoaded()){var i=new L.Control.Fullscreen(u.fullscreen);n.addControl(i)}else e.error("[AngularJS - Leaflet] Fullscreen plugin is not loaded.");if(a(u.custom))for(var s in u.custom)n.addControl(u.custom[s])})}}}}]),angular.module("leaflet-directive").directive("decorations",["$log","leafletHelpers",function(e,t){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(n,r,o,i){function a(t){return c(t)&&c(t.coordinates)&&(l.isLoaded()||e.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(t.coordinates)}function s(e,t){return c(e)&&c(t)&&c(t.coordinates)&&c(t.patterns)?(e.setPaths(t.coordinates),e.setPatterns(t.patterns),e):void 0}var u=i.getLeafletScope(),l=t.PolylineDecoratorPlugin,c=t.isDefined,f={};i.getMap().then(function(e){u.$watch("decorations",function(t){for(var n in f)c(t[n])&&angular.equals(t[n],f)||(e.removeLayer(f[n]),delete f[n]);for(var r in t){var o=t[r],i=a(o);c(i)&&(f[r]=i,e.addLayer(i),s(i,o))}},!0)})}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletEvents",function(e,t,n,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(t,o,i,a){var s=n.isObject,u=n.isDefined,l=a.getLeafletScope(),c=l.eventBroadcast,f=r.getAvailableMapEvents(),h=r.genDispatchMapEvent;a.getMap().then(function(t){var n,r,o=[],i="broadcast";if(u(c.map))if(s(c.map))if("emit"!==c.map.logic&&"broadcast"!==c.map.logic?e.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):i=c.map.logic,s(c.map.enable)&&c.map.enable.length>=0)for(n=0;n<c.map.enable.length;n++)r=c.map.enable[n],-1===o.indexOf(r)&&-1!==f.indexOf(r)&&o.push(r);else e.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.");else e.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model.");else o=f;for(n=0;n<o.length;n++)r=o[n],t.on(r,h(l,r,i),{eventName:r})})}}}]),angular.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(e,t,n,r,o,i,a,s){var u=o.maybeWatch,l=r.watchOptions,c=i.extend,f=r,h=a;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,o,i){var a=r.isDefined,p=i.getLeafletScope(),d={},g=!1;i.getMap().then(function(e){var t=p.geojsonWatchOptions||l,i=function(e,t){var n;return n=angular.isFunction(e.onEachFeature)?e.onEachFeature:function(n,i){r.LabelPlugin.isLoaded()&&a(n.properties.description)&&i.bindLabel(n.properties.description),s.bindEvents(i,null,n,p,t,{resetStyleOnMouseout:e.resetStyleOnMouseout,mapId:o.id})}},v=f.isDefined(o.geojsonNested)&&f.isTruthy(o.geojsonNested),m=function(){if(d){var t=function(t){a(t)&&e.hasLayer(t)&&e.removeLayer(t)};return v?void h.each(d,function(e){t(e)}):void t(d)}},y=function(t,r){var s=angular.copy(t);if(a(s)&&a(s.data)){var u=i(s,r);a(s.options)||(s.options={style:s.style,filter:s.filter,onEachFeature:u,pointToLayer:s.pointToLayer});var l=L.geoJson(s.data,s.options);r&&f.isString(r)?d[r]=l:d=l,l.addTo(e),g||(g=!0,n.setGeoJSON(d,o.id))}},b=function(e){if(m(),v){if(!e||!Object.keys(e).length)return;return void h.each(e,function(e,t){y(e,t)})}y(e)};c(o.id,"geojson",b,m),u(p,"geojson",t,function(e){b(e)})})}}}]),angular.module("leaflet-directive").directive("layercontrol",["$log","leafletData","leafletHelpers",function(e,t,n){return{restrict:"E",scope:{},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(r,o,i){e.debug("[Angular Directive - Layers] layers",r,o);var a=n.safeApply,s=n.isDefined;angular.extend(r,{baselayer:"",icons:{uncheck:"fa fa-check-square-o",check:"fa fa-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up"},changeBaseLayer:function(e,o){n.safeApply(r,function(n){n.baselayer=e,t.getMap().then(function(o){t.getLayers().then(function(t){if(!o.hasLayer(t.baselayers[e])){for(var i in n.layers.baselayers)n.layers.baselayers[i].icon=n.icons.unradio,o.hasLayer(t.baselayers[i])&&o.removeLayer(t.baselayers[i]);o.addLayer(t.baselayers[e]),n.layers.baselayers[e].icon=r.icons.radio}})})}),o.preventDefault()},moveLayer:function(e,t,n){var o=Object.keys(r.layers.baselayers).length;if(t>=1+o&&t<=r.overlaysArray.length+o){var i;for(var s in r.layers.overlays)if(r.layers.overlays[s].index===t){i=r.layers.overlays[s];break}i&&a(r,function(){i.index=e.index,e.index=t})}n.stopPropagation(),n.preventDefault()},initIndex:function(e,t){var n=Object.keys(r.layers.baselayers).length;e.index=s(e.index)?e.index:t+n+1},toggleOpacity:function(t,n){if(e.debug("Event",t),n.visible){var o=angular.element(t.currentTarget);o.toggleClass(r.icons.close+" "+r.icons.open),o=o.parents(".lf-row").find(".lf-opacity"),o.toggle("fast",function(){a(r,function(){n.opacityControl=!n.opacityControl})})}t.stopPropagation(),t.preventDefault()},unsafeHTML:function(e){return i.trustAsHtml(e)}});var u=o.get(0);L.Browser.touch?L.DomEvent.on(u,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><div class="lf-baselayers"><div class="lf-row" ng-repeat="(key, layer) in layers.baselayers"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><div class="lf-container"><div class="lf-row" ng-repeat="layer in overlaysArray | orderBy:\'index\':order" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-open" ng-class="layer.opacityControl? icons.close:icons.open" ng-click="toggleOpacity($event, layer)"></i></div></label><div class="lf-legend" ng-if="layer.legend" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity" ng-show="layer.visible &amp;&amp; layer.opacityControl"><input type="text" class="lf-opacity-control" name="lf-opacity-control" data-key="{{layer.index}}" /></div></div></div></div></div>',link:function(r,o,i,a){var s=n.isDefined,u=a.getLeafletScope(),l=u.layers;i.order=!s(i.order)||"normal"!==i.order&&"reverse"!==i.order?"normal":i.order,r.order="normal"===i.order,r.orderNumber="normal"===i.order?-1:1,r.layers=l,a.getMap().then(function(n){u.$watch("layers.baselayers",function(e){t.getLayers().then(function(t){var o;for(o in e)n.hasLayer(t.baselayers[o])?e[o].icon=r.icons.radio:e[o].icon=r.icons.unradio})}),u.$watch("layers.overlays",function(i){var a=[];t.getLayers().then(function(e){for(var t in i)i[t].icon=r.icons[i[t].visible?"uncheck":"check"],a.push(i[t]),s(i[t].index)&&e.overlays[t].setZIndex&&e.overlays[t].setZIndex(i[t].index)});var u=r.$watch(function(){return o.children().size()>1?(o.find(".lf-overlays").trigger("resize"),o.find(".lf-opacity").size()===Object.keys(l.overlays).length):void 0},function(i){i===!0&&(s(o.find(".lf-opacity-control").ionRangeSlider)?o.find(".lf-opacity-control").each(function(e,o){var i,a=Object.keys(l.baselayers).length;for(var u in r.overlaysArray)r.overlaysArray[u].index===e+a+1&&(i=r.overlaysArray[u]);var c=angular.element(o),f=s(i)&&s(i.layerOptions)?i.layerOptions.opacity:void 0;c.ionRangeSlider({min:0,from:s(f)?Math.ceil(100*f):100,step:1,max:100,prettify:!1,hasGrid:!1,hideMinMax:!0,onChange:function(e){t.getLayers().then(function(t){var r,o,i=e.input.data().key;for(var a in l.overlays)if(l.overlays[a].index===i){r=t.overlays[a],o=l.overlays[a];break}n.hasLayer(r)&&(o.layerOptions=s(o.layerOptions)?o.layerOptions:{},o.layerOptions.opacity=e.input.val()/100,r.setOpacity&&r.setOpacity(e.input.val()/100),r.getLayers&&r.eachLayer&&r.eachLayer(function(t){t.setOpacity&&t.setOpacity(e.input.val()/100)}))})}})}):e.warn("[AngularJS - Leaflet] Ion Slide Range Plugin is not loaded"),u())});r.overlaysArray=a},!0)})}}}]),angular.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(e,t,n,r,o,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(e){e._leafletLayers=t.defer(),this.getLayers=function(){return e._leafletLayers.promise}}],link:function(e,t,a,s){var u=r.isDefined,l={},c=s.getLeafletScope(),f=c.layers,h=o.createLayer,p=i.updateLayersControl,d=!1;s.getMap().then(function(t){e._leafletLayers.resolve(l),n.setLayers(l,a.id),l.baselayers={},l.overlays={};var r=a.id,o=!1;for(var i in f.baselayers){var s=h(f.baselayers[i]);u(s)?(l.baselayers[i]=s,f.baselayers[i].top===!0&&(t.addLayer(l.baselayers[i]),o=!0)):delete f.baselayers[i]}!o&&Object.keys(l.baselayers).length>0&&t.addLayer(l.baselayers[Object.keys(f.baselayers)[0]]);
for(i in f.overlays){"cartodb"===f.overlays[i].type;var g=h(f.overlays[i]);u(g)?(l.overlays[i]=g,f.overlays[i].visible===!0&&t.addLayer(l.overlays[i])):delete f.overlays[i]}c.$watch("layers.baselayers",function(e,n){if(angular.equals(e,n))return d=p(t,r,d,e,f.overlays,l),!0;for(var o in l.baselayers)(!u(e[o])||e[o].doRefresh)&&(t.hasLayer(l.baselayers[o])&&t.removeLayer(l.baselayers[o]),delete l.baselayers[o],e[o]&&e[o].doRefresh&&(e[o].doRefresh=!1));for(var i in e)if(u(l.baselayers[i]))e[i].top!==!0||t.hasLayer(l.baselayers[i])?e[i].top===!1&&t.hasLayer(l.baselayers[i])&&t.removeLayer(l.baselayers[i]):t.addLayer(l.baselayers[i]);else{var a=h(e[i]);u(a)&&(l.baselayers[i]=a,e[i].top===!0&&t.addLayer(l.baselayers[i]))}var s=!1;for(var c in l.baselayers)if(t.hasLayer(l.baselayers[c])){s=!0;break}!s&&Object.keys(l.baselayers).length>0&&t.addLayer(l.baselayers[Object.keys(l.baselayers)[0]]),d=p(t,r,d,e,f.overlays,l)},!0),c.$watch("layers.overlays",function(e,n){if(angular.equals(e,n))return d=p(t,r,d,f.baselayers,e,l),!0;for(var o in l.overlays)(!u(e[o])||e[o].doRefresh)&&(t.hasLayer(l.overlays[o])&&t.removeLayer(l.overlays[o]),delete l.overlays[o],e[o]&&e[o].doRefresh&&(e[o].doRefresh=!1));for(var i in e){if(!u(l.overlays[i])){var a=h(e[i]);if(!u(a))continue;l.overlays[i]=a,e[i].visible===!0&&t.addLayer(l.overlays[i])}e[i].visible&&!t.hasLayer(l.overlays[i])?t.addLayer(l.overlays[i]):e[i].visible===!1&&t.hasLayer(l.overlays[i])&&t.removeLayer(l.overlays[i]),e[i].visible&&t._loaded&&e[i].data&&"heatmap"===e[i].type&&(l.overlays[i].setData(e[i].data),l.overlays[i].update())}d=p(t,r,d,f.baselayers,e,l)},!0)})}}}]),angular.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(e,t,n,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(o,i,a,s){var u,l,c,f,h=n.isArray,p=n.isDefined,d=n.isFunction,g=s.getLeafletScope(),v=g.legend;g.$watch("legend",function(e){p(e)&&(u=e.legendClass?e.legendClass:"legend",l=e.position||"bottomright",f=e.type||"arcgis")},!0),s.getMap().then(function(n){g.$watch("legend",function(t){return p(t)?p(t.url)||"arcgis"!==f||h(t.colors)&&h(t.labels)&&t.colors.length===t.labels.length?p(t.url)?void e.info("[AngularJS - Leaflet] loading legend service."):(p(c)&&(c.removeFrom(n),c=null),c=L.control({position:l}),"arcgis"===f&&(c.onAdd=r.getOnAddArrayLegend(t,u)),void c.addTo(n)):void e.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."):void(p(c)&&(c.removeFrom(n),c=null))}),g.$watch("legend.url",function(o){p(o)&&t.get(o).success(function(e){p(c)?r.updateLegend(c.getContainer(),e,f,o):(c=L.control({position:l}),c.onAdd=r.getOnAddLegend(e,u,f,o),c.addTo(n)),p(v.loadedData)&&d(v.loadedData)&&v.loadedData()}).error(function(){e.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(e,t,n,r,o,i,a,s,u,l,c){var f=o.isDefined,h=o.errorHeader,p=o,d=o.isString,g=a.addMarkerWatcher,v=a.listenMarkerEvents,m=a.addMarkerToGroup,y=a.createMarker,b=a.deleteMarker,_=u,w=o.watchOptions,E=l.maybeWatch,C=c.extend,S=function(t,n,r,o,i,s){if(!d(t))return e.error(h+" A layername must be a string"),!1;if(!f(n))return e.error(h+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!f(n.overlays)||!f(n.overlays[t]))return e.error(h+' A marker can only be added to a layer of type "group"'),!1;var u=n.overlays[t];return u instanceof L.LayerGroup||u instanceof L.FeatureGroup?(u.addLayer(o),!i&&s.hasLayer(o)&&r.focus===!0&&a.manageOpenPopup(o,r),!0):(e.error(h+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},T=function(t,n,r,o,i,u,l){for(var c in t)if(-1===c.search("-")){if(!f(o[c])){var d=p.copy(t[c]),b=y(d),_=(d?d.layer:void 0)||l;if(!f(b)){e.error(h+" Received invalid data on the marker "+c+".");continue}if(o[c]=b,f(d.message)&&b.bindPopup(d.message,d.popupOptions),f(d.group)){var w=f(d.groupOption)?d.groupOption:null;m(b,d.group,w,n)}if(p.LabelPlugin.isLoaded()&&f(d.label)&&f(d.label.message)&&b.bindLabel(d.label.message,d.label.options),f(d)&&(f(d.layer)||f(l))){var E=S(_,r,d,b,u.individual.doWatch,n);if(!E)continue}else f(d.group)||(n.addLayer(b),u.individual.doWatch||d.focus!==!0||a.manageOpenPopup(b,d));var C=p.getObjectDotPath(l?[l,c]:[c]);u.individual.doWatch&&g(b,C,i,r,n,u.individual.doWatch),v(b,d,i,u.individual.doWatch),s.bindEvents(b,C,d,i,_)}}else e.error('The marker can\'t use a "-" on his key name: "'+c+'".')},A=function(t,n,r,o,i){var a=!1,s=!1,u=f(n);for(var l in r)a||(e.debug(h+"[markers] destroy: "),a=!0),u&&(s=!angular.equals(t[l],n[l])),f(t)&&Object.keys(t).length&&f(t[l])&&Object.keys(t[l]).length&&!s||(b(r[l],o,i),delete r[l])};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,t,o,i){var a=i[0],s=a.getLeafletScope();a.getMap().then(function(e){var t,a={};t=f(i[1])?i[1].getLayers:function(){var e=n.defer();return e.resolve(),e.promise};var u=s.markersWatchOptions||w;f(o.watchMarkers)&&(u.doWatch=u.individual.doWatch=!f(o.watchMarkers)||p.isTruthy(o.watchMarkers));var l=f(o.markersNested)&&p.isTruthy(o.markersNested);t().then(function(t){var n=function(n,r){A(n,r,a,e,t)},i=function(r,o){return n(r,o),l?void _.each(r,function(n,r){T(n,e,t,a,s,u,r)}):void T(r,e,t,a,s,u)};C(o.id,"markers",i,n),r.setMarkers(a,o.id),E(s,"markers",u,function(e,t){i(e,t)})})})}}}]),angular.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(e,t,n,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,o,i){var a=i.getLeafletScope(),s=n.isValidBounds,u=r.isNumber;i.getMap().then(function(e){a.$watch("maxbounds",function(t){if(!s(t))return void e.setMaxBounds();var r=n.createLeafletBounds(t);u(t.pad)&&(r=r.pad(t.pad)),e.setMaxBounds(r),o.center||e.fitBounds(r)})})}}}]),angular.module("leaflet-directive").directive("paths",["$log","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(e,t,n,r,o,i,a){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(s,u,l,c){var f=c[0],h=o.isDefined,p=o.isString,d=f.getLeafletScope(),g=d.paths,v=i.createPath,m=a.bindPathEvents,y=i.setPathOptions;f.getMap().then(function(i){var a,s=r.getDefaults(l.id);a=h(c[1])?c[1].getLayers:function(){var e=t.defer();return e.resolve(),e.promise},h(g)&&a().then(function(t){var r={};n.setPaths(r,l.id);var a=!h(l.watchPaths)||"true"===l.watchPaths,u=function(e,n){var r=d.$watch('paths["'+n+'"]',function(n,o){if(!h(n)){if(h(o.layer))for(var a in t.overlays){var s=t.overlays[a];s.removeLayer(e)}return i.removeLayer(e),void r()}y(e,n.type,n)},!0)};d.$watchCollection("paths",function(n){for(var l in r)h(n[l])||(i.removeLayer(r[l]),delete r[l]);for(var c in n)if(0!==c.search("\\$"))if(-1===c.search("-")){if(!h(r[c])){var f=n[c],g=v(c,n[c],s);if(h(g)&&h(f.message)&&g.bindPopup(f.message),o.LabelPlugin.isLoaded()&&h(f.label)&&h(f.label.message)&&g.bindLabel(f.label.message,f.label.options),h(f)&&h(f.layer)){if(!p(f.layer)){e.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!h(t)){e.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!h(t.overlays)||!h(t.overlays[f.layer])){e.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}var b=t.overlays[f.layer];if(!(b instanceof L.LayerGroup||b instanceof L.FeatureGroup)){e.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"');continue}r[c]=g,b.addLayer(g),a?u(g,c):y(g,f.type,f)}else h(g)&&(r[c]=g,i.addLayer(g),a?u(g,c):y(g,f.type,f));m(g,c,f,d)}}else e.error('[AngularJS - Leaflet] The path name "'+c+'" is not valid. It must not include "-" and a number.')})})})}}}]),angular.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(e,t,n,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(o,i,a,s){var u=r.isDefined,l=s.getLeafletScope(),c=l.tiles;return u(c)||u(c.url)?void s.getMap().then(function(e){var r,o=n.getDefaults(a.id);l.$watch("tiles",function(n){var i=o.tileLayerOptions,s=o.tileLayer;return!u(n.url)&&u(r)?void e.removeLayer(r):u(r)?u(n.url)&&u(n.options)&&!angular.equals(n.options,i)?(e.removeLayer(r),i=o.tileLayerOptions,angular.copy(n.options,i),s=n.url,r=L.tileLayer(s,i),r.addTo(e),void t.setTiles(r,a.id)):void(u(n.url)&&r.setUrl(n.url)):(u(n.options)&&angular.copy(n.options,i),u(n.url)&&(s=n.url),r=L.tileLayer(s,i),r.addTo(e),void t.setTiles(r,a.id))},!0)}):void e.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach(function(e){angular.module("leaflet-directive").directive(e+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(t,n,r,o,i){var a=i.isDefined,s=i.errorHeader,u=i.isObject,l=i.watchOptions;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(n,r,o,i){var c=i[0],f=c.getLeafletScope();c.getMap().then(function(){a(n[e+"WatchOptions"])&&(u(n[e+"WatchOptions"])?angular.extend(l,n[e+"WatchOptions"]):t.error(s+"["+e+"WatchOptions] is not an object"),f[e+"WatchOptions"]=l)})}}}])}),angular.module("leaflet-directive").factory("leafletEventsHelpersFactory",["$rootScope","$q","$log","leafletHelpers",function(e,t,n,r){var o=r.safeApply,i=r.isDefined,a=r.isObject,s=r.isArray,u=r.errorHeader,l=function(e,t){this.rootBroadcastName=e,this.lObjectType=t};return l.prototype.getAvailableEvents=function(){return[]},l.prototype.genDispatchEvent=function(e,t,n,r,o,i,a,s){var u=this;return function(l){var c=u.rootBroadcastName+"."+e;u.fire(n,c,t,l,l.target||r,i,o,a,s)}},l.prototype.fire=function(t,n,r,a,s,u,l,c,f){o(t,function(){var o={leafletEvent:a,leafletObject:s,modelName:l,model:u};i(c)&&angular.extend(o,{layerName:c}),"emit"===r?t.$emit(n,o):e.$broadcast(n,o)})},l.prototype.bindEvents=function(e,t,r,o,l,c){var f=[],h="emit",p=this;if(i(o.eventBroadcast))if(a(o.eventBroadcast))if(i(o.eventBroadcast[p.lObjectType]))if(a(o.eventBroadcast[p.lObjectType])){i(o.eventBroadcast[this.lObjectType].logic)&&"emit"!==o.eventBroadcast[p.lObjectType].logic&&"broadcast"!==o.eventBroadcast[p.lObjectType].logic&&n.warn(u+"Available event propagation logic are: 'emit' or 'broadcast'.");var d=!1,g=!1;i(o.eventBroadcast[p.lObjectType].enable)&&s(o.eventBroadcast[p.lObjectType].enable)&&(d=!0),i(o.eventBroadcast[p.lObjectType].disable)&&s(o.eventBroadcast[p.lObjectType].disable)&&(g=!0),d&&g?n.warn(u+"can not enable and disable events at the same time"):d||g?d?o.eventBroadcast[this.lObjectType].enable.forEach(function(e){-1!==f.indexOf(e)?n.warn(u+"This event "+e+" is already enabled"):-1===p.getAvailableEvents().indexOf(e)?n.warn(u+"This event "+e+" does not exist"):f.push(e)}):(f=this.getAvailableEvents(),o.eventBroadcast[p.lObjectType].disable.forEach(function(e){var t=f.indexOf(e);-1===t?n.warn(u+"This event "+e+" does not exist or has been already disabled"):f.splice(t,1)})):n.warn(u+"must enable or disable events")}else n.warn(u+"event-broadcast."+[p.lObjectType]+" must be an object check your model.");else f=this.getAvailableEvents();else n.error(u+"event-broadcast must be an object check your model.");else f=this.getAvailableEvents();return f.forEach(function(n){e.on(n,p.genDispatchEvent(n,h,o,e,t,r,l,c))}),h},l}]).service("leafletEventsHelpers",["leafletEventsHelpersFactory",function(e){return new e}]),angular.module("leaflet-directive").factory("leafletGeoJsonEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents","leafletData",function(e,t,n,r,o,i,a){var s=r.safeApply,u=(r.isDefined,o),l=function(){u.call(this,"leafletDirectiveGeoJson","geojson")};return l.prototype=new u,l.prototype.genDispatchEvent=function(t,n,r,o,i,l,c,f){var h=u.prototype.genDispatchEvent.call(this,t,n,r,o,i,l,c),p=this;return function(n){"mouseout"===t&&(f.resetStyleOnMouseout&&a.getGeoJSON(f.mapId).then(function(e){var t=c?e[c]:e;t.resetStyle(n.target)}),s(r,function(){e.$broadcast(p.rootBroadcastName+".mouseout",n)})),h(n)}},l.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout"]},new l}]),angular.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory",function(e,t,n,r,o){var i=r,a=o,s=function(){a.call(this,"leafletDirectiveLabel","markers")};return s.prototype=new a,s.prototype.genDispatchEvent=function(e,t,n,r,o,i,s){var u=o.replace("markers.","");return a.prototype.genDispatchEvent.call(this,e,t,n,r,u,i,s)},s.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},s.prototype.genEvents=function(e,t,n,r,o,a,s){var u=this,l=this.getAvailableEvents(),c=i.getObjectArrayPath("markers."+o);l.forEach(function(e){r.label.on(e,u.genDispatchEvent(e,t,n,r.label,c,a,s))})},s.prototype.bindEvents=function(e,t,n,r,o){},new s}]),angular.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers",function(e,t,n,r,o){var i=(r.safeApply,r.isDefined),a=(r.isObject,r.errorHeader,o.fire),s=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},u=function(e,t,n){return function(r){var o="leafletDirectiveMap."+t;a(e,o,n,r,r.target,e)}},l=function(e){e.$broadcast("boundsChanged")},c=function(e,t,n,r){if(i(n.urlHashCenter)){var o=t.getCenter(),a=o.lat.toFixed(4)+":"+o.lng.toFixed(4)+":"+t.getZoom();i(r.c)&&r.c===a||e.$emit("centerUrlHash",a)}};return{getAvailableMapEvents:s,genDispatchMapEvent:u,notifyCenterChangedToBounds:l,notifyCenterUrlHashChanged:c}}]),angular.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents",function(e,t,n,r,o,i){var a=r.safeApply,s=r.isDefined,u=r,l=i,c=o,f=function(){c.call(this,"leafletDirectiveMarker","markers")};return f.prototype=new c,f.prototype.genDispatchEvent=function(t,n,r,o,i,s,u){var l=c.prototype.genDispatchEvent.call(this,t,n,r,o,i,s,u);return function(n){"click"===t?a(r,function(){e.$broadcast("leafletDirectiveMarkersClick",i)}):"dragend"===t&&(a(r,function(){s.lat=o.getLatLng().lat,s.lng=o.getLatLng().lng}),s.message&&s.focus===!0&&o.openPopup()),l(n)}},f.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},f.prototype.bindEvents=function(e,t,n,r,o){var i=c.prototype.bindEvents.call(this,e,t,n,r,o);u.LabelPlugin.isLoaded()&&s(e.label)&&l.genEvents(t,i,r,e,n,o)},new f}]),angular.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","$log","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(e,t,n,r,o,i){var a=(r.safeApply,r.isDefined),s=r.isObject,u=r,l=r.errorHeader,c=o,f=i.fire,h=function(e,t,n,r,o,i,a){return function(s){var u="leafletDirectivePath."+e;f(n,u,t,s,s.target||r,i,o,a)}},p=function(e,t,r,o){var i,f,p=[],g="broadcast";if(a(o.eventBroadcast))if(s(o.eventBroadcast))if(a(o.eventBroadcast.path))if(s(o.eventBroadcast.paths))n.warn(l+"event-broadcast.path must be an object check your model.");else{void 0!==o.eventBroadcast.path.logic&&null!==o.eventBroadcast.path.logic&&("emit"!==o.eventBroadcast.path.logic&&"broadcast"!==o.eventBroadcast.path.logic?n.warn(l+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===o.eventBroadcast.path.logic&&(g="emit"));var v=!1,m=!1;if(void 0!==o.eventBroadcast.path.enable&&null!==o.eventBroadcast.path.enable&&"object"==typeof o.eventBroadcast.path.enable&&(v=!0),void 0!==o.eventBroadcast.path.disable&&null!==o.eventBroadcast.path.disable&&"object"==typeof o.eventBroadcast.path.disable&&(m=!0),v&&m)n.warn(l+"can not enable and disable events at the same time");else if(v||m)if(v)for(i=0;i<o.eventBroadcast.path.enable.length;i++)f=o.eventBroadcast.path.enable[i],-1!==p.indexOf(f)?n.warn(l+"This event "+f+" is already enabled"):-1===d().indexOf(f)?n.warn(l+"This event "+f+" does not exist"):p.push(f);else for(p=d(),i=0;i<o.eventBroadcast.path.disable.length;i++){f=o.eventBroadcast.path.disable[i];var y=p.indexOf(f);-1===y?n.warn(l+"This event "+f+" does not exist or has been already disabled"):p.splice(y,1)}else n.warn(l+"must enable or disable events")}else p=d();else n.error(l+"event-broadcast must be an object check your model.");else p=d();for(i=0;i<p.length;i++)f=p[i],e.on(f,h(f,g,o,p,t));u.LabelPlugin.isLoaded()&&a(e.label)&&c.genLabelEvents(t,g,o,e,r)},d=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:d,bindPathEvents:p}}])}(angular),function(e){"use strict";e.module("uuid4",[]).factory("uuid4",function(){var e=function(e){return Math.pow(2,e)},t=(e(4),e(6)),n=e(8),r=e(12),o=(e(14),e(16)),i=e(32),a=(e(40),e(48),function(e,t){return Math.floor(Math.random()*(t-e+1))+e}),s=function(){return a(0,t-1)},u=function(){return a(0,n-1)},l=function(){return a(0,r-1)},c=function(){return a(0,o-1)},f=function(){return a(0,i-1)},h=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},p=function(e,t,n){e=String(e),n=n?n:"0";for(var r=t-e.length;r>0;r>>>=1,n+=n)1&r&&(e=n+e);return e},d=function(e,t,n,r,o,i){var a=p(e.toString(16),8)+"-"+p(t.toString(16),4)+"-"+p(n.toString(16),4)+"-"+p(r.toString(16),2)+p(o.toString(16),2)+"-"+p(i.toString(16),12);return a};return{generate:function(){return d(f(),c(),16384|l(),128|s(),u(),h())},validate:function(e){var t=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return t.test(e)}}})}(angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new r(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),i=o.attr("data-target");i||(i=o.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var a=e(i);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.button"),i="object"==typeof t&&t;o||r.data("bs.button",o=new n(this,i)),"toggle"==t?o.toggle():t&&o.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,o=r.is("input")?"val":"html",i=r.data();t+="Text",null==i.resetText&&r.data("resetText",r[o]()),setTimeout(e.proxy(function(){r[o](null==i[t]?this.options[t]:i[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.carousel"),i=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),a="string"==typeof t?t:i.slide;o||r.data("bs.carousel",o=new n(this,i)),"number"==typeof t?o.to(t):a?o[a]():i.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var o="prev"==e?-1:1,i=(n+o)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var o=this.$element.find(".item.active"),i=r||this.getItemForDirection(t,o),a=this.interval,s="next"==t?"left":"right",u=this;if(i.hasClass("active"))return this.sliding=!1;var l=i[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(i)]);f&&f.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,o.addClass(s),i.addClass(s),o.one("bsTransitionEnd",function(){i.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var o=function(n){var r,o=e(this),i=e(o.attr("data-target")||(r=o.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var a=e.extend({},i.data(),o.data()),s=o.attr("data-slide-to");s&&(a.interval=!1),t.call(i,a),s&&i.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),i=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&i.toggle&&/show|hide/.test(t)&&(i.toggle=!1),o||n.data("bs.collapse",o=new r(this,i)),"string"==typeof t&&o[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var i=e.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var u=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][u])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(r.TRANSITION_DURATION):o.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var o=e(r);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var o=e(this);o.attr("data-target")||r.preventDefault();var i=t(o),a=i.data("bs.collapse"),s=a?"toggle":o.data();n.call(i,s)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(o).remove(),e(i).each(function(){var r=e(this),o=n(r),i={relatedTarget:this};o.hasClass("open")&&(o.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",i)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(n)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(r){var o=e(this);if(!o.is(".disabled, :disabled")){var i=n(o),a=i.hasClass("open");if(t(),!a){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(i.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var o=n(r),a=o.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&o.find(i).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",u=o.find('[role="menu"]'+s+', [role="listbox"]'+s);if(u.length){var l=u.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<u.length-1&&l++,~l||(l=0),u.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,a.prototype.toggle).on("keydown.bs.dropdown.data-api",i,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown);
}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var o=e(this),i=o.data("bs.modal"),a=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);i||o.data("bs.modal",i=new n(this,a)),"string"==typeof t?i[t](r):a.show&&i.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),o&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});o?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&o;if(this.$backdrop=e('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),o=r.attr("href"),i=e(r.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},i.data(),r.data());r.is("a")&&n.preventDefault(),i.one("show.bs.modal",function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(i,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.tooltip"),i="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||r.data("bs.tooltip",o=new n(this,i)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),i=o.length;i--;){var a=o[i];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var o=this,i=this.tip(),a=this.getUID(this.type);this.setContent(),i.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&i.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(s);l&&(s=s.replace(u,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var c=this.getPosition(),f=i[0].offsetWidth,h=i[0].offsetHeight;if(l){var p=s,d=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(d);s="bottom"==s&&c.bottom+h>g.bottom?"top":"top"==s&&c.top-h<g.top?"bottom":"right"==s&&c.right+f>g.width?"left":"left"==s&&c.left-f<g.left?"right":s,i.removeClass(p).addClass(s)}var v=this.getCalculatedOffset(s,c,f,h);this.applyPlacement(v,s);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),o=r[0].offsetWidth,i=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=i&&(t.top=t.top+i-l);var c=this.getViewportAdjustedDelta(n,t,u,l);c.left?t.left+=c.left:t.top+=c.top;var f=/top|bottom/.test(n),h=f?2*c.left-o+u:2*c.top-i+l,p=f?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],f)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=o.hoverState&&i.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,i=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var i=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,s,i)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var o={top:0,left:0};if(!this.$viewport)return o;var i=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-i-a.scroll,u=t.top+i-a.scroll+r;s<a.top?o.top=a.top-s:u>a.top+a.height&&(o.top=a.top+a.height-u)}else{var l=t.left-i,c=t.left+i+n;l<a.left?o.left=a.left-l:c>a.width&&(o.left=a.left+a.width-c)}return o},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.popover"),i="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||r.data("bs.popover",o=new n(this,i)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),o=r.data("bs.scrollspy"),i="object"==typeof n&&n;o||r.data("bs.scrollspy",o=new t(this,i)),"string"==typeof n&&o[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),i=/^#./.test(o)&&e(o);return i&&i.length&&i.is(":visible")&&[[i[n]().top+r,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,i=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=i[i.length-1])&&this.activate(e);if(a&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)a!=i[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(i[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.tab");o||r.data("bs.tab",o=new n(this)),"string"==typeof t&&o[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a"),i=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(i),t.trigger(a),!a.isDefaultPrevented()&&!i.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(t,r,o){function i(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=r.find("> .active"),s=o&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var o=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.affix"),i="object"==typeof t&&t;o||r.data("bs.affix",o=new n(this,i)),"string"==typeof t&&o[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var o=this.$target.scrollTop(),i=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=i.top?!1:"bottom":e-r>=o+a?!1:"bottom";var s=null==this.affixed,u=s?o:i.top,l=s?a:t;return null!=n&&n>=o?"top":null!=r&&u+l>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,o=r.top,i=r.bottom,a=e(document.body).height();"object"!=typeof r&&(i=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof i&&(i=r.bottom(this.$element));var s=this.getState(a,t,o,i);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=e.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-i})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery);var CLOSURE_NO_DEPS=!0,COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){var r=e.split("."),o=n||goog.global;r[0]in o||!o.execScript||o.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)!r.length&&goog.isDef(t)?o[i]=t:o=o[i]?o[i]:o[i]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return COMPILED?void 0:goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw new Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,r=e.split("."),o=t||goog.global;n=r.shift();){if(!goog.isDefAndNotNull(o[n]))return null;o=o[n]}return o},goog.globalize=function(e,t){var n=t||goog.global;for(var r in e)n[r]=e[r]},goog.addDependency=function(e,t,n,r){if(goog.DEPENDENCIES_ENABLED){for(var o,i,a=e.replace(/\\/g,"/"),s=goog.dependencies_,u=0;o=t[u];u++)s.nameToPath[o]=a,s.pathIsModule[a]=!!r;for(var l=0;i=n[l];l++)a in s.requires||(s.requires[a]={}),s.requires[a][i]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}var n="goog.require could not find: "+e;throw goog.logToConsole_(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(e,t){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("script"),n=t.length-1;n>=0;--n){var r=t[n],o=r.src,i=o.lastIndexOf("?"),a=-1==i?o.length:i;if("base.js"==o.substr(a-7,7))return void(goog.basePath=o.substr(0,a-7))}},goog.importScript_=function(e,t){var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;n(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;e>n;n++){var r=t[n];goog.maybeProcessDeferredPath_(r)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var n=goog.basePath+t;return n in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var n in goog.dependencies_.requires[t])if(!goog.isProvided_(n)&&!goog.isDeferredModule_(n))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[r]=n,goog.moduleLoaderState_.declareTestMethods)for(var o in n)(0===o.indexOf("test",0)||"tearDown"==o||"setUp"==o||"setUpPage"==o||"tearDownPage"==o)&&(goog.global[o]=n[o])}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(source){var exports={};return eval(arguments[0]),exports},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if("complete"==n.readyState){var r=/\bdeps.js$/.test(e);if(r)return!1;throw Error('Cannot write "'+e+'" after document load')}var o=goog.IS_OLD_IE_;if(void 0===t)if(o){var i=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+e+'"'+i+"></script>")}else n.write('<script type="text/javascript" src="'+e+'"></script>');else n.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function e(o){if(!(o in r.written)){if(o in r.visited)return void(o in n||(n[o]=!0,t.push(o)));if(r.visited[o]=!0,o in r.requires)for(var i in r.requires[o])if(!goog.isProvided_(i)){if(!(i in r.nameToPath))throw Error("Undefined nameToPath for "+i);e(r.nameToPath[i])}o in n||(n[o]=!0,t.push(o))}}var t=[],n={},r=goog.dependencies_;for(var o in goog.included_)r.written[o]||e(o);for(var i=0;i<t.length;i++){var o=t[i];goog.dependencies_.written[o]=!0}var a=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var s=!1,i=0;i<t.length;i++){var o=t[i];if(!o)throw goog.moduleLoaderState_=a,Error("Undefined script input");r.pathIsModule[o]?(s=!0,goog.importModule_(goog.basePath+o)):goog.importScript_(goog.basePath+o)}goog.moduleLoaderState_=a},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),
goog.normalizePath_=function(e){for(var t=e.split("/"),n=0;n<t.length;)"."==t[n]?t.splice(n,1):n&&".."==t[n]&&t[n-1]&&".."!=t[n-1]?t.splice(--n,2):n++;return t.join("/")},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,r=null,o=new goog.global.XMLHttpRequest;if(o.onload=function(){r=this.responseText},o.open("get",e,!1),o.send(),r=o.responseText,null==r)throw new Error("load of "+e+"failed");var i=goog.wrapModule_(e,r),a=goog.IS_OLD_IE_;a?(goog.dependencies_.deferred[t]=i,goog.queuedModules_.push(t)):n(e,i)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var r in e)n[r]=goog.cloneObject(e[r]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw new Error;if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.body.appendChild(n),t.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,r=function(e){return goog.cssNameMapping_[e]||e},o=function(e){for(var t=e.split("-"),n=[],o=0;o<t.length;o++)n.push(r(t[o]));return n.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:o:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var o=new Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}},goog.base=function(e,t,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var o=new Array(arguments.length-1),i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.superClass_.constructor.apply(e,o)}for(var a=new Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];for(var s=!1,u=e.constructor;u;u=u.superClass_&&u.superClass_.constructor)if(u.prototype[t]===r)s=!0;else if(s)return u.prototype[t].apply(e,a);if(e[t]===r)return e.constructor.prototype[t].apply(e,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var o=goog.defineClass.createSealingConstructor_(n,e);return e&&goog.inherits(o,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(o.prototype,t),null!=r&&(r instanceof Function?r(o):goog.defineClass.applyProperties_(o,r)),o},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var n=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===n&&Object.seal(t),t};return n}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.provide("goog.debug.Error"),goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.provide("goog.object"),goog.object.forEach=function(e,t,n){for(var r in e)t.call(n,e[r],r,e)},goog.object.filter=function(e,t,n){var r={};for(var o in e)t.call(n,e[o],o,e)&&(r[o]=e[o]);return r},goog.object.map=function(e,t,n){var r={};for(var o in e)r[o]=t.call(n,e[o],o,e);return r},goog.object.some=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return!0;return!1},goog.object.every=function(e,t,n){for(var r in e)if(!t.call(n,e[r],r,e))return!1;return!0},goog.object.getCount=function(e){var t=0;for(var n in e)t++;return t},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},goog.object.getKeys=function(e){var t=[],n=0;for(var r in e)t[n++]=r;return t},goog.object.getValueByKeys=function(e,t){for(var n=goog.isArrayLike(t),r=n?t:arguments,o=n?0:1;o<r.length&&(e=e[r[o]],goog.isDef(e));o++);return e},goog.object.containsKey=function(e,t){return t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r;return void 0},goog.object.findValue=function(e,t,n){var r=goog.object.findKey(e,t,n);return r&&e[r]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){if(t in e)return e[t];var r=n();return e[t]=r,r},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t={};for(var n in e)t[n]=e[n];return t},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var r in e)n[r]=goog.object.unsafeClone(e[r]);return n}return e},goog.object.transpose=function(e){var t={};for(var n in e)t[e[n]]=n;return t},goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.object.extend=function(e,t){for(var n,r,o=1;o<arguments.length;o++){r=arguments[o];for(n in r)e[n]=r[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},r=0;t>r;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;t>r;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.provide("goog.dom.NodeType"),goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.json"),goog.provide("goog.json.Replacer"),goog.provide("goog.json.Reviver"),goog.provide("goog.json.Serializer"),goog.define("goog.json.USE_NATIVE_JSON",!1),goog.json.isValid=function(e){if(/^\s*$/.test(e))return!1;var t=/\\["\\\/bfnrtu]/g,n=/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,o=/^[\],:{}\s\u2028\u2029]*$/;return o.test(e.replace(t,"@").replace(n,"]").replace(r,""))},goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(s){var o=String(s);if(goog.json.isValid(o))try{return eval("("+o+")")}catch(ex){}throw Error("Invalid JSON string: "+o)},goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(s){return eval("("+s+")")},goog.json.Replacer,goog.json.Reviver,goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(e,t){return new goog.json.Serializer(t).serialize(e)},goog.json.Serializer=function(e){this.replacer_=e},goog.json.Serializer.prototype.serialize=function(e){var t=[];return this.serializeInternal(e,t),t.join("")},goog.json.Serializer.prototype.serializeInternal=function(e,t){switch(typeof e){case"string":this.serializeString_(e,t);break;case"number":this.serializeNumber_(e,t);break;case"boolean":t.push(e);break;case"undefined":t.push("null");break;case"object":if(null==e){t.push("null");break}if(goog.isArray(e)){this.serializeArray(e,t);break}this.serializeObject_(e,t);break;case"function":break;default:throw Error("Unknown type: "+typeof e)}},goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},goog.json.Serializer.charsToReplace_=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,goog.json.Serializer.prototype.serializeString_=function(e,t){t.push('"',e.replace(goog.json.Serializer.charsToReplace_,function(e){if(e in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),goog.json.Serializer.charToJsonCharCache_[e]=n+t.toString(16)}),'"')},goog.json.Serializer.prototype.serializeNumber_=function(e,t){t.push(isFinite(e)&&!isNaN(e)?e:"null")},goog.json.Serializer.prototype.serializeArray=function(e,t){var n=e.length;t.push("[");for(var r="",o=0;n>o;o++){t.push(r);var i=e[o];this.serializeInternal(this.replacer_?this.replacer_.call(e,String(o),i):i,t),r=","}t.push("]")},goog.json.Serializer.prototype.serializeObject_=function(e,t){t.push("{");var n="";for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=e[r];"function"!=typeof o&&(t.push(n),this.serializeString_(r,t),t.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(e,r,o):o,t),n=",")}t.push("}")},goog.provide("goog.string"),goog.provide("goog.string.Unicode"),goog.define("goog.string.DETECT_DOUBLE_ESCAPING",!1),goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",!1),goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)==n},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var n=e.split("%s"),r="",o=Array.prototype.slice.call(arguments,1);o.length&&n.length>1;)r+=n.shift()+o.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&e>=" "&&"~">=e||e>=""&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var n=String(e).toLowerCase(),r=String(t).toLowerCase();return r>n?-1:n==r?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(goog.string.numerateCompareRegExp_),r=t.toLowerCase().match(goog.string.numerateCompareRegExp_),o=Math.min(n.length,r.length),i=0;o>i;i++){var a=n[i],s=r[i];if(a!=s){var u=parseInt(a,10);if(!isNaN(u)){var l=parseInt(s,10);if(!isNaN(l)&&u-l)return u-l}return s>a?-1:1}}return n.length!=r.length?n.length-r.length:t>e?-1:1},goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\x00")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n,r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return n=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var o=r[e];if(o)return o;if("#"==t.charAt(0)){var i=Number("0"+t.substr(1));isNaN(i)||(o=String.fromCharCode(i))}return o||(n.innerHTML=e+" ",o=n.firstChild.nodeValue.slice(0,-1)),r[e]=o})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,r=0;n>r;r++){var o=1==n?t:t.charAt(r);if(e.charAt(0)==o&&e.charAt(e.length-1)==o)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,r){if(n&&(e=goog.string.unescapeEntities(e)),r&&e.length>t){r>t&&(r=t);var o=e.length-r,i=t-r;e=e.substring(0,i)+"..."+e.substring(o)}else if(e.length>t){var a=Math.floor(t/2),s=e.length-a;a+=t%2,e=e.substring(0,a)+"..."+e.substring(s)}return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){if(e=String(e),e.quote)return e.quote();for(var t=['"'],n=0;n<e.length;n++){var r=e.charAt(n),o=r.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[r]||(o>31&&127>o?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e,n=e.charCodeAt(0);return n>31&&127>n?t=e:(256>n?(t="\\x",(16>n||n>256)&&(t+="0")):(t="\\u",4096>n&&(t+="0")),t+=n.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=t},goog.string.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var r=e;return t>=0&&t<e.length&&n>0&&(r=e.substr(0,t)+e.substr(t+n,e.length-t-n)),r},goog.string.remove=function(e,t){var n=new RegExp(goog.string.regExpEscape(t),"");return e.replace(n,"")},goog.string.removeAll=function(e,t){var n=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(n,"")},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(e,t){return new Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){var r=goog.isDef(n)?e.toFixed(n):String(e),o=r.indexOf(".");return-1==o&&(o=r.length),goog.string.repeat("0",Math.max(0,t-o))+r},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var n=0,r=goog.string.trim(String(e)).split("."),o=goog.string.trim(String(t)).split("."),i=Math.max(r.length,o.length),a=0;0==n&&i>a;a++){var s=r[a]||"",u=o[a]||"",l=new RegExp("(\\d*)(\\D*)","g"),c=new RegExp("(\\d*)(\\D*)","g");do{var f=l.exec(s)||["","",""],h=c.exec(u)||["","",""];if(0==f[0].length&&0==h[0].length)break;var p=0==f[1].length?0:parseInt(f[1],10),d=0==h[1].length?0:parseInt(h[1],10);n=goog.string.compareElements_(p,d)||goog.string.compareElements_(0==f[2].length,0==h[2].length)||goog.string.compareElements_(f[2],h[2])}while(0==n)}return n},goog.string.compareElements_=function(e,t){return t>e?-1:e>t?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n),t%=goog.string.HASHCODE_MAX_;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var n=goog.isString(t)?goog.string.regExpEscape(t):"\\s";n=n?"|["+n+"]+":"";var r=new RegExp("(^"+n+")([a-z])","g");return e.replace(r,function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){for(var r=e.split(t),o=[];n>0&&r.length;)o.push(r.shift()),n--;return r.length&&o.push(r.join(t)),o},goog.string.editDistance=function(e,t){var n=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var o=0;o<t.length+1;o++)n[o]=o;for(var o=0;o<e.length;o++){r[0]=o+1;for(var i=0;i<t.length;i++){var a=e[o]!=t[i];r[i+1]=Math.min(r[i]+1,n[i+1]+1,n[i]+a)}for(var i=0;i<n.length;i++)n[i]=r[i]}return r[t.length]},goog.provide("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();if(e){var t=e.userAgent;if(t)return t}return""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=new RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),r=[];t=n.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.provide("goog.labs.userAgent.platform"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var e,t=goog.labs.userAgent.util.getUserAgent(),n="";if(goog.labs.userAgent.platform.isWindows()){e=/Windows (?:NT|Phone) ([0-9.]+)/;var r=e.exec(t);n=r?r[1]:"0.0"}else if(goog.labs.userAgent.platform.isIos()){e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var r=e.exec(t);n=r&&r[1].replace(/_/g,".")}else if(goog.labs.userAgent.platform.isMacintosh()){e=/Mac OS X ([0-9_.]+)/;var r=e.exec(t);n=r?r[1].replace(/_/g,"."):"10"}else if(goog.labs.userAgent.platform.isAndroid()){e=/Android\s+([^\);]+)(\)|;)/;var r=e.exec(t);n=r&&r[1]}else if(goog.labs.userAgent.platform.isChromeOS()){e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var r=e.exec(t);n=r&&r[1]}return n||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)>=0},goog.provide("goog.crypt.Hash"),goog.crypt.Hash=function(){this.blockSize=-1},goog.crypt.Hash.prototype.reset=goog.abstractMethod,goog.crypt.Hash.prototype.update=goog.abstractMethod,goog.crypt.Hash.prototype.digest=goog.abstractMethod,goog.provide("goog.crypt.Sha1"),goog.require("goog.crypt.Hash"),goog.crypt.Sha1=function(){goog.crypt.Sha1.base(this,"constructor"),this.blockSize=64,this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.inbuf_=0,this.total_=0,this.reset()},goog.inherits(goog.crypt.Sha1,goog.crypt.Hash),goog.crypt.Sha1.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},goog.crypt.Sha1.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if(goog.isString(e))for(var r=0;16>r;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;16>r;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;80>r;r++){var o=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(o<<1|o>>>31)}for(var i,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],f=this.chain_[4],r=0;80>r;r++){40>r?20>r?(i=c^u&(l^c),a=1518500249):(i=u^l^c,a=1859775393):60>r?(i=u&l|c&(u|l),a=2400959708):(i=u^l^c,a=3395469782);var o=(s<<5|s>>>27)+i+f+a+n[r]&4294967295;f=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},goog.crypt.Sha1.prototype.update=function(e,t){if(null!=e){goog.isDef(t)||(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;t>r;){if(0==i)for(;n>=r;)this.compress_(e,r),r+=this.blockSize;if(goog.isString(e)){for(;t>r;)if(o[i]=e.charCodeAt(r),++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}else for(;t>r;)if(o[i]=e[r],++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},goog.crypt.Sha1.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;5>n;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},goog.provide("goog.asserts"),goog.provide("goog.asserts.AssertionError"),goog.require("goog.debug.Error"),goog.require("goog.dom.NodeType"),goog.require("goog.string"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,r){var o="Assertion failed";if(n){o+=": "+n;var i=r}else e&&(o+=": "+e,i=t);var a=new goog.asserts.AssertionError(""+o,i||[]);goog.asserts.errorHandler_(a);
},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,r){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.provide("goog.array"),goog.provide("goog.array.ArrayLike"),goog.require("goog.asserts"),goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE),goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",!1),goog.array.ArrayLike,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(e,t,n)}:function(e,t,n){var r=null==n?0:0>n?Math.max(0,e.length+n):n;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,r):-1;for(var o=r;o<e.length;o++)if(o in e&&e[o]===t)return o;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(e,t,n){goog.asserts.assert(null!=e.length);var r=null==n?e.length-1:n;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(e,t,r)}:function(e,t,n){var r=null==n?e.length-1:n;if(0>r&&(r=Math.max(0,e.length+r)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,r):-1;for(var o=r;o>=0;o--)if(o in e&&e[o]===t)return o;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=0;r>i;i++)i in o&&t.call(n,o[i],i,e)},goog.array.forEachRight=function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=r-1;i>=0;--i)i in o&&t.call(n,o[i],i,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=[],i=0,a=goog.isString(e)?e.split(""):e,s=0;r>s;s++)if(s in a){var u=a[s];t.call(n,u,s,e)&&(o[i++]=u)}return o},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=new Array(r),i=goog.isString(e)?e.split(""):e,a=0;r>a;a++)a in i&&(o[a]=t.call(n,i[a],a,e));return o},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(e,t,n,r){goog.asserts.assert(null!=e.length);for(var o=[],i=1,a=arguments.length;a>i;i++)o.push(arguments[i]);return r&&(o[0]=goog.bind(t,r)),goog.array.ARRAY_PROTOTYPE_.reduce.apply(e,o)}:function(e,t,n,r){var o=n;return goog.array.forEach(e,function(n,i){o=t.call(r,o,n,i,e)}),o},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),r&&(t=goog.bind(t,r)),goog.array.ARRAY_PROTOTYPE_.reduceRight.call(e,t,n)}:function(e,t,n,r){var o=n;return goog.array.forEachRight(e,function(n,i){o=t.call(r,o,n,i,e)}),o},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in o&&t.call(n,o[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in o&&!t.call(n,o[i],i,e))return!1;return!0},goog.array.count=function(e,t,n){var r=0;return goog.array.forEach(e,function(e,o,i){t.call(n,e,o,i)&&++r},n),r},goog.array.find=function(e,t,n){var r=goog.array.findIndex(e,t,n);return 0>r?null:goog.isString(e)?e.charAt(r):e[r]},goog.array.findIndex=function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in o&&t.call(n,o[i],i,e))return i;return-1},goog.array.findRight=function(e,t,n){var r=goog.array.findIndexRight(e,t,n);return 0>r?null:goog.isString(e)?e.charAt(r):e[r]},goog.array.findIndexRight=function(e,t,n){for(var r=e.length,o=goog.isString(e)?e.split(""):e,i=r-1;i>=0;i--)if(i in o&&t.call(n,o[i],i,e))return i;return-1},goog.array.contains=function(e,t){return goog.array.indexOf(e,t)>=0},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var r;2==arguments.length||(r=goog.array.indexOf(e,n))<0?e.push(t):goog.array.insertAt(e,t,r)},goog.array.remove=function(e,t){var n,r=goog.array.indexOf(e,t);return(n=r>=0)&&goog.array.removeAt(e,r),n},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){var r=goog.array.findIndex(e,t,n);return r>=0?(goog.array.removeAt(e,r),!0):!1},goog.array.removeAllIf=function(e,t,n){var r=0;return goog.array.forEachRight(e,function(o,i){t.call(n,o,i,e)&&goog.array.removeAt(e,i)&&r++}),r},goog.array.concat=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.join=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(e){var t=e.length;if(t>0){for(var n=new Array(t),r=0;t>r;r++)n[r]=e[r];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(goog.isArrayLike(r)){var o=e.length||0,i=r.length||0;e.length=o+i;for(var a=0;i>a;a++)e[o+a]=r[a]}else e.push(r)}},goog.array.splice=function(e,t,n,r){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(e,t):goog.array.ARRAY_PROTOTYPE_.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){for(var r=t||e,o=function(e){return goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l},i=n||o,a={},s=0,u=0;u<e.length;){var l=e[u++],c=i(l);Object.prototype.hasOwnProperty.call(a,c)||(a[c]=!0,r[s++]=l)}r.length=s},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,r,o){for(var i,a=0,s=e.length;s>a;){var u,l=a+s>>1;u=n?t.call(o,e[l],l,e):t(r,e[l]),u>0?a=l+1:(s=l,i=!u)}return i?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){function n(e,t){return o(e.value,t.value)||e.index-t.index}for(var r=0;r<e.length;r++)e[r]={index:r,value:e[r]};var o=t||goog.array.defaultCompare;goog.array.sort(e,n);for(var r=0;r<e.length;r++)e[r]=e[r].value},goog.array.sortByKey=function(e,t,n){var r=n||goog.array.defaultCompare;goog.array.sort(e,function(e,n){return r(t(e),t(n))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){for(var r=t||goog.array.defaultCompare,o=1;o<e.length;o++){var i=r(e[o-1],e[o]);if(i>0||0==i&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;for(var r=e.length,o=n||goog.array.defaultCompareEquality,i=0;r>i;i++)if(!o(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,n){for(var r=n||goog.array.defaultCompare,o=Math.min(e.length,t.length),i=0;o>i;i++){var a=r(e[i],t[i]);if(0!=a)return a}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:t>e?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){var r=goog.array.binarySearch(e,t,n);return 0>r?(goog.array.insertAt(e,t,-(r+1)),!0):!1},goog.array.binaryRemove=function(e,t,n){var r=goog.array.binarySearch(e,t,n);return r>=0?goog.array.removeAt(e,r):!1},goog.array.bucket=function(e,t,n){for(var r={},o=0;o<e.length;o++){var i=e[o],a=t.call(n,i,o,e);if(goog.isDef(a)){var s=r[a]||(r[a]=[]);s.push(i)}}return r},goog.array.toObject=function(e,t,n){var r={};return goog.array.forEach(e,function(o,i){r[t.call(n,o,i,e)]=o}),r},goog.array.range=function(e,t,n){var r=[],o=0,i=e,a=n||1;if(void 0!==t&&(o=e,i=t),0>a*(i-o))return[];if(a>0)for(var s=o;i>s;s+=a)r.push(s);else for(var s=o;s>i;s+=a)r.push(s);return r},goog.array.repeat=function(e,t){for(var n=[],r=0;t>r;r++)n[r]=e;return n},goog.array.flatten=function(e){for(var t=8192,n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(goog.isArray(o))for(var i=0;i<o.length;i+=t)for(var a=goog.array.slice(o,i,i+t),s=goog.array.flatten.apply(null,a),u=0;u<s.length;u++)n.push(s[u]);else n.push(o)}return n},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,t>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(e,e.splice(-t,t)):0>t&&goog.array.ARRAY_PROTOTYPE_.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(t>=0&&t<e.length),goog.asserts.assert(n>=0&&n<e.length);var r=goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1);goog.array.ARRAY_PROTOTYPE_.splice.call(e,n,0,r[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=0;!0;n++){for(var r=[],o=0;o<arguments.length;o++){var i=arguments[o];if(n>=i.length)return t;r.push(i[n])}t.push(r)}},goog.array.shuffle=function(e,t){for(var n=t||Math.random,r=e.length-1;r>0;r--){var o=Math.floor(n()*(r+1)),i=e[r];e[r]=e[o],e[o]=i}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,function(t){n.push(e[t])}),n},goog.provide("goog.labs.userAgent.browser"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.object"),goog.require("goog.string"),goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){var t=goog.array.find(e,o);return r[t]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var n=goog.labs.userAgent.util.extractVersionTuples(t),r={};goog.array.forEach(n,function(e){var t=e[0],n=e[1];r[t]=n});var o=goog.partial(goog.object.containsKey,r);if(goog.labs.userAgent.browser.isOpera())return e(["Version","Opera","OPR"]);if(goog.labs.userAgent.browser.isChrome())return e(["Chrome","CriOS"]);var i=n[2];return i&&i[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)>=0},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];var n="",r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1]){var o=/Trident\/(\d.\d)/.exec(e);if("7.0"==r[1])if(o&&o[1])switch(o[1]){case"4.0":n="8.0";break;case"5.0":n="9.0";break;case"6.0":n="10.0";break;case"7.0":n="11.0"}else n="7.0";else n=r[1]}return n},goog.provide("goog.labs.userAgent.engine"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var t=goog.labs.userAgent.util.extractVersionTuples(e),n=t[1];if(n)return"Gecko"==n[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):n[1];var r,o=t[0];if(o&&(r=o[2])){var i=/Trident\/([^\s;]+)/.exec(r);if(i)return i[1]}}return""},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)>=0},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var n=goog.array.find(e,function(e){return t==e[0]});return n&&n[1]||""},goog.provide("goog.crypt"),goog.require("goog.array"),goog.require("goog.asserts"),goog.crypt.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var o=e.charCodeAt(r);o>255;)t[n++]=255&o,o>>=8;t[n++]=o}return t},goog.crypt.byteArrayToString=function(e){var t=8192;if(e.length<t)return String.fromCharCode.apply(null,e);for(var n="",r=0;r<e.length;r+=t){var o=goog.array.slice(e,r,r+t);n+=String.fromCharCode.apply(null,o)}return n},goog.crypt.byteArrayToHex=function(e){return goog.array.map(e,function(e){var t=e.toString(16);return t.length>1?t:"0"+t}).join("")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(e.length%2==0,"Key string length must be multiple of 2");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){e=e.replace(/\r\n/g,"\n");for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);128>o?t[n++]=o:2048>o?(t[n++]=o>>6|192,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(128>o)t[r++]=String.fromCharCode(o);else if(o>191&&224>o){var i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else{var i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n},goog.provide("goog.userAgent"),goog.require("goog.labs.userAgent.browser"),goog.require("goog.labs.userAgent.engine"),goog.require("goog.labs.userAgent.platform"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.define("goog.userAgent.ASSUME_IE",!1),goog.define("goog.userAgent.ASSUME_GECKO",!1),goog.define("goog.userAgent.ASSUME_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_OPERA",!1),goog.define("goog.userAgent.ASSUME_ANY_VERSION",!1),goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.define("goog.userAgent.ASSUME_MAC",!1),goog.define("goog.userAgent.ASSUME_WINDOWS",!1),goog.define("goog.userAgent.ASSUME_LINUX",!1),goog.define("goog.userAgent.ASSUME_X11",!1),goog.define("goog.userAgent.ASSUME_ANDROID",!1),goog.define("goog.userAgent.ASSUME_IPHONE",!1),goog.define("goog.userAgent.ASSUME_IPAD",!1),goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.determineVersion_=function(){var e,t="";if(goog.userAgent.OPERA&&goog.global.opera){var n=goog.global.opera.version;return goog.isFunction(n)?n():n}if(goog.userAgent.GECKO?e=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(e=/WebKit\/(\S+)/),e){var r=e.exec(goog.userAgent.getUserAgentString());t=r?r[1]:""}if(goog.userAgent.IE){var o=goog.userAgent.getDocumentMode_();if(o>parseFloat(t))return String(o)}return t},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=goog.string.compareVersions(goog.userAgent.VERSION,e)>=0)},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document;if(!e||!goog.userAgent.IE)return void 0;var t=goog.userAgent.getDocumentMode_();return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.provide("goog.crypt.base64"),goog.require("goog.crypt"),goog.require("goog.userAgent"),goog.crypt.base64.byteToCharMap_=null,goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.byteToCharMapWebSafe_=null,goog.crypt.base64.charToByteMapWebSafe_=null,goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.",goog.crypt.base64.HAS_NATIVE_SUPPORT=goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA||"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){if(!goog.isArrayLike(e))throw Error("encodeByteArray takes an array as a parameter");goog.crypt.base64.init_();for(var n=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,u=o+2<e.length,l=u?e[o+2]:0,c=i>>2,f=(3&i)<<4|s>>4,h=(15&s)<<2|l>>6,p=63&l;u||(p=64,a||(h=64)),r.push(n[c],n[f],n[h],n[p])}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_SUPPORT&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_SUPPORT&&!t?goog.global.atob(e):goog.crypt.byteArrayToString(goog.crypt.base64.decodeStringToByteArray(e,t))},goog.crypt.base64.decodeStringToByteArray=function(e,t){goog.crypt.base64.init_();for(var n=t?goog.crypt.base64.charToByteMapWebSafe_:goog.crypt.base64.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],a=o<e.length,s=a?n[e.charAt(o)]:0;++o;var u=o<e.length,l=u?n[e.charAt(o)]:64;++o;var c=o<e.length,f=c?n[e.charAt(o)]:64;if(++o,null==i||null==s||null==l||null==f)throw Error();var h=i<<2|s>>4;if(r.push(h),64!=l){var p=s<<4&240|l>>2;if(r.push(p),64!=f){var d=l<<6&192|f;r.push(d)}}}return r},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={},goog.crypt.base64.charToByteMap_={},goog.crypt.base64.byteToCharMapWebSafe_={},goog.crypt.base64.charToByteMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),goog.crypt.base64.charToByteMapWebSafe_[goog.crypt.base64.byteToCharMapWebSafe_[e]]=e,e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e,goog.crypt.base64.charToByteMapWebSafe_[goog.crypt.base64.ENCODED_VALS.charAt(e)]=e)}},goog.provide("fb.constants");var NODE_CLIENT=!1,CLIENT_VERSION="0.0.0";goog.provide("fb.util.obj"),fb.util.obj.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},fb.util.obj.get=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},fb.util.obj.foreach=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},fb.util.obj.clone=function(e){var t={};return fb.util.obj.foreach(e,function(e,n){t[e]=n}),t},goog.provide("fb.util"),goog.require("fb.util.obj"),fb.util.querystring=function(e){var t=[];return fb.util.obj.foreach(e,function(e,n){goog.isArray(n)?goog.array.forEach(n,function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},fb.util.querystringDecode=function(e){var t={},n=e.replace(/^\?/,"").split("&");return goog.array.forEach(n,function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},goog.provide("fb.util.validation"),fb.util.validation.validateArgCount=function(e,t,n,r){var o;if(t>r?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o){var i=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".";throw new Error(i)}},fb.util.validation.errorPrefix=function(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "},fb.util.validation.validateNamespace=function(e,t,n,r){if((!r||goog.isDef(n))&&!goog.isString(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid firebase namespace.")},fb.util.validation.validateCallback=function(e,t,n,r){if((!r||goog.isDef(n))&&!goog.isFunction(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid function.")},fb.util.validation.validateContextObject=function(e,t,n,r){if(!(r&&!goog.isDef(n)||goog.isObject(n)&&null!==n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid context object.")},goog.provide("fb.util.json"),goog.require("goog.json"),fb.util.json.eval=function(e){return"undefined"!=typeof JSON&&goog.isDef(JSON.parse)?JSON.parse(e):goog.json.parse(e)},fb.util.json.stringify=function(e){return"undefined"!=typeof JSON&&goog.isDef(JSON.stringify)?JSON.stringify(e):goog.json.serialize(e)},goog.provide("fb.core.SnapshotHolder"),fb.core.SnapshotHolder=function(){this.rootNode_=fb.core.snap.EMPTY_NODE},fb.core.SnapshotHolder.prototype.getNode=function(e){return this.rootNode_.getChild(e)},fb.core.SnapshotHolder.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},goog.DEBUG&&(fb.core.SnapshotHolder.prototype.toString=function(){return this.rootNode_.toString()}),goog.provide("fb.core.view.CompleteChildSource"),fb.core.view.CompleteChildSource=function(){},fb.core.view.CompleteChildSource.prototype.getCompleteChild=function(e){},fb.core.view.CompleteChildSource.prototype.getChildAfterChild=function(e,t,n){},fb.core.view.NoCompleteChildSource_=function(){},fb.core.view.NoCompleteChildSource_.prototype.getCompleteChild=function(){return null},fb.core.view.NoCompleteChildSource_.prototype.getChildAfterChild=function(){return null},fb.core.view.NO_COMPLETE_CHILD_SOURCE=new fb.core.view.NoCompleteChildSource_,fb.core.view.WriteTreeCompleteChildSource=function(e,t,n){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n},fb.core.view.WriteTreeCompleteChildSource.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new fb.core.view.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},fb.core.view.WriteTreeCompleteChildSource.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===o.length?null:o[0]},goog.provide("fb.core.view.EventQueue"),fb.core.view.EventQueue=function(){this.eventLists_=[],this.recursionDepth_=0},fb.core.view.EventQueue.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],o=r.getPath();null===t||o.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new fb.core.view.EventList(o)),t.add(r)}t&&this.eventLists_.push(t);
},fb.core.view.EventQueue.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},fb.core.view.EventQueue.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},fb.core.view.EventQueue.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){var o=r.getPath();e(o)?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}}t&&(this.eventLists_=[]),this.recursionDepth_--},fb.core.view.EventList=function(e){this.path_=e,this.events_=[]},fb.core.view.EventList.prototype.add=function(e){this.events_.push(e)},fb.core.view.EventList.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();fb.core.util.logger&&fb.core.util.log("event: "+t.toString()),fb.core.util.exceptionGuard(n)}}},fb.core.view.EventList.prototype.getPath=function(){return this.path_},goog.provide("fb.core.view.Change"),fb.core.view.Change=function(e,t,n,r,o){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=o},fb.core.view.Change.valueChange=function(e){return new fb.core.view.Change(fb.core.view.Change.VALUE,e)},fb.core.view.Change.childAddedChange=function(e,t){return new fb.core.view.Change(fb.core.view.Change.CHILD_ADDED,t,e)},fb.core.view.Change.childRemovedChange=function(e,t){return new fb.core.view.Change(fb.core.view.Change.CHILD_REMOVED,t,e)},fb.core.view.Change.childChangedChange=function(e,t,n){return new fb.core.view.Change(fb.core.view.Change.CHILD_CHANGED,t,e,n)},fb.core.view.Change.childMovedChange=function(e,t){return new fb.core.view.Change(fb.core.view.Change.CHILD_MOVED,t,e)},fb.core.view.Change.prototype.changeWithPrevName=function(e){return new fb.core.view.Change(this.type,this.snapshotNode,this.childName,this.oldSnap,e)},fb.core.view.Change.CHILD_ADDED="child_added",fb.core.view.Change.CHILD_REMOVED="child_removed",fb.core.view.Change.CHILD_CHANGED="child_changed",fb.core.view.Change.CHILD_MOVED="child_moved",fb.core.view.Change.VALUE="value",goog.provide("fb.core.view.Event"),fb.core.view.Event=function(){},fb.core.view.Event.prototype.getPath,fb.core.view.Event.prototype.getEventType,fb.core.view.Event.prototype.getEventRunner,fb.core.view.Event.prototype.toString,fb.core.view.DataEvent=function(e,t,n,r){this.eventRegistration=t,this.snapshot=n,this.prevName=r,this.eventType=e},fb.core.view.DataEvent.prototype.getPath=function(){var e=this.snapshot.ref();return"value"===this.eventType?e.path:e.parent().path},fb.core.view.DataEvent.prototype.getEventType=function(){return this.eventType},fb.core.view.DataEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},fb.core.view.DataEvent.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+fb.util.json.stringify(this.snapshot.exportVal())},fb.core.view.CancelEvent=function(e,t,n){this.eventRegistration=e,this.error=t,this.path=n},fb.core.view.CancelEvent.prototype.getPath=function(){return this.path},fb.core.view.CancelEvent.prototype.getEventType=function(){return"cancel"},fb.core.view.CancelEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},fb.core.view.CancelEvent.prototype.toString=function(){return this.path.toString()+":cancel"},goog.provide("fb.core.view.CacheNode"),fb.core.view.CacheNode=function(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n},fb.core.view.CacheNode.prototype.isFullyInitialized=function(){return this.fullyInitialized_},fb.core.view.CacheNode.prototype.isFiltered=function(){return this.filtered_},fb.core.view.CacheNode.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},fb.core.view.CacheNode.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},fb.core.view.CacheNode.prototype.getNode=function(){return this.node_},goog.provide("fb.core.stats.StatsListener"),fb.core.stats.StatsListener=function(e){this.collection_=e,this.last_=null},fb.core.stats.StatsListener.prototype.get=function(){var e=this.collection_.get(),t=goog.object.clone(e);if(this.last_)for(var n in this.last_)t[n]=t[n]-this.last_[n];return this.last_=e,t},goog.provide("fb.core.stats.StatsReporter");var FIRST_STATS_MIN_TIME=1e4,FIRST_STATS_MAX_TIME=3e4,REPORT_STATS_INTERVAL=3e5;fb.core.stats.StatsReporter=function(e,t){this.statsToReport_={},this.statsListener_=new fb.core.stats.StatsListener(e),this.server_=t;var n=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeout(goog.bind(this.reportStats_,this),Math.floor(n))},fb.core.stats.StatsReporter.prototype.includeStat=function(e){this.statsToReport_[e]=!0},fb.core.stats.StatsReporter.prototype.reportStats_=function(){var e=this.statsListener_.get(),t={},n=!1;for(var r in e)e[r]>0&&fb.util.obj.contains(this.statsToReport_,r)&&(t[r]=e[r],n=!0);n&&this.server_.reportStats(t),setTimeout(goog.bind(this.reportStats_,this),Math.floor(2*Math.random()*REPORT_STATS_INTERVAL))},goog.provide("fb.core.stats.StatsCollection"),goog.require("fb.util.obj"),goog.require("goog.array"),goog.require("goog.object"),fb.core.stats.StatsCollection=function(){this.counters_={}},fb.core.stats.StatsCollection.prototype.incrementCounter=function(e,t){goog.isDef(t)||(t=1),fb.util.obj.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},fb.core.stats.StatsCollection.prototype.get=function(){return goog.object.clone(this.counters_)},goog.provide("fb.core.stats.StatsManager"),goog.require("fb.core.stats.StatsCollection"),goog.require("fb.core.stats.StatsListener"),goog.require("fb.core.stats.StatsReporter"),fb.core.stats.StatsManager={},fb.core.stats.StatsManager.collections_={},fb.core.stats.StatsManager.reporters_={},fb.core.stats.StatsManager.getCollection=function(e){var t=e.toString();return fb.core.stats.StatsManager.collections_[t]||(fb.core.stats.StatsManager.collections_[t]=new fb.core.stats.StatsCollection),fb.core.stats.StatsManager.collections_[t]},fb.core.stats.StatsManager.getOrCreateReporter=function(e,t){var n=e.toString();return fb.core.stats.StatsManager.reporters_[n]||(fb.core.stats.StatsManager.reporters_[n]=t()),fb.core.stats.StatsManager.reporters_[n]},goog.provide("fb.core.ServerActions"),fb.core.ServerActions=goog.defineClass(null,{listen:goog.abstractMethod,unlisten:goog.abstractMethod,put:goog.abstractMethod,merge:goog.abstractMethod,auth:goog.abstractMethod,unauth:goog.abstractMethod,onDisconnectPut:goog.abstractMethod,onDisconnectMerge:goog.abstractMethod,onDisconnectCancel:goog.abstractMethod,reportStats:goog.abstractMethod}),goog.provide("fb.core.snap.Node"),goog.provide("fb.core.snap.NamedNode"),fb.core.snap.Node=function(){},fb.core.snap.Node.prototype.isLeafNode,fb.core.snap.Node.prototype.getPriority,fb.core.snap.Node.prototype.updatePriority,fb.core.snap.Node.prototype.getImmediateChild,fb.core.snap.Node.prototype.getChild,fb.core.snap.Node.prototype.getPredecessorChildName,fb.core.snap.Node.prototype.updateImmediateChild,fb.core.snap.Node.prototype.updateChild,fb.core.snap.Node.prototype.hasChild,fb.core.snap.Node.prototype.isEmpty,fb.core.snap.Node.prototype.numChildren,fb.core.snap.Node.prototype.val,fb.core.snap.Node.prototype.hash,fb.core.snap.Node.prototype.compareTo,fb.core.snap.Node.prototype.equals,fb.core.snap.Node.prototype.withIndex,fb.core.snap.Node.prototype.isIndexed,fb.core.snap.NamedNode=function(e,t){this.name=e,this.node=t},fb.core.snap.NamedNode.Wrap=function(e,t){return new fb.core.snap.NamedNode(e,t)},goog.provide("fb.core.snap.comparators"),fb.core.snap.NAME_ONLY_COMPARATOR=function(e,t){return fb.core.util.nameCompare(e.name,t.name)},fb.core.snap.NAME_COMPARATOR=function(e,t){return fb.core.util.nameCompare(e,t)},goog.provide("fb.core.operation.Overwrite"),fb.core.operation.Overwrite=function(e,t,n){this.type=fb.core.OperationType.OVERWRITE,this.source=e,this.path=t,this.snap=n},fb.core.operation.Overwrite.prototype.operationForChild=function(e){return this.path.isEmpty()?new fb.core.operation.Overwrite(this.source,fb.core.util.Path.Empty,this.snap.getImmediateChild(e)):new fb.core.operation.Overwrite(this.source,this.path.popFront(),this.snap)},goog.DEBUG&&(fb.core.operation.Overwrite.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.snap.toString()+")"}),goog.provide("fb.core.operation.AckUserWrite"),fb.core.operation.AckUserWrite=function(e,t){this.type=fb.core.OperationType.ACK_USER_WRITE,this.source=fb.core.OperationSource.User,this.path=e,this.revert=t},fb.core.operation.AckUserWrite.prototype.operationForChild=function(e){return this.path.isEmpty()?this:new fb.core.operation.AckUserWrite(this.path.popFront(),this.revert)},goog.DEBUG&&(fb.core.operation.AckUserWrite.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.revert+")"}),goog.provide("fb.core.operation.ListenComplete"),fb.core.operation.ListenComplete=function(e,t){this.type=fb.core.OperationType.LISTEN_COMPLETE,this.source=e,this.path=t},fb.core.operation.ListenComplete.prototype.operationForChild=function(e){return this.path.isEmpty()?new fb.core.operation.ListenComplete(this.source,fb.core.util.Path.Empty):new fb.core.operation.ListenComplete(this.source,this.path.popFront())},goog.DEBUG&&(fb.core.operation.ListenComplete.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"}),goog.provide("fb.core.util.SortedMap"),goog.require("goog.array"),fb.Comparator,fb.core.util.SortedMap=goog.defineClass(null,{constructor:function(e,t){this.comparator_=e,this.root_=t?t:fb.core.util.SortedMap.EMPTY_NODE_},insert:function(e,t){return new fb.core.util.SortedMap(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fb.LLRBNode.BLACK,null,null))},remove:function(e){return new fb.core.util.SortedMap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fb.LLRBNode.BLACK,null,null))},get:function(e){for(var t,n=this.root_;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;0>t?n=n.left:t>0&&(n=n.right)}return null},getPredecessorKey:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}0>t?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},isEmpty:function(){return this.root_.isEmpty()},count:function(){return this.root_.count()},minKey:function(){return this.root_.minKey()},maxKey:function(){return this.root_.maxKey()},inorderTraversal:function(e){return this.root_.inorderTraversal(e)},reverseTraversal:function(e){return this.root_.reverseTraversal(e)},getIterator:function(e){return new fb.core.util.SortedMapIterator(this.root_,null,this.comparator_,!1,e)},getIteratorFrom:function(e,t){return new fb.core.util.SortedMapIterator(this.root_,e,this.comparator_,!1,t)},getReverseIteratorFrom:function(e,t){return new fb.core.util.SortedMapIterator(this.root_,e,this.comparator_,!0,t)},getReverseIterator:function(e){return new fb.core.util.SortedMapIterator(this.root_,null,this.comparator_,!0,e)}}),fb.core.util.SortedMapIterator=goog.defineClass(null,{constructor:function(e,t,n,r,o){this.resultGenerator_=o||null,this.isReverse_=r,this.nodeStack_=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),0>i)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}},getNext:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},hasNext:function(){return this.nodeStack_.length>0},peek:function(){if(0===this.nodeStack_.length)return null;var e=goog.array.peek(this.nodeStack_);return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}),fb.LLRBNode=goog.defineClass(null,{constructor:function(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:fb.LLRBNode.RED,this.left=null!=r?r:fb.core.util.SortedMap.EMPTY_NODE_,this.right=null!=o?o:fb.core.util.SortedMap.EMPTY_NODE_},statics:{RED:!0,BLACK:!1},copy:function(e,t,n,r,o){return new fb.LLRBNode(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)},count:function(){return this.left.count()+1+this.right.count()},isEmpty:function(){return!1},inorderTraversal:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},reverseTraversal:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},min_:function(){return this.left.isEmpty()?this:this.left.min_()},minKey:function(){return this.min_().key},maxKey:function(){return this.right.isEmpty()?this.key:this.right.maxKey()},insert:function(e,t,n){var r,o;return o=this,r=n(e,o.key),o=0>r?o.copy(null,null,null,o.left.insert(e,t,n),null):0===r?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp_()},removeMin_:function(){var e;return this.left.isEmpty()?fb.core.util.SortedMap.EMPTY_NODE_:(e=this,e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_())},remove:function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return fb.core.util.SortedMap.EMPTY_NODE_;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},isRed_:function(){return this.color},fixUp_:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},moveRedLeft_:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},moveRedRight_:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},rotateLeft_:function(){var e;return e=this.copy(null,null,fb.LLRBNode.RED,null,this.right.left),this.right.copy(null,null,this.color,e,null)},rotateRight_:function(){var e;return e=this.copy(null,null,fb.LLRBNode.RED,this.left.right,null),this.left.copy(null,null,this.color,null,e)},colorFlip_:function(){var e,t;return e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null),this.copy(null,null,!this.color,e,t)},checkMaxDepth_:function(){var e;return e=this.check_(),Math.pow(2,e)<=this.count()+1?!0:!1},check_:function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if(e=this.left.check_(),e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}),fb.LLRBEmptyNode=goog.defineClass(null,{constructor:function(){},copy:function(){return this},insert:function(e,t,n){return new fb.LLRBNode(e,t,null)},remove:function(e,t){return this},count:function(){return 0},isEmpty:function(){return!0},inorderTraversal:function(e){return!1},reverseTraversal:function(e){return!1},minKey:function(){return null},maxKey:function(){return null},check_:function(){return 0},isRed_:function(){return!1}}),fb.core.util.SortedMap.EMPTY_NODE_=new fb.LLRBEmptyNode,goog.provide("fb.core.util.NodePatches"),function(){function e(e,t,n){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){n(r)})}function t(e,t,n,r){var o=!0;if(!Buffer.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");e.emit("error",i),process.nextTick(function(){r(i)}),o=!1}return o}function n(e,t,n,a,s){n=r(t,n,a),Buffer.isBuffer(n)&&(a="buffer");var u=t.objectMode?1:n.length;t.length+=u;var l=t.length<t.highWaterMark;return l||(t.needDrain=!0),t.writing?t.buffer.push(new o(n,a,s)):i(e,t,u,n,a,s),l}function r(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,n)),t}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t,n,r,o,i){t.writelen=n,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,o,t.onwrite),t.sync=!1}if(NODE_CLIENT){var a=process.version;if("v0.10.22"===a||"v0.10.23"===a||"v0.10.24"===a){var s=require("_stream_writable");s.prototype.write=function(r,o,i){var a=this._writableState,s=!1;return"function"==typeof o&&(i=o,o=null),Buffer.isBuffer(r)?o="buffer":o||(o=a.defaultEncoding),"function"!=typeof i&&(i=function(){}),a.ended?e(this,a,i):t(this,a,r,i)&&(s=n(this,a,r,o,i)),s};var u=require("_stream_duplex");u.prototype.write=s.prototype.write}}}(),goog.provide("fb.core.util.ServerValues"),fb.core.util.ServerValues.generateWithValues=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},fb.core.util.ServerValues.resolveDeferredValue=function(e,t){return e&&"object"==typeof e?(fb.core.util.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},fb.core.util.ServerValues.resolveDeferredValueTree=function(e,t){var n=new fb.core.SparseSnapshotTree;return e.forEachTree(new fb.core.util.Path(""),function(e,r){n.remember(e,fb.core.util.ServerValues.resolveDeferredValueSnapshot(r,t))}),n},fb.core.util.ServerValues.resolveDeferredValueSnapshot=function(e,t){var n,r=e.getPriority().val(),o=fb.core.util.ServerValues.resolveDeferredValue(r,t);if(e.isLeafNode()){var i=e,a=fb.core.util.ServerValues.resolveDeferredValue(i.getValue(),t);return a!==i.getValue()||o!==i.getPriority().val()?new fb.core.snap.LeafNode(a,fb.core.snap.NodeFromJSON(o)):e}var s=e;return n=s,o!==s.getPriority().val()&&(n=n.updatePriority(new fb.core.snap.LeafNode(o))),s.forEachChild(fb.core.snap.PriorityIndex,function(e,r){var o=fb.core.util.ServerValues.resolveDeferredValueSnapshot(r,t);o!==r&&(n=n.updateImmediateChild(e,o))}),n},goog.provide("fb.core.util.Path"),goog.provide("fb.core.util.ValidationPath"),fb.core.util.Path=goog.defineClass(null,{constructor:function(e,t){if(1==arguments.length){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t},getFront:function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},getLength:function(){return this.pieces_.length-this.pieceNum_},popFront:function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new fb.core.util.Path(this.pieces_,e)},getBack:function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},toString:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},toUrlEncodedString:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+goog.string.urlEncode(this.pieces_[t]));return e||"/"},slice:function(e){var t=e||0;return this.pieces_.slice(this.pieceNum_+t)},parent:function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new fb.core.util.Path(e,0)},child:function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof fb.core.util.Path)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)r[n].length>0&&t.push(r[n])}return new fb.core.util.Path(t,0)},isEmpty:function(){return this.pieceNum_>=this.pieces_.length},statics:{relativePath:function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return fb.core.util.Path.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}},equals:function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},contains:function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}}),fb.core.util.Path.Empty=new fb.core.util.Path(""),fb.core.util.ValidationPath=goog.defineClass(null,{constructor:function(e,t){this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length),this.errorPrefix_=t;for(var n=0;n<this.parts_.length;n++)this.byteLength_+=fb.util.utf8.stringLength(this.parts_[n]);this.checkValid_()},statics:{MAX_PATH_DEPTH:32,MAX_PATH_LENGTH_BYTES:768},push:function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=fb.util.utf8.stringLength(e),this.checkValid_()},pop:function(){var e=this.parts_.pop();this.byteLength_-=fb.util.utf8.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},checkValid_:function(){if(this.byteLength_>fb.core.util.ValidationPath.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+fb.core.util.ValidationPath.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>fb.core.util.ValidationPath.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fb.core.util.ValidationPath.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},toErrorString:function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"}}),goog.provide("fb.core.storage.MemoryStorage"),goog.require("fb.util.obj"),goog.scope(function(){var e=fb.util.obj;fb.core.storage.MemoryStorage=function(){this.cache_={}};var t=fb.core.storage.MemoryStorage;t.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},t.prototype.get=function(t){return e.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(e){delete this.cache_[e]},t.prototype.isInMemoryStorage=!0}),goog.provide("fb.core.storage.DOMStorageWrapper"),goog.require("fb.util.obj"),goog.scope(function(){fb.core.storage.DOMStorageWrapper=function(e){this.domStorage_=e,this.prefix_="firebase:"};var e=fb.core.storage.DOMStorageWrapper;e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),fb.util.json.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:fb.util.json.eval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.isInMemoryStorage=!1,e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()}}),goog.provide("fb.core.storage"),goog.require("fb.core.storage.DOMStorageWrapper"),goog.require("fb.core.storage.MemoryStorage"),fb.core.storage.createStoragefor=function(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fb.core.storage.DOMStorageWrapper(t)}}catch(n){}return new fb.core.storage.MemoryStorage},fb.core.storage.PersistentStorage=fb.core.storage.createStoragefor("localStorage"),fb.core.storage.SessionStorage=fb.core.storage.createStoragefor("sessionStorage"),goog.provide("fb.core.RepoInfo"),goog.require("fb.core.storage"),fb.core.RepoInfo=function(e,t,n,r,o){this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=o||"",this.internalHost=fb.core.storage.PersistentStorage.get("host:"+e)||this.host},fb.core.RepoInfo.prototype.needsQueryParam=function(){return this.host!==this.internalHost},fb.core.RepoInfo.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},fb.core.RepoInfo.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},fb.core.RepoInfo.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},fb.core.RepoInfo.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fb.core.storage.PersistentStorage.set("host:"+this.host,this.internalHost))},fb.core.RepoInfo.prototype.toString=function(){var e=(this.secure?"https://":"http://")+this.host;return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},goog.provide("fb.core.util"),goog.require("fb.constants"),goog.require("fb.core.RepoInfo"),goog.require("fb.core.storage"),goog.require("fb.util.json"),goog.require("goog.crypt.Sha1"),goog.require("goog.crypt.base64"),goog.require("goog.object"),goog.require("goog.string"),fb.core.util.LUIDGenerator=function(){var e=1;return function(){return e++}}(),fb.core.util.assert=function(e,t){if(!e)throw fb.core.util.assertionError(t)},fb.core.util.assertionError=function(e){return new Error("Firebase ("+Firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},fb.core.util.assertWeak=function(e,t){e||fb.core.util.error(t)},fb.core.util.base64Encode=function(e){var t=fb.util.utf8.stringToByteArray(e);return goog.crypt.base64.encodeByteArray(t,!0)},fb.core.util.base64Decode=function(e){try{return NODE_CLIENT?new Buffer(e,"base64").toString("utf8"):"undefined"!=typeof atob?atob(e):goog.crypt.base64.decodeString(e,!0)}catch(t){fb.core.util.log("base64Decode failed: ",t)}return null},fb.core.util.sha1=function(e){var t=fb.util.utf8.stringToByteArray(e),n=new goog.crypt.Sha1;n.update(t);var r=n.digest();return goog.crypt.base64.encodeByteArray(r)},fb.core.util.buildLogMessage_=function(e){for(var t="",n=0;n<arguments.length;n++)t+=goog.isArrayLike(arguments[n])?fb.core.util.buildLogMessage_.apply(null,arguments[n]):"object"==typeof arguments[n]?fb.util.json.stringify(arguments[n]):arguments[n],t+=" ";return t},fb.core.util.logger=null,fb.core.util.firstLog_=!0,fb.core.util.log=function(e){if(fb.core.util.firstLog_===!0&&(fb.core.util.firstLog_=!1,null===fb.core.util.logger&&fb.core.storage.SessionStorage.get("logging_enabled")===!0&&Firebase.enableLogging(!0)),fb.core.util.logger){var t=fb.core.util.buildLogMessage_.apply(null,arguments);fb.core.util.logger(t)}},fb.core.util.logWrapper=function(e){return function(){fb.core.util.log(e,arguments)}},fb.core.util.error=function(e){if("undefined"!=typeof console){"FIREBASE INTERNAL ERROR: "+fb.core.util.buildLogMessage_.apply(null,arguments);"undefined"!=typeof console.error}},fb.core.util.fatal=function(e){var t=fb.core.util.buildLogMessage_.apply(null,arguments);throw new Error("FIREBASE FATAL ERROR: "+t)},fb.core.util.warn=function(e){if("undefined"!=typeof console){"FIREBASE WARNING: "+fb.core.util.buildLogMessage_.apply(null,arguments);"undefined"!=typeof console.warn}},fb.core.util.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fb.core.util.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fb.core.util.warnAboutUnsupportedMethod=function(e){fb.core.util.warn(e+" is unsupported and will likely change soon.  Please do not use.")},fb.core.util.parseRepoInfo=function(e){var t=fb.core.util.parseURL(e),n=t.subdomain;"firebase"===t.domain&&fb.core.util.fatal(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n||fb.core.util.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||fb.core.util.warnIfPageIsSecure();var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new fb.core.RepoInfo(t.host,t.secure,n,r),path:new fb.core.util.Path(t.pathString)}},fb.core.util.parseURL=function(e){var t="",n="",r="",o="",i=!0,a="https",s=443;if(goog.isString(e)){var u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));var l=e.indexOf("/");-1===l&&(l=e.length),t=e.substring(0,l),o=fb.core.util.decodePath(e.substring(l));var c=t.split(".");3===c.length?(n=c[1],r=c[0].toLowerCase()):2===c.length&&(n=c[0]),u=t.indexOf(":"),u>=0&&(i="https"===a||"wss"===a,s=goog.string.parseInt(t.substring(u+1)))}return{host:t,port:s,domain:n,subdomain:r,secure:i,scheme:a,pathString:o}},fb.core.util.decodePath=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var o=n[r];try{o=goog.string.urlDecode(o)}catch(i){}t+="/"+o}return t},fb.core.util.isInvalidJSONNumber=function(e){return goog.isNumber(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},fb.core.util.executeWhenDOMReady=function(e){if(NODE_CLIENT||"complete"===document.readyState)e();else{var t=!1,n=function(){return document.body?void(t||(t=!0,e())):void setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},fb.core.util.MIN_NAME="[MIN_NAME]",fb.core.util.MAX_NAME="[MAX_NAME]",fb.core.util.nameCompare=function(e,t){if(e===t)return 0;if(e===fb.core.util.MIN_NAME||t===fb.core.util.MAX_NAME)return-1;if(t===fb.core.util.MIN_NAME||e===fb.core.util.MAX_NAME)return 1;var n=fb.core.util.tryParseInt(e),r=fb.core.util.tryParseInt(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:t>e?-1:1},fb.core.util.stringCompare=function(e,t){return e===t?0:t>e?-1:1},fb.core.util.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+fb.util.json.stringify(t))},fb.core.util.ObjectToUniqueKey=function(e){if("object"!=typeof e||null===e)return fb.util.json.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",o=0;o<t.length;o++)0!==o&&(r+=","),r+=fb.util.json.stringify(t[o]),r+=":",r+=fb.core.util.ObjectToUniqueKey(e[t[o]]);return r+="}"},fb.core.util.splitStringBySize=function(e,t){if(e.length<=t)return[e];for(var n=[],r=0;r<e.length;r+=t)r+t>e?n.push(e.substring(r,e.length)):n.push(e.substring(r,r+t));return n},fb.core.util.each=function(e,t){if(goog.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else goog.object.forEach(e,t)},fb.core.util.bindCallback=function(e,t){return t?goog.bind(e,t):e},fb.core.util.doubleToIEEE754String=function(e){fb.core.util.assert(!fb.core.util.isInvalidJSONNumber(e),"Invalid JSON number");var t,n,r,o,i,a,s,u=11,l=52,c=(1<<u-1)-1;for(0===e?(n=0,r=0,t=1/e===-(1/0)?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,1-c)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),c),n=o+c,r=Math.round(e*Math.pow(2,l-o)-Math.pow(2,l))):(n=0,r=Math.round(e/Math.pow(2,1-c-l)))),a=[],i=l;i;i-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(i=u;i;i-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var f="";for(i=0;64>i;i+=8){var h=parseInt(s.substr(i,8),2).toString(16);1===h.length&&(h="0"+h),f+=h}return f.toLowerCase()},fb.core.util.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href));
},fb.core.util.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},fb.core.util.errorForServerCode=function(e){var t="Unknown Error";"too_big"===e?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?t="Client doesn't have permission to access the desired data.":"unavailable"==e&&(t="The service is unavailable");var n=new Error(e+": "+t);return n.code=e.toUpperCase(),n},fb.core.util.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),fb.core.util.tryParseInt=function(e){if(fb.core.util.INTEGER_REGEXP_.test(e)){var t=Number(e);if(t>=-2147483648&&2147483647>=t)return t}return null},fb.core.util.exceptionGuard=function(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";throw fb.core.util.warn("Exception was thrown by user callback.",e),t},Math.floor(0))}},fb.core.util.callUserCallback=function(e,t){if(goog.isFunction(e)){var n=Array.prototype.slice.call(arguments,1),r=n.slice();fb.core.util.exceptionGuard(function(){e.apply(null,r)})}},fb.core.util.beingCrawled=function(){var e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},goog.provide("fb.util.utf8"),goog.require("fb.core.util"),fb.util.utf8.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&56319>=o){var i=o-55296;r++,fb.core.util.assert(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;o=65536+(i<<10)+a}128>o?t[n++]=o:2048>o?(t[n++]=o>>6|192,t[n++]=63&o|128):65536>o?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},fb.util.utf8.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t++:2048>r?t+=2:r>=55296&&56319>=r?(t+=4,n++):t+=3}return t},goog.provide("fb.util.jwt"),goog.require("fb.core.util"),goog.require("fb.util.json"),goog.require("fb.util.obj"),goog.require("goog.crypt.base64"),goog.require("goog.json"),fb.util.jwt.decode=function(e){var t={},n={},r={},o="";try{var i=e.split(".");t=fb.util.json.eval(fb.core.util.base64Decode(i[0])||""),n=fb.util.json.eval(fb.core.util.base64Decode(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:o}},fb.util.jwt.isValidTimestamp=function(e){var t,n,r=fb.util.jwt.decode(e).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?t=fb.util.obj.get(r,"nbf"):r.hasOwnProperty("iat")&&(t=fb.util.obj.get(r,"iat")),n=r.hasOwnProperty("exp")?fb.util.obj.get(r,"exp"):t+86400),o&&t&&n&&o>=t&&n>=o},fb.util.jwt.issuedAtTime=function(e){var t=fb.util.jwt.decode(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?fb.util.obj.get(t,"iat"):null},fb.util.jwt.isValidFormat=function(e){var t=fb.util.jwt.decode(e),n=t.claims;return!!t.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},fb.util.jwt.isAdmin=function(e){var t=fb.util.jwt.decode(e).claims;return"object"==typeof t&&fb.util.obj.get(t,"admin")===!0},goog.provide("fb.core.view.EventGenerator"),goog.require("fb.core.snap.NamedNode"),goog.require("fb.core.util"),fb.core.view.EventGenerator=function(e){this.query_=e,this.index_=e.getQueryParams().getIndex()},fb.core.view.EventGenerator.prototype.generateEventsForChanges=function(e,t,n){var r=[],o=this,i=[];return goog.array.forEach(e,function(e){e.type===fb.core.view.Change.CHILD_CHANGED&&o.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&i.push(fb.core.view.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(r,fb.core.view.Change.CHILD_REMOVED,e,n,t),this.generateEventsForType_(r,fb.core.view.Change.CHILD_ADDED,e,n,t),this.generateEventsForType_(r,fb.core.view.Change.CHILD_MOVED,i,n,t),this.generateEventsForType_(r,fb.core.view.Change.CHILD_CHANGED,e,n,t),this.generateEventsForType_(r,fb.core.view.Change.VALUE,e,n,t),r},fb.core.view.EventGenerator.prototype.generateEventsForType_=function(e,t,n,r,o){var i=goog.array.filter(n,function(e){return e.type===t}),a=this;goog.array.sort(i,goog.bind(this.compareChanges_,this)),goog.array.forEach(i,function(t){var n=a.materializeSingleChange_(t,o);goog.array.forEach(r,function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,a.query_))})})},fb.core.view.EventGenerator.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},fb.core.view.EventGenerator.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw fb.core.util.assertionError("Should only compare child_ events.");var n=new fb.core.snap.NamedNode(e.childName,e.snapshotNode),r=new fb.core.snap.NamedNode(t.childName,t.snapshotNode);return this.index_.compare(n,r)},goog.provide("fb.core.view.ChildChangeAccumulator"),goog.require("fb.core.util"),fb.core.view.ChildChangeAccumulator=function(){this.changeMap_={}},fb.core.view.ChildChangeAccumulator.prototype.trackChildChange=function(e){var t=fb.core.view.Change,n=e.type,r=e.childName;fb.core.util.assert(n==fb.core.view.Change.CHILD_ADDED||n==fb.core.view.Change.CHILD_CHANGED||n==fb.core.view.Change.CHILD_REMOVED,"Only child changes supported for tracking"),fb.core.util.assert(".priority"!==r,"Only non-priority child changes can be tracked.");var o=fb.util.obj.get(this.changeMap_,r);if(o){var i=o.type;if(n==t.CHILD_ADDED&&i==t.CHILD_REMOVED)this.changeMap_[r]=t.childChangedChange(r,e.snapshotNode,o.snapshotNode);else if(n==t.CHILD_REMOVED&&i==t.CHILD_ADDED)delete this.changeMap_[r];else if(n==t.CHILD_REMOVED&&i==t.CHILD_CHANGED)this.changeMap_[r]=t.childRemovedChange(r,o.oldSnap);else if(n==t.CHILD_CHANGED&&i==t.CHILD_ADDED)this.changeMap_[r]=t.childAddedChange(r,e.snapshotNode);else{if(n!=t.CHILD_CHANGED||i!=t.CHILD_CHANGED)throw fb.core.util.assertionError("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap_[r]=t.childChangedChange(r,e.snapshotNode,o.oldSnap)}}else this.changeMap_[r]=e},fb.core.view.ChildChangeAccumulator.prototype.getChanges=function(){return goog.object.getValues(this.changeMap_)},goog.provide("fb.core.view.EventRegistration"),goog.require("fb.core.view.Change"),goog.require("fb.core.view.Event"),goog.require("fb.core.util"),fb.core.view.EventRegistration=function(){},fb.core.view.EventRegistration.prototype.respondsTo,fb.core.view.EventRegistration.prototype.createEvent,fb.core.view.EventRegistration.prototype.getEventRunner,fb.core.view.EventRegistration.prototype.createCancelEvent,fb.core.view.EventRegistration.prototype.matches,fb.core.view.EventRegistration.prototype.hasAnyCallback,fb.core.view.ValueEventRegistration=function(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n||null},fb.core.view.ValueEventRegistration.prototype.respondsTo=function(e){return"value"===e},fb.core.view.ValueEventRegistration.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new fb.core.view.DataEvent("value",this,new fb.api.DataSnapshot(e.snapshotNode,t.ref(),n))},fb.core.view.ValueEventRegistration.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){fb.core.util.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},fb.core.view.ValueEventRegistration.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new fb.core.view.CancelEvent(this,e,t):null},fb.core.view.ValueEventRegistration.prototype.matches=function(e){return e instanceof fb.core.view.ValueEventRegistration?e.callback_&&this.callback_?e.callback_===this.callback_&&e.context_===this.context_:!0:!1},fb.core.view.ValueEventRegistration.prototype.hasAnyCallback=function(){return null!==this.callback_},fb.core.view.ChildEventRegistration=function(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n},fb.core.view.ChildEventRegistration.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,goog.object.containsKey(this.callbacks_,t)},fb.core.view.ChildEventRegistration.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new fb.core.view.CancelEvent(this,e,t):null},fb.core.view.ChildEventRegistration.prototype.createEvent=function(e,t){fb.core.util.assert(null!=e.childName,"Child events should have a childName.");var n=t.ref().child(e.childName),r=t.getQueryParams().getIndex();return new fb.core.view.DataEvent(e.type,this,new fb.api.DataSnapshot(e.snapshotNode,n,r),e.prevName)},fb.core.view.ChildEventRegistration.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){fb.core.util.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},fb.core.view.ChildEventRegistration.prototype.matches=function(e){if(e instanceof fb.core.view.ChildEventRegistration){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=goog.object.getCount(e.callbacks_),n=goog.object.getCount(this.callbacks_);if(t===n){if(1===t){var r=goog.object.getAnyKey(e.callbacks_),o=goog.object.getAnyKey(this.callbacks_);return!(o!==r||e.callbacks_[r]&&this.callbacks_[o]&&e.callbacks_[r]!==this.callbacks_[o])}return goog.object.every(this.callbacks_,function(t,n){return e.callbacks_[n]===t})}}}return!1},fb.core.view.ChildEventRegistration.prototype.hasAnyCallback=function(){return null!==this.callbacks_},goog.provide("fb.core.view.filter.IndexedFilter"),goog.require("fb.core.util"),fb.core.view.filter.IndexedFilter=function(e){this.index_=e},fb.core.view.filter.IndexedFilter.prototype.updateChild=function(e,t,n,r,o){var i=fb.core.view.Change;fb.core.util.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.equals(n)?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(i.childRemovedChange(t,a)):fb.core.util.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(i.childAddedChange(t,n)):o.trackChildChange(i.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},fb.core.view.filter.IndexedFilter.prototype.updateFullNode=function(e,t,n){var r=fb.core.view.Change;return null!=n&&(e.isLeafNode()||e.forEachChild(fb.core.snap.PriorityIndex,function(e,o){t.hasChild(e)||n.trackChildChange(r.childRemovedChange(e,o))}),t.isLeafNode()||t.forEachChild(fb.core.snap.PriorityIndex,function(t,o){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(o)||n.trackChildChange(r.childChangedChange(t,o,i))}else n.trackChildChange(r.childAddedChange(t,o))})),t.withIndex(this.index_)},fb.core.view.filter.IndexedFilter.prototype.updatePriority=function(e,t){return e.isEmpty()?fb.core.snap.EMPTY_NODE:e.updatePriority(t)},fb.core.view.filter.IndexedFilter.prototype.filtersNodes=function(){return!1},fb.core.view.filter.IndexedFilter.prototype.getIndexedFilter=function(){return this},fb.core.view.filter.IndexedFilter.prototype.getIndex=function(){return this.index_},goog.provide("fb.core.view.filter.RangedFilter"),goog.require("fb.core.view.filter.IndexedFilter"),fb.core.view.filter.RangedFilter=function(e){this.indexedFilter_=new fb.core.view.filter.IndexedFilter(e.getIndex()),this.index_=e.getIndex(),this.startPost_=this.getStartPost_(e),this.endPost_=this.getEndPost_(e)},fb.core.view.filter.RangedFilter.prototype.getStartPost=function(){return this.startPost_},fb.core.view.filter.RangedFilter.prototype.getEndPost=function(){return this.endPost_},fb.core.view.filter.RangedFilter.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},fb.core.view.filter.RangedFilter.prototype.updateChild=function(e,t,n,r,o){return this.matches(new fb.core.snap.NamedNode(t,n))||(n=fb.core.snap.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,o)},fb.core.view.filter.RangedFilter.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=fb.core.snap.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(fb.core.snap.EMPTY_NODE);var o=this;return t.forEachChild(fb.core.snap.PriorityIndex,function(e,t){o.matches(new fb.core.snap.NamedNode(e,t))||(r=r.updateImmediateChild(e,fb.core.snap.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},fb.core.view.filter.RangedFilter.prototype.updatePriority=function(e,t){return e},fb.core.view.filter.RangedFilter.prototype.filtersNodes=function(){return!0},fb.core.view.filter.RangedFilter.prototype.getIndexedFilter=function(){return this.indexedFilter_},fb.core.view.filter.RangedFilter.prototype.getIndex=function(){return this.index_},fb.core.view.filter.RangedFilter.prototype.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},fb.core.view.filter.RangedFilter.prototype.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},goog.provide("fb.core.view.filter.NodeFilter"),goog.require("fb.core.view.ChildChangeAccumulator"),goog.require("fb.core.view.CompleteChildSource"),fb.core.view.filter.NodeFilter=function(){},fb.core.view.filter.NodeFilter.prototype.updateChild=function(e,t,n,r,o){},fb.core.view.filter.NodeFilter.prototype.updateFullNode=function(e,t,n){},fb.core.view.filter.NodeFilter.prototype.updatePriority=function(e,t){},fb.core.view.filter.NodeFilter.prototype.filtersNodes=function(){},fb.core.view.filter.NodeFilter.prototype.getIndexedFilter=function(){},fb.core.view.filter.NodeFilter.prototype.getIndex=function(){},goog.provide("fb.core.view.filter.LimitedFilter"),goog.require("fb.core.snap.NamedNode"),goog.require("fb.core.view.filter.RangedFilter"),goog.require("fb.core.util"),fb.core.view.filter.LimitedFilter=function(e){this.rangedFilter_=new fb.core.view.filter.RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()},fb.core.view.filter.LimitedFilter.prototype.updateChild=function(e,t,n,r,o){return this.rangedFilter_.matches(new fb.core.snap.NamedNode(t,n))||(n=fb.core.snap.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,o):this.fullLimitUpdateChild_(e,t,n,r,o)},fb.core.view.filter.LimitedFilter.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=fb.core.snap.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=fb.core.snap.EMPTY_NODE.withIndex(this.index_);var o;t=t,o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var i=0;o.hasNext()&&i<this.limit_;){var a,s=o.getNext();if(a=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0,!a)break;r=r.updateImmediateChild(s.name,s.node),i++}}else{r=t.withIndex(this.index_),r=r.updatePriority(fb.core.snap.EMPTY_NODE);var u,l,c;if(this.reverse_){o=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else o=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();i=0;for(var h=!1;o.hasNext();)s=o.getNext(),!h&&c(u,s)<=0&&(h=!0),a=h&&i<this.limit_&&c(s,l)<=0,a?i++:r=r.updateImmediateChild(s.name,fb.core.snap.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},fb.core.view.filter.LimitedFilter.prototype.updatePriority=function(e,t){return e},fb.core.view.filter.LimitedFilter.prototype.filtersNodes=function(){return!0},fb.core.view.filter.LimitedFilter.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},fb.core.view.filter.LimitedFilter.prototype.getIndex=function(){return this.index_},fb.core.view.filter.LimitedFilter.prototype.fullLimitUpdateChild_=function(e,t,n,r,o){var i,a=fb.core.view.Change;if(this.reverse_){var s=this.index_.getCompare();i=function(e,t){return s(t,e)}}else i=this.index_.getCompare();var u=e;fb.core.util.assert(u.numChildren()==this.limit_,"");var l=new fb.core.snap.NamedNode(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),f=this.rangedFilter_.matches(l);if(u.hasChild(t)){var h=u.getImmediateChild(t),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&p.name==t&&(p=r.getChildAfterChild(this.index_,p,this.reverse_));var d=null==p?1:i(p,l),g=f&&!n.isEmpty()&&d>=0;if(g)return null!=o&&o.trackChildChange(a.childChangedChange(t,n,h)),u.updateImmediateChild(t,n);null!=o&&o.trackChildChange(a.childRemovedChange(t,h));var v=u.updateImmediateChild(t,fb.core.snap.EMPTY_NODE),m=null!=p&&this.rangedFilter_.matches(p);return m?(null!=o&&o.trackChildChange(a.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?e:f&&i(c,l)>=0?(null!=o&&(o.trackChildChange(a.childRemovedChange(c.name,c.node)),o.trackChildChange(a.childAddedChange(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,fb.core.snap.EMPTY_NODE)):e},goog.provide("fb.core.view.ViewProcessor"),goog.require("fb.core.view.CompleteChildSource"),goog.require("fb.core.util"),fb.core.view.ProcessorResult=function(e,t){this.viewCache=e,this.changes=t},fb.core.view.ViewProcessor=function(e){this.filter_=e},fb.core.view.ViewProcessor.prototype.assertIndexed=function(e){fb.core.util.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),fb.core.util.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},fb.core.view.ViewProcessor.prototype.applyOperation=function(e,t,n,r){var o,i,a=new fb.core.view.ChildChangeAccumulator;if(t.type===fb.core.OperationType.OVERWRITE){var s=t;s.source.fromUser?o=this.applyUserOverwrite_(e,s.path,s.snap,n,r,a):(fb.core.util.assert(s.source.fromServer,"Unknown source."),i=s.source.tagged,o=this.applyServerOverwrite_(e,s.path,s.snap,n,r,i,a))}else if(t.type===fb.core.OperationType.MERGE){var u=t;u.source.fromUser?o=this.applyUserMerge_(e,u.path,u.children,n,r,a):(fb.core.util.assert(u.source.fromServer,"Unknown source."),i=u.source.tagged,o=this.applyServerMerge_(e,u.path,u.children,n,r,i,a))}else if(t.type===fb.core.OperationType.ACK_USER_WRITE){var l=t;o=l.revert?this.revertUserWrite_(e,l.path,n,r,a):this.ackUserWrite_(e,l.path,n,r,a)}else{if(t.type!==fb.core.OperationType.LISTEN_COMPLETE)throw fb.core.util.assertionError("Unknown operation type: "+t.type);o=this.listenComplete_(e,t.path,n,r,a)}var c=a.getChanges();return this.maybeAddValueEvent_(e,o,c),new fb.core.view.ProcessorResult(o,c)},fb.core.view.ViewProcessor.prototype.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||o&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(fb.core.view.Change.valueChange(t.getCompleteEventSnap()))}},fb.core.view.ViewProcessor.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var i=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a,s;if(t.isEmpty())if(fb.core.util.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=u instanceof fb.core.snap.ChildrenNode?u:fb.core.snap.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(e.getEventCache().getNode(),c,o)}else{var f=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),f,o)}else{var h=t.getFront();if(".priority"==h){fb.core.util.assert(1==t.getLength(),"Can't have a priority with additional path components");var p=i.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,s);a=null!=d?this.filter_.updatePriority(p,d):i.getNode()}else{var g,v=t.popFront();if(i.isCompleteForChild(h)){s=e.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(t,i.getNode(),s);g=null!=m?i.getNode().getImmediateChild(h).updateChild(v,m):i.getNode().getImmediateChild(h)}else g=n.calcCompleteChild(h,e.getServerCache());a=null!=g?this.filter_.updateChild(i.getNode(),h,g,r,o):i.getNode()}}return e.updateEventSnap(a,i.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},fb.core.view.ViewProcessor.prototype.applyServerOverwrite_=function(e,t,n,r,o,i,a){var s,u=e.getServerCache(),l=i?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);s=l.updateFullNode(u.getNode(),c,null)}else{var f=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var h=u.getNode().getImmediateChild(f),p=h.updateChild(t.popFront(),n);s=".priority"==f?l.updatePriority(u.getNode(),p):l.updateChild(u.getNode(),f,p,fb.core.view.NO_COMPLETE_CHILD_SOURCE,null)}var d=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),g=new fb.core.view.WriteTreeCompleteChildSource(r,d,o);return this.generateEventCacheAfterServerEvent_(d,t,r,g,a)},fb.core.view.ViewProcessor.prototype.applyUserOverwrite_=function(e,t,n,r,o,i){var a,s,u=e.getEventCache(),l=new fb.core.view.WriteTreeCompleteChildSource(r,e,o);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,i),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=t.getFront();if(".priority"===c)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var f,h=t.popFront(),p=u.getNode().getImmediateChild(c);if(h.isEmpty())f=n;else{var d=l.getCompleteChild(c);f=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):fb.core.snap.EMPTY_NODE}if(p.equals(f))a=e;else{var g=this.filter_.updateChild(u.getNode(),c,f,l,i);a=e.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},fb.core.view.ViewProcessor.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},fb.core.view.ViewProcessor.prototype.applyUserMerge_=function(e,t,n,r,o,i){var a=this,s=e;return n.foreach(function(n,u){var l=t.child(n);fb.core.view.ViewProcessor.cacheHasChild_(e,l.getFront())&&(s=a.applyUserOverwrite_(s,l,u,r,o,i))}),n.foreach(function(n,u){var l=t.child(n);fb.core.view.ViewProcessor.cacheHasChild_(e,l.getFront())||(s=a.applyUserOverwrite_(s,l,u,r,o,i))}),s},fb.core.view.ViewProcessor.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},fb.core.view.ViewProcessor.prototype.applyServerMerge_=function(e,t,n,r,o,i,a){if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var s,u=e;s=t.isEmpty()?n:fb.core.util.ImmutableTree.Empty.setTree(t,n);var l=e.getServerCache().getNode(),c=this;return s.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var s=e.getServerCache().getNode().getImmediateChild(t),f=c.applyMerge_(s,n);u=c.applyServerOverwrite_(u,new fb.core.util.Path(t),f,r,o,i,a)}}),s.children.inorderTraversal(function(t,n){var s=!e.getServerCache().isFullyInitialized()&&null==n.value;if(!l.hasChild(t)&&!s){var f=e.getServerCache().getNode().getImmediateChild(t),h=c.applyMerge_(f,n);u=c.applyServerOverwrite_(u,new fb.core.util.Path(t),h,r,o,i,a)}}),u},fb.core.view.ViewProcessor.prototype.ackUserWrite_=function(e,t,n,r,o){if(null!=n.shadowingWrite(t))return e;var i,a=new fb.core.view.WriteTreeCompleteChildSource(n,e,r),s=e.getEventCache().getNode(),u=s;if(e.getServerCache().isFullyInitialized()){if(t.isEmpty()){var l=n.calcCompleteEventCache(e.getCompleteServerSnap());u=this.filter_.updateFullNode(e.getEventCache().getNode(),l,o)}else if(".priority"===t.getFront()){var c=n.calcCompleteChild(t.getFront(),e.getServerCache());null==c||s.isEmpty()||s.getPriority().equals(c)||(u=this.filter_.updatePriority(s,c))}else{var f=t.getFront(),h=n.calcCompleteChild(f,e.getServerCache());null!=h&&(u=this.filter_.updateChild(e.getEventCache().getNode(),f,h,a,o))}i=!0}else if(e.getEventCache().isFullyInitialized()||t.isEmpty()){u=s;var p=e.getEventCache().getNode();if(!p.isLeafNode()){var d=this;p=p,p.forEachChild(fb.core.snap.PriorityIndex,function(t,r){var i=n.calcCompleteChild(t,e.getServerCache());null!=i&&(u=d.filter_.updateChild(u,t,i,a,o))})}i=e.getEventCache().isFullyInitialized()}else{var f=t.getFront();if(1==t.getLength()||e.getEventCache().isCompleteForChild(f)){var g=n.calcCompleteChild(f,e.getServerCache());null!=g&&(u=this.filter_.updateChild(s,f,g,a,o))}i=!1}return e.updateEventSnap(u,i,this.filter_.filtersNodes())},fb.core.view.ViewProcessor.prototype.revertUserWrite_=function(e,t,n,r,o){var i;if(null!=n.shadowingWrite(t))return e;var a,s=new fb.core.view.WriteTreeCompleteChildSource(n,e,r),u=e.getEventCache().getNode();if(t.isEmpty()||".priority"===t.getFront()){var l;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();fb.core.util.assert(c instanceof fb.core.snap.ChildrenNode,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,a=this.filter_.updateFullNode(u,l,o)}else{var f=t.getFront(),h=n.calcCompleteChild(f,e.getServerCache());null==h&&e.getServerCache().isCompleteForChild(f)&&(h=u.getImmediateChild(f)),a=null!=h?this.filter_.updateChild(u,f,h,s,o):e.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,fb.core.snap.EMPTY_NODE,s,o):u,a.isEmpty()&&e.getServerCache().isFullyInitialized()&&(i=n.calcCompleteEventCache(e.getCompleteServerSnap()),i.isLeafNode()&&(a=this.filter_.updateFullNode(a,i,o)))}return i=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(fb.core.util.Path.Empty),e.updateEventSnap(a,i,this.filter_.filtersNodes())},fb.core.view.ViewProcessor.prototype.listenComplete_=function(e,t,n,r,o){var i=e.getServerCache(),a=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(a,t,n,fb.core.view.NO_COMPLETE_CHILD_SOURCE,o)},goog.provide("fb.core.snap.Index"),goog.provide("fb.core.snap.PriorityIndex"),goog.provide("fb.core.snap.SubKeyIndex"),goog.require("fb.core.snap.comparators"),goog.require("fb.core.util"),fb.core.snap.Index=function(){},fb.core.snap.Index.FallbackType,fb.core.snap.Index.Fallback={},fb.core.snap.Index.prototype.compare=goog.abstractMethod,fb.core.snap.Index.prototype.isDefinedOn=goog.abstractMethod,fb.core.snap.Index.prototype.getCompare=function(){return goog.bind(this.compare,this)},fb.core.snap.Index.prototype.indexedValueChanged=function(e,t){var n=new fb.core.snap.NamedNode(fb.core.util.MIN_NAME,e),r=new fb.core.snap.NamedNode(fb.core.util.MIN_NAME,t);return 0!==this.compare(n,r)},fb.core.snap.Index.prototype.minPost=function(){return fb.core.snap.NamedNode.MIN},fb.core.snap.Index.prototype.maxPost=goog.abstractMethod,fb.core.snap.Index.prototype.makePost=goog.abstractMethod,fb.core.snap.Index.prototype.toString=goog.abstractMethod,fb.core.snap.SubKeyIndex=function(e){fb.core.snap.Index.call(this),this.indexKey_=e},goog.inherits(fb.core.snap.SubKeyIndex,fb.core.snap.Index),fb.core.snap.SubKeyIndex.prototype.extractChild=function(e){return e.getImmediateChild(this.indexKey_)},fb.core.snap.SubKeyIndex.prototype.isDefinedOn=function(e){return!e.getImmediateChild(this.indexKey_).isEmpty()},fb.core.snap.SubKeyIndex.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r);return 0===o?fb.core.util.nameCompare(e.name,t.name):o},fb.core.snap.SubKeyIndex.prototype.makePost=function(e,t){var n=fb.core.snap.NodeFromJSON(e),r=fb.core.snap.EMPTY_NODE.updateImmediateChild(this.indexKey_,n);return new fb.core.snap.NamedNode(t,r)},fb.core.snap.SubKeyIndex.prototype.maxPost=function(){var e=fb.core.snap.EMPTY_NODE.updateImmediateChild(this.indexKey_,fb.core.snap.MAX_NODE);return new fb.core.snap.NamedNode(fb.core.util.MAX_NAME,e)},fb.core.snap.SubKeyIndex.prototype.toString=function(){return this.indexKey_},fb.core.snap.PriorityIndex_=function(){fb.core.snap.Index.call(this)},goog.inherits(fb.core.snap.PriorityIndex_,fb.core.snap.Index),fb.core.snap.PriorityIndex_.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),o=n.compareTo(r);return 0===o?fb.core.util.nameCompare(e.name,t.name):o},fb.core.snap.PriorityIndex_.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},fb.core.snap.PriorityIndex_.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},fb.core.snap.PriorityIndex_.prototype.minPost=function(){return fb.core.snap.NamedNode.MIN},fb.core.snap.PriorityIndex_.prototype.maxPost=function(){return new fb.core.snap.NamedNode(fb.core.util.MAX_NAME,new fb.core.snap.LeafNode("[PRIORITY-POST]",fb.core.snap.MAX_NODE))},fb.core.snap.PriorityIndex_.prototype.makePost=function(e,t){var n=fb.core.snap.NodeFromJSON(e);return new fb.core.snap.NamedNode(t,new fb.core.snap.LeafNode("[PRIORITY-POST]",n))},fb.core.snap.PriorityIndex_.prototype.toString=function(){return".priority"},fb.core.snap.PriorityIndex=new fb.core.snap.PriorityIndex_,fb.core.snap.KeyIndex_=function(){fb.core.snap.Index.call(this)},goog.inherits(fb.core.snap.KeyIndex_,fb.core.snap.Index),fb.core.snap.KeyIndex_.prototype.compare=function(e,t){return fb.core.util.nameCompare(e.name,t.name)},fb.core.snap.KeyIndex_.prototype.isDefinedOn=function(e){throw fb.core.util.assertionError("KeyIndex.isDefinedOn not expected to be called.")},fb.core.snap.KeyIndex_.prototype.indexedValueChanged=function(e,t){return!1},fb.core.snap.KeyIndex_.prototype.minPost=function(){return fb.core.snap.NamedNode.MIN},fb.core.snap.KeyIndex_.prototype.maxPost=function(){return new fb.core.snap.NamedNode(fb.core.util.MAX_NAME,fb.core.snap.EMPTY_NODE)},fb.core.snap.KeyIndex_.prototype.makePost=function(e,t){return fb.core.util.assert(goog.isString(e),"KeyIndex indexValue must always be a string."),new fb.core.snap.NamedNode(e,fb.core.snap.EMPTY_NODE)},fb.core.snap.KeyIndex_.prototype.toString=function(){return".key"},fb.core.snap.KeyIndex=new fb.core.snap.KeyIndex_,fb.core.snap.ValueIndex_=function(){fb.core.snap.Index.call(this)},goog.inherits(fb.core.snap.ValueIndex_,fb.core.snap.Index),fb.core.snap.ValueIndex_.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?fb.core.util.nameCompare(e.name,t.name):n},fb.core.snap.ValueIndex_.prototype.isDefinedOn=function(e){return!0},fb.core.snap.ValueIndex_.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},fb.core.snap.ValueIndex_.prototype.minPost=function(){return fb.core.snap.NamedNode.MIN},fb.core.snap.ValueIndex_.prototype.maxPost=function(){return fb.core.snap.NamedNode.MAX},fb.core.snap.ValueIndex_.prototype.makePost=function(e,t){var n=fb.core.snap.NodeFromJSON(e);return new fb.core.snap.NamedNode(t,n)},fb.core.snap.ValueIndex_.prototype.toString=function(){return".value"},fb.core.snap.ValueIndex=new fb.core.snap.ValueIndex_,goog.provide("fb.core.view.QueryParams"),goog.require("fb.core.snap.Index"),goog.require("fb.core.snap.PriorityIndex"),goog.require("fb.core.util"),
goog.require("fb.core.view.filter.IndexedFilter"),goog.require("fb.core.view.filter.LimitedFilter"),goog.require("fb.core.view.filter.NodeFilter"),goog.require("fb.core.view.filter.RangedFilter"),fb.core.view.QueryParams=function(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fb.core.snap.PriorityIndex},fb.core.view.QueryParams.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},fb.core.view.QueryParams.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},fb.core.view.QueryParams.DEFAULT=new fb.core.view.QueryParams,fb.core.view.QueryParams.prototype.hasStart=function(){return this.startSet_},fb.core.view.QueryParams.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===fb.core.view.QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},fb.core.view.QueryParams.prototype.getIndexStartValue=function(){return fb.core.util.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},fb.core.view.QueryParams.prototype.getIndexStartName=function(){return fb.core.util.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fb.core.util.MIN_NAME},fb.core.view.QueryParams.prototype.hasEnd=function(){return this.endSet_},fb.core.view.QueryParams.prototype.getIndexEndValue=function(){return fb.core.util.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},fb.core.view.QueryParams.prototype.getIndexEndName=function(){return fb.core.util.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fb.core.util.MAX_NAME},fb.core.view.QueryParams.prototype.hasLimit=function(){return this.limitSet_},fb.core.view.QueryParams.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},fb.core.view.QueryParams.prototype.getLimit=function(){return fb.core.util.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},fb.core.view.QueryParams.prototype.getIndex=function(){return this.index_},fb.core.view.QueryParams.prototype.copy_=function(){var e=new fb.core.view.QueryParams;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e},fb.core.view.QueryParams.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},fb.core.view.QueryParams.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=fb.core.view.QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},fb.core.view.QueryParams.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=fb.core.view.QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},fb.core.view.QueryParams.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,goog.isDef(e)||(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},fb.core.view.QueryParams.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,goog.isDef(e)||(e=null),n.indexEndValue_=e,goog.isDef(t)?(n.endNameSet_=!0,n.indexEndName_=t):(n.startEndSet_=!1,n.indexEndName_=""),n},fb.core.view.QueryParams.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},fb.core.view.QueryParams.prototype.getQueryObject=function(){var e=fb.core.view.QueryParams.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==fb.core.snap.PriorityIndex&&(t[e.INDEX]=this.index_.toString()),t},fb.core.view.QueryParams.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},fb.core.view.QueryParams.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==fb.core.snap.PriorityIndex},fb.core.view.QueryParams.prototype.getNodeFilter=function(){return this.loadsAllData()?new fb.core.view.filter.IndexedFilter(this.getIndex()):this.hasLimit()?new fb.core.view.filter.LimitedFilter(this):new fb.core.view.filter.RangedFilter(this)},fb.core.view.QueryParams.prototype.toRestQueryStringParameters=function(){var e=fb.core.view.QueryParams.REST_QUERY_CONSTANTS_,t={};if(this.isDefault())return t;var n;return this.index_===fb.core.snap.PriorityIndex?n=e.PRIORITY_INDEX:this.index_===fb.core.snap.ValueIndex?n=e.VALUE_INDEX:this.index_===fb.core.snap.KeyIndex?n=e.KEY_INDEX:(fb.core.util.assert(this.index_ instanceof fb.core.snap.SubKeyIndex,"Unrecognized index type!"),n=this.index_.toString()),t[e.ORDER_BY]=fb.util.json.stringify(n),this.startSet_&&(t[e.START_AT]=fb.util.json.stringify(this.indexStartValue_),this.startNameSet_&&(t[e.START_AT]+=","+fb.util.json.stringify(this.indexStartName_))),this.endSet_&&(t[e.END_AT]=fb.util.json.stringify(this.indexEndValue_),this.endNameSet_&&(t[e.END_AT]+=","+fb.util.json.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?t[e.LIMIT_TO_FIRST]=this.limit_:t[e.LIMIT_TO_LAST]=this.limit_),t},goog.DEBUG&&(fb.core.view.QueryParams.prototype.toString=function(){return fb.util.json.stringify(this.getQueryObject())}),goog.provide("fb.core.snap.IndexMap"),goog.require("fb.core.snap.Index"),goog.require("fb.core.util"),fb.core.snap.IndexMap=function(e,t){this.indexes_=e,this.indexSet_=t},fb.core.snap.IndexMap.prototype.get=function(e){var t=fb.util.obj.get(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===fb.core.snap.Index.Fallback?null:t},fb.core.snap.IndexMap.prototype.hasIndex=function(e){return goog.object.contains(this.indexSet_,e.toString())},fb.core.snap.IndexMap.prototype.addIndex=function(e,t){fb.core.util.assert(e!==fb.core.snap.KeyIndex,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,o=t.getIterator(fb.core.snap.NamedNode.Wrap),i=o.getNext();i;)r=r||e.isDefinedOn(i.node),n.push(i),i=o.getNext();var a;a=r?fb.core.snap.buildChildSet(n,e.getCompare()):fb.core.snap.Index.Fallback;var s=e.toString(),u=goog.object.clone(this.indexSet_);u[s]=e;var l=goog.object.clone(this.indexes_);return l[s]=a,new fb.core.snap.IndexMap(l,u)},fb.core.snap.IndexMap.prototype.addToIndexes=function(e,t){var n=this,r=goog.object.map(this.indexes_,function(r,o){var i=fb.util.obj.get(n.indexSet_,o);if(fb.core.util.assert(i,"Missing index implementation for "+o),r===fb.core.snap.Index.Fallback){if(i.isDefinedOn(e.node)){for(var a=[],s=t.getIterator(fb.core.snap.NamedNode.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),fb.core.snap.buildChildSet(a,i.getCompare())}return fb.core.snap.Index.Fallback}var l=t.get(e.name),c=r;return l&&(c=c.remove(new fb.core.snap.NamedNode(e.name,l))),c.insert(e,e.node)});return new fb.core.snap.IndexMap(r,this.indexSet_)},fb.core.snap.IndexMap.prototype.removeFromIndexes=function(e,t){var n=goog.object.map(this.indexes_,function(n){if(n===fb.core.snap.Index.Fallback)return n;var r=t.get(e.name);return r?n.remove(new fb.core.snap.NamedNode(e.name,r)):n});return new fb.core.snap.IndexMap(n,this.indexSet_)},fb.core.snap.IndexMap.Default=new fb.core.snap.IndexMap({".priority":fb.core.snap.Index.Fallback},{".priority":fb.core.snap.PriorityIndex}),goog.provide("fb.core.snap.LeafNode"),goog.require("fb.core.snap.Node"),goog.require("fb.core.util"),fb.core.snap.LeafNode=function(e,t){this.value_=e,fb.core.util.assert(goog.isDef(this.value_)&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),this.priorityNode_=t||fb.core.snap.EMPTY_NODE,fb.core.snap.validatePriorityNode(this.priorityNode_),this.lazyHash_=null},fb.core.snap.LeafNode.prototype.isLeafNode=function(){return!0},fb.core.snap.LeafNode.prototype.getPriority=function(){return this.priorityNode_},fb.core.snap.LeafNode.prototype.updatePriority=function(e){return new fb.core.snap.LeafNode(this.value_,e)},fb.core.snap.LeafNode.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:fb.core.snap.EMPTY_NODE},fb.core.snap.LeafNode.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:fb.core.snap.EMPTY_NODE},fb.core.snap.LeafNode.prototype.hasChild=function(){return!1},fb.core.snap.LeafNode.prototype.getPredecessorChildName=function(e,t){return null},fb.core.snap.LeafNode.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:fb.core.snap.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},fb.core.snap.LeafNode.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(fb.core.util.assert(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,fb.core.snap.EMPTY_NODE.updateChild(e.popFront(),t)))},fb.core.snap.LeafNode.prototype.isEmpty=function(){return!1},fb.core.snap.LeafNode.prototype.numChildren=function(){return 0},fb.core.snap.LeafNode.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},fb.core.snap.LeafNode.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fb.core.snap.priorityHashText(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?fb.core.util.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=fb.core.util.sha1(e)}return this.lazyHash_},fb.core.snap.LeafNode.prototype.getValue=function(){return this.value_},fb.core.snap.LeafNode.prototype.compareTo=function(e){return e===fb.core.snap.EMPTY_NODE?1:e instanceof fb.core.snap.ChildrenNode?-1:(fb.core.util.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},fb.core.snap.LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"],fb.core.snap.LeafNode.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=goog.array.indexOf(fb.core.snap.LeafNode.VALUE_TYPE_ORDER,t),o=goog.array.indexOf(fb.core.snap.LeafNode.VALUE_TYPE_ORDER,n);return fb.core.util.assert(r>=0,"Unknown leaf type: "+t),fb.core.util.assert(o>=0,"Unknown leaf type: "+n),r===o?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r},fb.core.snap.LeafNode.prototype.withIndex=function(){return this},fb.core.snap.LeafNode.prototype.isIndexed=function(){return!0},fb.core.snap.LeafNode.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},goog.DEBUG&&(fb.core.snap.LeafNode.prototype.toString=function(){return fb.util.json.stringify(this.val(!0))}),goog.provide("fb.core.snap.ChildrenNode"),goog.require("fb.core.snap.IndexMap"),goog.require("fb.core.snap.LeafNode"),goog.require("fb.core.snap.NamedNode"),goog.require("fb.core.snap.Node"),goog.require("fb.core.snap.PriorityIndex"),goog.require("fb.core.snap.comparators"),goog.require("fb.core.util"),goog.require("fb.core.util.SortedMap"),fb.core.snap.ChildrenNode=function(e,t,n){this.children_=e,this.priorityNode_=t,this.priorityNode_&&fb.core.snap.validatePriorityNode(this.priorityNode_),e.isEmpty()&&fb.core.util.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority"),this.indexMap_=n,this.lazyHash_=null},fb.core.snap.ChildrenNode.prototype.isLeafNode=function(){return!1},fb.core.snap.ChildrenNode.prototype.getPriority=function(){return this.priorityNode_||fb.core.snap.EMPTY_NODE},fb.core.snap.ChildrenNode.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new fb.core.snap.ChildrenNode(this.children_,e,this.indexMap_)},fb.core.snap.ChildrenNode.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?fb.core.snap.EMPTY_NODE:t},fb.core.snap.ChildrenNode.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},fb.core.snap.ChildrenNode.prototype.hasChild=function(e){return null!==this.children_.get(e)},fb.core.snap.ChildrenNode.prototype.updateImmediateChild=function(e,t){if(fb.core.util.assert(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n,r,o,i=new fb.core.snap.NamedNode(e,t);return t.isEmpty()?(n=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(n=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(i,this.children_)),o=n.isEmpty()?fb.core.snap.EMPTY_NODE:this.priorityNode_,new fb.core.snap.ChildrenNode(n,o,r)},fb.core.snap.ChildrenNode.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;fb.core.util.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},fb.core.snap.ChildrenNode.prototype.isEmpty=function(){return this.children_.isEmpty()},fb.core.snap.ChildrenNode.prototype.numChildren=function(){return this.children_.count()},fb.core.snap.ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,fb.core.snap.ChildrenNode.prototype.val=function(e){if(this.isEmpty())return null;var t={},n=0,r=0,o=!0;if(this.forEachChild(fb.core.snap.PriorityIndex,function(i,a){t[i]=a.val(e),n++,o&&fb.core.snap.ChildrenNode.INTEGER_REGEXP_.test(i)?r=Math.max(r,Number(i)):o=!1}),!e&&o&&2*n>r){var i=[];for(var a in t)i[a]=t[a];return i}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},fb.core.snap.ChildrenNode.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+fb.core.snap.priorityHashText(this.getPriority().val())+":"),this.forEachChild(fb.core.snap.PriorityIndex,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":fb.core.util.sha1(e)}return this.lazyHash_},fb.core.snap.ChildrenNode.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new fb.core.snap.NamedNode(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},fb.core.snap.ChildrenNode.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},fb.core.snap.ChildrenNode.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new fb.core.snap.NamedNode(t,this.children_.get(t)):null},fb.core.snap.ChildrenNode.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},fb.core.snap.ChildrenNode.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new fb.core.snap.NamedNode(t,this.children_.get(t)):null},fb.core.snap.ChildrenNode.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},fb.core.snap.ChildrenNode.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},fb.core.snap.ChildrenNode.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,fb.core.snap.NamedNode.Wrap),o=r.peek();null!=o&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r},fb.core.snap.ChildrenNode.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},fb.core.snap.ChildrenNode.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,fb.core.snap.NamedNode.Wrap),o=r.peek();null!=o&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r},fb.core.snap.ChildrenNode.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fb.core.snap.MAX_NODE?-1:0},fb.core.snap.ChildrenNode.prototype.withIndex=function(e){if(e===fb.core.snap.KeyIndex||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new fb.core.snap.ChildrenNode(this.children_,this.priorityNode_,t)},fb.core.snap.ChildrenNode.prototype.isIndexed=function(e){return e===fb.core.snap.KeyIndex||this.indexMap_.hasIndex(e)},fb.core.snap.ChildrenNode.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(fb.core.snap.PriorityIndex),r=t.getIterator(fb.core.snap.PriorityIndex),o=n.getNext(),i=r.getNext();o&&i;){if(o.name!==i.name||!o.node.equals(i.node))return!1;o=n.getNext(),i=r.getNext()}return null===o&&null===i}return!1}return!1},fb.core.snap.ChildrenNode.prototype.resolveIndex_=function(e){return e===fb.core.snap.KeyIndex?null:this.indexMap_.get(e.toString())},goog.DEBUG&&(fb.core.snap.ChildrenNode.prototype.toString=function(){return fb.util.json.stringify(this.val(!0))}),goog.provide("fb.core.snap"),goog.require("fb.core.snap.ChildrenNode"),goog.require("fb.core.snap.IndexMap"),goog.require("fb.core.snap.LeafNode"),goog.require("fb.core.util");var USE_HINZE=!0;fb.core.snap.NodeFromJSON=function(e,t){if(null===e)return fb.core.snap.EMPTY_NODE;var n=null;if("object"==typeof e&&".priority"in e?n=e[".priority"]:"undefined"!=typeof t&&(n=t),fb.core.util.assert(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){var r=e;return new fb.core.snap.LeafNode(r,fb.core.snap.NodeFromJSON(n))}if(e instanceof Array||!USE_HINZE){var o=fb.core.snap.EMPTY_NODE,i=e;return goog.object.forEach(i,function(e,t){if(fb.util.obj.contains(i,t)&&"."!==t.substring(0,1)){var n=fb.core.snap.NodeFromJSON(e);(n.isLeafNode()||!n.isEmpty())&&(o=o.updateImmediateChild(t,n))}}),o.updatePriority(fb.core.snap.NodeFromJSON(n))}var a=[],s=!1,u=e;if(fb.util.obj.foreach(u,function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=fb.core.snap.NodeFromJSON(u[e]);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),a.push(new fb.core.snap.NamedNode(e,n)))}}),0==a.length)return fb.core.snap.EMPTY_NODE;var l=fb.core.snap.buildChildSet(a,fb.core.snap.NAME_ONLY_COMPARATOR,function(e){return e.name},fb.core.snap.NAME_COMPARATOR);if(s){var c=fb.core.snap.buildChildSet(a,fb.core.snap.PriorityIndex.getCompare());return new fb.core.snap.ChildrenNode(l,fb.core.snap.NodeFromJSON(n),new fb.core.snap.IndexMap({".priority":c},{".priority":fb.core.snap.PriorityIndex}))}return new fb.core.snap.ChildrenNode(l,fb.core.snap.NodeFromJSON(n),fb.core.snap.IndexMap.Default)};var LOG_2=Math.log(2);fb.core.snap.Base12Num=function(e){var t=function(e){return parseInt(Math.log(e)/LOG_2,10)},n=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=t(e+1),this.current_=this.count-1;var r=n(this.count);this.bits_=e+1&r},fb.core.snap.Base12Num.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},fb.core.snap.buildChildSet=function(e,t,n,r){e.sort(t);var o=function(t,r){var i=r-t;if(0==i)return null;if(1==i){var a=e[t],s=n?n(a):a;return new fb.LLRBNode(s,a.node,fb.LLRBNode.BLACK,null,null)}var u=parseInt(i/2,10)+t,l=o(t,u),c=o(u+1,r);return a=e[u],s=n?n(a):a,new fb.LLRBNode(s,a.node,fb.LLRBNode.BLACK,l,c)},i=function(t){for(var r=null,i=null,a=e.length,s=function(t,r){var i=a-t,s=a;a-=t;var l=o(i+1,s),c=e[i],f=n?n(c):c;u(new fb.LLRBNode(f,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(i=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),f=Math.pow(2,t.count-(l+1));c?s(f,fb.LLRBNode.BLACK):(s(f,fb.LLRBNode.BLACK),s(f,fb.LLRBNode.RED))}return i},a=new fb.core.snap.Base12Num(e.length),s=i(a);return null!==s?new fb.core.util.SortedMap(r||t,s):new fb.core.util.SortedMap(r||t)},fb.core.snap.priorityHashText=function(e){return"number"==typeof e?"number:"+fb.core.util.doubleToIEEE754String(e):"string:"+e},fb.core.snap.validatePriorityNode=function(e){if(e.isLeafNode()){var t=e.val();fb.core.util.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&fb.util.obj.contains(t,".sv"),"Priority must be a string or number.")}else fb.core.util.assert(e===fb.core.snap.MAX_NODE||e.isEmpty(),"priority of unexpected type.");fb.core.util.assert(e===fb.core.snap.MAX_NODE||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},fb.core.snap.EMPTY_NODE=new fb.core.snap.ChildrenNode(new fb.core.util.SortedMap(fb.core.snap.NAME_COMPARATOR),null,fb.core.snap.IndexMap.Default),fb.core.snap.MAX_NODE_=function(){fb.core.snap.ChildrenNode.call(this,new fb.core.util.SortedMap(fb.core.snap.NAME_COMPARATOR),fb.core.snap.EMPTY_NODE,fb.core.snap.IndexMap.Default)},goog.inherits(fb.core.snap.MAX_NODE_,fb.core.snap.ChildrenNode),fb.core.snap.MAX_NODE_.prototype.compareTo=function(e){return e===this?0:1},fb.core.snap.MAX_NODE_.prototype.equals=function(e){return e===this},fb.core.snap.MAX_NODE_.prototype.getPriority=function(){return this},fb.core.snap.MAX_NODE_.prototype.getImmediateChild=function(e){return fb.core.snap.EMPTY_NODE},fb.core.snap.MAX_NODE_.prototype.isEmpty=function(){return!1},fb.core.snap.MAX_NODE=new fb.core.snap.MAX_NODE_,fb.core.snap.NamedNode.MIN=new fb.core.snap.NamedNode(fb.core.util.MIN_NAME,fb.core.snap.EMPTY_NODE),fb.core.snap.NamedNode.MAX=new fb.core.snap.NamedNode(fb.core.util.MAX_NAME,fb.core.snap.MAX_NODE),goog.provide("fb.core.view.ViewCache"),goog.require("fb.core.view.CacheNode"),goog.require("fb.core.snap"),fb.core.view.ViewCache=function(e,t){this.eventCache_=e,this.serverCache_=t},fb.core.view.ViewCache.Empty=new fb.core.view.ViewCache(new fb.core.view.CacheNode(fb.core.snap.EMPTY_NODE,!1,!1),new fb.core.view.CacheNode(fb.core.snap.EMPTY_NODE,!1,!1)),fb.core.view.ViewCache.prototype.updateEventSnap=function(e,t,n){return new fb.core.view.ViewCache(new fb.core.view.CacheNode(e,t,n),this.serverCache_)},fb.core.view.ViewCache.prototype.updateServerSnap=function(e,t,n){return new fb.core.view.ViewCache(this.eventCache_,new fb.core.view.CacheNode(e,t,n))},fb.core.view.ViewCache.prototype.getEventCache=function(){return this.eventCache_},fb.core.view.ViewCache.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},fb.core.view.ViewCache.prototype.getServerCache=function(){return this.serverCache_},fb.core.view.ViewCache.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},goog.provide("fb.core.view.View"),goog.require("fb.core.view.EventGenerator"),goog.require("fb.core.view.ViewCache"),goog.require("fb.core.view.ViewProcessor"),goog.require("fb.core.util"),fb.core.view.View=function(e,t){this.query_=e;var n=e.getQueryParams(),r=new fb.core.view.filter.IndexedFilter(n.getIndex()),o=n.getNodeFilter();this.processor_=new fb.core.view.ViewProcessor(o);var i=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(fb.core.snap.EMPTY_NODE,i.getNode(),null),u=o.updateFullNode(fb.core.snap.EMPTY_NODE,a.getNode(),null),l=new fb.core.view.CacheNode(s,i.isFullyInitialized(),r.filtersNodes()),c=new fb.core.view.CacheNode(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new fb.core.view.ViewCache(c,l),this.eventRegistrations_=[],this.eventGenerator_=new fb.core.view.EventGenerator(e)},fb.core.view.View.prototype.getQuery=function(){return this.query_},fb.core.view.View.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},fb.core.view.View.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},fb.core.view.View.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},fb.core.view.View.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},fb.core.view.View.prototype.removeEventRegistration=function(e,t){var n=[];if(t){fb.core.util.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;goog.array.forEach(this.eventRegistrations_,function(e){t=t;var o=e.createCancelEvent(t,r);o&&n.push(o)})}if(e){for(var o=[],i=0;i<this.eventRegistrations_.length;++i){var a=this.eventRegistrations_[i];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(i+1));break}}else o.push(a)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},fb.core.view.View.prototype.applyOperation=function(e,t,n){e.type===fb.core.OperationType.MERGE&&null!==e.source.queryId&&(fb.core.util.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),fb.core.util.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(o.viewCache),fb.core.util.assert(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},fb.core.view.View.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];if(!t.getNode().isLeafNode()){var r=t.getNode();r.forEachChild(fb.core.snap.PriorityIndex,function(e,t){n.push(fb.core.view.Change.childAddedChange(e,t))})}return t.isFullyInitialized()&&n.push(fb.core.view.Change.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},fb.core.view.View.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},goog.provide("fb.core.operation.Merge"),goog.require("fb.core.util"),fb.core.operation.Merge=function(e,t,n){this.type=fb.core.OperationType.MERGE,this.source=e,this.path=t,this.children=n},fb.core.operation.Merge.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new fb.core.util.Path(e));return t.isEmpty()?null:t.value?new fb.core.operation.Overwrite(this.source,fb.core.util.Path.Empty,t.value):new fb.core.operation.Merge(this.source,fb.core.util.Path.Empty,t)}return fb.core.util.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new fb.core.operation.Merge(this.source,this.path.popFront(),this.children)},goog.DEBUG&&(fb.core.operation.Merge.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}),goog.provide("fb.core.Operation"),goog.require("fb.core.operation.AckUserWrite"),goog.require("fb.core.operation.Merge"),goog.require("fb.core.operation.Overwrite"),goog.require("fb.core.operation.ListenComplete"),goog.require("fb.core.util"),fb.core.OperationType={OVERWRITE:0,MERGE:1,ACK_USER_WRITE:2,LISTEN_COMPLETE:3},fb.core.Operation=function(){},fb.core.Operation.prototype.source,fb.core.Operation.prototype.type,fb.core.Operation.prototype.path,fb.core.Operation.prototype.operationForChild=goog.abstractMethod,fb.core.OperationSource=function(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,fb.core.util.assert(!r||t,"Tagged queries must be from server.")},fb.core.OperationSource.User=new fb.core.OperationSource(!0,!1,null,!1),fb.core.OperationSource.Server=new fb.core.OperationSource(!1,!0,null,!1),fb.core.OperationSource.forServerTaggedQuery=function(e){return new fb.core.OperationSource(!1,!0,e,!0)},goog.DEBUG&&(fb.core.OperationSource.prototype.toString=function(){return this.fromUser?"user":this.tagged?"server(queryID="+this.queryId+")":"server"}),goog.provide("fb.core.ReadonlyRestClient"),goog.require("fb.core.util"),goog.require("fb.util"),goog.require("fb.util.json"),goog.require("fb.util.jwt"),goog.require("fb.util.obj"),fb.core.ReadonlyRestClient=goog.defineClass(null,{constructor:function(e,t){this.log_=fb.core.util.logWrapper("p:rest:"),this.repoInfo_=e,this.onDataUpdate_=t,this.credential_=null,this.listens_={}},listen:function(e,t,n,r){var o=e.path.toString();this.log_("Listen called for "+o+" "+e.queryIdentifier());var i=fb.core.ReadonlyRestClient.getListenId_(e,n),a=new Object;this.listens_[i]=a;var s=e.getQueryParams().toRestQueryStringParameters(),u=this;this.restRequest_(o+".json",s,function(e,t){var s=t;if(404===e&&(s=null,e=null),null===e&&u.onDataUpdate_(o,s,!1,n),fb.util.obj.get(u.listens_,i)===a){var l;l=e?401==e?"permission_denied":"rest_error:"+e:"ok",r(l,null)}})},unlisten:function(e,t){var n=fb.core.ReadonlyRestClient.getListenId_(e,t);delete this.listens_[n]},auth:function(e,t,n){this.credential_=e;var r=fb.util.jwt.decode(e),o=r.data,i=r.claims&&r.claims.exp;t&&t("ok",{auth:o,expires:i})},unauth:function(e){this.credential_=null,e("ok",null)},onDisconnectPut:function(e,t,n){},onDisconnectMerge:function(e,t,n){},onDisconnectCancel:function(e,t){},put:function(e,t,n,r){},merge:function(e,t,n,r){},reportStats:function(e){},restRequest_:function(e,t,n){t=t||{},t.format="export",this.credential_&&(t.auth=this.credential_);var r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?"+fb.util.querystring(t);this.log_("Sending REST request for "+r);var o=new XMLHttpRequest,i=this;o.onreadystatechange=function(){if(n&&4===o.readyState){i.log_("REST Response for "+r+" received. status:",o.status,"response:",o.responseText);var e=null;if(o.status>=200&&o.status<300){try{e=fb.util.json.eval(o.responseText)}catch(t){fb.core.util.warn("Failed to parse JSON response for "+r+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&fb.core.util.warn("Got unsuccessful REST response for "+r+" Status: "+o.status),n(o.status);n=null}},o.open("GET",r,!0),o.send()},statics:{getListenId_:function(e,t){return goog.isDef(t)?"tag$"+t:(fb.core.util.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())}}}),goog.provide("fb.core.util.ImmutableTree"),goog.require("fb.core.util"),goog.require("fb.core.util.Path"),goog.require("fb.core.util.SortedMap"),goog.require("fb.util.json"),goog.require("fb.util.obj"),goog.require("goog.object"),fb.core.util.ImmutableTree=goog.defineClass(null,{constructor:function(e,t){this.value=e,this.children=t||fb.core.util.ImmutableTree.EmptyChildren_},statics:{EmptyChildren_:new fb.core.util.SortedMap(fb.core.util.stringCompare),fromObject:function(e){var t=fb.core.util.ImmutableTree.Empty;return goog.object.forEach(e,function(e,n){t=t.set(new fb.core.util.Path(n),e)}),t}},isEmpty:function(){return null===this.value&&this.children.isEmpty()},findRootMostMatchingPathAndValue:function(e,t){if(null!=this.value&&t(this.value))return{
path:fb.core.util.Path.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(e.popFront(),t);if(null!=o){var i=new fb.core.util.Path(n).child(o.path);return{path:i,value:o.value}}return null}return null},findRootMostValueAndPath:function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},subtree:function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):fb.core.util.ImmutableTree.Empty},set:function(e,t){if(e.isEmpty())return new fb.core.util.ImmutableTree(t,this.children);var n=e.getFront(),r=this.children.get(n)||fb.core.util.ImmutableTree.Empty,o=r.set(e.popFront(),t),i=this.children.insert(n,o);return new fb.core.util.ImmutableTree(this.value,i)},remove:function(e){if(e.isEmpty())return this.children.isEmpty()?fb.core.util.ImmutableTree.Empty:new fb.core.util.ImmutableTree(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r,o=n.remove(e.popFront());return r=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&r.isEmpty()?fb.core.util.ImmutableTree.Empty:new fb.core.util.ImmutableTree(this.value,r)}return this},get:function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},setTree:function(e,t){if(e.isEmpty())return t;var n,r=e.getFront(),o=this.children.get(r)||fb.core.util.ImmutableTree.Empty,i=o.setTree(e.popFront(),t);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new fb.core.util.ImmutableTree(this.value,n)},fold:function(e){return this.fold_(fb.core.util.Path.Empty,e)},fold_:function(e,t){var n={};return this.children.inorderTraversal(function(r,o){n[r]=o.fold_(e.child(r),t)}),t(e,this.value,n)},findOnPath:function(e,t){return this.findOnPath_(e,fb.core.util.Path.Empty,t)},findOnPath_:function(e,t,n){var r=this.value?n(t,this.value):!1;if(r)return r;if(e.isEmpty())return null;var o=e.getFront(),i=this.children.get(o);return i?i.findOnPath_(e.popFront(),t.child(o),n):null},foreachOnPathWhile:function(e,t){return this.foreachOnPathWhile_(e,fb.core.util.Path.Empty,t)},foreachOnPathWhile_:function(e,t,n){if(e.isEmpty())return t;var r=!0;if(this.value&&(r=n(t,this.value)),r===!0){var o=e.getFront(),i=this.children.get(o);return i?i.foreachOnPath_(e.popFront(),t.child(o),n):t}return t},foreachOnPath:function(e,t){return this.foreachOnPath_(e,fb.core.util.Path.Empty,t)},foreachOnPath_:function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),t.child(r),n):fb.core.util.ImmutableTree.Empty},foreach:function(e){this.foreach_(fb.core.util.Path.Empty,e)},foreach_:function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},foreachChild:function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})}}),fb.core.util.ImmutableTree.Empty=new fb.core.util.ImmutableTree(null),goog.DEBUG&&(fb.core.util.ImmutableTree.prototype.toString=function(){var e={};return this.foreach(function(t,n){var r=t.toString();e[r]=n.toString()}),fb.util.json.stringify(e)}),goog.provide("fb.core.CompoundWrite"),goog.require("fb.core.snap.Node"),goog.require("fb.core.util"),goog.require("fb.core.util.ImmutableTree"),fb.core.CompoundWrite=function(e){this.writeTree_=e},fb.core.CompoundWrite.Empty=new fb.core.CompoundWrite(new fb.core.util.ImmutableTree(null)),fb.core.CompoundWrite.prototype.addWrite=function(e,t){if(e.isEmpty())return new fb.core.CompoundWrite(new fb.core.util.ImmutableTree(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,o=n.value,i=fb.core.util.Path.relativePath(r,e);return o=o.updateChild(i,t),new fb.core.CompoundWrite(this.writeTree_.set(r,o))}var a=new fb.core.util.ImmutableTree(t),s=this.writeTree_.setTree(e,a);return new fb.core.CompoundWrite(s)},fb.core.CompoundWrite.prototype.addWrites=function(e,t){var n=this;return fb.util.obj.foreach(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},fb.core.CompoundWrite.prototype.removeWrite=function(e){if(e.isEmpty())return fb.core.CompoundWrite.Empty;var t=this.writeTree_.setTree(e,fb.core.util.ImmutableTree.Empty);return new fb.core.CompoundWrite(t)},fb.core.CompoundWrite.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},fb.core.CompoundWrite.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(fb.core.util.Path.relativePath(t.path,e)):null},fb.core.CompoundWrite.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||(t=t,t.forEachChild(fb.core.snap.PriorityIndex,function(t,n){e.push(new fb.core.snap.NamedNode(t,n))})):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new fb.core.snap.NamedNode(t,n.value))}),e},fb.core.CompoundWrite.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return null!=t?new fb.core.CompoundWrite(new fb.core.util.ImmutableTree(t)):new fb.core.CompoundWrite(this.writeTree_.subtree(e))},fb.core.CompoundWrite.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},fb.core.CompoundWrite.prototype.apply=function(e){return fb.core.CompoundWrite.applySubtreeWrite_(fb.core.util.Path.Empty,this.writeTree_,e)},fb.core.CompoundWrite.applySubtreeWrite_=function(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(t,o){".priority"===t?(fb.core.util.assert(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=fb.core.CompoundWrite.applySubtreeWrite_(e.child(t),o,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(e.child(".priority"),r)),n},goog.provide("fb.core.WriteTree"),goog.require("fb.core.CompoundWrite"),goog.require("fb.core.util"),goog.require("fb.core.view.CacheNode"),fb.core.WriteRecord,fb.core.WriteTree=function(){this.visibleWrites_=fb.core.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1},fb.core.WriteTree.prototype.childWrites=function(e){return new fb.core.WriteTreeRef(e,this)},fb.core.WriteTree.prototype.addOverwrite=function(e,t,n,r){fb.core.util.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),goog.isDef(r)||(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},fb.core.WriteTree.prototype.addMerge=function(e,t,n){fb.core.util.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},fb.core.WriteTree.prototype.removeWrite=function(e){var t=goog.array.findIndex(this.allWrites_,function(t){return t.writeId===e});fb.core.util.assert(t>=0,"removeWrite called with nonexistent writeId.");var n=this.allWrites_[t];this.allWrites_.splice(t,1);for(var r=n.visible,o=!1,i=this.allWrites_.length-1;r&&i>=0;){var a=this.allWrites_[i];a.visible&&(i>=t&&this.recordContainsPath_(a,n.path)?r=!1:n.path.contains(a.path)&&(o=!0)),i--}if(r){if(o)return this.resetTree_(),n.path;if(n.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(n.path);else{var s=n.children,u=this;goog.object.forEach(s,function(e,t){u.visibleWrites_=u.visibleWrites_.removeWrite(n.path.child(t))})}return n.path}return null},fb.core.WriteTree.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},fb.core.WriteTree.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var o=this.visibleWrites_.childCompoundWrite(e);if(!r&&o.isEmpty())return t;if(r||null!=t||o.hasCompleteWrite(fb.core.util.Path.Empty)){var i=function(t){return!(!t.visible&&!r||n&&goog.array.contains(n,t.writeId)||!t.path.contains(e)&&!e.contains(t.path))},a=fb.core.WriteTree.layerTree_(this.allWrites_,i,e);return l=t||fb.core.snap.EMPTY_NODE,a.apply(l)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(fb.core.util.Path.Empty)){var l=t||fb.core.snap.EMPTY_NODE;return u.apply(l)}return null},fb.core.WriteTree.prototype.calcCompleteEventChildren=function(e,t){var n=fb.core.snap.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(fb.core.snap.PriorityIndex,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(fb.core.snap.PriorityIndex,function(e,t){var r=o.childCompoundWrite(new fb.core.util.Path(e)).apply(t);n=n.updateImmediateChild(e,r)}),goog.array.forEach(o.getCompleteChildren(),function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return o=this.visibleWrites_.childCompoundWrite(e),goog.array.forEach(o.getCompleteChildren(),function(e){n=n.updateImmediateChild(e.name,e.node)}),n},fb.core.WriteTree.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){fb.core.util.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var i=this.visibleWrites_.childCompoundWrite(o);return i.isEmpty()?r.getChild(t):i.apply(r.getChild(t))},fb.core.WriteTree.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),o=this.visibleWrites_.getCompleteNode(r);if(null!=o)return o;if(n.isCompleteForChild(t)){var i=this.visibleWrites_.childCompoundWrite(r);return i.apply(n.getNode().getImmediateChild(t))}return null},fb.core.WriteTree.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},fb.core.WriteTree.prototype.calcIndexedSlice=function(e,t,n,r,o,i){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(fb.core.util.Path.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if(a=a.withIndex(i),a.isEmpty()||a.isLeafNode())return[];for(var l=[],c=i.getCompare(),f=o?a.getReverseIteratorFrom(n,i):a.getIteratorFrom(n,i),h=f.getNext();h&&l.length<r;)0!==c(h,n)&&l.push(h),h=f.getNext();return l},fb.core.WriteTree.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!goog.object.findKey(e.children,function(n,r){return e.path.child(r).contains(t)})},fb.core.WriteTree.prototype.resetTree_=function(){this.visibleWrites_=fb.core.WriteTree.layerTree_(this.allWrites_,fb.core.WriteTree.DefaultFilter_,fb.core.util.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},fb.core.WriteTree.DefaultFilter_=function(e){return e.visible},fb.core.WriteTree.layerTree_=function(e,t,n){for(var r=fb.core.CompoundWrite.Empty,o=0;o<e.length;++o){var i=e[o];if(t(i)){var a,s=i.path;if(i.snap)n.contains(s)?(a=fb.core.util.Path.relativePath(n,s),r=r.addWrite(a,i.snap)):s.contains(n)&&(a=fb.core.util.Path.relativePath(s,n),r=r.addWrite(fb.core.util.Path.Empty,i.snap.getChild(a)));else{if(!i.children)throw fb.core.util.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))a=fb.core.util.Path.relativePath(n,s),r=r.addWrites(a,i.children);else if(s.contains(n))if(a=fb.core.util.Path.relativePath(s,n),a.isEmpty())r=r.addWrites(fb.core.util.Path.Empty,i.children);else{var u=fb.util.obj.get(i.children,a.getFront());if(u){var l=u.getChild(a.popFront());r=r.addWrite(fb.core.util.Path.Empty,l)}}}}}return r},fb.core.WriteTreeRef=function(e,t){this.treePath_=e,this.writeTree_=t},fb.core.WriteTreeRef.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},fb.core.WriteTreeRef.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},fb.core.WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},fb.core.WriteTreeRef.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},fb.core.WriteTreeRef.prototype.calcIndexedSlice=function(e,t,n,r,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,o)},fb.core.WriteTreeRef.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},fb.core.WriteTreeRef.prototype.child=function(e){return new fb.core.WriteTreeRef(this.treePath_.child(e),this.writeTree_)},goog.provide("fb.core.SyncPoint"),goog.require("fb.core.util"),goog.require("fb.core.util.ImmutableTree"),goog.require("fb.core.view.ViewCache"),goog.require("fb.core.view.EventRegistration"),goog.require("fb.core.view.View"),goog.require("goog.array"),fb.core.SyncPoint=function(){this.views_={}},fb.core.SyncPoint.prototype.isEmpty=function(){return goog.object.isEmpty(this.views_)},fb.core.SyncPoint.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var o=fb.util.obj.get(this.views_,r);return fb.core.util.assert(null!=o,"SyncTree gave us an op for an invalid query."),o.applyOperation(e,t,n)}var i=[];return goog.object.forEach(this.views_,function(r){i=i.concat(r.applyOperation(e,t,n))}),i},fb.core.SyncPoint.prototype.addEventRegistration=function(e,t,n,r,o){var i=e.queryIdentifier(),a=fb.util.obj.get(this.views_,i);if(!a){var s=n.calcCompleteEventCache(o?r:null),u=!1;s?u=!0:r instanceof fb.core.snap.ChildrenNode?(s=n.calcCompleteEventChildren(r),u=!1):(s=fb.core.snap.EMPTY_NODE,u=!1);var l=new fb.core.view.ViewCache(new fb.core.view.CacheNode(s,u,!1),new fb.core.view.CacheNode(r,o,!1));a=new fb.core.view.View(e,l),this.views_[i]=a}return a.addEventRegistration(t),a.getInitialEvents(t)},fb.core.SyncPoint.prototype.removeEventRegistration=function(e,t,n){var r=e.queryIdentifier(),o=[],i=[],a=this.hasCompleteView();if("default"===r){var s=this;goog.object.forEach(this.views_,function(e,r){i=i.concat(e.removeEventRegistration(t,n)),e.isEmpty()&&(delete s.views_[r],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var u=fb.util.obj.get(this.views_,r);u&&(i=i.concat(u.removeEventRegistration(t,n)),u.isEmpty()&&(delete this.views_[r],u.getQuery().getQueryParams().loadsAllData()||o.push(u.getQuery())))}return a&&!this.hasCompleteView()&&o.push(new Firebase(e.repo,e.path)),{removed:o,events:i}},fb.core.SyncPoint.prototype.getQueryViews=function(){return goog.array.filter(goog.object.getValues(this.views_),function(e){return!e.getQuery().getQueryParams().loadsAllData()})},fb.core.SyncPoint.prototype.getCompleteServerCache=function(e){var t=null;return goog.object.forEach(this.views_,function(n){t=t||n.getCompleteServerCache(e)}),t},fb.core.SyncPoint.prototype.viewForQuery=function(e){var t=e.getQueryParams();if(t.loadsAllData())return this.getCompleteView();var n=e.queryIdentifier();return fb.util.obj.get(this.views_,n)},fb.core.SyncPoint.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},fb.core.SyncPoint.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},fb.core.SyncPoint.prototype.getCompleteView=function(){var e=goog.object.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()});return e||null},goog.provide("fb.core.SyncTree"),goog.require("fb.core.Operation"),goog.require("fb.core.SyncPoint"),goog.require("fb.core.WriteTree"),goog.require("fb.core.util"),fb.core.ListenProvider,fb.core.SyncTree=function(e){this.syncPointTree_=fb.core.util.ImmutableTree.Empty,this.pendingWriteTree_=new fb.core.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={},this.listenProvider_=e},fb.core.SyncTree.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new fb.core.operation.Overwrite(fb.core.OperationSource.User,e,t)):[]},fb.core.SyncTree.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=fb.core.util.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new fb.core.operation.Merge(fb.core.OperationSource.User,e,r))},fb.core.SyncTree.prototype.ackUserWrite=function(e,t){t=t||!1;var n=this.pendingWriteTree_.removeWrite(e);return null==n?[]:this.applyOperationToSyncPoints_(new fb.core.operation.AckUserWrite(n,t))},fb.core.SyncTree.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new fb.core.operation.Overwrite(fb.core.OperationSource.Server,e,t))},fb.core.SyncTree.prototype.applyServerMerge=function(e,t){var n=fb.core.util.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new fb.core.operation.Merge(fb.core.OperationSource.Server,e,n))},fb.core.SyncTree.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new fb.core.operation.ListenComplete(fb.core.OperationSource.Server,e))},fb.core.SyncTree.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null!=r){var o=this.parseQueryKey_(r),i=o.path,a=o.queryId,s=fb.core.util.Path.relativePath(i,e),u=new fb.core.operation.Overwrite(fb.core.OperationSource.forServerTaggedQuery(a),s,t);return this.applyTaggedOperation_(i,a,u)}return[]},fb.core.SyncTree.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var o=this.parseQueryKey_(r),i=o.path,a=o.queryId,s=fb.core.util.Path.relativePath(i,e),u=fb.core.util.ImmutableTree.fromObject(t),l=new fb.core.operation.Merge(fb.core.OperationSource.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(i,a,l)}return[]},fb.core.SyncTree.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=this.parseQueryKey_(n),o=r.path,i=r.queryId,a=fb.core.util.Path.relativePath(o,e),s=new fb.core.operation.ListenComplete(fb.core.OperationSource.forServerTaggedQuery(i),a);return this.applyTaggedOperation_(o,i,s)}return[]},fb.core.SyncTree.prototype.addEventRegistration=function(e,t){var n=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPathWhile(n,function(e,t){var i=fb.core.util.Path.relativePath(e,n);return r=t.getCompleteServerCache(i),o=o||t.hasCompleteView(),!r});var i=this.syncPointTree_.get(n);i?(o=o||i.hasCompleteView(),r=r||i.getCompleteServerCache(fb.core.util.Path.Empty)):(i=new fb.core.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(n,i));var a;if(null!=r)a=!0;else{a=!1,r=fb.core.snap.EMPTY_NODE;var s=this.syncPointTree_.subtree(n);s.foreachChild(function(e,t){var n=t.getCompleteServerCache(fb.core.util.Path.Empty);n&&(r=r.updateImmediateChild(e,n))})}var u=i.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var l=this.makeQueryKey_(e);fb.core.util.assert(!goog.object.containsKey(this.queryToTagMap_,l),"View does not exist, but we have a tag");var c=fb.core.SyncTree.getNextQueryTag_();this.queryToTagMap_[l]=c,this.tagToQueryMap_["_"+c]=l}var f=this.pendingWriteTree_.childWrites(n),h=i.addEventRegistration(e,t,f,r,a);if(!u&&!o){var p=i.viewForQuery(e);h=h.concat(this.setupListener_(e,p))}return h},fb.core.SyncTree.prototype.removeEventRegistration=function(e,t,n){var r=e.path,o=this.syncPointTree_.get(r),i=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var a=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(r));var s=a.removed;i=a.events;var u=-1!==goog.array.findIndex(s,function(e){return e.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(r,function(e,t){return t.hasCompleteView()});if(u&&!l){var c=this.syncPointTree_.subtree(r);if(!c.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(c),h=0;h<f.length;++h){var p=f[h],d=p.getQuery(),g=this.createListenerForView_(p);this.listenProvider_.startListening(d,this.tagForQuery_(d),g.hashFn,g.onComplete)}}if(!l&&s.length>0&&!n)if(u){var v=null;this.listenProvider_.stopListening(e,v)}else{var m=this;goog.array.forEach(s,function(e){var t=(e.queryIdentifier(),m.queryToTagMap_[m.makeQueryKey_(e)]);m.listenProvider_.stopListening(e,t)})}this.removeTags_(s)}return i},fb.core.SyncTree.prototype.calcCompleteEventCache=function(e,t){var n=!0,r=this.pendingWriteTree_,o=this.syncPointTree_.findOnPath(e,function(t,n){var r=fb.core.util.Path.relativePath(t,e),o=n.getCompleteServerCache(r);return o?o:void 0});return r.calcCompleteEventCache(e,o,t,n)},fb.core.SyncTree.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){var r=t.getCompleteView();return[r]}var o=[];return t&&(o=t.getQueryViews()),goog.object.forEach(n,function(e){o=o.concat(e)}),o})},fb.core.SyncTree.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=this.makeQueryKey_(n),o=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+o]}}},fb.core.SyncTree.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),o=this.createListenerForView_(t),i=this.listenProvider_.startListening(e,r,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(n);if(r)fb.core.util.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(goog.array.map(t.getQueryViews(),function(e){return e.getQuery()}))),goog.object.forEach(n,function(e){r=r.concat(e)}),r}),u=0;u<s.length;++u){var l=s[u];this.listenProvider_.stopListening(l,this.tagForQuery_(l))}return i},fb.core.SyncTree.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var t=e.getServerCache()||fb.core.snap.EMPTY_NODE;return t.hash()},onComplete:function(e,o){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=fb.core.util.errorForServerCode(e);return t.removeEventRegistration(n,null,i)}}},fb.core.SyncTree.prototype.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},fb.core.SyncTree.prototype.parseQueryKey_=function(e){var t=e.indexOf("$");return fb.core.util.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fb.core.util.Path(e.substr(0,t))}},fb.core.SyncTree.prototype.queryKeyForTag_=function(e){return goog.object.get(this.tagToQueryMap_,"_"+e)},fb.core.SyncTree.prototype.tagForQuery_=function(e){var t=this.makeQueryKey_(e);return fb.util.obj.get(this.queryToTagMap_,t)},fb.core.SyncTree.nextQueryTag_=1,fb.core.SyncTree.getNextQueryTag_=function(){return fb.core.SyncTree.nextQueryTag_++},fb.core.SyncTree.prototype.applyTaggedOperation_=function(e,t,n){var r=this.syncPointTree_.get(e);fb.core.util.assert(r,"Missing sync point for query tag that we're tracking");var o=this.pendingWriteTree_.childWrites(e);return r.applyOperation(n,o,null)},fb.core.SyncTree.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(fb.core.util.Path.Empty))},fb.core.SyncTree.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var o=t.get(fb.core.util.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(fb.core.util.Path.Empty));var i=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);i=i.concat(this.applyOperationHelper_(s,u,l,c))}return o&&(i=i.concat(o.applyOperation(e,r,n))),i},fb.core.SyncTree.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var o=t.get(fb.core.util.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(fb.core.util.Path.Empty));var i=[],a=this;return t.children.inorderTraversal(function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),l=e.operationForChild(t);l&&(i=i.concat(a.applyOperationDescendantsHelper_(l,o,s,u)))}),o&&(i=i.concat(o.applyOperation(e,r,n))),i},goog.provide("fb.core.util.Tree"),goog.require("fb.core.util"),goog.require("fb.core.util.Path"),goog.require("fb.util.obj"),goog.require("goog.object"),fb.core.util.TreeNode=goog.defineClass(null,{constructor:function(){this.children={},this.childCount=0,this.value=null}}),fb.core.util.Tree=goog.defineClass(null,{constructor:function(e,t,n){this.name_=e?e:"",this.parent_=t?t:null,this.node_=n?n:new fb.core.util.TreeNode},subTree:function(e){for(var t,n=e instanceof fb.core.util.Path?e:new fb.core.util.Path(e),r=this;null!==(t=n.getFront());){var o=fb.util.obj.get(r.node_.children,t)||new fb.core.util.TreeNode;r=new fb.core.util.Tree(t,r,o),n=n.popFront()}return r},getValue:function(){return this.node_.value},setValue:function(e){fb.core.util.assert("undefined"!=typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},clear:function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},hasChildren:function(){return this.node_.childCount>0},isEmpty:function(){return null===this.getValue()&&!this.hasChildren()},forEachChild:function(e){var t=this;goog.object.forEach(this.node_.children,function(n,r){e(new fb.core.util.Tree(r,t,n))})},forEachDescendant:function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},forEachAncestor:function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},forEachImmediateDescendantWithValue:function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},path:function(){return new fb.core.util.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},name:function(){return this.name_},parent:function(){return this.parent_},updateParents_:function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},updateChild_:function(e,t){var n=t.isEmpty(),r=fb.util.obj.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())}}),goog.provide("fb.core.util.EventEmitter"),goog.require("fb.core.util"),goog.require("goog.array"),fb.core.util.EventEmitter=goog.defineClass(null,{constructor:function(e){fb.core.util.assert(goog.isArray(e)&&e.length>0,"Requires a non-empty array"),this.allowedEvents_=e,this.listeners_={}},getInitialEvent:goog.abstractMethod,trigger:function(e,t){for(var n=this.listeners_[e]||[],r=0;r<n.length;r++)n[r].callback.apply(n[r].context,Array.prototype.slice.call(arguments,1))},on:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},off:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].context))return void r.splice(o,1)},validateEventType_:function(e){fb.core.util.assert(goog.array.find(this.allowedEvents_,function(t){return t===e}),"Unknown event: "+e)}}),goog.provide("fb.core.util.nextPushId"),goog.require("fb.core.util"),fb.core.util.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(r){var o=r===t;t=r;for(var i=new Array(8),a=7;a>=0;a--)i[a]=e.charAt(r%64),r=Math.floor(r/64);fb.core.util.assert(0===r,"Cannot push at time == 0");var s=i.join("");if(o){for(a=11;a>=0&&63===n[a];a--)n[a]=0;n[a]++}else for(a=0;12>a;a++)n[a]=Math.floor(64*Math.random());for(a=0;12>a;a++)s+=e.charAt(n[a]);return fb.core.util.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),goog.provide("fb.core.util.OnlineMonitor"),goog.require("fb.core.util"),goog.require("fb.core.util.EventEmitter"),fb.core.util.OnlineMonitor=goog.defineClass(fb.core.util.EventEmitter,{constructor:function(){if(fb.core.util.EventEmitter.call(this,["online"]),this.online_=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var e=this;window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)}},getInitialEvent:function(e){return fb.core.util.assert("online"===e,"Unknown event type: "+e),[this.online_]},currentlyOnline:function(){return this.online_}}),goog.addSingletonGetter(fb.core.util.OnlineMonitor),goog.provide("fb.core.util.VisibilityMonitor"),goog.require("fb.core.util"),goog.require("fb.core.util.EventEmitter"),fb.core.util.VisibilityMonitor=goog.defineClass(fb.core.util.EventEmitter,{constructor:function(){fb.core.util.EventEmitter.call(this,["visible"]);var e,t;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1)}},getInitialEvent:function(e){return fb.core.util.assert("visible"===e,"Unknown event type: "+e),[this.visible_]}}),goog.addSingletonGetter(fb.core.util.VisibilityMonitor),goog.provide("fb.core.util.validation"),goog.require("fb.core.util"),goog.require("fb.core.util.Path"),goog.require("fb.core.util.ValidationPath"),goog.require("fb.util.obj"),goog.require("fb.util.utf8"),goog.require("fb.util.validation"),fb.core.util.validation={INVALID_KEY_REGEX_:/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_:/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_:10485760,isValidKey:function(e){return goog.isString(e)&&0!==e.length&&!fb.core.util.validation.INVALID_KEY_REGEX_.test(e)},isValidPathString:function(e){return goog.isString(e)&&0!==e.length&&!fb.core.util.validation.INVALID_PATH_REGEX_.test(e)},isValidRootPathString:function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),fb.core.util.validation.isValidPathString(e)},isValidPriority:function(e){return null===e||goog.isString(e)||goog.isNumber(e)&&!fb.core.util.isInvalidJSONNumber(e)||goog.isObject(e)&&fb.util.obj.contains(e,".sv")},validateFirebaseDataArg:function(e,t,n,r,o){(!o||goog.isDef(n))&&fb.core.util.validation.validateFirebaseData(fb.util.validation.errorPrefix(e,t,o),n,r)},validateFirebaseData:function(e,t,n){if(n instanceof fb.core.util.Path&&(n=new fb.core.util.ValidationPath(n,e)),!goog.isDef(t))throw new Error(e+"contains undefined "+n.toErrorString());if(goog.isFunction(t))throw new Error(e+"contains a function "+n.toErrorString()+" with contents: "+t.toString());if(fb.core.util.isInvalidJSONNumber(t))throw new Error(e+"contains "+t.toString()+" "+n.toErrorString());if(goog.isString(t)&&t.length>fb.core.util.validation.MAX_LEAF_SIZE_/3&&fb.util.utf8.stringLength(t)>fb.core.util.validation.MAX_LEAF_SIZE_)throw new Error(e+"contains a string greater than "+fb.core.util.validation.MAX_LEAF_SIZE_+" utf8 bytes "+n.toErrorString()+" ('"+t.substring(0,50)+"...')");if(goog.isObject(t)){var r=!1,o=!1;if(fb.util.obj.foreach(t,function(t,i){if(".value"===t)r=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!fb.core.util.validation.isValidKey(t)))throw new Error(e+" contains an invalid key ("+t+") "+n.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.push(t),fb.core.util.validation.validateFirebaseData(e,i,n),n.pop()}),r&&o)throw new Error(e+' contains ".value" child '+n.toErrorString()+" in addition to actual children.")}},validateFirebaseMergeDataArg:function(e,t,n,r,o){if(!o||goog.isDef(n)){if(!goog.isObject(n)||goog.isArray(n))throw new Error(fb.util.validation.errorPrefix(e,t,o)+" must be an Object containing the children to replace.");
if(fb.util.obj.contains(n,".value"))throw new Error(fb.util.validation.errorPrefix(e,t,o)+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');fb.core.util.validation.validateFirebaseDataArg(e,t,n,r,o)}},validatePriority:function(e,t,n,r){if(!r||goog.isDef(n)){if(fb.core.util.isInvalidJSONNumber(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fb.core.util.validation.isValidPriority(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},validateEventType:function(e,t,n,r){if(!r||goog.isDef(n))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fb.util.validation.errorPrefix(e,t,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},validateKey:function(e,t,n,r){if((!r||goog.isDef(n))&&!fb.core.util.validation.isValidKey(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+'was an invalid key: "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},validatePathString:function(e,t,n,r){if((!r||goog.isDef(n))&&!fb.core.util.validation.isValidPathString(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+'was an invalid path: "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},validateRootPathString:function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fb.core.util.validation.validatePathString(e,t,n,r)},validateWritablePath:function(e,t){if(".info"===t.getFront())throw new Error(e+" failed: Can't modify data under /.info/")},validateUrl:function(e,t,n){var r=n.path.toString();if(!goog.isString(n.repoInfo.host)||0===n.repoInfo.host.length||!fb.core.util.validation.isValidKey(n.repoInfo.namespace)||0!==r.length&&!fb.core.util.validation.isValidRootPathString(r))throw new Error(fb.util.validation.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},validateCredential:function(e,t,n,r){if((!r||goog.isDef(n))&&!goog.isString(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid credential (a string).")},validateBoolean:function(e,t,n,r){if((!r||goog.isDef(n))&&!goog.isBoolean(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a boolean.")},validateString:function(e,t,n,r){if((!r||goog.isDef(n))&&!goog.isString(n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid string.")},validateObject:function(e,t,n,r){if(!(r&&!goog.isDef(n)||goog.isObject(n)&&null!==n))throw new Error(fb.util.validation.errorPrefix(e,t,r)+"must be a valid object.")},validateObjectContainsKey:function(e,t,n,r,o,i){if(!o||goog.isDef(n)){if(!goog.isObject(n)||null===n||!fb.util.obj.contains(n,r))throw new Error(fb.util.validation.errorPrefix(e,t,o)+'must contain the key "'+r+'"');if(i){var a=fb.util.obj.get(n,r);if("string"===i&&!goog.isString(a)||"boolean"===i&&!goog.isBoolean(a)||"function"===i&&!goog.isFunction(a)||"object"===i&&!goog.isObject(a))throw new Error(fb.util.validation.errorPrefix(e,t,o)+'must contain the key "'+r+'" with type "'+i+'"')}}}},goog.provide("fb.core.util.CountedSet"),goog.require("fb.core.util"),goog.require("fb.util.obj"),goog.require("goog.object"),fb.core.util.CountedSet=goog.defineClass(null,{constructor:function(){this.set={}},add:function(e,t){this.set[e]=null!==t?t:!0},contains:function(e){return fb.util.obj.contains(this.set,e)},get:function(e){return this.contains(e)?this.set[e]:void 0},remove:function(e){delete this.set[e]},clear:function(){this.set={}},isEmpty:function(){return goog.object.isEmpty(this.set)},count:function(){return goog.object.getCount(this.set)},each:function(e){goog.object.forEach(this.set,function(t,n){e(n,t)})},keys:function(){var e=[];return goog.object.forEach(this.set,function(t,n){e.push(n)}),e}}),goog.provide("fb.core.SparseSnapshotTree"),goog.require("fb.core.snap.Node"),goog.require("fb.core.snap.PriorityIndex"),goog.require("fb.core.util.CountedSet"),goog.require("fb.core.util.Path"),fb.core.SparseSnapshotTree=function(){this.value_=null,this.children_=null},fb.core.SparseSnapshotTree.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();if(e=e.popFront(),this.children_.contains(t)){var n=this.children_.get(t);return n.find(e)}return null},fb.core.SparseSnapshotTree.prototype.remember=function(e,t){if(e.isEmpty())this.value_=t,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,t);else{null==this.children_&&(this.children_=new fb.core.util.CountedSet);var n=e.getFront();this.children_.contains(n)||this.children_.add(n,new fb.core.SparseSnapshotTree);var r=this.children_.get(n);e=e.popFront(),r.remember(e,t)}},fb.core.SparseSnapshotTree.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(fb.core.snap.PriorityIndex,function(e,t){n.remember(new fb.core.util.Path(e),t)}),this.forget(e)}if(null!==this.children_){var r=e.getFront();if(e=e.popFront(),this.children_.contains(r)){var o=this.children_.get(r).forget(e);o&&this.children_.remove(r)}return this.children_.isEmpty()?(this.children_=null,!0):!1}return!0},fb.core.SparseSnapshotTree.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,r){var o=new fb.core.util.Path(e.toString()+"/"+n);r.forEachTree(o,t)})},fb.core.SparseSnapshotTree.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})},goog.provide("fb.login.Constants"),fb.login.Constants={SESSION_PERSISTENCE_KEY_PREFIX:"session",DEFAULT_SERVER_HOST:"auth.firebase.com",SERVER_HOST:"auth.firebase.com",API_VERSION:"v2",POPUP_PATH_TO_CHANNEL:"/auth/channel",POPUP_RELAY_FRAME_NAME:"__winchan_relay_frame",POPUP_CLOSE_CMD:"die",JSONP_CALLBACK_NAMESPACE:"__firebase_auth_jsonp",REDIR_REQUEST_ID_KEY:"redirect_request_id",REDIR_REQUEST_COMPLETION_KEY:"__firebase_request_key",REDIR_CLIENT_OPTIONS_KEY:"redirect_client_options",INTERNAL_REDIRECT_SENTINAL_PATH:"/blank/page.html",CLIENT_OPTION_SESSION_PERSISTENCE:"remember",CLIENT_OPTION_REDIRECT_TO:"redirectTo"},goog.provide("fb.login.RequestInfo"),goog.require("fb.login.Constants"),fb.login.RequestInfo=function(e,t,n){this.clientOptions=e||{},this.transportOptions=t||{},this.serverParams=n||{},this.clientOptions[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE]||(this.clientOptions[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE]="default")},fb.login.RequestInfo.CLIENT_OPTIONS=[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE,fb.login.Constants.CLIENT_OPTION_REDIRECT_TO],fb.login.RequestInfo.fromParams=function(e){var t={},n={};return fb.util.obj.foreach(e||{},function(e,r){goog.array.contains(fb.login.RequestInfo.CLIENT_OPTIONS,e)?t[e]=r:n[e]=r}),new fb.login.RequestInfo(t,{},n)},goog.provide("fb.login.SessionManager"),goog.require("fb.core.storage"),goog.require("fb.login.Constants"),goog.require("fb.util.json"),goog.require("fb.util.jwt"),fb.login.SessionManager=function(e,t){this.persistenceKey_=[fb.login.Constants.SESSION_PERSISTENCE_KEY_PREFIX,e.persistenceKey,e.namespace].join(":"),this.stores_=t},fb.login.SessionManager.prototype.set=function(e,t){if(!t){if(!this.stores_.length)throw new Error("fb.login.SessionManager : No storage options available!");t=this.stores_[0]}t.set(this.persistenceKey_,e)},fb.login.SessionManager.prototype.get=function(){var e=goog.array.map(this.stores_,goog.bind(this.getFromStore_,this));return e=goog.array.filter(e,function(e){return null!==e}),goog.array.sort(e,function(e,t){return fb.util.jwt.issuedAtTime(t.token)-fb.util.jwt.issuedAtTime(e.token)}),e.length>0?e.shift():null},fb.login.SessionManager.prototype.getFromStore_=function(e){try{var t=e.get(this.persistenceKey_);if(t&&t.token)return t}catch(n){}return null},fb.login.SessionManager.prototype.clear=function(e){var t=(e?[e]:this.stores_,this);goog.array.forEach(this.stores_,function(e){e.remove(t.persistenceKey_)})},goog.provide("fb.login.util.environment"),fb.login.util.environment.isMobileWrapper=function(){return fb.login.util.environment.isMobileCordova()||fb.login.util.environment.isMobileWindows()||fb.login.util.environment.isIosWebview()},fb.login.util.environment.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)},fb.login.util.environment.isMobileWindows=function(){return"undefined"!=typeof navigator&&(!!navigator.userAgent.match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href))},fb.login.util.environment.isMobileFirefox=function(){return"undefined"!=typeof navigator&&(-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))},fb.login.util.environment.isIosWebview=function(){return"undefined"!=typeof navigator&&"undefined"!=typeof window&&!!(navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)},fb.login.util.environment.isHeadlessBrowser=function(){return"undefined"!=typeof navigator&&!!navigator.userAgent.match(/PhantomJS/)},fb.login.util.environment.isLocalFile=function(){return"undefined"!=typeof location&&/^file:\//.test(location.href)},fb.login.util.environment.isIE=function(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/MSIE/)&&!navigator.userAgent.match(/Trident/))},fb.login.util.environment.isModernIE=function(){if("undefined"==typeof navigator)return!1;var e,t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if(e=t.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),e&&e.length>1)return parseFloat(e[1])>=8}else if(t.indexOf("Trident")>-1&&(e=t.match(/rv:([0-9]{2,2}[\.0-9]{0,})/),e&&e.length>1))return parseFloat(e[1])>=8;return!1},goog.provide("fb.login.transports.util"),goog.require("fb.login.Constants"),goog.require("fb.util"),fb.login.transports.util.findRelay=function(){var e,t=(window.location,window.opener.frames);for(e=t.length-1;e>=0;e--)try{if(t[e].location.protocol===window.location.protocol&&t[e].location.host===window.location.host&&t[e].name===fb.login.Constants.POPUP_RELAY_FRAME_NAME)return t[e]}catch(n){}return null},fb.login.transports.util.addListener=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)},fb.login.transports.util.removeListener=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)},fb.login.transports.util.extractOrigin=function(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e},fb.login.transports.util.extractRedirectCompletionHash=function(e){var t="";try{e=e.replace("#","");var n=fb.util.querystringDecode(e);n&&fb.util.obj.contains(n,fb.login.Constants.REDIR_REQUEST_COMPLETION_KEY)&&(t=fb.util.obj.get(n,fb.login.Constants.REDIR_REQUEST_COMPLETION_KEY))}catch(r){}return t},fb.login.transports.util.replaceRedirectCompletionHash=function(){try{var e=new RegExp("&"+fb.login.Constants.REDIR_REQUEST_COMPLETION_KEY+"=([a-zA-z0-9]*)");document.location.hash=document.location.hash.replace(e,"")}catch(t){}},fb.login.transports.util.getBaseUrl=function(){var e=fb.core.util.parseURL(fb.login.Constants.SERVER_HOST);return e.scheme+"://"+e.host+"/"+fb.login.Constants.API_VERSION},fb.login.transports.util.getPopupChannelUrl=function(e){return fb.login.transports.util.getBaseUrl()+"/"+e+fb.login.Constants.POPUP_PATH_TO_CHANNEL},goog.provide("fb.login.Transport"),fb.login.Transport=function(e){},fb.login.Transport.isAvailable=function(){},fb.login.Transport.prototype.open=function(e,t,n){},fb.login.Transport.prototype.classification=function(){},goog.provide("fb.login.transports.PopupReceiver"),goog.require("fb.login.Constants"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.login.util.environment"),goog.require("fb.util.json"),fb.login.transports.PopupReceiver=function(e){var t=this;if(this.cb=e,this.targetOrigin="*",fb.login.util.environment.isModernIE()?this.messageTarget=this.inboundTarget=fb.login.transports.util.findRelay():(this.messageTarget=window.opener,this.inboundTarget=window),!t.messageTarget)throw"Unable to find relay frame";fb.login.transports.util.addListener(this.inboundTarget,"message",goog.bind(this.onMessage_,this)),fb.login.transports.util.addListener(this.inboundTarget,"message",goog.bind(this.onDie_,this));try{this.doPost_({a:"ready"})}catch(n){fb.login.transports.util.addListener(this.messageTarget,"load",function(e){t.doPost_({a:"ready"})})}fb.login.transports.util.addListener(window,"unload",goog.bind(this.onUnload_,this))},fb.login.transports.PopupReceiver.prototype.doPost_=function(e){e=fb.util.json.stringify(e),fb.login.util.environment.isModernIE()?this.messageTarget.doPost(e,this.targetOrigin):this.messageTarget.postMessage(e,this.targetOrigin)},fb.login.transports.PopupReceiver.prototype.onMessage_=function(e){var t,n=this;try{t=fb.util.json.eval(e.data)}catch(r){}t&&"request"===t.a&&(fb.login.transports.util.removeListener(window,"message",this.onMessage_),this.targetOrigin=e.origin,this.cb&&setTimeout(function(){n.cb(n.targetOrigin,t.d,function(e,t){n.autoClose=!t,n.cb=void 0,n.doPost_({a:"response",d:e,forceKeepWindowOpen:t})})},0))},fb.login.transports.PopupReceiver.prototype.onUnload_=function(){try{fb.login.transports.util.removeListener(this.inboundTarget,"message",this.onDie_)}catch(e){}this.cb&&(this.doPost_({a:"error",d:"unknown closed window"}),this.cb=void 0);try{window.close()}catch(e){}},fb.login.transports.PopupReceiver.prototype.onDie_=function(e){if(this.autoClose&&e.data===fb.login.Constants.POPUP_CLOSE_CMD)try{window.close()}catch(t){}},goog.provide("fb.login.transports.Redirect"),goog.require("fb.constants"),goog.require("fb.core.storage"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.util"),fb.login.transports.Redirect=function(e){this.requestId_=goog.string.getRandomString()+goog.string.getRandomString()+goog.string.getRandomString(),this.options_=e},fb.login.transports.Redirect.prototype.open=function(e,t,n){fb.core.storage.SessionStorage.set(fb.login.Constants.REDIR_REQUEST_ID_KEY,this.requestId_),fb.core.storage.SessionStorage.set(fb.login.Constants.REDIR_REQUEST_ID_KEY,this.requestId_),t.requestId=this.requestId_,t.redirectTo=t.redirectTo||window.location.href,e+=(/\?/.test(e)?"":"?")+fb.util.querystring(t),window.location=e},fb.login.transports.Redirect.isAvailable=function(){return!NODE_CLIENT&&!fb.login.util.environment.isLocalFile()&&!fb.login.util.environment.isMobileCordova()},fb.login.transports.Redirect.prototype.classification=function(){return"redirect"},goog.provide("fb.login.Errors");var errors={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};fb.login.Errors.get=function(e){var t=fb.util.obj.get(errors,e),n=new Error(t,e);return n.code=e,n},goog.provide("fb.login.transports.Popup"),goog.require("fb.core.util"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.login.util.environment"),goog.require("fb.util"),goog.require("fb.util.json"),fb.login.transports.Popup=function(e){(!e.window_features||fb.login.util.environment.isMobileFirefox())&&(e.window_features=void 0),e.window_name||(e.window_name="_blank"),this.options=e},fb.login.transports.Popup.prototype.open=function(e,t,n){function r(e){if(i&&(document.body.removeChild(i),i=void 0),f&&(f=clearInterval(f)),fb.login.transports.util.removeListener(window,"message",o),fb.login.transports.util.removeListener(window,"unload",r),c&&!e)try{c.close()}catch(t){a.postMessage(fb.login.Constants.POPUP_CLOSE_CMD,l)}c=a=void 0}function o(e){if(e.origin===l)try{var t=fb.util.json.eval(e.data);"ready"===t.a?a.postMessage(h,l):"error"===t.a?(r(!1),n&&(n(t.d),n=null)):"response"===t.a&&(r(t.forceKeepWindowOpen),n&&(n(null,t.d),n=null))}catch(o){}}var i,a,s=this,u=fb.login.util.environment.isModernIE();if(!this.options.relay_url)return n(new Error("invalid arguments: origin of url and relay_url must match"));var l=fb.login.transports.util.extractOrigin(e);if(l!==fb.login.transports.util.extractOrigin(s.options.relay_url))return void(n&&setTimeout(function(){n(new Error("invalid arguments: origin of url and relay_url must match"))},0));u&&(i=document.createElement("iframe"),i.setAttribute("src",s.options.relay_url),i.style.display="none",i.setAttribute("name",fb.login.Constants.POPUP_RELAY_FRAME_NAME),document.body.appendChild(i),a=i.contentWindow),e+=(/\?/.test(e)?"":"?")+fb.util.querystring(t);var c=window.open(e,s.options.window_name,s.options.window_features);a||(a=c);var f=setInterval(function(){return c&&c.closed?(r(!1),void(n&&(n(fb.login.Errors.get("USER_CANCELLED")),n=null))):void 0},500),h=fb.util.json.stringify({a:"request",d:t});fb.login.transports.util.addListener(window,"unload",r),fb.login.transports.util.addListener(window,"message",o)},fb.login.transports.Popup.isAvailable=function(){return!NODE_CLIENT&&"postMessage"in window&&!fb.login.util.environment.isLocalFile()&&!fb.login.util.environment.isMobileWrapper()&&!fb.login.util.environment.isHeadlessBrowser()},fb.login.transports.Popup.prototype.classification=function(){return"popup"},goog.provide("fb.login.transports.NodeHttp"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.login.util.environment"),goog.require("fb.util"),goog.require("fb.util.json"),fb.login.transports.NodeHttp=function(e){e.method||(e.method="GET"),e.headers||(e.headers={}),e.headers.content_type||(e.headers.content_type="application/json"),e.headers.content_type=e.headers.content_type.toLowerCase(),this.options=e},fb.login.transports.NodeHttp.prototype.open=function(e,t,n){var r,o=fb.core.util.parseURL(e),i="http"===o.scheme?require("http"):require("https"),a=this.options.method,s={Accept:"application/json;text/plain"};goog.object.extend(s,this.options.headers);var u={host:o.host.split(":")[0],port:o.port,path:o.pathString,method:this.options.method.toUpperCase()};if("GET"===a)u.path+=(/\?/.test(u.path)?"":"?")+fb.util.querystring(t),r=null;else{var l=this.options.headers.content_type;"application/json"===l&&(r=fb.util.json.stringify(t)),"application/x-www-form-urlencoded"===l&&(r=fb.util.querystring(t)),s["Content-Length"]=Buffer.byteLength(r,"utf8")}u.headers=s;var c=i.request(u,function(e){var t="";e.setEncoding("utf8"),e.on("data",function(e){t+=e}),e.on("end",function(){try{t=fb.util.json.eval(t+"")}catch(e){}n&&(n(null,t),n=null)})});"GET"!==a&&c.write(r),c.on("error",function(e){n(e&&e.code&&("ENOTFOUND"===e.code||"ENETDOWN"===e.code)?fb.login.Errors.get("NETWORK_ERROR"):fb.login.Errors.get("SERVER_ERROR")),n=null}),c.end()},fb.login.transports.NodeHttp.isAvailable=function(){return NODE_CLIENT},fb.login.transports.NodeHttp.prototype.classification=function(){return"json"},goog.provide("fb.login.transports.XHR"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.login.util.environment"),goog.require("fb.util"),goog.require("fb.util.json"),fb.login.transports.XHR=function(e){e.method||(e.method="GET"),e.headers||(e.headers={}),e.headers.content_type||(e.headers.content_type="application/json"),e.headers.content_type=e.headers.content_type.toLowerCase(),this.options=e},fb.login.transports.XHR.prototype.open=function(e,t,n){function r(e){n&&(n(fb.login.Errors.get("REQUEST_INTERRUPTED")),n=null)}var o,i=new XMLHttpRequest,a=this.options.method.toUpperCase();if(fb.login.transports.util.addListener(window,"beforeunload",r),i.onreadystatechange=function(){if(n&&4===i.readyState){var e;if(i.status>=200&&i.status<300){try{e=fb.util.json.eval(i.responseText)}catch(t){}n(null,e)}else n(i.status>=500&&i.status<600?fb.login.Errors.get("SERVER_ERROR"):fb.login.Errors.get("NETWORK_ERROR"));n=null,fb.login.transports.util.removeListener(window,"beforeunload",r)}},"GET"===a)e+=(/\?/.test(e)?"":"?")+fb.util.querystring(t),o=null;else{var s=this.options.headers.content_type;"application/json"===s&&(o=fb.util.json.stringify(t)),"application/x-www-form-urlencoded"===s&&(o=fb.util.querystring(t))}i.open(a,e,!0);var u={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};goog.object.extend(u,this.options.headers);for(var l in u)i.setRequestHeader(l,u[l]);i.send(o)},fb.login.transports.XHR.isAvailable=function(){return!(NODE_CLIENT||!window.XMLHttpRequest||fb.login.util.environment.isIE()&&!fb.login.util.environment.isModernIE())},fb.login.transports.XHR.prototype.classification=function(){return"json"},goog.provide("fb.login.transports.CordovaInAppBrowser"),goog.require("fb.core.util"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.RequestInfo"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.XHR"),goog.require("fb.login.transports.util"),goog.require("fb.login.util.environment"),goog.require("fb.util"),goog.require("fb.util.json"),fb.login.transports.CordovaInAppBrowser=function(e){this.requestId_=goog.string.getRandomString()+goog.string.getRandomString()+goog.string.getRandomString(),this.options_=e},fb.login.transports.CordovaInAppBrowser.prototype.open=function(e,t,n){function r(e){try{var t=document.createElement("a");return t.href=e,t.host===s.host&&t.pathname===fb.login.Constants.INTERNAL_REDIRECT_SENTINAL_PATH}catch(n){}return!1}function o(e){n&&(n(fb.login.Errors.get("USER_CANCELLED")),n=null)}var i,a=this,s=fb.core.util.parseURL(fb.login.Constants.SERVER_HOST);return t.requestId=this.requestId_,t[fb.login.Constants.CLIENT_OPTION_REDIRECT_TO]=s.scheme+"://"+s.host+fb.login.Constants.INTERNAL_REDIRECT_SENTINAL_PATH,e+=/\?/.test(e)?"":"?",e+=fb.util.querystring(t),i=window.open(e,"_blank","location=no"),i&&goog.isFunction(i.addEventListener)?(i.addEventListener("loadstart",function(e){if(e&&e.url&&r(e.url)){var t=fb.login.transports.util.extractRedirectCompletionHash(e.url);i.removeEventListener("exit",o),i.close();var s="/auth/session",u=new fb.login.RequestInfo(null,null,{requestId:a.requestId_,requestKey:t});a.options_.requestWithCredential(s,u,n),n=null}}),void i.addEventListener("exit",o)):void n(fb.login.Errors.get("TRANSPORT_UNAVAILABLE"))},fb.login.transports.CordovaInAppBrowser.isAvailable=function(){return!NODE_CLIENT&&fb.login.util.environment.isMobileCordova()},fb.login.transports.CordovaInAppBrowser.prototype.classification=function(){return"redirect"},goog.provide("fb.login.transports.JSONP"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.Transport"),goog.require("fb.login.transports.util"),goog.require("fb.util"),goog.require("fb.util.json"),fb.login.transports.JSONP=function(e){e.callback_parameter||(e.callback_parameter="callback"),this.options=e,window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE]=window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE]||{}},fb.login.transports.JSONP.prototype.open=function(e,t,n){function r(e){n&&(n(fb.login.Errors.get("REQUEST_INTERRUPTED")),n=null)}function o(){setTimeout(function(){window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE][a]=void 0,goog.object.isEmpty(window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE])&&(window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE]=void 0);try{var e=document.getElementById(a);e&&e.parentNode.removeChild(e)}catch(t){}},1),fb.login.transports.util.removeListener(window,"beforeunload",r)}function i(e){n&&(n(null,e),n=null),o()}var a="fn"+(new Date).getTime()+Math.floor(99999*Math.random());t[this.options.callback_parameter]=fb.login.Constants.JSONP_CALLBACK_NAMESPACE+"."+a,e+=(/\?/.test(e)?"":"?")+fb.util.querystring(t),fb.login.transports.util.addListener(window,"beforeunload",r),window[fb.login.Constants.JSONP_CALLBACK_NAMESPACE][a]=i,this.writeScriptTag_(a,e,n)},fb.login.transports.JSONP.prototype.writeScriptTag_=function(e,t,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=!0,r.src=t,r.onerror=function(){var t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t),n&&n(fb.login.Errors.get("NETWORK_ERROR"))};var o,i=document.getElementsByTagName("head");o=!i||goog.array.isEmpty(i)?document.documentElement:i[0],o.appendChild(r)}catch(a){n&&n(fb.login.Errors.get("NETWORK_ERROR"))}},0)},fb.login.transports.JSONP.isAvailable=function(){return!NODE_CLIENT},fb.login.transports.JSONP.prototype.classification=function(){return"json"},goog.provide("fb.login.AuthenticationManager"),goog.require("fb.constants"),goog.require("fb.core.storage"),goog.require("fb.core.util"),goog.require("fb.core.util.EventEmitter"),goog.require("fb.login.Constants"),goog.require("fb.login.Errors"),goog.require("fb.login.RequestInfo"),goog.require("fb.login.SessionManager"),goog.require("fb.login.transports.CordovaInAppBrowser"),goog.require("fb.login.transports.JSONP"),goog.require("fb.login.transports.NodeHttp"),goog.require("fb.login.transports.Popup"),goog.require("fb.login.transports.Redirect"),goog.require("fb.login.transports.XHR"),fb.login.AuthenticationManager=function(e,t,n,r){fb.core.util.EventEmitter.call(this,["auth_status"]),this.repoInfo_=e,this.authConn_=t,this.unauthConn_=n,this.onAuthStatus_=r,this.sessionManager_=new fb.login.SessionManager(e,[fb.core.storage.PersistentStorage,fb.core.storage.SessionStorage]),this.authData_=null,this.redirectRestart_=!1,this.resumeSession()},goog.inherits(fb.login.AuthenticationManager,fb.core.util.EventEmitter),fb.login.AuthenticationManager.prototype.getAuth=function(){return this.authData_||null},fb.login.AuthenticationManager.prototype.resumeSession=function(){var e=fb.core.storage.SessionStorage.get(fb.login.Constants.REDIR_REQUEST_ID_KEY),t=this;e&&this.finishOAuthRedirectLogin_();var n=this.sessionManager_.get();n&&n.token?(this.updateAuthStatus_(n),this.authConn_(n.token,function(e,r){t.authOnComplete_(e,r,!1,n.token,n)},function(e,n){t.authOnCancel_("resumeSession()",e,n)})):this.updateAuthStatus_(null)},fb.login.AuthenticationManager.prototype.authenticate=function(e,t,n,r,o){this.repoInfo_.isDemoHost()&&fb.core.util.warn("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com.");var i=this;this.authConn_(e,function(o,a){i.authOnComplete_(o,a,!0,e,t,n||{},r)},function(e,t){i.authOnCancel_("auth()",e,t,o)})},fb.login.AuthenticationManager.prototype.unauthenticate=function(e){var t=this;this.sessionManager_.clear(),t.updateAuthStatus_(null),this.unauthConn_(function(t,n){if("ok"===t)fb.core.util.callUserCallback(e,null);else{var r=(t||"error").toUpperCase(),o=r;n&&(o+=": "+n);var i=new Error(o);i.code=r,fb.core.util.callUserCallback(e,i)}})},fb.login.AuthenticationManager.prototype.authOnComplete_=function(e,t,n,r,o,i,a){if("ok"===e){if(n){var s=t.auth;o.auth=s,o.expires=t.expires,o.token=fb.util.jwt.isValidFormat(r)?r:"";var u=null;s&&fb.util.obj.contains(s,"uid")?u=fb.util.obj.get(s,"uid"):fb.util.obj.contains(o,"uid")&&(u=fb.util.obj.get(o,"uid")),o.uid=u;var l="custom";if(s&&fb.util.obj.contains(s,"provider")?l=fb.util.obj.get(s,"provider"):fb.util.obj.contains(o,"provider")&&(l=fb.util.obj.get(o,"provider")),o.provider=l,this.sessionManager_.clear(),fb.util.jwt.isValidFormat(r)){i=i||{};var c=fb.core.storage.PersistentStorage;"sessionOnly"===i[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE]&&(c=fb.core.storage.SessionStorage),"none"!==i[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE]&&this.sessionManager_.set(o,c)}this.updateAuthStatus_(o)}return void fb.core.util.callUserCallback(a,null,o)}this.handleBadAuthStatus_();var f=(e||"error").toUpperCase(),h=f;t&&(h+=": "+t);var p=new Error(h);p.code=f,fb.core.util.callUserCallback(a,p)},fb.login.AuthenticationManager.prototype.authOnCancel_=function(e,t,n,r){fb.core.util.warn(e+" was canceled: "+n),this.handleBadAuthStatus_();var o=new Error(n);o.code=t.toUpperCase(),fb.core.util.callUserCallback(r,o)},fb.login.AuthenticationManager.prototype.handleBadAuthStatus_=function(){this.sessionManager_.clear(),this.updateAuthStatus_(null)},fb.login.AuthenticationManager.prototype.authWithCredential=function(e,t,n,r){this.checkServerSettingsOrThrow();var o,i=new fb.login.RequestInfo(n||{},{},t||{});o=NODE_CLIENT?[fb.login.transports.NodeHttp]:[fb.login.transports.XHR,fb.login.transports.JSONP],this.authWithTransports_(o,"/auth/"+e,i,r)},fb.login.AuthenticationManager.prototype.authWithPopup=function(e,t,n){this.checkServerSettingsOrThrow();var r=[fb.login.transports.Popup,fb.login.transports.CordovaInAppBrowser],o=fb.login.RequestInfo.fromParams(t),i=625,a=625;return"anonymous"===e||"password"===e?void setTimeout(function(){fb.core.util.callUserCallback(n,fb.login.Errors.get("TRANSPORT_UNAVAILABLE"))},0):(o.transportOptions.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height="+a+",width="+i+",top="+("object"==typeof screen?.5*(screen.height-a):0)+",left="+("object"==typeof screen?.5*(screen.width-i):0),o.transportOptions.relay_url=fb.login.transports.util.getPopupChannelUrl(this.repoInfo_.namespace),o.transportOptions.requestWithCredential=goog.bind(this.requestWithCredential,this),void this.authWithTransports_(r,"/auth/"+e,o,n))},fb.login.AuthenticationManager.prototype.authWithRedirect=function(e,t,n){this.checkServerSettingsOrThrow();var r=[fb.login.transports.Redirect],o=fb.login.RequestInfo.fromParams(t);return"anonymous"===e||"firebase"===e?void fb.core.util.callUserCallback(n,fb.login.Errors.get("TRANSPORT_UNAVAILABLE")):(fb.core.storage.SessionStorage.set(fb.login.Constants.REDIR_CLIENT_OPTIONS_KEY,o.clientOptions),void this.authWithTransports_(r,"/auth/"+e,o,n))},fb.login.AuthenticationManager.prototype.finishOAuthRedirectLogin_=function(){var e=fb.core.storage.SessionStorage.get(fb.login.Constants.REDIR_REQUEST_ID_KEY);if(e){var t=fb.core.storage.SessionStorage.get(fb.login.Constants.REDIR_CLIENT_OPTIONS_KEY);fb.core.storage.SessionStorage.remove(fb.login.Constants.REDIR_REQUEST_ID_KEY),fb.core.storage.SessionStorage.remove(fb.login.Constants.REDIR_CLIENT_OPTIONS_KEY);var n=[fb.login.transports.XHR,fb.login.transports.JSONP],r={requestId:e,requestKey:fb.login.transports.util.extractRedirectCompletionHash(document.location.hash)},o={},i=new fb.login.RequestInfo(t,o,r);this.redirectRestart_=!0,fb.login.transports.util.replaceRedirectCompletionHash(),this.authWithTransports_(n,"/auth/session",i,function(e){this.redirectRestart_=!1}.bind(this))}},fb.login.AuthenticationManager.prototype.createUser=function(e,t){this.checkServerSettingsOrThrow();var n="/users",r=fb.login.RequestInfo.fromParams(e);r.serverParams._method="POST",this.requestWithCredential(n,r,function(e,n){e?fb.core.util.callUserCallback(t,e):fb.core.util.callUserCallback(t,e,n);
})},fb.login.AuthenticationManager.prototype.removeUser=function(e,t){var n=this;this.checkServerSettingsOrThrow();var r="/users/"+encodeURIComponent(e.email),o=fb.login.RequestInfo.fromParams(e);o.serverParams._method="DELETE",this.requestWithCredential(r,o,function(e,r){!e&&r&&r.uid&&n.authData_&&n.authData_.uid&&n.authData_.uid===r.uid&&n.unauthenticate(),fb.core.util.callUserCallback(t,e)})},fb.login.AuthenticationManager.prototype.changePassword=function(e,t){this.checkServerSettingsOrThrow();var n="/users/"+encodeURIComponent(e.email)+"/password",r=fb.login.RequestInfo.fromParams(e);r.serverParams._method="PUT",r.serverParams.password=e.newPassword,this.requestWithCredential(n,r,function(e,n){fb.core.util.callUserCallback(t,e)})},fb.login.AuthenticationManager.prototype.changeEmail=function(e,t){this.checkServerSettingsOrThrow();var n="/users/"+encodeURIComponent(e.oldEmail)+"/email",r=fb.login.RequestInfo.fromParams(e);r.serverParams._method="PUT",r.serverParams.email=e.newEmail,r.serverParams.password=e.password,this.requestWithCredential(n,r,function(e,n){fb.core.util.callUserCallback(t,e)})},fb.login.AuthenticationManager.prototype.resetPassword=function(e,t){this.checkServerSettingsOrThrow();var n="/users/"+encodeURIComponent(e.email)+"/password",r=fb.login.RequestInfo.fromParams(e);r.serverParams._method="POST",this.requestWithCredential(n,r,function(e,n){fb.core.util.callUserCallback(t,e)})},fb.login.AuthenticationManager.prototype.requestWithCredential=function(e,t,n){var r;r=NODE_CLIENT?[fb.login.transports.NodeHttp]:[fb.login.transports.XHR,fb.login.transports.JSONP],this.requestWithTransports_(r,e,t,n)},fb.login.AuthenticationManager.prototype.authWithTransports_=function(e,t,n,r){var o=this;this.requestWithTransports_(e,t,n,function(e,t){e||!(t&&t.token&&t.uid)?fb.core.util.callUserCallback(r,e||fb.login.Errors.get("UNKNOWN_ERROR")):(t=t,o.authenticate(t.token,t,n.clientOptions,function(e,t){e?fb.core.util.callUserCallback(r,e):fb.core.util.callUserCallback(r,null,t)}))})},fb.login.AuthenticationManager.prototype.requestWithTransports_=function(e,t,n,r){var o=goog.array.filter(e,function(e){return"function"==typeof e.isAvailable&&e.isAvailable()});if(0===o.length)return void setTimeout(function(){fb.core.util.callUserCallback(r,fb.login.Errors.get("TRANSPORT_UNAVAILABLE"))},0);var i=o.shift(),a=new i(n.transportOptions),s=fb.util.obj.clone(n.serverParams);s.v=this.versionString(),s.transport=a.classification(),s.suppress_status_codes=!0;var u=fb.login.transports.util.getBaseUrl()+"/"+this.repoInfo_.namespace+t;a.open(u,s,function(e,t){if(e)fb.core.util.callUserCallback(r,e);else if(t&&t.error){var n=new Error(t.error.message);n.code=t.error.code,n.details=t.error.details,fb.core.util.callUserCallback(r,n)}else fb.core.util.callUserCallback(r,null,t)})},fb.login.AuthenticationManager.prototype.updateAuthStatus_=function(e){var t=null!==this.authData_||null!==e;this.authData_=e,t&&this.trigger("auth_status",e),this.onAuthStatus_(null!==e)},fb.login.AuthenticationManager.prototype.getInitialEvent=function(e){return fb.core.util.assert("auth_status"===e,'initial event must be of type "auth_status"'),this.redirectRestart_?null:[this.authData_]},fb.login.AuthenticationManager.prototype.versionString=function(){return(NODE_CLIENT?"node-":"js-")+CLIENT_VERSION},fb.login.AuthenticationManager.prototype.checkServerSettingsOrThrow=function(){if(this.repoInfo_.isCustomHost()&&fb.login.Constants.SERVER_HOST===fb.login.Constants.DEFAULT_SERVER_HOST)throw new Error("This custom Firebase server ('"+this.repoInfo_.domain+"') does not support delegated login.")},goog.provide("fb.realtime.Transport"),goog.require("fb.core.RepoInfo"),fb.realtime.Transport=function(e,t,n){},fb.realtime.Transport.prototype.open=function(e,t){},fb.realtime.Transport.prototype.start=function(){},fb.realtime.Transport.prototype.close=function(){},fb.realtime.Transport.prototype.send=function(e){},fb.realtime.Transport.prototype.bytesReceived,fb.realtime.Transport.prototype.bytesSent,goog.provide("fb.realtime.Constants"),fb.realtime.Constants={PROTOCOL_VERSION:"5",VERSION_PARAM:"v",SESSION_PARAM:"s",REFERER_PARAM:"r",FORGE_REF:"f",FORGE_DOMAIN:"firebaseio.com"},goog.provide("fb.realtime.polling.PacketReceiver"),fb.realtime.polling.PacketReceiver=function(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null},fb.realtime.polling.PacketReceiver.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},fb.realtime.polling.PacketReceiver.prototype.handleResponse=function(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){var n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(var r=0;r<n.length;++r)if(n[r]){var o=this;fb.core.util.exceptionGuard(function(){o.onMessage_(n[r])})}if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(clearTimeout(this.onClose),this.onClose(),this.onClose=null);break}this.currentResponseNum++}},goog.provide("fb.realtime.BrowserPollConnection"),goog.require("fb.constants"),goog.require("fb.core.stats.StatsManager"),goog.require("fb.core.util"),goog.require("fb.core.util.CountedSet"),goog.require("fb.realtime.Constants"),goog.require("fb.realtime.Transport"),goog.require("fb.realtime.polling.PacketReceiver"),goog.require("fb.util.json");var FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;fb.realtime.BrowserPollConnection=function(e,t,n){this.connId=e,this.log_=fb.core.util.logWrapper(e),this.repoInfo=t,this.bytesSent=0,this.bytesReceived=0,this.stats_=fb.core.stats.StatsManager.getCollection(t),this.sessionId=n,this.everConnected_=!1,this.urlFn=function(e){t.needsQueryParam()&&(e.ns=t.namespace);var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r+"="+e[r]);return(t.secure?"https://":"http://")+t.internalHost+"/.lp?"+n.join("&")}},fb.realtime.BrowserPollConnection.prototype.open=function(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fb.realtime.polling.PacketReceiver(e),this.isClosed_=!1;var n=this;this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),fb.core.util.executeWhenDOMReady(function(){if(!n.isClosed_){n.scriptTagHolder=new FirebaseIFrameScriptHolder(function(e,t,r,o,i){if(n.incrementIncomingBytes_(arguments),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,e==FIREBASE_LONGPOLL_START_PARAM)n.id=t,n.password=r;else{if(e!==FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+e);t?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(t,function(){n.onClosed_()})):n.onClosed_()}},function(e,t){n.incrementIncomingBytes_(arguments),n.myPacketOrderer.handleResponse(e,t)},function(){n.onClosed_()},n.urlFn);var e={};e[FIREBASE_LONGPOLL_START_PARAM]="t",e[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=n.scriptTagHolder.uniqueCallbackIdentifier),e[fb.realtime.Constants.VERSION_PARAM]=fb.realtime.Constants.PROTOCOL_VERSION,n.sessionId&&(e[fb.realtime.Constants.SESSION_PARAM]=n.sessionId),!NODE_CLIENT&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(fb.realtime.Constants.FORGE_DOMAIN)&&(e[fb.realtime.Constants.REFERER_PARAM]=fb.realtime.Constants.FORGE_REF);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},fb.realtime.BrowserPollConnection.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},fb.realtime.BrowserPollConnection.forceAllow=function(){fb.realtime.BrowserPollConnection.forceAllow_=!0},fb.realtime.BrowserPollConnection.forceDisallow=function(){fb.realtime.BrowserPollConnection.forceDisallow_=!0},fb.realtime.BrowserPollConnection.isAvailable=function(){return fb.realtime.BrowserPollConnection.forceAllow_||!fb.realtime.BrowserPollConnection.forceDisallow_&&"undefined"!=typeof document&&!fb.core.util.isChromeExtensionContentScript()&&!fb.core.util.isWindowsStoreApp()},fb.realtime.BrowserPollConnection.prototype.markConnectionHealthy=function(){},fb.realtime.BrowserPollConnection.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},fb.realtime.BrowserPollConnection.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},fb.realtime.BrowserPollConnection.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},fb.realtime.BrowserPollConnection.prototype.send=function(e){var t=fb.util.json.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=fb.core.util.base64Encode(t),r=fb.core.util.splitStringBySize(n,MAX_PAYLOAD_SIZE),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},fb.realtime.BrowserPollConnection.prototype.addDisconnectPingFrame=function(e,t){if(!NODE_CLIENT){this.myDisconnFrame=document.createElement("iframe");var n={};n[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",n[FIREBASE_LONGPOLL_ID_PARAM]=e,n[FIREBASE_LONGPOLL_PW_PARAM]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},fb.realtime.BrowserPollConnection.prototype.incrementIncomingBytes_=function(e){var t=fb.util.json.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},FirebaseIFrameScriptHolder.prototype.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{var t=e.contentWindow.document;t||fb.core.util.log("No IE domain setting required")}catch(n){var r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},FirebaseIFrameScriptHolder.prototype.close=function(){if(this.alive=!1,this.myIFrame){this.myIFrame.doc.body.innerHTML="";var e=this;setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))}if(NODE_CLIENT&&this.myID){var t={};t[FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",t[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,t[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var n=this.urlFn(t);FirebaseIFrameScriptHolder.nodeRestRequest(n)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},FirebaseIFrameScriptHolder.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},FirebaseIFrameScriptHolder.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){var o=this.pendingSegs[0];if(!(o.d.length+SEG_HEADER_SIZE+n.length<=MAX_URL_DATA_SIZE))break;var i=this.pendingSegs.shift();n=n+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+r+"="+i.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+r+"="+i.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},FirebaseIFrameScriptHolder.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},FirebaseIFrameScriptHolder.prototype.addLongPollTag_=function(e,t){var n=this;n.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},o=setTimeout(r,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),i=function(){clearTimeout(o),r()};this.addTag(e,i)},FirebaseIFrameScriptHolder.prototype.addTag=function(e,t){if(NODE_CLIENT)this.doNodeLongPoll(e,t);else{var n=this;setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){fb.core.util.log("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(o){}},Math.floor(1))}},"undefined"!=typeof NODE_CLIENT&&NODE_CLIENT&&(FirebaseIFrameScriptHolder.request=null,FirebaseIFrameScriptHolder.nodeRestRequest=function(e,t){FirebaseIFrameScriptHolder.request||(FirebaseIFrameScriptHolder.request=require("request")),FirebaseIFrameScriptHolder.request(e,function(n,r,o){if(n)throw"Rest request for "+e.url+" failed.";t&&t(o)})},FirebaseIFrameScriptHolder.prototype.doNodeLongPoll=function(e,t){var n=this;FirebaseIFrameScriptHolder.nodeRestRequest({url:e,forever:!0},function(e){n.evalBody(e),t()})},FirebaseIFrameScriptHolder.prototype.evalBody=function(body){eval("var jsonpCB = function("+FIREBASE_LONGPOLL_COMMAND_CB_NAME+", "+FIREBASE_LONGPOLL_DATA_CB_NAME+") {"+body+"}"),jsonpCB(this.commandCB,this.onMessageCB)}),goog.provide("fb.realtime.WebSocketConnection"),goog.require("fb.constants"),goog.require("fb.core.stats.StatsManager"),goog.require("fb.core.storage"),goog.require("fb.core.util"),goog.require("fb.realtime.Constants"),goog.require("fb.realtime.Transport"),goog.require("fb.util.json");var WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;fb.WebSocket=null,NODE_CLIENT?(goog.require("fb.core.util.NodePatches"),fb.WebSocket=require("faye-websocket").Client):"undefined"!=typeof MozWebSocket?fb.WebSocket=MozWebSocket:"undefined"!=typeof WebSocket&&(fb.WebSocket=WebSocket),fb.realtime.WebSocketConnection=function(e,t,n){this.connId=e,this.log_=fb.core.util.logWrapper(this.connId),this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.stats_=fb.core.stats.StatsManager.getCollection(t),this.connURL=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?"+fb.realtime.Constants.VERSION_PARAM+"="+fb.realtime.Constants.PROTOCOL_VERSION,!NODE_CLIENT&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(fb.realtime.Constants.FORGE_DOMAIN)&&(this.connURL=this.connURL+"&"+fb.realtime.Constants.REFERER_PARAM+"="+fb.realtime.Constants.FORGE_REF),t.needsQueryParam()&&(this.connURL=this.connURL+"&ns="+t.namespace),n&&(this.connURL=this.connURL+"&"+fb.realtime.Constants.SESSION_PARAM+"="+n)},fb.realtime.WebSocketConnection.prototype.open=function(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fb.core.storage.PersistentStorage.set("previous_websocket_failure",!0);try{if(NODE_CLIENT){var n={headers:{"User-Agent":"Firebase/"+fb.realtime.Constants.PROTOCOL_VERSION+"/"+CLIENT_VERSION+"/"+process.platform+"/Node"}};this.mySock=new fb.WebSocket(this.connURL,[],n)}else this.mySock=new fb.WebSocket(this.connURL)}catch(r){this.log_("Error instantiating WebSocket.");var o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}var i=this;this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(e){i.handleIncomingFrame(e)},this.mySock.onerror=function(e){i.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&i.log_(t),i.onClosed_()}},fb.realtime.WebSocketConnection.prototype.start=function(){},fb.realtime.WebSocketConnection.forceDisallow=function(){fb.realtime.WebSocketConnection.forceDisallow_=!0},fb.realtime.WebSocketConnection.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==fb.WebSocket&&!fb.realtime.WebSocketConnection.forceDisallow_},fb.realtime.WebSocketConnection.responsesRequiredToBeHealthy=2,fb.realtime.WebSocketConnection.healthyTimeout=3e4,fb.realtime.WebSocketConnection.previouslyFailed=function(){return fb.core.storage.PersistentStorage.isInMemoryStorage||fb.core.storage.PersistentStorage.get("previous_websocket_failure")===!0},fb.realtime.WebSocketConnection.prototype.markConnectionHealthy=function(){fb.core.storage.PersistentStorage.remove("previous_websocket_failure")},fb.realtime.WebSocketConnection.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=fb.util.json.eval(t);this.onMessage(n)}},fb.realtime.WebSocketConnection.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},fb.realtime.WebSocketConnection.prototype.extractFrameCount_=function(e){if(fb.core.util.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},fb.realtime.WebSocketConnection.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},fb.realtime.WebSocketConnection.prototype.send=function(e){this.resetKeepAlive();var t=fb.util.json.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=fb.core.util.splitStringBySize(t,WEBSOCKET_MAX_FRAME_SIZE);n.length>1&&this.mySock.send(String(n.length));for(var r=0;r<n.length;r++)this.mySock.send(n[r])},fb.realtime.WebSocketConnection.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},fb.realtime.WebSocketConnection.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},fb.realtime.WebSocketConnection.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},fb.realtime.WebSocketConnection.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.mySock.send("0"),e.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))},goog.require("fb.constants"),goog.require("fb.realtime.BrowserPollConnection"),goog.require("fb.realtime.Transport"),goog.provide("fb.realtime.TransportManager"),goog.require("fb.realtime.WebSocketConnection"),fb.realtime.TransportManager=function(e){this.initTransports_(e)},fb.realtime.TransportManager.ALL_TRANSPORTS=[fb.realtime.BrowserPollConnection,fb.realtime.WebSocketConnection],fb.realtime.TransportManager.prototype.initTransports_=function(e){var t=fb.realtime.WebSocketConnection&&fb.realtime.WebSocketConnection.isAvailable(),n=t&&!fb.realtime.WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(t||fb.core.util.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[fb.realtime.WebSocketConnection];else{var r=this.transports_=[];fb.core.util.each(fb.realtime.TransportManager.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&r.push(t)})}},fb.realtime.TransportManager.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},fb.realtime.TransportManager.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},goog.provide("fb.realtime.Connection"),goog.require("fb.core.storage"),goog.require("fb.core.util"),goog.require("fb.realtime.Constants"),goog.require("fb.realtime.TransportManager");var UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10240,BYTES_RECEIVED_HEALTHY_OVERRIDE=102400,REALTIME_STATE_CONNECTING=0,REALTIME_STATE_CONNECTED=1,REALTIME_STATE_DISCONNECTED=2,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";fb.realtime.Connection=function(e,t,n,r,o,i){this.id=e,this.log_=fb.core.util.logWrapper("c:"+this.id+":"),this.onMessage_=n,this.onReady_=r,this.onDisconnect_=o,this.onKill_=i,this.repoInfo_=t,this.pendingDataMessages=[],this.connectionCount=0,this.transportManager_=new fb.realtime.TransportManager(t),this.state_=REALTIME_STATE_CONNECTING,this.log_("Connection created"),this.start_()},fb.realtime.Connection.prototype.start_=function(){var e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1;var r=this;setTimeout(function(){r.conn_&&r.conn_.open(t,n)},Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=setTimeout(function(){r.healthyTimeout_=null,r.isHealthy_||(r.conn_&&r.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(r.log_("Connection exceeded healthy timeout but has received "+r.conn_.bytesReceived+" bytes.  Marking connection healthy."),r.isHealthy_=!0,r.conn_.markConnectionHealthy()):r.conn_&&r.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?r.log_("Connection exceeded healthy timeout but has sent "+r.conn_.bytesSent+" bytes.  Leaving connection alive."):(r.log_("Closing unhealthy connection after timeout."),r.close()))},Math.floor(o)))},fb.realtime.Connection.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},fb.realtime.Connection.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},fb.realtime.Connection.prototype.connReceiver_=function(e){var t=this;return function(n){t.state_!=REALTIME_STATE_DISCONNECTED&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},fb.realtime.Connection.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},fb.realtime.Connection.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},fb.realtime.Connection.prototype.onSecondaryControl_=function(e){if(MESSAGE_TYPE in e){var t=e[MESSAGE_TYPE];t===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():t===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},fb.realtime.Connection.prototype.onSecondaryMessageReceived_=function(e){var t=fb.core.util.requireKey("t",e),n=fb.core.util.requireKey("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},fb.realtime.Connection.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))},fb.realtime.Connection.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},fb.realtime.Connection.prototype.onPrimaryMessageReceived_=function(e){var t=fb.core.util.requireKey("t",e),n=fb.core.util.requireKey("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},fb.realtime.Connection.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},fb.realtime.Connection.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},fb.realtime.Connection.prototype.onControl_=function(e){var t=fb.core.util.requireKey(MESSAGE_TYPE,e);if(MESSAGE_DATA in e){var n=e[MESSAGE_DATA];if(t===SERVER_HELLO)this.onHandshake_(n);else if(t===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===CONTROL_SHUTDOWN?this.onConnectionShutdown_(n):t===CONTROL_RESET?this.onReset_(n):t===CONTROL_ERROR?fb.core.util.error("Server Error: "+n):t===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fb.core.util.error("Unknown control packet command: "+t)}},fb.realtime.Connection.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),this.state_==REALTIME_STATE_CONNECTING&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fb.realtime.Constants.PROTOCOL_VERSION!==n&&fb.core.util.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},fb.realtime.Connection.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},fb.realtime.Connection.prototype.startUpgrade_=function(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n);var r=this;setTimeout(function(){r.secondaryConn_&&(r.log_("Timed out trying to upgrade."),r.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))},fb.realtime.Connection.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),this.state_===REALTIME_STATE_CONNECTED?this.close():(this.closeConnections_(),this.start_())},fb.realtime.Connection.prototype.onConnectionEstablished_=function(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=REALTIME_STATE_CONNECTED,this.onReady_&&(this.onReady_(t),this.onReady_=null);var n=this;0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeout(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))},fb.realtime.Connection.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||this.state_!==REALTIME_STATE_CONNECTED||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))},fb.realtime.Connection.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},fb.realtime.Connection.prototype.onConnectionLost_=function(e){this.conn_=null,e||this.state_!==REALTIME_STATE_CONNECTING?this.state_===REALTIME_STATE_CONNECTED&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fb.core.storage.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},fb.realtime.Connection.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},fb.realtime.Connection.prototype.sendData_=function(e){if(this.state_!==REALTIME_STATE_CONNECTED)throw"Connection is not connected";this.tx_.send(e)},fb.realtime.Connection.prototype.close=function(){this.state_!==REALTIME_STATE_DISCONNECTED&&(this.log_("Closing realtime connection."),this.state_=REALTIME_STATE_DISCONNECTED,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},fb.realtime.Connection.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},goog.provide("fb.core.PersistentConnection"),goog.require("fb.core.ServerActions"),goog.require("fb.core.util"),goog.require("fb.core.util.OnlineMonitor"),goog.require("fb.core.util.VisibilityMonitor"),goog.require("fb.login.util.environment"),goog.require("fb.realtime.Connection"),goog.require("fb.util.json"),goog.require("fb.util.jwt");var RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=3e5,RECONNECT_MAX_DELAY_FOR_ADMINS=3e4,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4;if(fb.core.PersistentConnection=function(e,t,n,r){this.id=fb.core.PersistentConnection.nextPersistentConnectionId_++,this.log_=fb.core.util.logWrapper("p:"+this.id+":"),this.interrupted_=!1,this.killed_=!1,this.listens_={},this.outstandingPuts_=[],this.outstandingPutCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.onDataUpdate_=t,this.onConnectStatus_=n,this.onServerInfoUpdate_=r,this.repoInfo_=e,this.securityDebugCallback_=null,this.requestCBHash_={},this.requestNumber_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,this.scheduleConnect_(0),fb.core.util.VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&fb.core.util.OnlineMonitor.getInstance().on("online",this.onOnline_,this)},fb.core.PersistentConnection.nextPersistentConnectionId_=0,fb.core.PersistentConnection.nextConnectionId_=0,fb.core.PersistentConnection.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,o={r:r,a:e,b:t};this.log_(fb.util.json.stringify(o)),
fb.core.util.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},fb.core.PersistentConnection.prototype.listen=function(e,t,n,r){var o=e.queryIdentifier(),i=e.path.toString();this.log_("Listen called for "+i+" "+o),this.listens_[i]=this.listens_[i]||{},fb.core.util.assert(!this.listens_[i][o],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[i][o]=a,this.connected_&&this.sendListen_(a)},fb.core.PersistentConnection.prototype.sendListen_=function(e){var t=e.query,n=t.path.toString(),r=t.queryIdentifier(),o=this;this.log_("Listen on "+n+" for "+r);var i={p:n},a="q";e.tag&&(i.q=t.queryObject(),i.t=e.tag),i.h=e.hashFn(),this.sendRequest(a,i,function(i){var a=i.d,s=i.s;o.warnOnListenWarnings_(a,t);var u=o.listens_[n]&&o.listens_[n][r];u===e&&(o.log_("listen response",i),"ok"!==s&&o.removeListen_(n,r),e.onComplete&&e.onComplete(s,a))})},fb.core.PersistentConnection.prototype.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&fb.util.obj.contains(e,"w")){var n=fb.util.obj.get(e,"w");if(goog.isArray(n)&&goog.array.contains(n,"no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();fb.core.util.warn("Using an unspecified index. Consider adding "+r+" at "+o+" to your security rules for better performance")}}},fb.core.PersistentConnection.prototype.auth=function(e,t,n){this.credential_={cred:e,firstRequestSent:!1,callback:t,cancelCallback:n},this.log_("Authenticating using credential: "+e),this.tryAuth(),this.reduceReconnectDelayIfAdminCredential_(e)},fb.core.PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t=40==e.length;(t||fb.util.jwt.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)},fb.core.PersistentConnection.prototype.unauth=function(e){delete this.credential_,this.connected_&&this.sendRequest("unauth",{},function(t){var n=t.s,r=t.d;e(n,r)})},fb.core.PersistentConnection.prototype.tryAuth=function(){var e=this.credential_,t=this;if(this.connected_&&e){var n={cred:e.cred};this.sendRequest("auth",n,function(n){var r=n.s,o=n.d||"error";"ok"!==r&&t.credential_===e&&delete t.credential_,e.firstRequestSent?"ok"!==r&&e.cancelCallback&&e.cancelCallback(r,o):(e.firstRequestSent=!0,e.callback&&e.callback(r,o))})}},fb.core.PersistentConnection.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r);var o=this.removeListen_(n,r);o&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},fb.core.PersistentConnection.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var o={p:e},i="n";r&&(o.q=n,o.t=r),this.sendRequest(i,o)},fb.core.PersistentConnection.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},fb.core.PersistentConnection.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},fb.core.PersistentConnection.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},fb.core.PersistentConnection.prototype.sendOnDisconnect_=function(e,t,n,r){var o=this,i={p:t,d:n};o.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},fb.core.PersistentConnection.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},fb.core.PersistentConnection.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},fb.core.PersistentConnection.prototype.putInternal=function(e,t,n,r,o){var i={p:t,d:n};goog.isDef(o)&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},fb.core.PersistentConnection.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),o&&o(r.s,r.d)})},fb.core.PersistentConnection.prototype.reportStats=function(e){if(this.connected_){var t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,function(e){var t=e.s;if("ok"!==t){var n=e.d;this.log_("reportStats","Error sending stats: "+n)}})}},fb.core.PersistentConnection.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+fb.util.json.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},fb.core.PersistentConnection.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):fb.core.util.error("Unrecognized action received from server: "+fb.util.json.stringify(e)+"\nAre you using the latest client?")},fb.core.PersistentConnection.prototype.onReady_=function(e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},fb.core.PersistentConnection.prototype.scheduleConnect_=function(e){fb.core.util.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_);var t=this;this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},fb.core.PersistentConnection.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},fb.core.PersistentConnection.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},fb.core.PersistentConnection.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)},fb.core.PersistentConnection.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=goog.bind(this.onDataMessage_,this),t=goog.bind(this.onReady_,this),n=goog.bind(this.onRealtimeDisconnect_,this),r=this.id+":"+fb.core.PersistentConnection.nextConnectionId_++,o=this;this.realtime_=new fb.realtime.Connection(r,this.repoInfo_,e,t,n,function(e){fb.core.util.warn(e+" ("+o.repoInfo_.toString()+")"),o.killed_=!0})}},fb.core.PersistentConnection.prototype.interrupt=function(){this.interrupted_=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},fb.core.PersistentConnection.prototype.resume=function(){this.interrupted_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)},fb.core.PersistentConnection.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},fb.core.PersistentConnection.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},fb.core.PersistentConnection.prototype.onListenRevoked_=function(e,t){var n;n=t?goog.array.map(t,function(e){return fb.core.util.ObjectToUniqueKey(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},fb.core.PersistentConnection.prototype.removeListen_=function(e,t){var n,r=new fb.core.util.Path(e).toString();return goog.isDef(this.listens_[r])?(n=this.listens_[r][t],delete this.listens_[r][t],0===goog.object.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},fb.core.PersistentConnection.prototype.onAuthRevoked_=function(e,t){var n=this.credential_;delete this.credential_,n&&n.cancelCallback&&n.cancelCallback(e,t)},fb.core.PersistentConnection.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!=typeof console},fb.core.PersistentConnection.prototype.restoreState_=function(){this.tryAuth();var e=this;goog.object.forEach(this.listens_,function(t,n){goog.object.forEach(t,function(t){e.sendListen_(t)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},fb.core.PersistentConnection.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+CLIENT_VERSION.replace(/\./g,"-")]=1,fb.login.util.environment.isMobileCordova()&&(e["framework.cordova"]=1),this.reportStats(e)},fb.core.PersistentConnection.prototype.shouldReconnect_=function(){var e=fb.core.util.OnlineMonitor.getInstance().currentlyOnline();return!this.killed_&&!this.interrupted_&&e},goog.provide("fb.api.INTERNAL"),goog.require("fb.core.PersistentConnection"),goog.require("fb.realtime.Connection"),goog.require("fb.login.transports.PopupReceiver"),goog.require("fb.login.Constants"),fb.api.INTERNAL={},fb.api.INTERNAL.forceLongPolling=function(){fb.realtime.WebSocketConnection.forceDisallow(),fb.realtime.BrowserPollConnection.forceAllow()},goog.exportProperty(fb.api.INTERNAL,"forceLongPolling",fb.api.INTERNAL.forceLongPolling),fb.api.INTERNAL.forceWebSockets=function(){fb.realtime.BrowserPollConnection.forceDisallow()},goog.exportProperty(fb.api.INTERNAL,"forceWebSockets",fb.api.INTERNAL.forceWebSockets),fb.api.INTERNAL.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},goog.exportProperty(fb.api.INTERNAL,"setSecurityDebugCallback",fb.api.INTERNAL.setSecurityDebugCallback),fb.api.INTERNAL.stats=function(e,t){e.repo.stats(t)},goog.exportProperty(fb.api.INTERNAL,"stats",fb.api.INTERNAL.stats),fb.api.INTERNAL.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},goog.exportProperty(fb.api.INTERNAL,"statsIncrementCounter",fb.api.INTERNAL.statsIncrementCounter),fb.api.INTERNAL.dataUpdateCount=function(e){return e.repo.dataUpdateCount},goog.exportProperty(fb.api.INTERNAL,"dataUpdateCount",fb.api.INTERNAL.dataUpdateCount),fb.api.INTERNAL.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)},goog.exportProperty(fb.api.INTERNAL,"interceptServerData",fb.api.INTERNAL.interceptServerData),fb.api.INTERNAL.onLoginPopupOpen=function(e){new fb.login.transports.PopupReceiver(e)},goog.exportProperty(fb.api.INTERNAL,"onPopupOpen",fb.api.INTERNAL.onLoginPopupOpen),fb.api.INTERNAL.setAuthenticationServer=function(e){fb.login.Constants.SERVER_HOST=e},goog.exportProperty(fb.api.INTERNAL,"setAuthenticationServer",fb.api.INTERNAL.setAuthenticationServer),goog.provide("fb.api.DataSnapshot"),goog.require("fb.core.snap"),goog.require("fb.core.util.SortedMap"),goog.require("fb.core.util.validation"),fb.api.DataSnapshot=function(e,t,n){this.node_=e,this.query_=t,this.index_=n},fb.api.DataSnapshot.prototype.val=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.val",0,0,arguments.length),this.node_.val()},goog.exportProperty(fb.api.DataSnapshot.prototype,"val",fb.api.DataSnapshot.prototype.val),fb.api.DataSnapshot.prototype.exportVal=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},goog.exportProperty(fb.api.DataSnapshot.prototype,"exportVal",fb.api.DataSnapshot.prototype.exportVal),fb.api.DataSnapshot.prototype.exists=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},goog.exportProperty(fb.api.DataSnapshot.prototype,"exists",fb.api.DataSnapshot.prototype.exists),fb.api.DataSnapshot.prototype.child=function(e){fb.util.validation.validateArgCount("Firebase.DataSnapshot.child",0,1,arguments.length),goog.isNumber(e)&&(e=String(e)),fb.core.util.validation.validatePathString("Firebase.DataSnapshot.child",1,e,!1);var t=new fb.core.util.Path(e),n=this.query_.child(t);return new fb.api.DataSnapshot(this.node_.getChild(t),n,fb.core.snap.PriorityIndex)},goog.exportProperty(fb.api.DataSnapshot.prototype,"child",fb.api.DataSnapshot.prototype.child),fb.api.DataSnapshot.prototype.hasChild=function(e){fb.util.validation.validateArgCount("Firebase.DataSnapshot.hasChild",1,1,arguments.length),fb.core.util.validation.validatePathString("Firebase.DataSnapshot.hasChild",1,e,!1);var t=new fb.core.util.Path(e);return!this.node_.getChild(t).isEmpty()},goog.exportProperty(fb.api.DataSnapshot.prototype,"hasChild",fb.api.DataSnapshot.prototype.hasChild),fb.api.DataSnapshot.prototype.getPriority=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},goog.exportProperty(fb.api.DataSnapshot.prototype,"getPriority",fb.api.DataSnapshot.prototype.getPriority),fb.api.DataSnapshot.prototype.forEach=function(e){if(fb.util.validation.validateArgCount("Firebase.DataSnapshot.forEach",1,1,arguments.length),fb.util.validation.validateCallback("Firebase.DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var t=this.node_,n=this;return!!t.forEachChild(this.index_,function(t,r){return e(new fb.api.DataSnapshot(r,n.query_.child(t),fb.core.snap.PriorityIndex))})},goog.exportProperty(fb.api.DataSnapshot.prototype,"forEach",fb.api.DataSnapshot.prototype.forEach),fb.api.DataSnapshot.prototype.hasChildren=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},goog.exportProperty(fb.api.DataSnapshot.prototype,"hasChildren",fb.api.DataSnapshot.prototype.hasChildren),fb.api.DataSnapshot.prototype.name=function(){return fb.core.util.warn("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),fb.util.validation.validateArgCount("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},goog.exportProperty(fb.api.DataSnapshot.prototype,"name",fb.api.DataSnapshot.prototype.name),fb.api.DataSnapshot.prototype.key=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.key",0,0,arguments.length),this.query_.key()},goog.exportProperty(fb.api.DataSnapshot.prototype,"key",fb.api.DataSnapshot.prototype.key),fb.api.DataSnapshot.prototype.numChildren=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},goog.exportProperty(fb.api.DataSnapshot.prototype,"numChildren",fb.api.DataSnapshot.prototype.numChildren),fb.api.DataSnapshot.prototype.ref=function(){return fb.util.validation.validateArgCount("Firebase.DataSnapshot.ref",0,0,arguments.length),this.query_},goog.exportProperty(fb.api.DataSnapshot.prototype,"ref",fb.api.DataSnapshot.prototype.ref),goog.provide("fb.core.Repo"),goog.require("fb.api.DataSnapshot"),goog.require("fb.core.PersistentConnection"),goog.require("fb.core.ReadonlyRestClient"),goog.require("fb.core.SnapshotHolder"),goog.require("fb.core.SparseSnapshotTree"),goog.require("fb.core.SyncTree"),goog.require("fb.core.stats.StatsCollection"),goog.require("fb.core.stats.StatsListener"),goog.require("fb.core.stats.StatsManager"),goog.require("fb.core.stats.StatsReporter"),goog.require("fb.core.util"),goog.require("fb.core.util.ServerValues"),goog.require("fb.core.util.Tree"),goog.require("fb.core.view.EventQueue"),goog.require("fb.login.AuthenticationManager"),goog.require("fb.util.json"),goog.require("fb.util.jwt"),goog.require("goog.string"),fb.core.Repo=function(e,t){this.repoInfo_=e,this.stats_=fb.core.stats.StatsManager.getCollection(e),this.eventQueue_=new fb.core.view.EventQueue,this.nextWriteId_=1,this.persistentConnection_=null,this.server_,t||fb.core.util.beingCrawled()?(this.server_=new fb.core.ReadonlyRestClient(this.repoInfo_,goog.bind(this.onDataUpdate_,this)),setTimeout(goog.bind(this.onConnectStatus_,this,!0),0)):(this.persistentConnection_=new fb.core.PersistentConnection(this.repoInfo_,goog.bind(this.onDataUpdate_,this),goog.bind(this.onConnectStatus_,this),goog.bind(this.onServerInfoUpdate_,this)),this.server_=this.persistentConnection_),this.statsReporter_=fb.core.stats.StatsManager.getOrCreateReporter(e,goog.bind(function(){return new fb.core.stats.StatsReporter(this.stats_,this.server_)},this)),this.transactions_init_(),this.infoData_=new fb.core.SnapshotHolder;var n=this;this.infoSyncTree_=new fb.core.SyncTree({startListening:function(e,t,r,o){var i=[],a=n.infoData_.getNode(e.path);return a.isEmpty()||(i=n.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){o("ok")},0)),i},stopListening:goog.nullFunction}),this.updateInfo_("connected",!1),this.onDisconnect_=new fb.core.SparseSnapshotTree,this.auth=new fb.login.AuthenticationManager(e,goog.bind(this.server_.auth,this.server_),goog.bind(this.server_.unauth,this.server_),goog.bind(this.onAuthStatus_,this)),this.dataUpdateCount=0,this.interceptServerDataCallback_=null,this.serverSyncTree_=new fb.core.SyncTree({startListening:function(e,t,r,o){return n.server_.listen(e,r,t,function(t,r){var i=o(t,r);n.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){n.server_.unlisten(e,t)}})},fb.core.Repo.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},fb.core.Repo.prototype.name=function(){return this.repoInfo_.namespace},fb.core.Repo.prototype.serverTime=function(){var e=this.infoData_.getNode(new fb.core.util.Path(".info/serverTimeOffset")),t=e.val()||0;return(new Date).getTime()+t},fb.core.Repo.prototype.generateServerValues=function(){return fb.core.util.ServerValues.generateWithValues({timestamp:this.serverTime()})},fb.core.Repo.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var o=new fb.core.util.Path(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var i=[];if(r)if(n){var a=goog.object.map(t,function(e){return fb.core.snap.NodeFromJSON(e)});i=this.serverSyncTree_.applyTaggedQueryMerge(o,a,r)}else{var s=fb.core.snap.NodeFromJSON(t);i=this.serverSyncTree_.applyTaggedQueryOverwrite(o,s,r)}else if(n){var u=goog.object.map(t,function(e){return fb.core.snap.NodeFromJSON(e)});i=this.serverSyncTree_.applyServerMerge(o,u)}else{var l=fb.core.snap.NodeFromJSON(t);i=this.serverSyncTree_.applyServerOverwrite(o,l)}var c=o;i.length>0&&(c=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(c,i)},fb.core.Repo.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},fb.core.Repo.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),e===!1&&this.runOnDisconnectEvents_()},fb.core.Repo.prototype.onServerInfoUpdate_=function(e){var t=this;fb.core.util.each(e,function(e,n){t.updateInfo_(n,e)})},fb.core.Repo.prototype.onAuthStatus_=function(e){this.updateInfo_("authenticated",e)},fb.core.Repo.prototype.updateInfo_=function(e,t){var n=new fb.core.util.Path("/.info/"+e),r=fb.core.snap.NodeFromJSON(t);this.infoData_.updateSnapshot(n,r);var o=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,o)},fb.core.Repo.prototype.getNextWriteId_=function(){return this.nextWriteId_++},fb.core.Repo.prototype.setWithPriority=function(e,t,n,r){this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),i=fb.core.snap.NodeFromJSON(t,n),a=fb.core.util.ServerValues.resolveDeferredValueSnapshot(i,o),s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(e,a,s,!0);this.eventQueue_.queueEvents(u);var l=this;this.server_.put(e.toString(),i.val(!0),function(t,n){var o="ok"===t;o||fb.core.util.warn("set at "+e+" failed: "+t);var i=l.serverSyncTree_.ackUserWrite(s,!o);l.eventQueue_.raiseEventsForChangedPath(e,i),l.callOnCompleteCallback(r,t,n)});var c=this.abortTransactions_(e);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},fb.core.Repo.prototype.update=function(e,t,n){this.log_("update",{path:e.toString(),value:t});var r=!0,o=this.generateServerValues(),i={};if(goog.object.forEach(t,function(e,t){r=!1;var n=fb.core.snap.NodeFromJSON(e);i[t]=fb.core.util.ServerValues.resolveDeferredValueSnapshot(n,o)}),r)fb.core.util.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserMerge(e,i,a);this.eventQueue_.queueEvents(s);var u=this;this.server_.merge(e.toString(),t,function(t,r){var o="ok"===t;o||fb.core.util.warn("update at "+e+" failed: "+t);var i=u.serverSyncTree_.ackUserWrite(a,!o),s=e;i.length>0&&(s=u.rerunTransactions_(e)),u.eventQueue_.raiseEventsForChangedPath(s,i),u.callOnCompleteCallback(n,t,r)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(e,[])}},fb.core.Repo.prototype.runOnDisconnectEvents_=function(){this.log_("onDisconnectEvents");var e=this,t=this.generateServerValues(),n=fb.core.util.ServerValues.resolveDeferredValueTree(this.onDisconnect_,t),r=[];n.forEachTree(fb.core.util.Path.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var o=e.abortTransactions_(t);e.rerunTransactions_(o)}),this.onDisconnect_=new fb.core.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(fb.core.util.Path.Empty,r)},fb.core.Repo.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,o){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,o)})},fb.core.Repo.prototype.onDisconnectSet=function(e,t,n){var r=this,o=fb.core.snap.NodeFromJSON(t);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,i){"ok"===t&&r.onDisconnect_.remember(e,o),r.callOnCompleteCallback(n,t,i)})},fb.core.Repo.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var o=this,i=fb.core.snap.NodeFromJSON(t,n);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,n){"ok"===t&&o.onDisconnect_.remember(e,i),o.callOnCompleteCallback(r,t,n)})},fb.core.Repo.prototype.onDisconnectUpdate=function(e,t,n){var r=!0;for(var o in t)r=!1;if(r)return fb.core.util.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");var i=this;this.server_.onDisconnectMerge(e.toString(),t,function(r,o){if("ok"===r)for(var a in t){var s=fb.core.snap.NodeFromJSON(t[a]);i.onDisconnect_.remember(e.child(a),s)}i.callOnCompleteCallback(n,r,o)})},fb.core.Repo.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},fb.core.Repo.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},fb.core.Repo.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt()},fb.core.Repo.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume()},fb.core.Repo.prototype.stats=function(e){if("undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new fb.core.stats.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=goog.array.reduce(goog.object.getKeys(t),function(e,t,n,r){return Math.max(t.length,e)},0);for(var r in t)for(var o=(t[r],r.length);n+2>o;o++)r+=" "}},fb.core.Repo.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},fb.core.Repo.prototype.log_=function(e){var t="";this.persistentConnection_&&(t=this.persistentConnection_.id+":"),fb.core.util.log(t,arguments)},fb.core.Repo.prototype.callOnCompleteCallback=function(e,t,n){e&&fb.core.util.exceptionGuard(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),o=r;n&&(o+=": "+n);var i=new Error(o);i.code=r,e(i)}})},goog.provide("fb.core.Repo_transaction"),goog.require("fb.core.Repo"),goog.require("fb.core.snap.PriorityIndex"),goog.require("fb.core.util"),fb.core.TransactionStatus={RUN:1,SENT:2,COMPLETED:3,SENT_NEEDS_ABORT:4,NEEDS_ABORT:5},fb.core.Repo.MAX_TRANSACTION_RETRIES_=25,fb.core.Transaction,fb.core.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new fb.core.util.Tree},fb.core.Repo.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var o=function(){},i=new Firebase(this,e);i.on("value",o);var a=function(){i.off("value",o)},s={path:e,update:t,onComplete:n,status:null,order:fb.core.util.LUIDGenerator(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(e);s.currentInputSnapshot=u;var l=s.update(u.val());if(goog.isDef(l)){fb.core.util.validation.validateFirebaseData("transaction failed: Data returned ",l,s.path),s.status=fb.core.TransactionStatus.RUN;var c=this.transactionQueueTree_.subTree(e),f=c.getValue()||[];f.push(s),c.setValue(f);var h;if("object"==typeof l&&null!==l&&fb.util.obj.contains(l,".priority"))h=fb.util.obj.get(l,".priority"),fb.core.util.assert(fb.core.util.validation.isValidPriority(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var p=this.serverSyncTree_.calcCompleteEventCache(e)||fb.core.snap.EMPTY_NODE;h=p.getPriority().val()}h=h;var d=this.generateServerValues(),g=fb.core.snap.NodeFromJSON(l,h),v=fb.core.util.ServerValues.resolveDeferredValueSnapshot(g,d);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(e,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,m),this.sendReadyTransactions_()}else if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var y=new fb.api.DataSnapshot(s.currentInputSnapshot,new Firebase(this,s.path),fb.core.snap.PriorityIndex);s.onComplete(null,!1,y)}},fb.core.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||fb.core.snap.EMPTY_NODE},fb.core.Repo.prototype.sendReadyTransactions_=function(e){var t=e||this.transactionQueueTree_;if(e||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);fb.core.util.assert(n.length>0,"Sending zero length transaction queue");var r=goog.array.every(n,function(e){return e.status===fb.core.TransactionStatus.RUN});r&&this.sendTransactionQueue_(t.path(),n)}else if(t.hasChildren()){var o=this;t.forEachChild(function(e){o.sendReadyTransactions_(e)})}},fb.core.Repo.prototype.sendTransactionQueue_=function(e,t){for(var n=goog.array.map(t,function(e){return e.currentWriteId}),r=this.getLatestState_(e,n),o=r,i=r.hash(),a=0;a<t.length;a++){var s=t[a];fb.core.util.assert(s.status===fb.core.TransactionStatus.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=fb.core.TransactionStatus.SENT,s.retryCount++;var u=fb.core.util.Path.relativePath(e,s.path);o=o.updateChild(u,s.currentOutputSnapshotRaw)}var l=o.val(!0),c=e,f=this;this.server_.put(c.toString(),l,function(n){f.log_("transaction put response",{path:c.toString(),status:n});var r=[];if("ok"===n){var o=[];for(a=0;a<t.length;a++){if(t[a].status=fb.core.TransactionStatus.COMPLETED,r=r.concat(f.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var i=t[a].currentOutputSnapshotResolved,s=new Firebase(f,t[a].path),u=new fb.api.DataSnapshot(i,s,fb.core.snap.PriorityIndex);o.push(goog.bind(t[a].onComplete,null,null,!0,u))}t[a].unwatcher()}for(f.pruneCompletedTransactionsBelowNode_(f.transactionQueueTree_.subTree(e)),f.sendReadyTransactions_(),f.eventQueue_.raiseEventsForChangedPath(e,r),a=0;a<o.length;a++)fb.core.util.exceptionGuard(o[a])}else{if("datastale"===n)for(a=0;a<t.length;a++)t[a].status===fb.core.TransactionStatus.SENT_NEEDS_ABORT?t[a].status=fb.core.TransactionStatus.NEEDS_ABORT:t[a].status=fb.core.TransactionStatus.RUN;else for(fb.core.util.warn("transaction at "+c.toString()+" failed: "+n),a=0;a<t.length;a++)t[a].status=fb.core.TransactionStatus.NEEDS_ABORT,t[a].abortReason=n;f.rerunTransactions_(e)}},i)},fb.core.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},fb.core.Repo.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],o=goog.array.map(e,function(e){return e.currentWriteId}),i=0;i<e.length;i++){var a,s=e[i],u=fb.core.util.Path.relativePath(t,s.path),l=!1;if(fb.core.util.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===fb.core.TransactionStatus.NEEDS_ABORT)l=!0,a=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===fb.core.TransactionStatus.RUN)if(s.retryCount>=fb.core.Repo.MAX_TRANSACTION_RETRIES_)l=!0,a="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var c=this.getLatestState_(s.path,o);s.currentInputSnapshot=c;var f=e[i].update(c.val());if(goog.isDef(f)){fb.core.util.validation.validateFirebaseData("transaction failed: Data returned ",f,s.path);var h=fb.core.snap.NodeFromJSON(f),p="object"==typeof f&&null!=f&&fb.util.obj.contains(f,".priority");p||(h=h.updatePriority(c.getPriority()));var d=s.currentWriteId,g=this.generateServerValues(),v=fb.core.util.ServerValues.resolveDeferredValueSnapshot(h,g);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_(),goog.array.remove(o,d),
r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,v,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(d,!0))}else l=!0,a="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],l&&(e[i].status=fb.core.TransactionStatus.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[i].unwatcher),e[i].onComplete))if("nodata"===a){var m=new Firebase(this,e[i].path),y=e[i].currentInputSnapshot,b=new fb.api.DataSnapshot(y,m,fb.core.snap.PriorityIndex);n.push(goog.bind(e[i].onComplete,null,null,!1,b))}else n.push(goog.bind(e[i].onComplete,null,new Error(a),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),i=0;i<n.length;i++)fb.core.util.exceptionGuard(n[i]);this.sendReadyTransactions_()}},fb.core.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},fb.core.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},fb.core.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=e.getValue();if(null!==n)for(var r=0;r<n.length;r++)t.push(n[r]);var o=this;e.forEachChild(function(e){o.aggregateTransactionQueuesForNode_(e,t)})},fb.core.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=e.getValue();if(t){for(var n=0,r=0;r<t.length;r++)t[r].status!==fb.core.TransactionStatus.COMPLETED&&(t[n]=t[r],n++);t.length=n,e.setValue(t.length>0?t:null)}var o=this;e.forEachChild(function(e){o.pruneCompletedTransactionsBelowNode_(e)})},fb.core.Repo.prototype.abortTransactions_=function(e){var t=this.getAncestorTransactionNode_(e).path(),n=this.transactionQueueTree_.subTree(e),r=this;return n.forEachAncestor(function(e){r.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(n),n.forEachDescendant(function(e){r.abortTransactionsOnNode_(e)}),t},fb.core.Repo.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],o=-1,i=0;i<t.length;i++)if(t[i].status===fb.core.TransactionStatus.SENT_NEEDS_ABORT);else if(t[i].status===fb.core.TransactionStatus.SENT)fb.core.util.assert(o===i-1,"All SENT items should be at beginning of queue."),o=i,t[i].status=fb.core.TransactionStatus.SENT_NEEDS_ABORT,t[i].abortReason="set";else if(fb.core.util.assert(t[i].status===fb.core.TransactionStatus.RUN,"Unexpected transaction status in abort"),t[i].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[i].currentWriteId,!0)),t[i].onComplete){var a=null;n.push(goog.bind(t[i].onComplete,null,new Error("set"),!1,a))}for(-1===o?e.setValue(null):t.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),i=0;i<n.length;i++)fb.core.util.exceptionGuard(n[i])}},goog.provide("fb.core.RepoManager"),goog.require("fb.core.Repo"),goog.require("fb.core.Repo_transaction"),goog.require("fb.util.obj"),fb.core.RepoManager=function(){this.repos_={},this.useRestClient_=!1},goog.addSingletonGetter(fb.core.RepoManager),fb.core.RepoManager.prototype.interrupt=function(){for(var e in this.repos_)this.repos_[e].interrupt()},goog.exportProperty(fb.core.RepoManager.prototype,"interrupt",fb.core.RepoManager.prototype.interrupt),fb.core.RepoManager.prototype.resume=function(){for(var e in this.repos_)this.repos_[e].resume()},goog.exportProperty(fb.core.RepoManager.prototype,"resume",fb.core.RepoManager.prototype.resume),fb.core.RepoManager.prototype.getRepo=function(e){var t=e.toString(),n=fb.util.obj.get(this.repos_,t);return n||(n=new fb.core.Repo(e,this.useRestClient_),this.repos_[t]=n),n},fb.core.RepoManager.prototype.forceRestClient=function(){this.useRestClient_=!0},goog.provide("fb.api.OnDisconnect"),goog.require("fb.constants"),goog.require("fb.core.Repo"),goog.require("fb.core.util.validation"),goog.require("fb.util.validation"),fb.api.OnDisconnect=function(e,t){this.repo_=e,this.path_=t},fb.api.OnDisconnect.prototype.cancel=function(e){fb.util.validation.validateArgCount("Firebase.onDisconnect().cancel",0,1,arguments.length),fb.util.validation.validateCallback("Firebase.onDisconnect().cancel",1,e,!0),this.repo_.onDisconnectCancel(this.path_,e||null)},goog.exportProperty(fb.api.OnDisconnect.prototype,"cancel",fb.api.OnDisconnect.prototype.cancel),fb.api.OnDisconnect.prototype.remove=function(e){fb.util.validation.validateArgCount("Firebase.onDisconnect().remove",0,1,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.onDisconnect().remove",this.path_),fb.util.validation.validateCallback("Firebase.onDisconnect().remove",1,e,!0),this.repo_.onDisconnectSet(this.path_,null,e)},goog.exportProperty(fb.api.OnDisconnect.prototype,"remove",fb.api.OnDisconnect.prototype.remove),fb.api.OnDisconnect.prototype.set=function(e,t){fb.util.validation.validateArgCount("Firebase.onDisconnect().set",1,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.onDisconnect().set",this.path_),fb.core.util.validation.validateFirebaseDataArg("Firebase.onDisconnect().set",1,e,this.path_,!1),fb.util.validation.validateCallback("Firebase.onDisconnect().set",2,t,!0),this.repo_.onDisconnectSet(this.path_,e,t)},goog.exportProperty(fb.api.OnDisconnect.prototype,"set",fb.api.OnDisconnect.prototype.set),fb.api.OnDisconnect.prototype.setWithPriority=function(e,t,n){fb.util.validation.validateArgCount("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.onDisconnect().setWithPriority",this.path_),fb.core.util.validation.validateFirebaseDataArg("Firebase.onDisconnect().setWithPriority",1,e,this.path_,!1),fb.core.util.validation.validatePriority("Firebase.onDisconnect().setWithPriority",2,t,!1),fb.util.validation.validateCallback("Firebase.onDisconnect().setWithPriority",3,n,!0),this.repo_.onDisconnectSetWithPriority(this.path_,e,t,n)},goog.exportProperty(fb.api.OnDisconnect.prototype,"setWithPriority",fb.api.OnDisconnect.prototype.setWithPriority),fb.api.OnDisconnect.prototype.update=function(e,t){if(fb.util.validation.validateArgCount("Firebase.onDisconnect().update",1,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.onDisconnect().update",this.path_),goog.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,fb.core.util.warn("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fb.core.util.validation.validateFirebaseMergeDataArg("Firebase.onDisconnect().update",1,e,this.path_,!1),fb.util.validation.validateCallback("Firebase.onDisconnect().update",2,t,!0),this.repo_.onDisconnectUpdate(this.path_,e,t)},goog.exportProperty(fb.api.OnDisconnect.prototype,"update",fb.api.OnDisconnect.prototype.update),goog.provide("fb.api.Query"),goog.require("fb.api.DataSnapshot"),goog.require("fb.core.snap"),goog.require("fb.core.util"),goog.require("fb.core.util.validation"),goog.require("fb.core.view.EventRegistration"),goog.require("fb.core.view.QueryParams"),goog.require("fb.util.json"),goog.require("fb.util.validation"),fb.api.Query=function(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r},fb.api.Query.prototype.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===fb.core.snap.KeyIndex){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){var i=e.getIndexStartName();if(i!=fb.core.util.MIN_NAME)throw new Error(r);if("string"!=typeof t)throw new Error(o)}if(e.hasEnd()){var a=e.getIndexEndName();if(a!=fb.core.util.MAX_NAME)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(e.getIndex()===fb.core.snap.PriorityIndex){if(null!=t&&!fb.core.util.validation.isValidPriority(t)||null!=n&&!fb.core.util.validation.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(fb.core.util.assert(e.getIndex()instanceof fb.core.snap.SubKeyIndex||e.getIndex()===fb.core.snap.ValueIndex,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},fb.api.Query.prototype.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},fb.api.Query.prototype.validateNoPreviousOrderByCall_=function(e){if(this.orderByCalled_===!0)throw new Error(e+": You can't combine multiple orderBy calls.")},fb.api.Query.prototype.getQueryParams=function(){return this.queryParams_},fb.api.Query.prototype.ref=function(){return fb.util.validation.validateArgCount("Query.ref",0,0,arguments.length),new Firebase(this.repo,this.path)},goog.exportProperty(fb.api.Query.prototype,"ref",fb.api.Query.prototype.ref),fb.api.Query.prototype.on=function(e,t,n,r){fb.util.validation.validateArgCount("Query.on",2,4,arguments.length),fb.core.util.validation.validateEventType("Query.on",1,e,!1),fb.util.validation.validateCallback("Query.on",2,t,!1);var o=this.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,o.cancel,o.context);else{var i={};i[e]=t,this.onChildEvent(i,o.cancel,o.context)}return t},goog.exportProperty(fb.api.Query.prototype,"on",fb.api.Query.prototype.on),fb.api.Query.prototype.onValueEvent=function(e,t,n){var r=new fb.core.view.ValueEventRegistration(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},fb.api.Query.prototype.onChildEvent=function(e,t,n){var r=new fb.core.view.ChildEventRegistration(e,t,n);this.repo.addEventCallbackForQuery(this,r)},fb.api.Query.prototype.off=function(e,t,n){fb.util.validation.validateArgCount("Query.off",0,3,arguments.length),fb.core.util.validation.validateEventType("Query.off",1,e,!0),fb.util.validation.validateCallback("Query.off",2,t,!0),fb.util.validation.validateContextObject("Query.off",3,n,!0);var r=null,o=null;if("value"===e){var i=t||null;r=new fb.core.view.ValueEventRegistration(i,null,n||null)}else e&&(t&&(o={},o[e]=t),r=new fb.core.view.ChildEventRegistration(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},goog.exportProperty(fb.api.Query.prototype,"off",fb.api.Query.prototype.off),fb.api.Query.prototype.once=function(e,t){fb.util.validation.validateArgCount("Query.once",2,4,arguments.length),fb.core.util.validation.validateEventType("Query.once",1,e,!1),fb.util.validation.validateCallback("Query.once",2,t,!1);var n=this.getCancelAndContextArgs_("Query.once",arguments[2],arguments[3]),r=this,o=!0,i=function(a){o&&(o=!1,r.off(e,i),goog.bind(t,n.context)(a))};this.on(e,i,function(t){r.off(e,i),n.cancel&&goog.bind(n.cancel,n.context)(t)})},goog.exportProperty(fb.api.Query.prototype,"once",fb.api.Query.prototype.once),fb.api.Query.prototype.limit=function(e){if(fb.core.util.warn("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),fb.util.validation.validateArgCount("Query.limit",1,1,arguments.length),!goog.isNumber(e)||Math.floor(e)!==e||0>=e)throw new Error("Query.limit: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var t=this.queryParams_.limit(e);return this.validateLimit_(t),new fb.api.Query(this.repo,this.path,t,this.orderByCalled_)},goog.exportProperty(fb.api.Query.prototype,"limit",fb.api.Query.prototype.limit),fb.api.Query.prototype.limitToFirst=function(e){if(fb.util.validation.validateArgCount("Query.limitToFirst",1,1,arguments.length),!goog.isNumber(e)||Math.floor(e)!==e||0>=e)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new fb.api.Query(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},goog.exportProperty(fb.api.Query.prototype,"limitToFirst",fb.api.Query.prototype.limitToFirst),fb.api.Query.prototype.limitToLast=function(e){if(fb.util.validation.validateArgCount("Query.limitToLast",1,1,arguments.length),!goog.isNumber(e)||Math.floor(e)!==e||0>=e)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new fb.api.Query(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},goog.exportProperty(fb.api.Query.prototype,"limitToLast",fb.api.Query.prototype.limitToLast),fb.api.Query.prototype.orderByChild=function(e){if(fb.util.validation.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');fb.core.util.validation.validateKey("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new fb.core.snap.SubKeyIndex(e),n=this.queryParams_.orderBy(t);return this.validateQueryEndpoints_(n),new fb.api.Query(this.repo,this.path,n,!0)},goog.exportProperty(fb.api.Query.prototype,"orderByChild",fb.api.Query.prototype.orderByChild),fb.api.Query.prototype.orderByKey=function(){fb.util.validation.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(fb.core.snap.KeyIndex);return this.validateQueryEndpoints_(e),new fb.api.Query(this.repo,this.path,e,!0)},goog.exportProperty(fb.api.Query.prototype,"orderByKey",fb.api.Query.prototype.orderByKey),fb.api.Query.prototype.orderByPriority=function(){fb.util.validation.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(fb.core.snap.PriorityIndex);return this.validateQueryEndpoints_(e),new fb.api.Query(this.repo,this.path,e,!0)},goog.exportProperty(fb.api.Query.prototype,"orderByPriority",fb.api.Query.prototype.orderByPriority),fb.api.Query.prototype.orderByValue=function(){fb.util.validation.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(fb.core.snap.ValueIndex);return this.validateQueryEndpoints_(e),new fb.api.Query(this.repo,this.path,e,!0)},goog.exportProperty(fb.api.Query.prototype,"orderByValue",fb.api.Query.prototype.orderByValue),fb.api.Query.prototype.startAt=function(e,t){fb.util.validation.validateArgCount("Query.startAt",0,2,arguments.length),fb.core.util.validation.validateFirebaseDataArg("Query.startAt",1,e,this.path,!0),fb.core.util.validation.validateKey("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(this.validateLimit_(n),this.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return goog.isDef(e)||(e=null,t=null),new fb.api.Query(this.repo,this.path,n,this.orderByCalled_)},goog.exportProperty(fb.api.Query.prototype,"startAt",fb.api.Query.prototype.startAt),fb.api.Query.prototype.endAt=function(e,t){fb.util.validation.validateArgCount("Query.endAt",0,2,arguments.length),fb.core.util.validation.validateFirebaseDataArg("Query.endAt",1,e,this.path,!0),fb.core.util.validation.validateKey("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(this.validateLimit_(n),this.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new fb.api.Query(this.repo,this.path,n,this.orderByCalled_)},goog.exportProperty(fb.api.Query.prototype,"endAt",fb.api.Query.prototype.endAt),fb.api.Query.prototype.equalTo=function(e,t){if(fb.util.validation.validateArgCount("Query.equalTo",1,2,arguments.length),fb.core.util.validation.validateFirebaseDataArg("Query.equalTo",1,e,this.path,!1),fb.core.util.validation.validateKey("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},goog.exportProperty(fb.api.Query.prototype,"equalTo",fb.api.Query.prototype.equalTo),fb.api.Query.prototype.toString=function(){return fb.util.validation.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},goog.exportProperty(fb.api.Query.prototype,"toString",fb.api.Query.prototype.toString),fb.api.Query.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},fb.api.Query.prototype.queryIdentifier=function(){var e=this.queryObject(),t=fb.core.util.ObjectToUniqueKey(e);return"{}"===t?"default":t},fb.api.Query.prototype.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,fb.util.validation.validateCallback(e,3,r.cancel,!0),r.context=n,fb.util.validation.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(fb.util.validation.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},goog.provide("fb.api.TEST_ACCESS"),goog.require("fb.core.PersistentConnection"),fb.api.TEST_ACCESS.DataConnection=fb.core.PersistentConnection,goog.exportProperty(fb.api.TEST_ACCESS,"DataConnection",fb.api.TEST_ACCESS.DataConnection),fb.core.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},goog.exportProperty(fb.api.TEST_ACCESS.DataConnection.prototype,"simpleListen",fb.api.TEST_ACCESS.DataConnection.prototype.simpleListen),fb.core.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},goog.exportProperty(fb.api.TEST_ACCESS.DataConnection.prototype,"echo",fb.api.TEST_ACCESS.DataConnection.prototype.echo),goog.exportProperty(fb.core.PersistentConnection.prototype,"interrupt",fb.core.PersistentConnection.prototype.interrupt),fb.api.TEST_ACCESS.RealTimeConnection=fb.realtime.Connection,goog.exportProperty(fb.api.TEST_ACCESS,"RealTimeConnection",fb.api.TEST_ACCESS.RealTimeConnection),goog.exportProperty(fb.realtime.Connection.prototype,"sendRequest",fb.realtime.Connection.prototype.sendRequest),goog.exportProperty(fb.realtime.Connection.prototype,"close",fb.realtime.Connection.prototype.close),fb.api.TEST_ACCESS.hijackHash=function(e){var t=fb.core.PersistentConnection.prototype.put;return fb.core.PersistentConnection.prototype.put=function(n,r,o,i){goog.isDef(i)&&(i=e()),t.call(this,n,r,o,i)},function(){fb.core.PersistentConnection.prototype.put=t}},goog.exportProperty(fb.api.TEST_ACCESS,"hijackHash",fb.api.TEST_ACCESS.hijackHash),fb.api.TEST_ACCESS.ConnectionTarget=fb.core.RepoInfo,goog.exportProperty(fb.api.TEST_ACCESS,"ConnectionTarget",fb.api.TEST_ACCESS.ConnectionTarget),fb.api.TEST_ACCESS.queryIdentifier=function(e){return e.queryIdentifier()},goog.exportProperty(fb.api.TEST_ACCESS,"queryIdentifier",fb.api.TEST_ACCESS.queryIdentifier),fb.api.TEST_ACCESS.listens=function(e){return e.repo.persistentConnection_.listens_},goog.exportProperty(fb.api.TEST_ACCESS,"listens",fb.api.TEST_ACCESS.listens),fb.api.TEST_ACCESS.forceRestClient=function(e){e.forceRestClient()},goog.exportProperty(fb.api.TEST_ACCESS,"forceRestClient",fb.api.TEST_ACCESS.forceRestClient),goog.provide("Firebase"),goog.require("fb.api.INTERNAL"),goog.require("fb.api.OnDisconnect"),goog.require("fb.api.Query"),goog.require("fb.api.TEST_ACCESS"),goog.require("fb.constants"),goog.require("fb.core.Repo"),goog.require("fb.core.RepoManager"),goog.require("fb.core.storage"),goog.require("fb.core.util"),goog.require("fb.core.util.nextPushId"),goog.require("fb.core.util.validation"),goog.require("goog.string"),Firebase=function(e,t){var n,r,o;if(e instanceof fb.core.Repo)n=e,r=t;else{fb.util.validation.validateArgCount("new Firebase",1,2,arguments.length);var i=fb.core.util.parseRepoInfo(arguments[0]),a=i.repoInfo;if(fb.core.util.validation.validateUrl("new Firebase",1,i),t)if(t instanceof fb.core.RepoManager)o=t;else{if(!goog.isString(t))throw new Error("Expected a valid Firebase.Context for second argument to new Firebase()");o=fb.core.RepoManager.getInstance(),a.persistenceKey=t}else o=fb.core.RepoManager.getInstance();n=o.getRepo(a),r=i.path}fb.api.Query.call(this,n,r,fb.core.view.QueryParams.DEFAULT,!1)},goog.inherits(Firebase,fb.api.Query),NODE_CLIENT&&(module.exports=Firebase),Firebase.prototype.name=function(){return fb.core.util.warn("Firebase.name() being deprecated. Please use Firebase.key() instead."),fb.util.validation.validateArgCount("Firebase.name",0,0,arguments.length),this.key()},Firebase.prototype.key=function(){return fb.util.validation.validateArgCount("Firebase.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Firebase.prototype.child=function(e){return fb.util.validation.validateArgCount("Firebase.child",1,1,arguments.length),goog.isNumber(e)?e=String(e):e instanceof fb.core.util.Path||(null===this.path.getFront()?fb.core.util.validation.validateRootPathString("Firebase.child",1,e,!1):fb.core.util.validation.validatePathString("Firebase.child",1,e,!1)),new Firebase(this.repo,this.path.child(e))},Firebase.prototype.parent=function(){fb.util.validation.validateArgCount("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new Firebase(this.repo,e)},Firebase.prototype.root=function(){fb.util.validation.validateArgCount("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.parent();)e=e.parent();return e},Firebase.prototype.set=function(e,t){fb.util.validation.validateArgCount("Firebase.set",1,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.set",this.path),fb.core.util.validation.validateFirebaseDataArg("Firebase.set",1,e,this.path,!1),fb.util.validation.validateCallback("Firebase.set",2,t,!0),this.repo.setWithPriority(this.path,e,null,t||null)},Firebase.prototype.update=function(e,t){if(fb.util.validation.validateArgCount("Firebase.update",1,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.update",this.path),goog.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,fb.core.util.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fb.core.util.validation.validateFirebaseMergeDataArg("Firebase.update",1,e,this.path,!1),fb.util.validation.validateCallback("Firebase.update",2,t,!0),this.repo.update(this.path,e,t||null)},Firebase.prototype.setWithPriority=function(e,t,n){if(fb.util.validation.validateArgCount("Firebase.setWithPriority",2,3,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.setWithPriority",this.path),fb.core.util.validation.validateFirebaseDataArg("Firebase.setWithPriority",1,e,this.path,!1),fb.core.util.validation.validatePriority("Firebase.setWithPriority",2,t,!1),fb.util.validation.validateCallback("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.repo.setWithPriority(this.path,e,t,n||null)},Firebase.prototype.remove=function(e){fb.util.validation.validateArgCount("Firebase.remove",0,1,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.remove",this.path),fb.util.validation.validateCallback("Firebase.remove",1,e,!0),this.set(null,e)},Firebase.prototype.transaction=function(e,t,n){if(fb.util.validation.validateArgCount("Firebase.transaction",1,3,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.transaction",this.path),fb.util.validation.validateCallback("Firebase.transaction",1,e,!1),fb.util.validation.validateCallback("Firebase.transaction",2,t,!0),fb.core.util.validation.validateBoolean("Firebase.transaction",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"==typeof n&&(n=!0),this.repo.startTransaction(this.path,e,t||null,n)},Firebase.prototype.setPriority=function(e,t){fb.util.validation.validateArgCount("Firebase.setPriority",1,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.setPriority",this.path),fb.core.util.validation.validatePriority("Firebase.setPriority",1,e,!1),fb.util.validation.validateCallback("Firebase.setPriority",2,t,!0),this.repo.setWithPriority(this.path.child(".priority"),e,null,t)},Firebase.prototype.push=function(e,t){fb.util.validation.validateArgCount("Firebase.push",0,2,arguments.length),fb.core.util.validation.validateWritablePath("Firebase.push",this.path),fb.core.util.validation.validateFirebaseDataArg("Firebase.push",1,e,this.path,!0),fb.util.validation.validateCallback("Firebase.push",2,t,!0);var n=this.repo.serverTime(),r=fb.core.util.nextPushId(n),o=this.child(r);return"undefined"!=typeof e&&null!==e&&o.set(e,t),o},Firebase.prototype.onDisconnect=function(){return fb.core.util.validation.validateWritablePath("Firebase.onDisconnect",this.path),new fb.api.OnDisconnect(this.repo,this.path)},Firebase.prototype.auth=function(e,t,n){fb.core.util.warn("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),fb.util.validation.validateArgCount("Firebase.auth",1,3,arguments.length),fb.core.util.validation.validateCredential("Firebase.auth",1,e,!1),fb.util.validation.validateCallback("Firebase.auth",2,t,!0),fb.util.validation.validateCallback("Firebase.auth",3,t,!0);var r={};r[fb.login.Constants.CLIENT_OPTION_SESSION_PERSISTENCE]="none",this.repo.auth.authenticate(e,{},r,t,n)},Firebase.prototype.unauth=function(e){fb.util.validation.validateArgCount("Firebase.unauth",0,1,arguments.length),fb.util.validation.validateCallback("Firebase.unauth",1,e,!0),this.repo.auth.unauthenticate(e)},Firebase.prototype.getAuth=function(){return fb.util.validation.validateArgCount("Firebase.getAuth",0,0,arguments.length),this.repo.auth.getAuth()},Firebase.prototype.onAuth=function(e,t){fb.util.validation.validateArgCount("Firebase.onAuth",1,2,arguments.length),fb.util.validation.validateCallback("Firebase.onAuth",1,e,!1),fb.util.validation.validateContextObject("Firebase.onAuth",2,t,!0),this.repo.auth.on("auth_status",e,t)},Firebase.prototype.offAuth=function(e,t){fb.util.validation.validateArgCount("Firebase.offAuth",1,2,arguments.length),fb.util.validation.validateCallback("Firebase.offAuth",1,e,!1),fb.util.validation.validateContextObject("Firebase.offAuth",2,t,!0),this.repo.auth.off("auth_status",e,t)},Firebase.prototype.authWithCustomToken=function(e,t,n){fb.util.validation.validateArgCount("Firebase.authWithCustomToken",2,3,arguments.length),fb.core.util.validation.validateCredential("Firebase.authWithCustomToken",1,e,!1),fb.util.validation.validateCallback("Firebase.authWithCustomToken",2,t,!1),fb.core.util.validation.validateObject("Firebase.authWithCustomToken",3,n,!0),this.repo.auth.authenticate(e,{},n||{},t)},Firebase.prototype.authWithOAuthPopup=function(e,t,n){fb.util.validation.validateArgCount("Firebase.authWithOAuthPopup",2,3,arguments.length),fb.core.util.validation.validateString("Firebase.authWithOAuthPopup",1,e,!1),fb.util.validation.validateCallback("Firebase.authWithOAuthPopup",2,t,!1),fb.core.util.validation.validateObject("Firebase.authWithOAuthPopup",3,n,!0),this.repo.auth.authWithPopup(e,n,t)},Firebase.prototype.authWithOAuthRedirect=function(e,t,n){fb.util.validation.validateArgCount("Firebase.authWithOAuthRedirect",2,3,arguments.length),fb.core.util.validation.validateString("Firebase.authWithOAuthRedirect",1,e,!1),fb.util.validation.validateCallback("Firebase.authWithOAuthRedirect",2,t,!1),fb.core.util.validation.validateObject("Firebase.authWithOAuthRedirect",3,n,!0),this.repo.auth.authWithRedirect(e,n,t)},Firebase.prototype.authWithOAuthToken=function(e,t,n,r){fb.util.validation.validateArgCount("Firebase.authWithOAuthToken",3,4,arguments.length),fb.core.util.validation.validateString("Firebase.authWithOAuthToken",1,e,!1),fb.util.validation.validateCallback("Firebase.authWithOAuthToken",3,n,!1),fb.core.util.validation.validateObject("Firebase.authWithOAuthToken",4,r,!0),goog.isString(t)?(fb.core.util.validation.validateString("Firebase.authWithOAuthToken",2,t,!1),this.repo.auth.authWithCredential(e+"/token",{access_token:t},r,n)):(fb.core.util.validation.validateObject("Firebase.authWithOAuthToken",2,t,!1),this.repo.auth.authWithCredential(e+"/token",t,r,n))},Firebase.prototype.authAnonymously=function(e,t){fb.util.validation.validateArgCount("Firebase.authAnonymously",1,2,arguments.length),fb.util.validation.validateCallback("Firebase.authAnonymously",1,e,!1),fb.core.util.validation.validateObject("Firebase.authAnonymously",2,t,!0),this.repo.auth.authWithCredential("anonymous",{},t,e)},Firebase.prototype.authWithPassword=function(e,t,n){fb.util.validation.validateArgCount("Firebase.authWithPassword",2,3,arguments.length),fb.core.util.validation.validateObject("Firebase.authWithPassword",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.authWithPassword",1,e,"email",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.authWithPassword",1,e,"password",!1,"string"),fb.util.validation.validateCallback("Firebase.authAnonymously",2,t,!1),fb.core.util.validation.validateObject("Firebase.authAnonymously",3,n,!0),this.repo.auth.authWithCredential("password",e,n,t)},Firebase.prototype.createUser=function(e,t){fb.util.validation.validateArgCount("Firebase.createUser",2,2,arguments.length),fb.core.util.validation.validateObject("Firebase.createUser",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.createUser",1,e,"email",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.createUser",1,e,"password",!1,"string"),fb.util.validation.validateCallback("Firebase.createUser",2,t,!1),this.repo.auth.createUser(e,t)},Firebase.prototype.removeUser=function(e,t){fb.util.validation.validateArgCount("Firebase.removeUser",2,2,arguments.length),fb.core.util.validation.validateObject("Firebase.removeUser",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.removeUser",1,e,"email",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.removeUser",1,e,"password",!1,"string"),fb.util.validation.validateCallback("Firebase.removeUser",2,t,!1),this.repo.auth.removeUser(e,t)},Firebase.prototype.changePassword=function(e,t){fb.util.validation.validateArgCount("Firebase.changePassword",2,2,arguments.length),fb.core.util.validation.validateObject("Firebase.changePassword",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.changePassword",1,e,"email",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.changePassword",1,e,"oldPassword",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.changePassword",1,e,"newPassword",!1,"string"),
fb.util.validation.validateCallback("Firebase.changePassword",2,t,!1),this.repo.auth.changePassword(e,t)},Firebase.prototype.changeEmail=function(e,t){fb.util.validation.validateArgCount("Firebase.changeEmail",2,2,arguments.length),fb.core.util.validation.validateObject("Firebase.changeEmail",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.changeEmail",1,e,"oldEmail",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.changeEmail",1,e,"newEmail",!1,"string"),fb.core.util.validation.validateObjectContainsKey("Firebase.changeEmail",1,e,"password",!1,"string"),fb.util.validation.validateCallback("Firebase.changeEmail",2,t,!1),this.repo.auth.changeEmail(e,t)},Firebase.prototype.resetPassword=function(e,t){fb.util.validation.validateArgCount("Firebase.resetPassword",2,2,arguments.length),fb.core.util.validation.validateObject("Firebase.resetPassword",1,e,!1),fb.core.util.validation.validateObjectContainsKey("Firebase.resetPassword",1,e,"email",!1,"string"),fb.util.validation.validateCallback("Firebase.resetPassword",2,t,!1),this.repo.auth.resetPassword(e,t)},Firebase.goOffline=function(){fb.util.validation.validateArgCount("Firebase.goOffline",0,0,arguments.length),fb.core.RepoManager.getInstance().interrupt()},Firebase.goOnline=function(){fb.util.validation.validateArgCount("Firebase.goOnline",0,0,arguments.length),fb.core.RepoManager.getInstance().resume()},Firebase.enableLogging=function(e,t){fb.core.util.assert(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?("undefined"!=typeof console&&("function"==typeof console.log?fb.core.util.logger=goog.bind(console.log,console):"object"==typeof console.log&&(fb.core.util.logger=function(e){})),t&&fb.core.storage.SessionStorage.set("logging_enabled",!0)):e?fb.core.util.logger=e:(fb.core.util.logger=null,fb.core.storage.SessionStorage.remove("logging_enabled"))},Firebase.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Firebase.SDK_VERSION=CLIENT_VERSION,Firebase.INTERNAL=fb.api.INTERNAL,Firebase.Context=fb.core.RepoManager,Firebase.TEST_ACCESS=fb.api.TEST_ACCESS,Firebase.SDK_VERSION="2.2.6","undefined"!=typeof module&&"undefined"!=typeof process)var RSVP=require("rsvp");var GeoFire=function(){"use strict";function e(e,t){return d(e),g(t),{".priority":t,g:t,l:e}}function t(e){if(null!==e&&e.hasOwnProperty("l")&&Array.isArray(e.l)&&2===e.l.length)return e.l;throw new Error("Unexpected GeoFire location object encountered: "+JSON.stringify(e))}var n=function(e){if(this.cancel=function(){"undefined"!=typeof t&&(t(),t=void 0)},"function"!=typeof e)throw new Error("callback must be a function");var t=e},r=function(n){if(this.ref=function(){return r},this.set=function(t,n){var o;if("string"==typeof t&&0!==t.length)o={},o[t]=n;else{if("object"!=typeof t)throw new Error("keyOrLocations must be a string or a mapping of key - location pairs.");if("undefined"!=typeof n)throw new Error("The location argument should not be used if you pass an object to set().");o=t}var i={};return Object.keys(o).forEach(function(t){p(t);var n=o[t];if(null===n)i[t]=null;else{d(n);var r=y(n);i[t]=e(n,r)}}),new RSVP.Promise(function(e,t){function n(n){null!==n?t("Error: Firebase synchronization failed: "+n):e()}r.update(i,n)})},this.get=function(e){return p(e),new RSVP.Promise(function(n,o){r.child(e).once("value",function(e){n(null===e.val()?null:t(e.val()))},function(e){o("Error: Firebase synchronization failed: "+e)})})},this.remove=function(e){return this.set(e,null)},this.query=function(e){return new P(r,e)},"[object Object]"!==Object.prototype.toString.call(n))throw new Error("firebaseRef must be an instance of Firebase");var r=n};r.distance=function(e,t){d(e),d(t);var n=6371,r=m(t[0]-e[0]),o=m(t[1]-e[1]),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(m(e[0]))*Math.cos(m(t[0]))*Math.sin(o/2)*Math.sin(o/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return n*a};var o=10,i="0123456789bcdefghjkmnpqrstuvwxyz",a=40007860,s=110574,u=5,l=22*u,c=6378137,f=.00669447819799,h=1e-12;Math.log2=Math.log2||function(e){return Math.log(e)/Math.log(2)};var p=function(e){var t;if("string"!=typeof e?t="key must be a string":0===e.length?t="key cannot be the empty string":1+o+e.length>755?t="key is too long to be stored in Firebase":/[\[\].#$\/\u0000-\u001F\u007F]/.test(e)&&(t="key cannot contain any of the following characters: . # $ ] [ /"),"undefined"!=typeof t)throw new Error("Invalid GeoFire key '"+e+"': "+t)},d=function(e){var t;if(Array.isArray(e))if(2!==e.length)t="expected array of length 2, got length "+e.length;else{var n=e[0],r=e[1];"number"!=typeof n||isNaN(n)?t="latitude must be a number":-90>n||n>90?t="latitude must be within the range [-90, 90]":"number"!=typeof r||isNaN(r)?t="longitude must be a number":(-180>r||r>180)&&(t="longitude must be within the range [-180, 180]")}else t="location must be an array";if("undefined"!=typeof t)throw new Error("Invalid GeoFire location '"+e+"': "+t)},g=function(e){var t;if("string"!=typeof e)t="geohash must be a string";else if(0===e.length)t="geohash cannot be the empty string";else for(var n=0,r=e.length;r>n;++n)-1===i.indexOf(e[n])&&(t='geohash cannot contain "'+e[n]+'"');if("undefined"!=typeof t)throw new Error("Invalid GeoFire geohash '"+e+"': "+t)},v=function(e,t){if("object"!=typeof e)throw new Error("query criteria must be an object");if("undefined"==typeof e.center&&"undefined"==typeof e.radius)throw new Error("radius and/or center must be specified");if(t&&("undefined"==typeof e.center||"undefined"==typeof e.radius))throw new Error("query criteria for a new query must contain both a center and a radius");for(var n=Object.keys(e),r=n.length,o=0;r>o;++o){var i=n[o];if("center"!==i&&"radius"!==i)throw new Error("Unexpected attribute '"+i+"'' found in query criteria")}if("undefined"!=typeof e.center&&d(e.center),"undefined"!=typeof e.radius){if("number"!=typeof e.radius||isNaN(e.radius))throw new Error("radius must be a number");if(e.radius<0)throw new Error("radius must be greater than or equal to 0")}},m=function(e){if("number"!=typeof e||isNaN(e))throw new Error("Error: degrees must be a number");return e*Math.PI/180},y=function(e,t){if(d(e),"undefined"!=typeof t){if("number"!=typeof t||isNaN(t))throw new Error("precision must be a number");if(0>=t)throw new Error("precision must be greater than 0");if(t>22)throw new Error("precision cannot be greater than 22");if(Math.round(t)!==t)throw new Error("precision must be an integer")}t=t||o;for(var n={min:-90,max:90},r={min:-180,max:180},a="",s=0,u=0,l=1;a.length<t;){var c=l?e[1]:e[0],f=l?r:n,h=(f.min+f.max)/2;c>h?(s=(s<<1)+1,f.min=h):(s=(s<<1)+0,f.max=h),l=!l,4>u?u++:(u=0,a+=i[s],s=0)}return a},b=function(e,t){var n=m(t),r=Math.cos(n)*c*Math.PI/180,o=1/Math.sqrt(1-f*Math.sin(n)*Math.sin(n)),i=r*o;return h>i?e>0?360:0:Math.min(360,e/i)},_=function(e,t){var n=b(e,t);return Math.abs(n)>1e-6?Math.max(1,Math.log2(360/n)):1},w=function(e){return Math.min(Math.log2(a/2/e),l)},E=function(e){if(180>=e&&e>=-180)return e;var t=e+180;return t>0?t%360-180:180- -t%360},C=function(e,t){var n=t/s,r=Math.min(90,e[0]+n),o=Math.max(-90,e[0]-n),i=2*Math.floor(w(t)),a=2*Math.floor(_(t,r))-1,u=2*Math.floor(_(t,o))-1;return Math.min(i,a,u,l)},S=function(e,t){var n=t/s,r=Math.min(90,e[0]+n),o=Math.max(-90,e[0]-n),i=b(t,r),a=b(t,o),u=Math.max(i,a);return[[e[0],e[1]],[e[0],E(e[1]-u)],[e[0],E(e[1]+u)],[r,e[1]],[r,E(e[1]-u)],[r,E(e[1]+u)],[o,e[1]],[o,E(e[1]-u)],[o,E(e[1]+u)]]},T=function(e,t){g(e);var n=Math.ceil(t/u);if(e.length<n)return[e,e+"~"];e=e.substring(0,n);var r=e.substring(0,e.length-1),o=i.indexOf(e.charAt(e.length-1)),a=t-r.length*u,s=u-a,l=o>>s<<s,c=l+(1<<s);return c>31?[r+i[l],r+"~"]:[r+i[l],r+i[c]]},A=function(e,t){d(e);var n=Math.max(1,C(e,t)),r=Math.ceil(n/u),o=S(e,t),i=o.map(function(e){return T(y(e,r),n)});return i.filter(function(e,t){return!i.some(function(n,r){return t>r&&e[0]===n[0]&&e[1]===n[1]})})},P=function(e,i){function a(e,t,n,r){T[e].forEach(function(e){"undefined"==typeof n||null===n?e(t,null,null):e(t,n,r)})}function s(){T.ready.forEach(function(e){e()})}function u(e){var t=e.split(":");if(2!==t.length)throw new Error("Invalid internal state! Not a valid geohash query: "+e);return t}function l(e){if(2!==e.length)throw new Error("Not a valid geohash query: "+e);return e[0]+":"+e[1]}function c(e,t){var n=S.orderByChild("g").startAt(e[0]).endAt(e[1]);n.off("child_added",t.childAddedCallback),n.off("child_removed",t.childRemovedCallback),n.off("child_changed",t.childChangedCallback),n.off("value",t.valueCallback)}function f(){for(var e=Object.keys($),t=e.length,n=0;t>n;++n){var r=e[n],o=$[r];if(o.active===!1){var i=u(r);c(i,o),delete $[r]}}for(e=Object.keys(x),t=e.length,n=0;t>n;++n){var a=e[n];if(!p(x[a].geohash)){if(x[a].isInQuery)throw new Error("Internal State error, trying to remove location that is still in query");delete x[a]}}O=!1,null!==L&&(clearTimeout(L),L=null)}function h(e,t){d(t);var n,i,s=x.hasOwnProperty(e)?x[e].isInQuery:!1,u=x.hasOwnProperty(e)?x[e].location:null;n=r.distance(t,D),i=I>=n,x[e]={location:t,distanceFromCenter:n,isInQuery:i,geohash:y(t,o)},i&&!s?a("key_entered",e,t,n):!i||null===u||t[0]===u[0]&&t[1]===u[1]?!i&&s&&a("key_exited",e,t,n):a("key_moved",e,t,n)}function p(e){for(var t=Object.keys($),n=t.length,r=0;n>r;++r){var o=t[r];if($.hasOwnProperty(o)){var i=u(o);if(e>=i[0]&&e<=i[1])return!0}}return!1}function g(e,t){var n=x[e];if(delete x[e],"undefined"!=typeof n&&n.isInQuery){var o=t?r.distance(t,D):null;a("key_exited",e,t,o)}}function m(e){h(e.key(),t(e.val()))}function b(e){h(e.key(),t(e.val()))}function _(e){var n=e.key();x.hasOwnProperty(n)&&S.child(n).once("value",function(e){var r=null===e.val()?null:t(e.val()),o=null!==r?y(r):null;p(o)||g(n,r)})}function w(e){var t=C.indexOf(e);t>-1&&C.splice(t,1),P=0===C.length,P&&s()}function E(){var e=A(D,1e3*I).map(l);e=e.filter(function(t,n){return e.indexOf(t)===n});for(var t=Object.keys($),n=t.length,r=0;n>r;++r){var o=t[r],i=e.indexOf(o);-1===i?$[o].active=!1:($[o].active=!0,e.splice(i,1))}O===!1&&Object.keys($).length>25&&(O=!0,L=setTimeout(f,10)),C=e.slice(),e.forEach(function(e){var t=u(e),n=S.orderByChild("g").startAt(t[0]).endAt(t[1]),r=n.on("child_added",m),o=n.on("child_removed",_),i=n.on("child_changed",b),a=n.on("value",function(){n.off("value",a),w(e)});$[e]={active:!0,childAddedCallback:r,childRemovedCallback:o,childChangedCallback:i,valueCallback:a}}),0===e.length&&w()}if(this.center=function(){return D},this.radius=function(){return I},this.updateCriteria=function(e){v(e),D=e.center||D,I=e.radius||I;for(var t=Object.keys(x),n=t.length,o=0;n>o;++o){var i=t[o],s=x[i],u=s.isInQuery;s.distanceFromCenter=r.distance(s.location,D),s.isInQuery=s.distanceFromCenter<=I,u&&!s.isInQuery?a("key_exited",i,s.location,s.distanceFromCenter):!u&&s.isInQuery&&a("key_entered",i,s.location,s.distanceFromCenter)}P=!1,E()},this.on=function(e,t){if(-1===["ready","key_entered","key_exited","key_moved"].indexOf(e))throw new Error('event type must be "ready", "key_entered", "key_exited", or "key_moved"');if("function"!=typeof t)throw new Error("callback must be a function");if(T[e].push(t),"key_entered"===e)for(var r=Object.keys(x),o=r.length,i=0;o>i;++i){var a=r[i],s=x[a];s.isInQuery&&t(a,s.location,s.distanceFromCenter)}return"ready"===e&&P&&t(),new n(function(){T[e].splice(T[e].indexOf(t),1)})},this.cancel=function(){T={ready:[],key_entered:[],key_exited:[],key_moved:[]};for(var e=Object.keys($),t=e.length,n=0;t>n;++n){var r=e[n],o=u(r);c(o,$[r]),delete $[r]}x={},clearInterval(N)},"[object Object]"!==Object.prototype.toString.call(e))throw new Error("firebaseRef must be an instance of Firebase");var C,S=e,T={ready:[],key_entered:[],key_exited:[],key_moved:[]},P=!1,x={},$={},O=!1,L=null,N=setInterval(function(){O===!1&&f()},1e4);v(i,!0);var D=i.center,I=i.radius;E()};return r}();"undefined"!=typeof module&&"undefined"!=typeof process&&(module.exports=GeoFire),function(e,t,n){var r=e.L,o={};o.version="0.7.3","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return e.L=r,this},e.L=o,o.Util={extend:function(e){var t,n,r,o,i=Array.prototype.slice.call(arguments,1);for(n=0,r=i.length;r>n;n++){o=i[n]||{};for(t in o)o.hasOwnProperty(t)&&(e[t]=o[t])}return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(n){return n[t]=n[t]||++e,n[t]}}(),invokeEach:function(e,t,n){var r,o;if("object"==typeof e){o=Array.prototype.slice.call(arguments,3);for(r in e)t.apply(n,[r,e[r]].concat(o));return!0}return!1},limitExecByInterval:function(e,t,n){var r,o;return function i(){var a=arguments;return r?void(o=!0):(r=!0,setTimeout(function(){r=!1,o&&(i.apply(n,a),o=!1)},t),void e.apply(n,a))}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return o.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=o.extend({},e.options,t),e.options},getParamString:function(e,t,n){var r=[];for(var o in e)r.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,r){var o=t[r];if(o===n)throw new Error("No value provided for variable "+e);return"function"==typeof o&&(o=o(t)),o})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,r,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!r;n++)r=e[o[n]+t];return r}function n(t){var n=+new Date,o=Math.max(0,16-(n-r));return r=n+o,e.setTimeout(t,o)}var r=0,i=e.requestAnimationFrame||t("RequestAnimationFrame")||n,a=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};o.Util.requestAnimFrame=function(t,r,a,s){return t=o.bind(t,r),a&&i===n?void t():i.call(e,t,s)},o.Util.cancelAnimFrame=function(t){t&&a.call(e,t)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var r=new n;r.constructor=t,t.prototype=r;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(t[i]=this[i]);e.statics&&(o.extend(t,e.statics),delete e.statics),e.includes&&(o.Util.extend.apply(null,[r].concat(e.includes)),delete e.includes),e.options&&r.options&&(e.options=o.extend({},r.options,e.options)),o.extend(r,e),r._initHooks=[];var a=this;return t.__super__=a.prototype,r.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;t>e;e++)r._initHooks[e].call(this)}},t},o.Class.include=function(e){o.extend(this.prototype,e)},o.Class.mergeOptions=function(e){o.extend(this.prototype.options,e)},o.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var i="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(e,t,n){if(o.Util.invokeEach(e,this.addEventListener,this,t,n))return this;var r,a,s,u,l,c,f,h=this[i]=this[i]||{},p=n&&n!==this&&o.stamp(n);for(e=o.Util.splitWords(e),r=0,a=e.length;a>r;r++)s={action:t,context:n||this},u=e[r],p?(l=u+"_idx",c=l+"_len",f=h[l]=h[l]||{},f[p]||(f[p]=[],h[c]=(h[c]||0)+1),f[p].push(s)):(h[u]=h[u]||[],h[u].push(s));return this},hasEventListeners:function(e){var t=this[i];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,n){if(!this[i])return this;if(!e)return this.clearAllEventListeners();if(o.Util.invokeEach(e,this.removeEventListener,this,t,n))return this;var r,a,s,u,l,c,f,h,p,d=this[i],g=n&&n!==this&&o.stamp(n);for(e=o.Util.splitWords(e),r=0,a=e.length;a>r;r++)if(s=e[r],c=s+"_idx",f=c+"_len",h=d[c],t){if(u=g&&h?h[g]:d[s]){for(l=u.length-1;l>=0;l--)u[l].action!==t||n&&u[l].context!==n||(p=u.splice(l,1),p[0].action=o.Util.falseFn);n&&h&&0===u.length&&(delete h[g],d[f]--)}}else delete d[s],delete d[c],delete d[f];return this},clearAllEventListeners:function(){return delete this[i],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var n,r,a,s,u,l=o.Util.extend({},t,{type:e,target:this}),c=this[i];if(c[e])for(n=c[e].slice(),r=0,a=n.length;a>r;r++)n[r].action.call(n[r].context,l);s=c[e+"_idx"];for(u in s)if(n=s[u].slice())for(r=0,a=n.length;a>r;r++)n[r].action.call(n[r].context,l);return this},addOneTimeEventListener:function(e,t,n){if(o.Util.invokeEach(e,this.addOneTimeEventListener,this,t,n))return this;var r=o.bind(function(){this.removeEventListener(e,t,n).removeEventListener(e,r,n)},this);return this.addEventListener(e,t,n).addEventListener(e,r,n)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var r="ActiveXObject"in e,i=r&&!t.addEventListener,a=navigator.userAgent.toLowerCase(),s=-1!==a.indexOf("webkit"),u=-1!==a.indexOf("chrome"),l=-1!==a.indexOf("phantom"),c=-1!==a.indexOf("android"),f=-1!==a.search("android [23]"),h=-1!==a.indexOf("gecko"),p=typeof orientation!=n+"",d=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints&&!e.PointerEvent,g=e.PointerEvent&&e.navigator.pointerEnabled&&e.navigator.maxTouchPoints||d,v="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,m=t.documentElement,y=r&&"transition"in m.style,b="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!f,_="MozPerspective"in m.style,w="OTransition"in m.style,E=!e.L_DISABLE_3D&&(y||b||_||w)&&!l,C=!e.L_NO_TOUCH&&!l&&function(){var e="ontouchstart";if(g||e in m)return!0;var n=t.createElement("div"),r=!1;return n.setAttribute?(n.setAttribute(e,"return;"),"function"==typeof n[e]&&(r=!0),n.removeAttribute(e),n=null,r):!1}();o.Browser={ie:r,ielt9:i,webkit:s,gecko:h&&!s&&!e.opera&&!r,android:c,android23:f,chrome:u,ie3d:y,webkit3d:b,gecko3d:_,opera3d:w,any3d:E,mobile:p,mobileWebkit:p&&s,mobileWebkit3d:p&&b,mobileOpera:p&&e.opera,touch:C,msPointer:d,pointer:g,retina:v}}(),o.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(e){return this.clone()._add(o.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(o.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=o.point(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=o.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=o.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(e,t,r){return e instanceof o.Point?e:o.Util.isArray(e)?new o.Point(e[0],e[1]):e===n||null===e?e:new o.Point(e,t,r)},o.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;o>r;r++)this.extend(n[r])},o.Bounds.prototype={extend:function(e){return e=o.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof o.Point?o.point(e):o.bounds(e),e instanceof o.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=o.bounds(e);var t=this.min,n=this.max,r=e.min,i=e.max,a=i.x>=t.x&&r.x<=n.x,s=i.y>=t.y&&r.y<=n.y;return a&&s},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(e,t){return!e||e instanceof o.Bounds?e:new o.Bounds(e,t)},o.Transformation=function(e,t,n,r){this._a=e,this._b=t,this._c=n,this._d=r},o.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new o.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},o.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,n){var r=e.style[n];if(!r&&e.currentStyle&&(r=e.currentStyle[n]),(!r||"auto"===r)&&t.defaultView){var o=t.defaultView.getComputedStyle(e,null);r=o?o[n]:null}return"auto"===r?null:r},getViewportOffset:function(e){var n,r=0,i=0,a=e,s=t.body,u=t.documentElement;do{if(r+=a.offsetTop||0,i+=a.offsetLeft||0,r+=parseInt(o.DomUtil.getStyle(a,"borderTopWidth"),10)||0,i+=parseInt(o.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,n=o.DomUtil.getStyle(a,"position"),a.offsetParent===s&&"absolute"===n)break;if("fixed"===n){r+=s.scrollTop||u.scrollTop||0,i+=s.scrollLeft||u.scrollLeft||0;break}if("relative"===n&&!a.offsetLeft){var l=o.DomUtil.getStyle(a,"width"),c=o.DomUtil.getStyle(a,"max-width"),f=a.getBoundingClientRect();("none"!==l||"none"!==c)&&(i+=f.left+a.clientLeft),r+=f.top+(s.scrollTop||u.scrollTop||0);break}a=a.offsetParent}while(a);a=e;do{if(a===s)break;r-=a.scrollTop||0,i-=a.scrollLeft||0,a=a.parentNode}while(a);return new o.Point(i,r)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(t.body,"direction")),o.DomUtil._docIsLtr},create:function(e,n,r){var o=t.createElement(e);return o.className=n,r&&r.appendChild(o),o},hasClass:function(e,t){if(e.classList!==n)return e.classList.contains(t);var r=o.DomUtil._getClass(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)},addClass:function(e,t){if(e.classList!==n)for(var r=o.Util.splitWords(t),i=0,a=r.length;a>i;i++)e.classList.add(r[i]);else if(!o.DomUtil.hasClass(e,t)){var s=o.DomUtil._getClass(e);o.DomUtil._setClass(e,(s?s+" ":"")+t)}},removeClass:function(e,t){e.classList!==n?e.classList.remove(t):o.DomUtil._setClass(e,o.Util.trim((" "+o.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===n?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===n?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(o){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}},testProp:function(e){for(var n=t.documentElement.style,r=0;r<e.length;r++)if(e[r]in n)return e[r];return!1},getTranslateString:function(e){var t=o.Browser.webkit3d,n="translate"+(t?"3d":"")+"(",r=(t?",0":"")+")";return n+e.x+"px,"+e.y+"px"+r},getScaleString:function(e,t){var n=o.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),r=" scale("+e+") ";return n+r},setPosition:function(e,t,n){e._leaflet_pos=t,!n&&o.Browser.any3d?e.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(e,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(e,"selectstart",o.DomEvent.preventDefault)}});else{var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(n){var e=t.documentElement.style;this._userSelect=e[n],e[n]="none"}},enableTextSelection:function(){n&&(t.documentElement.style[n]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(e,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(e,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(e,t,r){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,r!==n&&(this.alt=parseFloat(r))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(e){if(!e)return!1;e=o.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=o.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+o.Util.formatNum(this.lat,e)+", "+o.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=o.latLng(e);var t=6378137,n=o.LatLng.DEG_TO_RAD,r=(e.lat-this.lat)*n,i=(e.lng-this.lng)*n,a=this.lat*n,s=e.lat*n,u=Math.sin(r/2),l=Math.sin(i/2),c=u*u+l*l*Math.cos(a)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(e,t){var n=this.lng;return e=e||-180,t=t||180,n=(n+t)%(t-e)+(e>n||n===t?t:e),new o.LatLng(this.lat,n)}},o.latLng=function(e,t){return e instanceof o.LatLng?e:o.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new o.LatLng(e[0],e[1],e[2]):null:e===n||null===e?e:"object"==typeof e&&"lat"in e?new o.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===n?null:new o.LatLng(e,t)},o.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;o>r;r++)this.extend(n[r])},o.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=o.latLng(e);return e=null!==t?t:o.latLngBounds(e),e instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new o.LatLng(e.lat,e.lng),this._northEast=new o.LatLng(e.lat,e.lng)):e instanceof o.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new o.LatLngBounds(new o.LatLng(t.lat-r,t.lng-i),new o.LatLng(n.lat+r,n.lng+i))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof o.LatLng?o.latLng(e):o.latLngBounds(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof o.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=o.latLngBounds(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),a=i.lat>=t.lat&&r.lat<=n.lat,s=i.lng>=t.lng&&r.lng<=n.lng;return a&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=o.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(e,t){return!e||e instanceof o.LatLngBounds?e:new o.LatLngBounds(e,t)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=e.lng*t,a=r*t;return a=Math.log(Math.tan(Math.PI/4+a/2)),new o.Point(i,a)},unproject:function(e){var t=o.LatLng.RAD_TO_DEG,n=e.x*t,r=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new o.LatLng(r,n)}},o.Projection.LonLat={project:function(e){return new o.Point(e.lng,e.lat)},unproject:function(e){return new o.LatLng(e.y,e.x)}},o.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return o.point(t,t)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),n=6378137;return t.multiplyBy(n)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(e,t){t=o.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==n&&this.setView(o.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===n?this.getZoom():t,this._resetView(o.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),a=e instanceof o.Point?e:this.latLngToContainerPoint(e),s=a.subtract(i).multiplyBy(1-1/r),u=this.containerPointToLatLng(i.add(s));return this.setView(u,t,{zoom:n})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():o.latLngBounds(e);var n=o.point(t.paddingTopLeft||t.padding||[0,0]),r=o.point(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r)),a=r.subtract(n).divideBy(2),s=this.project(e.getSouthWest(),i),u=this.project(e.getNorthEast(),i),l=this.unproject(s.add(u).divideBy(2).add(a),i);
return i=t&&t.maxZoom?Math.min(t.maxZoom,i):i,this.setView(l,i,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(o.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=o.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var n=this.getCenter(),r=this._limitCenter(n,this._zoom,e);return n.equals(r)?this:this.panTo(r,t)},addLayer:function(e){var t=o.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&e instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var t=o.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&e instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return e?o.stamp(e)in this._layers:!1},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=o.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),r=t.divideBy(2).round(),i=n.divideBy(2).round(),a=r.subtract(i);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=n}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new o.LatLngBounds(t,n)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=o.latLngBounds(e);var r,i=this.getMinZoom()-(t?1:0),a=this.getMaxZoom(),s=this.getSize(),u=e.getNorthWest(),l=e.getSouthEast(),c=!0;n=o.point(n||[0,0]);do i++,r=this.project(l,i).subtract(this.project(u,i)).add(n),c=t?r.x<s.x||r.y<s.y:s.contains(r);while(c&&a>=i);return c&&t?null:t?i:i-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new o.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===n?this._zoom:t,this.options.crs.latLngToPoint(o.latLng(e),t)},unproject:function(e,t){return t=t===n?this._zoom:t,this.options.crs.pointToLatLng(o.point(e),t)},layerPointToLatLng:function(e){var t=o.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(o.latLng(e))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return o.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return o.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(o.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(e)))},mouseEventToContainerPoint:function(e){return o.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=o.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;o.DomUtil.addClass(e,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=o.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(e.markerPane,t),o.DomUtil.addClass(e.shadowPane,t),o.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return o.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?o.Util.isArray(e)?e:[e]:[];for(var t=0,n=e.length;n>t;t++)this.addLayer(e[t])},_resetView:function(e,t,n,r){var i=this._zoom!==t;r||(this.fire("movestart"),i&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),n?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),a&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(i||r)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(e){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,r=-(1/0),o=this._getZoomSpan();for(e in this._zoomBoundLayers){var i=this._zoomBoundLayers[e];isNaN(i.options.minZoom)||(t=Math.min(t,i.options.minZoom)),isNaN(i.options.maxZoom)||(r=Math.max(r,i.options.maxZoom))}e===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=r,this._layersMinZoom=t),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(o.DomEvent){t=t||"on",o.DomEvent[t](this._container,"click",this._onMouseClick,this);var n,r,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,r=i.length;r>n;n++)o.DomEvent[t](this._container,i[n],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!o.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&o.DomEvent.preventDefault(e);var n=this.mouseEventToContainerPoint(e),r=this.containerPointToLayerPoint(n),i=this.layerPointToLatLng(r);this.fire(t,{latlng:i,layerPoint:r,containerPoint:n,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),a=new o.Bounds(r.subtract(i),r.add(i)),s=this._getBoundsOffset(a,n,t);return this.unproject(r.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new o.Bounds(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=this.project(t.getNorthWest(),n).subtract(e.min),i=this.project(t.getSouthEast(),n).subtract(e.max),a=this._rebound(r.x,-i.x),s=this._rebound(r.y,-i.y);return new o.Point(a,s)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),o.map=function(e,t){return new o.Map(e,t)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=this.R_MAJOR,a=this.R_MINOR,s=e.lng*t*i,u=r*t,l=a/i,c=Math.sqrt(1-l*l),f=c*Math.sin(u);f=Math.pow((1-f)/(1+f),.5*c);var h=Math.tan(.5*(.5*Math.PI-u))/f;return u=-i*Math.log(h),new o.Point(s,u)},unproject:function(e){for(var t,n=o.LatLng.RAD_TO_DEG,r=this.R_MAJOR,i=this.R_MINOR,a=e.x*n/r,s=i/r,u=Math.sqrt(1-s*s),l=Math.exp(-e.y/r),c=Math.PI/2-2*Math.atan(l),f=15,h=1e-7,p=f,d=.1;Math.abs(d)>h&&--p>0;)t=u*Math.sin(c),d=Math.PI/2-2*Math.atan(l*Math.pow((1-t)/(1+t),.5*u))-c,c+=d;return new o.LatLng(c*n,a)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var e=o.Projection.Mercator,t=e.R_MAJOR,n=.5/(Math.PI*t);return new o.Transformation(n,.5,-n,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(e,t){t=o.setOptions(this,t),t.detectRetina&&o.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=o.latLngBounds(t.bounds)),this._url=e;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var n,r,o,i=e.children,a=-t(1/0,-(1/0));for(r=0,o=i.length;o>r;r++)i[r]!==this._container&&(n=parseInt(i[r].style.zIndex,10),isNaN(n)||(a=t(a,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(o.Browser.ielt9)for(e in t)o.DomUtil.setOpacity(t[e],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",t,this._container),this._tileContainer=o.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,r=this.options.tileSize;return n&&t>n&&(r=Math.round(e.getZoomScale(t)/e.getZoomScale(n)*r)),r},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),n=e.getZoom(),r=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var i=o.bounds(t.min.divideBy(r)._floor(),t.max.divideBy(r)._floor());this._addTilesFromCenterOut(i),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(i)}}},_addTilesFromCenterOut:function(e){var n,r,i,a=[],s=e.getCenter();for(n=e.min.y;n<=e.max.y;n++)for(r=e.min.x;r<=e.max.x;r++)i=new o.Point(r,n),this._tileShouldBeLoaded(i)&&a.push(i);var u=a.length;if(0!==u){a.sort(function(e,t){return e.distanceTo(s)-t.distanceTo(s)});var l=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u,r=0;u>r;r++)this._addTile(a[r],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var n=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=n.x)||e.y<0||e.y>=n.y)return!1}if(t.bounds){var r=t.tileSize,o=e.multiplyBy(r),i=o.add([r,r]),a=this._map.unproject(o),s=this._map.unproject(i);if(t.continuousWorld||t.noWrap||(a=a.wrap(),s=s.wrap()),!t.bounds.intersects([a,s]))return!1}return!0},_removeOtherTiles:function(e){var t,n,r,o;for(o in this._tiles)t=o.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(n<e.min.x||n>e.max.x||r<e.min.y||r>e.max.y)&&this._removeTile(o)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(o.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),o.Browser.android||(t.onload=null,t.src=o.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var n=this._getTilePos(e),r=this._getTile();o.DomUtil.setPosition(r,n,o.Browser.chrome),this._tiles[e.x+":"+e.y]=r,this._loadTile(r,e),r.parentNode!==this._tileContainer&&t.appendChild(r)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this._getTileSize();return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return o.Util.template(this._url,o.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,t=e.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=o.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==n&&o.DomUtil.setOpacity(e,this.options.opacity),o.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),o.tileLayer=function(e,t){return new o.TileLayer(e,t)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var n=o.extend({},this.defaultWmsParams),r=t.tileSize||this.options.tileSize;t.detectRetina&&o.Browser.retina?n.width=n.height=2*r:n.width=n.height=r;for(var i in t)this.options.hasOwnProperty(i)||"crs"===i||(n[i]=t[i]);this.wmsParams=n,o.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,n=this.options.tileSize,r=e.multiplyBy(n),i=r.add([n,n]),a=this._crs.project(t.unproject(r,e.z)),s=this._crs.project(t.unproject(i,e.z)),u=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[s.y,a.x,a.y,s.x].join(","):[a.x,s.y,s.x,a.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(e)});return l+o.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+u},setParams:function(e,t){return o.extend(this.wmsParams,e),t||this.redraw(),this}}),o.tileLayer.wms=function(e,t){return new o.TileLayer.WMS(e,t)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(e){o.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=o.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=o.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),o.tileLayer.canvas=function(e){return new o.TileLayer.Canvas(e)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(e,t,n){this._url=e,this._bounds=o.latLngBounds(t),o.setOptions(this,n)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&o.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,n=this._image,r=t.getZoomScale(e.zoom),i=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),s=t._latLngToNewLayerPoint(i,e.zoom,e.center),u=t._latLngToNewLayerPoint(a,e.zoom,e.center)._subtract(s),l=s._add(u._multiplyBy(.5*(1-1/r)));n.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+r+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);o.DomUtil.setPosition(e,t),e.style.width=n.x+"px",e.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(e,t,n){return new o.ImageOverlay(e,t,n)},o.Icon=o.Class.extend({options:{className:""},initialize:function(e){o.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r;return r=t&&"IMG"===t.tagName?this._createImg(n,t):this._createImg(n),this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var n,r=this.options,i=o.point(r[t+"Size"]);n="shadow"===t?o.point(r.shadowAnchor||r.iconAnchor):o.point(r.iconAnchor),!n&&i&&(n=i.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+r.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,n){return n=n||t.createElement("img"),n.src=e,n},_getIconUrl:function(e){return o.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),o.icon=function(e){return new o.Icon(e)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];o.Browser.retina&&"icon"===e&&(e+="-2x");var n=o.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+".png"}}),o.Icon.Default.imagePath=function(){var e,n,r,o,i,a=t.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,n=a.length;n>e;e++)if(r=a[e].src,o=r.match(s))return i=r.split(s)[0],(i?i+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){o.setOptions(this,t),this._latlng=o.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=o.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t=this._map,n=t.options.zoomAnimation&&t.options.markerZoomAnimation,r=n?"leaflet-zoom-animated":"leaflet-zoom-hide",i=e.icon.createIcon(this._icon),a=!1;i!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(i.title=e.title),e.alt&&(i.alt=e.alt)),o.DomUtil.addClass(i,r),e.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),e.riseOnHover&&o.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var s=e.icon.createShadow(this._shadow),u=!1;s!==this._shadow&&(this._removeShadow(),u=!0),s&&o.DomUtil.addClass(s,r),this._shadow=s,e.opacity<1&&this._updateOpacity();var l=this._map._panes;a&&l.markerPane.appendChild(this._icon),s&&u&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){o.DomUtil.setPosition(this._icon,e),this._shadow&&o.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(e,"leaflet-clickable"),o.DomEvent.on(e,"click",this._onMouseClick,this),o.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var n=0;n<t.length;n++)o.DomEvent.on(e,t[n],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&o.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&o.DomEvent.preventDefault(e),"mousedown"!==e.type?o.DomEvent.stopPropagation(e):o.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(e,t){return new o.Marker(e,t)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var n=e&&"DIV"===e.tagName?e:t.createElement("div"),r=this.options;return r.html!==!1?n.innerHTML=r.html:n.innerHTML="",r.bgPos&&(n.style.backgroundPosition=-r.bgPos.x+"px "+-r.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),o.divIcon=function(e){return new o.DivIcon(e)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){o.setOptions(this,e),this._source=t,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&o.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=o.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),
("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",n=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),r=this._container=o.DomUtil.create("div",n);this.options.closeButton&&(e=this._closeButton=o.DomUtil.create("a",t+"-close-button",r),e.href="#close",e.innerHTML="&#215;",o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,"click",this._onCloseButtonClick,this));var i=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",r);o.DomEvent.disableClickPropagation(i),this._contentNode=o.DomUtil.create("div",t+"-content",i),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(i,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",t+"-tip-container",r),this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,a="leaflet-popup-scrolled";i&&r>i?(t.height=i+"px",o.DomUtil.addClass(e,a)):o.DomUtil.removeClass(e,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,n=o.point(this.options.offset);t&&o.DomUtil.setPosition(this._container,e),this._containerBottom=-n.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);o.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,r=new o.Point(this._containerLeft,-t-this._containerBottom);this._animated&&r._add(o.DomUtil.getPosition(this._container));var i=e.layerPointToContainerPoint(r),a=o.point(this.options.autoPanPadding),s=o.point(this.options.autoPanPaddingTopLeft||a),u=o.point(this.options.autoPanPaddingBottomRight||a),l=e.getSize(),c=0,f=0;i.x+n+u.x>l.x&&(c=i.x+n-l.x+u.x),i.x-c-s.x<0&&(c=i.x-s.x),i.y+t+u.y>l.y&&(f=i.y+t-l.y+u.y),i.y-f-s.y<0&&(f=i.y-s.y),(c||f)&&e.fire("autopanstart").panBy([c,f])}},_onCloseButtonClick:function(e){this._close(),o.DomEvent.stop(e)}}),o.popup=function(e,t){return new o.Popup(e,t)},o.Map.include({openPopup:function(e,t,n){if(this.closePopup(),!(e instanceof o.Popup)){var r=e;e=new o.Popup(n).setLatLng(t).setContent(r)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var n=o.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(o.Popup.prototype.options.offset),t&&t.offset&&(n=n.add(t.offset)),t=o.extend({offset:n},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof o.Popup?(o.setOptions(e,t),this._popup=e):this._popup=new o.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)n=this._layers[t],n[e]&&n[e].apply(n,r);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o.stamp(e)}}),o.layerGroup=function(e){return new o.LayerGroup(e)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new o.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof o.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e=o.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),o.featureGroup=function(e){return new o.FeatureGroup(e)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var t=o.Browser.mobile?1280:2e3,n=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){o.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return o.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var e=o.Path.CLIP_PADDING,t=this.getSize(),n=o.DomUtil.getPosition(this._mapPane),r=n.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),i=r.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new o.Bounds(r,i)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!t.createElementNS||!t.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,n=e.firstChild;return t&&n!==t&&e.insertBefore(t,n),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(o.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)o.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){var t=this._map,n=t.mouseEventToContainerPoint(e),r=t.containerPointToLayerPoint(n),i=t.layerPointToLatLng(r);this.fire(e.type,{latlng:i,layerPoint:r,containerPoint:n,originalEvent:e}),"contextmenu"===e.type&&o.DomEvent.preventDefault(e),"mousemove"!==e.type&&o.DomEvent.stopPropagation(e)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),n=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(n)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max,r=n.x-t.x,i=n.y-t.y,a=this._pathRoot,s=this._panes.overlayPane;o.Browser.mobileWebkit&&s.removeChild(a),o.DomUtil.setPosition(a,t),a.setAttribute("width",r),a.setAttribute("height",i),a.setAttribute("viewBox",[t.x,t.y,r,i].join(" ")),o.Browser.mobileWebkit&&s.appendChild(a)}}}),o.Path.include({bindPopup:function(e,t){return e instanceof o.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new o.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(r){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");o.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,r=this._container;r.stroked=n.stroke,r.filled=n.fill,n.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",r.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",n.lineCap&&(e.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(e.joinstyle=n.lineJoin)):e&&(r.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),r.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(r.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!e.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return o.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color)},_drawPath:function(){var e,t,n,r,i,a;for(this._ctx.beginPath(),e=0,n=this._parts.length;n>e;e++){for(t=0,r=this._parts[e].length;r>t;t++)i=this._parts[e][t],a=(0===t?"move":"line")+"To",this._ctx[a](i.x,i.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill()),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),o.Map.include(o.Path.SVG&&!e.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var e,n=this._pathRoot;n||(n=this._pathRoot=t.createElement("canvas"),n.style.position="absolute",e=this._canvasCtx=n.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max.subtract(t),r=this._pathRoot;o.DomUtil.setPosition(r,t),r.width=n.x,r.height=n.y,r.getContext("2d").translate(-t.x,-t.y)}}}),o.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var r=e.length,o=typeof Uint8Array!=n+""?Uint8Array:Array,i=new o(r);i[0]=i[r-1]=1,this._simplifyDPStep(e,i,t,0,r-1);var a,s=[];for(a=0;r>a;a++)i[a]&&s.push(e[a]);return s},_simplifyDPStep:function(e,t,n,r,o){var i,a,s,u=0;for(a=r+1;o-1>=a;a++)s=this._sqClosestPointOnSegment(e[a],e[r],e[o],!0),s>u&&(i=a,u=s);u>n&&(t[i]=1,this._simplifyDPStep(e,t,n,r,i),this._simplifyDPStep(e,t,n,i,o))},_reducePoints:function(e,t){for(var n=[e[0]],r=1,o=0,i=e.length;i>r;r++)this._sqDist(e[r],e[o])>t&&(n.push(e[r]),o=r);return i-1>o&&n.push(e[i-1]),n},clipSegment:function(e,t,n,r){var o,i,a,s=r?this._lastCode:this._getBitCode(e,n),u=this._getBitCode(t,n);for(this._lastCode=u;;){if(!(s|u))return[e,t];if(s&u)return!1;o=s||u,i=this._getEdgeIntersection(e,t,o,n),a=this._getBitCode(i,n),o===s?(e=i,s=a):(t=i,u=a)}},_getEdgeIntersection:function(e,t,n,r){var i=t.x-e.x,a=t.y-e.y,s=r.min,u=r.max;return 8&n?new o.Point(e.x+i*(u.y-e.y)/a,u.y):4&n?new o.Point(e.x+i*(s.y-e.y)/a,s.y):2&n?new o.Point(u.x,e.y+a*(u.x-e.x)/i):1&n?new o.Point(s.x,e.y+a*(s.x-e.x)/i):void 0},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},_sqClosestPointOnSegment:function(e,t,n,r){var i,a=t.x,s=t.y,u=n.x-a,l=n.y-s,c=u*u+l*l;return c>0&&(i=((e.x-a)*u+(e.y-s)*l)/c,i>1?(a=n.x,s=n.y):i>0&&(a+=u*i,s+=l*i)),u=e.x-a,l=e.y-s,r?u*u+l*l:new o.Point(a,s)}},o.Polyline=o.Path.extend({initialize:function(e,t){o.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";t>e;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(o.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,n,r=1/0,i=this._parts,a=null,s=0,u=i.length;u>s;s++)for(var l=i[s],c=1,f=l.length;f>c;c++){t=l[c-1],n=l[c];var h=o.LineUtil._sqClosestPointOnSegment(e,t,n,!0);r>h&&(r=h,a=o.LineUtil._sqClosestPointOnSegment(e,t,n))}return a&&(a.distance=Math.sqrt(r)),a},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var n,r,i=t?e:[];for(n=0,r=e.length;r>n;n++){if(o.Util.isArray(e[n])&&"number"!=typeof e[n][0])return;i[n]=o.latLng(e[n])}return i},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,n=o.Path.VML,r=0,i=e.length,a="";i>r;r++)t=e[r],n&&t._round(),a+=(r?"L":"M")+t.x+" "+t.y;return a},_clipPoints:function(){var e,t,n,r=this._originalPoints,i=r.length;if(this.options.noClip)return void(this._parts=[r]);this._parts=[];var a=this._parts,s=this._map._pathViewport,u=o.LineUtil;for(e=0,t=0;i-1>e;e++)n=u.clipSegment(r[e],r[e+1],s,e),n&&(a[t]=a[t]||[],a[t].push(n[0]),(n[1]!==r[e+1]||e===i-2)&&(a[t].push(n[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=o.LineUtil,n=0,r=e.length;r>n;n++)e[n]=t.simplify(e[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(e,t){return new o.Polyline(e,t)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(e,t){var n,r,i,a,s,u,l,c,f,h=[1,4,2,8],p=o.LineUtil;for(r=0,l=e.length;l>r;r++)e[r]._code=p._getBitCode(e[r],t);for(a=0;4>a;a++){for(c=h[a],n=[],r=0,l=e.length,i=l-1;l>r;i=r++)s=e[r],u=e[i],s._code&c?u._code&c||(f=p._getEdgeIntersection(u,s,c,t),f._code=p._getBitCode(f,t),n.push(f)):(u._code&c&&(f=p._getEdgeIntersection(u,s,c,t),f._code=p._getBitCode(f,t),n.push(f)),n.push(s));e=n}return e},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(e,t){o.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,n,r;if(e&&o.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,n=this._holes.length;n>t;t++)r=this._holes[t]=this._convertLatLngs(this._holes[t]),r[0].equals(r[r.length-1])&&r.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,n,r;for(e=0,n=this._holes.length;n>e;e++)for(this._holePoints[e]=[],t=0,r=this._holes[e].length;r>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},setLatLngs:function(e){return e&&o.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var n=0,r=this._parts.length;r>n;n++){var i=o.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);i.length&&t.push(i)}this._parts=t}},_getPathPartStr:function(e){var t=o.Polyline.prototype._getPathPartStr.call(this,e);return t+(o.Browser.svg?"z":"x")}}),o.polygon=function(e,t){return new o.Polygon(e,t)},function(){function e(e){return o.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,r=t.length;for(this.eachLayer(function(e){r>n?e.setLatLngs(t[n++]):this.removeLayer(e)},this);r>n;)this.addLayer(new e(t[n++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}o.MultiPolyline=e(o.Polyline),o.MultiPolygon=e(o.Polygon),o.multiPolyline=function(e,t){return new o.MultiPolyline(e,t)},o.multiPolygon=function(e,t){return new o.MultiPolygon(e,t)}}(),o.Rectangle=o.Polygon.extend({initialize:function(e,t){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=o.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),o.rectangle=function(e,t){return new o.Rectangle(e,t)},o.Circle=o.Path.extend({initialize:function(e,t,n){o.Path.prototype.initialize.call(this,n),this._latlng=o.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=o.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,n=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,n=this._latlng;return new o.LatLngBounds([n.lat-t,n.lng-e],[n.lat+t,n.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),o.circle=function(e,t,n){return new o.Circle(e,t,n)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){o.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return o.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(e,t){return new o.CircleMarker(e,t)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(e,t){var n,r,i,a,s,u,l,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),n=0,a=this._parts.length;a>n;n++)for(l=this._parts[n],r=0,s=l.length,i=s-1;s>r;i=r++)if((t||0!==r)&&(u=o.LineUtil.pointToSegmentDistance(e,l[i],l[r]),c>=u))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(e){var t,n,r,i,a,s,u,l,c=!1;if(o.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(i=0,u=this._parts.length;u>i;i++)for(t=this._parts[i],a=0,l=t.length,s=l-1;l>a;s=a++)n=t[a],r=t[s],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(e,t){o.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=o.Util.isArray(e)?e:e.features;if(i){for(t=0,n=i.length;n>t;t++)r=i[t],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(i[t]);return this}var a=this.options;if(!a.filter||a.filter(e)){var s=o.GeoJSON.geometryToLayer(e,a.pointToLayer,a.coordsToLatLng,a);return s.feature=o.GeoJSON.asFeature(e),s.defaultOptions=s.options,this.resetStyle(s),a.onEachFeature&&a.onEachFeature(e,s),this.addLayer(s)}},resetStyle:function(e){var t=this.options.style;t&&(o.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),o.extend(o.GeoJSON,{geometryToLayer:function(e,t,n,r){var i,a,s,u,l="Feature"===e.type?e.geometry:e,c=l.coordinates,f=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return i=n(c),t?t(e,i):new o.Marker(i);case"MultiPoint":for(s=0,u=c.length;u>s;s++)i=n(c[s]),f.push(t?t(e,i):new o.Marker(i));return new o.FeatureGroup(f);case"LineString":return a=this.coordsToLatLngs(c,0,n),new o.Polyline(a,r);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return a=this.coordsToLatLngs(c,1,n),new o.Polygon(a,r);case"MultiLineString":return a=this.coordsToLatLngs(c,1,n),new o.MultiPolyline(a,r);case"MultiPolygon":return a=this.coordsToLatLngs(c,2,n),new o.MultiPolygon(a,r);case"GeometryCollection":for(s=0,u=l.geometries.length;u>s;s++)f.push(this.geometryToLayer({geometry:l.geometries[s],type:"Feature",properties:e.properties},t,n,r));return new o.FeatureGroup(f);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new o.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,n){var r,o,i,a=[];for(o=0,i=e.length;i>o;o++)r=t?this.coordsToLatLngs(e[o],t-1,n):(n||this.coordsToLatLng)(e[o]),a.push(r);return a},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==n&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(o.GeoJSON.latLngToCoords(e[n]));return t},getFeature:function(e,t){return e.feature?o.extend({},e.feature,{geometry:t}):o.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var e,t,n,r=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(r[0].push(r[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)n=o.GeoJSON.latLngsToCoords(this._holes[e]),n.push(n[0]),r.push(n);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:r})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:e,coordinates:t})}}o.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var t,n=this.feature&&this.feature.geometry,r=[];if(n&&"MultiPoint"===n.type)return e("MultiPoint").call(this);var i=n&&"GeometryCollection"===n.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),
r.push(i?t.geometry:o.GeoJSON.asFeature(t)))}),i?o.GeoJSON.getFeature(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}})}(),o.geoJson=function(e,t){return new o.GeoJSON(e,t)},o.DomEvent={addListener:function(e,t,n,r){var i,a,s,u=o.stamp(n),l="_leaflet_"+t+u;return e[l]?this:(i=function(t){return n.call(r||e,t||o.DomEvent._getEvent())},o.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,i,u):(o.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,i,u),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",i,!1),e.addEventListener(t,i,!1)):"mouseenter"===t||"mouseleave"===t?(a=i,s="mouseenter"===t?"mouseover":"mouseout",i=function(t){return o.DomEvent._checkMouse(e,t)?a(t):void 0},e.addEventListener(s,i,!1)):"click"===t&&o.Browser.android?(a=i,i=function(e){return o.DomEvent._filterClick(e,a)},e.addEventListener(t,i,!1)):e.addEventListener(t,i,!1):"attachEvent"in e&&e.attachEvent("on"+t,i),e[l]=i,this))},removeListener:function(e,t,n){var r=o.stamp(n),i="_leaflet_"+t+r,a=e[i];return a?(o.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,r):o.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,r):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",a,!1),e.removeEventListener(t,a,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",a,!1):e.removeEventListener(t,a,!1):"detachEvent"in e&&e.detachEvent("on"+t,a),e[i]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,o.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=o.DomEvent.stopPropagation;return o.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=o.DomEvent.stopPropagation,n=o.Draggable.START.length-1;n>=0;n--)o.DomEvent.on(e,o.Draggable.START[n],t);return o.DomEvent.on(e,"click",o.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return o.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new o.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new o.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){o.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e},_getEvent:function(){var t=e.event;if(!t)for(var n=arguments.callee.caller;n&&(t=n.arguments[0],!t||e.Event!==t.constructor);)n=n.caller;return t},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,r=o.DomEvent._lastClick&&n-o.DomEvent._lastClick;return r&&r>100&&500>r||e.target._simulatedClick&&!e._simulated?void o.DomEvent.stop(e):(o.DomEvent._lastClick=n,t(e))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=o.Draggable.START.length-1;e>=0;e--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=o.Draggable.START.length-1;e>=0;e--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(o.DomEvent.stopPropagation(e),o.Draggable._disabled||(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){var n=e.touches?e.touches[0]:e;this._startPoint=new o.Point(n.clientX,n.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(t,o.Draggable.MOVE[e.type],this._onMove,this).on(t,o.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var n=e.touches&&1===e.touches.length?e.touches[0]:e,r=new o.Point(n.clientX,n.clientY),i=r.subtract(this._startPoint);(i.x||i.y)&&(o.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(o.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(i),o.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in o.Draggable.MOVE)o.DomEvent.off(t,o.Draggable.MOVE[e],this._onMove).off(t,o.Draggable.END[e],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new o.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,o=(r-t+n)%e+t-n,i=(r+t+n)%e-t-n,a=Math.abs(o+n)<Math.abs(i+n)?o:i;this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,r=+new Date-this._lastTime,i=!n.inertia||r>n.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),i)t.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+r-this._times[0])/1e3,u=n.easeLinearity,l=a.multiplyBy(u/s),c=l.distanceTo([0,0]),f=Math.min(n.inertiaMaxSpeed,c),h=l.multiplyBy(f/c),p=f/(n.inertiaDeceleration*u),d=h.multiplyBy(-p/2).round();d.x&&d.y?(d=t._limitOffset(d,t.options.maxBounds),o.Util.requestAnimFrame(function(){t.panBy(d,{duration:p,easeLinearity:u,noMoveStart:!0})})):t.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(n):t.setZoomAround(e.containerPoint,n)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=o.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.preventDefault(e),o.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(n+t):e.setZoomAround(this._lastMousePos,n+t))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,n,r){function i(e){var t;if(o.Browser.pointer?(d.push(e.pointerId),t=d.length):t=e.touches.length,!(t>1)){var n=Date.now(),r=n-(s||n);u=e.touches?e.touches[0]:e,l=r>0&&c>=r,s=n}}function a(e){if(o.Browser.pointer){var t=d.indexOf(e.pointerId);if(-1===t)return;d.splice(t,1)}if(l){if(o.Browser.pointer){var r,i={};for(var a in u)r=u[a],"function"==typeof r?i[a]=r.bind(u):i[a]=r;u=i}u.type="dblclick",n(u),s=null}}var s,u,l=!1,c=250,f="_leaflet_",h=this._touchstart,p=this._touchend,d=[];e[f+h+r]=i,e[f+p+r]=a;var g=o.Browser.pointer?t.documentElement:e;return e.addEventListener(h,i,!1),g.addEventListener(p,a,!1),o.Browser.pointer&&g.addEventListener(o.DomEvent.POINTER_CANCEL,a,!1),this},removeDoubleTapListener:function(e,n){var r="_leaflet_";return e.removeEventListener(this._touchstart,e[r+this._touchstart+n],!1),(o.Browser.pointer?t.documentElement:e).removeEventListener(this._touchend,e[r+this._touchend+n],!1),o.Browser.pointer&&t.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,e[r+this._touchend+n],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,n,r){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,n,r);case"touchend":return this.addPointerListenerEnd(e,t,n,r);case"touchmove":return this.addPointerListenerMove(e,t,n,r);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,n,r,i){var a="_leaflet_",s=this._pointers,u=function(e){o.DomEvent.preventDefault(e);for(var t=!1,n=0;n<s.length;n++)if(s[n].pointerId===e.pointerId){t=!0;break}t||s.push(e),e.touches=s.slice(),e.changedTouches=[e],r(e)};if(e[a+"touchstart"+i]=u,e.addEventListener(this.POINTER_DOWN,u,!1),!this._pointerDocumentListener){var l=function(e){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s.splice(t,1);break}};t.documentElement.addEventListener(this.POINTER_UP,l,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,n,r){function o(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<a.length;t++)if(a[t].pointerId===e.pointerId){a[t]=e;break}e.touches=a.slice(),e.changedTouches=[e],n(e)}}var i="_leaflet_",a=this._pointers;return e[i+"touchmove"+r]=o,e.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(e,t,n,r){var o="_leaflet_",i=this._pointers,a=function(e){for(var t=0;t<i.length;t++)if(i[t].pointerId===e.pointerId){i.splice(t,1);break}e.touches=i.slice(),e.changedTouches=[e],n(e)};return e[o+"touchend"+r]=a,e.addEventListener(this.POINTER_UP,a,!1),e.addEventListener(this.POINTER_CANCEL,a,!1),this},removePointerListener:function(e,t,n){var r="_leaflet_",o=e[r+t+n];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,o,!1),e.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(e.touches&&2===e.touches.length&&!n._animatingZoom&&!this._zooming){var r=n.mouseEventToLayerPoint(e.touches[0]),i=n.mouseEventToLayerPoint(e.touches[1]),a=n._getCenterLayerPoint();this._startCenter=r.add(i)._divideBy(2),this._startDist=r.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),o.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var n=t.mouseEventToLayerPoint(e.touches[0]),r=t.mouseEventToLayerPoint(e.touches[1]);this._scale=n.distanceTo(r)/this._startDist,this._delta=n._add(r)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),n=e.layerPointToLatLng(t),r=e.getScaleZoom(this._scale);e._animateZoom(n,r,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var e=this._map;this._zooming=!1,o.DomUtil.removeClass(e._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),r=e.layerPointToLatLng(n),i=e.getZoom(),a=e.getScaleZoom(this._scale)-i,s=a>0?Math.ceil(a):Math.floor(a),u=e._limitZoom(i+s),l=e.getZoomScale(u)/this._scale;e._animateZoom(r,u,n,l)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(o.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=e.touches[0],r=n.target;this._startPos=this._newPos=new o.Point(n.clientX,n.clientY),r.tagName&&"a"===r.tagName.toLowerCase()&&o.DomUtil.addClass(r,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),o.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),o.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var n=e.changedTouches[0],r=n.target;r&&r.tagName&&"a"===r.tagName.toLowerCase()&&o.DomUtil.removeClass(r,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new o.Point(t.clientX,t.clientY)},_simulateEvent:function(n,r){var o=t.createEvent("MouseEvents");o._simulated=!0,r.target._simulatedClick=!0,o.initMouseEvent(n,!0,!0,e,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void o.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,n=this._box,r=this._map.mouseEventToLayerPoint(e),i=r.subtract(t),a=new o.Point(Math.min(r.x,t.x),Math.min(r.y,t.y));o.DomUtil.setPosition(n,a),this._moved=!0,n.style.width=Math.max(0,Math.abs(i.x)-4)+"px",n.style.height=Math.max(0,Math.abs(i.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,n=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(n)){var r=new o.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(n));t.fitBounds(r),t.fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),o.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;o.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var n=t.body,r=t.documentElement,o=n.scrollTop||r.scrollTop,i=n.scrollLeft||r.scrollLeft;this._map._container.focus(),e.scrollTo(i,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,r=this._panKeys={},o=this.keyCodes;for(t=0,n=o.left.length;n>t;t++)r[o.left[t]]=[-1*e,0];for(t=0,n=o.right.length;n>t;t++)r[o.right[t]]=[e,0];for(t=0,n=o.down.length;n>t;t++)r[o.down[t]]=[0,e];for(t=0,n=o.up.length;n>t;t++)r[o.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,r=this._zoomKeys={},o=this.keyCodes;for(t=0,n=o.zoomIn.length;n>t;t++)r[o.zoomIn[t]]=e;for(t=0,n=o.zoomOut.length;n>t;t++)r[o.zoomOut[t]]=-e},_addHooks:function(){o.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,n=this._map;if(t in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[t]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(t in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[t])}o.DomEvent.stop(e)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,n=o.DomUtil.getPosition(e._icon),r=e._map.layerPointToLatLng(n);t&&o.DomUtil.setPosition(t,n),e._latlng=r,e.fire("move",{latlng:r}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(e){o.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return o.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),n=e._controlCorners[t];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(e){return new o.Control(e)},o.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,i){var a=n+e+" "+n+i;t[e+i]=o.DomUtil.create("div",a,r)}var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=o.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=o.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",n,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,r,i,a){var s=o.DomUtil.create("a",n,r);s.innerHTML=e,s.href="#",s.title=t;var u=o.DomEvent.stopPropagation;return o.DomEvent.on(s,"click",u).on(s,"mousedown",u).on(s,"dblclick",u).on(s,"click",o.DomEvent.preventDefault).on(s,"click",i,a).on(s,"click",this._refocusOnMap,a),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,t),o.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,t)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(e){return new o.Control.Zoom(e)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){o.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(e){return new o.Control.Attribution(e)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",n=o.DomUtil.create("div",t),r=this.options;return this._addScales(r,t,n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=o.DomUtil.create("div",t+"-line",n)),e.imperial&&(this._iScale=o.DomUtil.create("div",t+"-line",n))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180),r=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,o=this._map.getSize(),i=this.options,a=0;o.x>0&&(a=r*(i.maxWidth/o.x)),this._updateScales(i,a)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,n,r,o=3.2808399*e,i=this._iScale;o>5280?(t=o/5280,n=this._getRoundNum(t),i.style.width=this._getScaleWidth(n/t)+"px",i.innerHTML=n+" mi"):(r=this._getRoundNum(o),i.style.width=this._getScaleWidth(r/o)+"px",i.innerHTML=r+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),o.control.scale=function(e){return new o.Control.Scale(e)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,n){o.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var r in e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=o.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=o.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(t,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var n=this._form=o.DomUtil.create("form",e+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var r=this._layersLink=o.DomUtil.create("a",e+"-toggle",t);r.href="#",r.title="Layers",o.Browser.touch?o.DomEvent.on(r,"click",o.DomEvent.stop).on(r,"click",this._expand,this):o.DomEvent.on(r,"focus",this._expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",e+"-base",n),this._separator=o.DomUtil.create("div",e+"-separator",n),this._overlaysList=o.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){var r=o.stamp(e);this._layers[r]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,n=!1,r=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),r=r||t.overlay,n=n||!t.overlay;this._separator.style.display=r&&n?"":"none"}},_onLayerChange:function(e){var t=this._layers[o.stamp(e.layer)];if(t){this._handlingClick||this._update();var n=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)}},_createRadioElement:function(e,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';n&&(r+=' checked="checked"'),r+="/>";var o=t.createElement("div");return o.innerHTML=r,o.firstChild},_addItem:function(e){var n,r=t.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?(n=t.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=i):n=this._createRadioElement("leaflet-base-layers",i),n.layerId=o.stamp(e.layer),
o.DomEvent.on(n,"click",this._onInputClick,this);var a=t.createElement("span");a.innerHTML=" "+e.name,r.appendChild(n),r.appendChild(a);var s=e.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(r),r},_onInputClick:function(){var e,t,n,r=this._form.getElementsByTagName("input"),o=r.length;for(this._handlingClick=!0,e=0;o>e;e++)t=r[e],n=this._layers[t.layerId],t.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!t.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(e,t,n){return new o.Control.Layers(e,t,n)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[o.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(r||.5)+",1)",o.DomEvent.on(e,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(e,t),o.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,n,r,i=this._el,a=e.getComputedStyle(i);if(o.Browser.any3d){if(r=a[o.DomUtil.TRANSFORM].match(this._transformRe),!r)return;t=parseFloat(r[1]),n=parseFloat(r[2])}else t=parseFloat(a.left),n=parseFloat(a.top);return new o.Point(t,n,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(e,t,r){if(t=t===n?this._zoom:this._limitZoom(t),e=this._limitCenter(o.latLng(e),t,this.options.maxBounds),r=r||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==n&&(r.zoom=o.extend({animate:r.animate},r.zoom),r.pan=o.extend({animate:r.animate},r.pan));var i=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=o.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(n)?(this.panBy(n,t),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=o.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));o.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/r),i=this._getCenterLayerPoint()._add(o);return n.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,i,r,null,!0),!0):!1},_animateZoom:function(e,t,n,r,i,a,s){s||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:t,origin:n,scale:r,delta:i,backwards:a})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,n=o.DomUtil.TRANSFORM,r=e.delta?o.DomUtil.getTranslateString(e.delta):t.style[n],i=o.DomUtil.getScaleString(e.scale,e.origin);t.style[n]=e.backwards?i+" "+r:r+" "+i},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),o.Util.falseFn(t.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,n=this._getLoadedTilesPercentage(t),r=this._getLoadedTilesPercentage(e);return t&&n>.5&&.5>r?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[o.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,n,r=e.getElementsByTagName("img"),o=0;for(t=0,n=r.length;n>t;t++)r[t].complete&&o++;return o/n},_stopLoadingImages:function(e){var t,n,r,i=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,n=i.length;n>t;t++)r=i[t],r.complete||(r.onload=o.Util.falseFn,r.onerror=o.Util.falseFn,r.src=o.Util.emptyImageUrl,r.parentNode.removeChild(r))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=o.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=o.bind(this._handleGeolocationResponse,this),n=o.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,r=new o.LatLng(t,n),i=180*e.coords.accuracy/40075017,a=i/Math.cos(o.LatLng.DEG_TO_RAD*t),s=o.latLngBounds([t-i,n-a],[t+i,n+a]),u=this._locateOptions;if(u.setView){var l=Math.min(this.getBoundsZoom(s),u.maxZoom);this.setView(r,l)}var c={latlng:r,bounds:s,timestamp:e.timestamp};for(var f in e.coords)"number"==typeof e.coords[f]&&(c[f]=e.coords[f]);this.fire("locationfound",c)}})}(window,document),function(){function e(e,t){if(e!==t){var n=null===e,r=e===w,o=e===e,i=null===t,a=t===w,s=t===t;if(e>t&&!i||!o||n&&!a&&s||r&&s)return 1;if(t>e&&!n||!s||i&&!r&&o||a&&o)return-1}return 0}function t(e,t,n){for(var r=e.length,o=n?r:-1;n?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function n(e,t,n){if(t!==t)return h(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function r(e){return"function"==typeof e||!1}function o(e){return"string"==typeof e?e:null==e?"":e+""}function i(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function a(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function s(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function u(t,n,r){for(var o=-1,i=t.criteria,a=n.criteria,s=i.length,u=r.length;++o<s;){var l=e(i[o],a[o]);if(l)return o>=u?l:l*(r[o]?1:-1)}return t.index-n.index}function l(e){return Be[e]}function c(e){return We[e]}function f(e){return"\\"+ze[e]}function h(e,t,n){for(var r=e.length,o=t+(n?0:-1);n?o--:++o<r;){var i=e[o];if(i!==i)return o}return-1}function p(e){return!!e&&"object"==typeof e}function d(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function g(e,t){for(var n=-1,r=e.length,o=-1,i=[];++n<r;)e[n]===t&&(e[n]=U,i[++o]=n);return i}function v(e,t){for(var n,r=-1,o=e.length,i=-1,a=[];++r<o;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++i]=s)}return a}function m(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function y(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function b(e){return Ve[e]}function _(d){function G(e){if(p(e)&&!Ps(e)&&!(e instanceof Be)){if(e instanceof X)return e;if(Qi.call(e,"__chain__")&&Qi.call(e,"__wrapped__"))return lr(e)}return new X(e)}function Z(){}function X(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Be(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Ta,this.__views__=null}function We(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Be(this.__wrapped__);return r.__actions__=e?nt(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?nt(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?nt(n):null,r}function Ve(){if(this.__filtered__){var e=new Be(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function He(){var e=this.__wrapped__.value();if(!Ps(e))return tn(e,this.__actions__);var t=this.__dir__,n=0>t,r=Bn(0,e.length,this.__views__),o=r.start,i=r.end,a=i-o,s=n?i:o-1,u=ba(a,this.__takeCount__),l=this.__iteratees__,c=l?l.length:0,f=0,h=[];e:for(;a--&&u>f;){s+=t;for(var p=-1,d=e[s];++p<c;){var g=l[p],v=g.iteratee,m=g.type;if(m==R){if(g.done&&(n?s>g.index:s<g.index)&&(g.count=0,g.done=!1),g.index=s,!g.done){var y=g.limit;if(!(g.done=y>-1?g.count++>=y:!v(d)))continue e}}else{var b=v(d);if(m==F)d=b;else if(!b){if(m==k)continue e;break e}}}h[f++]=d}return h}function ze(){this.__data__={}}function Ge(e){return this.has(e)&&delete this.__data__[e]}function Ye(e){return"__proto__"==e?w:this.__data__[e]}function Qe(e){return"__proto__"!=e&&Qi.call(this.__data__,e)}function Ke(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ze(e){var t=e?e.length:0;for(this.data={hash:da(null),set:new ua};t--;)this.push(e[t])}function Je(e,t){var n=e.data,r="string"==typeof t||$o(t)?n.set.has(t):n.hash[t];return r?0:-1}function tt(e){var t=this.data;"string"==typeof e||$o(e)?t.set.add(e):t.hash[e]=!0}function nt(e,t){var n=-1,r=e.length;for(t||(t=Ii(r));++n<r;)t[n]=e[n];return t}function rt(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function it(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function at(e,t,n,r){for(var o=-1,i=e.length,a=r,s=a;++o<i;){var u=e[o],l=+t(u);n(l,a)&&(a=l,s=u)}return s}function st(e,t){for(var n=-1,r=e.length,o=-1,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[++o]=a)}return i}function ut(e,t){for(var n=-1,r=e.length,o=Ii(r);++n<r;)o[n]=t(e[n],n,e);return o}function lt(e,t,n,r){var o=-1,i=e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function ct(e,t,n,r){var o=e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function ft(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ht(e){for(var t=e.length,n=0;t--;)n+=+e[t]||0;return n}function pt(e,t){return e===w?t:e}function dt(e,t,n,r){return e!==w&&Qi.call(r,n)?e:t}function gt(e,t,n){for(var r=-1,o=js(t),i=o.length;++r<i;){var a=o[r],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==w||a in e)||(e[a]=u)}return e}function vt(e,t){return null==t?e:yt(t,js(t),e)}function mt(e,t){for(var n=-1,r=null==e,o=!r&&Gn(e),i=o?e.length:0,a=t.length,s=Ii(a);++n<a;){var u=t[n];o?s[n]=Yn(u,i)?e[u]:w:s[n]=r?w:e[u]}return s}function yt(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}function bt(e,t,n){var r=typeof e;return"function"==r?t===w?e:on(e,t,n):null==e?wi:"object"==r?Ft(e):t===w?Pi(e):jt(e,t)}function _t(e,t,n,r,o,i,a){var s;if(n&&(s=o?n(e,r,o):n(e)),s!==w)return s;if(!$o(e))return e;var u=Ps(e);if(u){if(s=Wn(e),!t)return nt(e,s)}else{var l=Zi.call(e),c=l==z;if(l!=Q&&l!=q&&(!c||o))return Ue[l]?Hn(e,l,t):o?e:{};if(s=Vn(c?{}:e),!t)return vt(s,e)}i||(i=[]),a||(a=[]);for(var f=i.length;f--;)if(i[f]==e)return a[f];return i.push(e),a.push(s),(u?rt:Ot)(e,function(r,o){s[o]=_t(r,t,n,o,e,i,a)}),s}function wt(e,t,n){if("function"!=typeof e)throw new Wi(j);return la(function(){e.apply(w,n)},t)}function Et(e,t){var r=e?e.length:0,o=[];if(!r)return o;var i=-1,a=jn(),s=a==n,u=s&&t.length>=200?Ua(t):null,l=t.length;u&&(a=Je,s=!1,t=u);e:for(;++i<r;){var c=e[i];if(s&&c===c){for(var f=l;f--;)if(t[f]===c)continue e;o.push(c)}else a(t,c,0)<0&&o.push(c)}return o}function Ct(e,t){var n=!0;return Ma(e,function(e,r,o){return n=!!t(e,r,o)}),n}function St(e,t,n,r){var o=r,i=o;return Ma(e,function(e,a,s){var u=+t(e,a,s);(n(u,o)||u===r&&u===i)&&(o=u,i=e)}),i}function Tt(e,t,n,r){var o=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r=r===w||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r>>>0,n>>>=0;o>n;)e[n++]=t;return e}function At(e,t){var n=[];return Ma(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function Pt(e,t,n,r){var o;return n(e,function(e,n,i){return t(e,n,i)?(o=r?n:e,!1):void 0}),o}function xt(e,t,n){for(var r=-1,o=e.length,i=-1,a=[];++r<o;){var s=e[r];if(p(s)&&Gn(s)&&(n||Ps(s)||Eo(s))){t&&(s=xt(s,t,n));for(var u=-1,l=s.length;++u<l;)a[++i]=s[u]}else n||(a[++i]=s)}return a}function $t(e,t){return ka(e,t,Yo)}function Ot(e,t){return ka(e,t,js)}function Lt(e,t){return Fa(e,t,js)}function Nt(e,t){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var a=t[n];$s(e[a])&&(i[++o]=a)}return i}function Dt(e,t,n){if(null!=e){n!==w&&n in sr(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:w}}function It(e,t,n,r,o,i){return e===t?!0:null==e||null==t||!$o(e)&&!p(t)?e!==e&&t!==t:Mt(e,t,It,n,r,o,i)}function Mt(e,t,n,r,o,i,a){var s=Ps(e),u=Ps(t),l=B,c=B;s||(l=Zi.call(e),l==q?l=Q:l!=Q&&(s=ko(e))),u||(c=Zi.call(t),c==q?c=Q:c!=Q&&(u=ko(t)));var f=l==Q,h=c==Q,p=l==c;if(p&&!s&&!f)return Mn(e,t,l);if(!o){var d=f&&Qi.call(e,"__wrapped__"),g=h&&Qi.call(t,"__wrapped__");if(d||g)return n(d?e.value():e,g?t.value():t,r,o,i,a)}if(!p)return!1;i||(i=[]),a||(a=[]);for(var v=i.length;v--;)if(i[v]==e)return a[v]==t;i.push(e),a.push(t);var m=(s?In:Rn)(e,t,n,r,o,i,a);return i.pop(),a.pop(),m}function Rt(e,t,n){var r=t.length,o=r,i=!n;if(null==e)return!o;for(e=sr(e);r--;){var a=t[r];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){a=t[r];var s=a[0],u=e[s],l=a[1];if(i&&a[2]){if(u===w&&!(s in e))return!1}else{var c=n?n(u,l,s):w;if(!(c===w?It(l,u,n,!0):c))return!1}}return!0}function kt(e,t){var n=-1,r=Gn(e)?Ii(e.length):[];return Ma(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function Ft(e){var t=Un(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==w||n in sr(e))}}return function(e){return Rt(e,t)}}function jt(e,t){var n=Ps(e),r=Kn(e)&&Xn(t),o=e+"";return e=ur(e),function(i){if(null==i)return!1;var a=o;if(i=sr(i),!(!n&&r||a in i)){if(i=1==e.length?i:Dt(i,Gt(e,0,-1)),null==i)return!1;a=Er(e),i=sr(i)}return i[a]===t?t!==w||a in i:It(t,i[a],w,!0)}}function Ut(e,t,n,r,o){if(!$o(e))return e;var i=Gn(t)&&(Ps(t)||ko(t)),a=i?null:js(t);return rt(a||t,function(s,u){if(a&&(u=s,s=t[u]),p(s))r||(r=[]),o||(o=[]),qt(e,t,u,Ut,n,r,o);else{var l=e[u],c=n?n(l,s,u,e,t):w,f=c===w;f&&(c=s),c===w&&(!i||u in e)||!f&&(c===c?c===l:l!==l)||(e[u]=c)}}),e}function qt(e,t,n,r,o,i,a){for(var s=i.length,u=t[n];s--;)if(i[s]==u)return void(e[n]=a[s]);var l=e[n],c=o?o(l,u,n,e,t):w,f=c===w;f&&(c=u,Gn(u)&&(Ps(u)||ko(u))?c=Ps(l)?l:Gn(l)?nt(l):[]:Os(u)||Eo(u)?c=Eo(l)?Bo(l):Os(l)?l:{}:f=!1),i.push(u),a.push(c),f?e[n]=r(c,u,o,i,a):(c===c?c!==l:l===l)&&(e[n]=c)}function Bt(e){return function(t){return null==t?w:t[e]}}function Wt(e){var t=e+"";return e=ur(e),function(n){return Dt(n,e,t)}}function Vt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=o&&Yn(r)){var o=r;ca.call(e,r,1)}}return e}function Ht(e,t){return e+oa(Ca()*(t-e+1))}function zt(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function Gt(e,t,n){var r=-1,o=e.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),n=n===w||n>o?o:+n||0,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Ii(o);++r<o;)i[r]=e[r+t];return i}function Yt(e,t){var n;return Ma(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function Qt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Kt(e,t,n){var r=kn(),o=-1;t=ut(t,function(e){return r(e)});var i=kt(e,function(e){var n=ut(t,function(t){return t(e)});return{criteria:n,index:++o,value:e}});return Qt(i,function(e,t){return u(e,t,n)})}function Zt(e,t){var n=0;return Ma(e,function(e,r,o){n+=+t(e,r,o)||0}),n}function Jt(e,t){var r=-1,o=jn(),i=e.length,a=o==n,s=a&&i>=200,u=s?Ua():null,l=[];u?(o=Je,a=!1):(s=!1,u=t?[]:l);e:for(;++r<i;){var c=e[r],f=t?t(c,r,e):c;if(a&&c===c){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),l.push(c)}else o(u,f,0)<0&&((t||s)&&u.push(f),l.push(c))}return l}function Xt(e,t){for(var n=-1,r=t.length,o=Ii(r);++n<r;)o[n]=e[t[n]];return o}function en(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Gt(e,r?0:i,r?i+1:o):Gt(e,r?i+1:0,r?o:i)}function tn(e,t){var n=e;n instanceof Be&&(n=n.value());for(var r=-1,o=t.length;++r<o;){var i=[n],a=t[r];sa.apply(i,a.args),n=a.func.apply(a.thisArg,i)}return n}function nn(e,t,n){var r=0,o=e?e.length:r;if("number"==typeof t&&t===t&&xa>=o){for(;o>r;){var i=r+o>>>1,a=e[i];(n?t>=a:t>a)&&null!==a?r=i+1:o=i}return o}return rn(e,t,wi,n)}function rn(e,t,n,r){t=n(t);for(var o=0,i=e?e.length:0,a=t!==t,s=null===t,u=t===w;i>o;){var l=oa((o+i)/2),c=n(e[l]),f=c!==w,h=c===c;if(a)var p=h||r;else p=s?h&&f&&(r||null!=c):u?h&&(r||f):null==c?!1:r?t>=c:t>c;p?o=l+1:i=l}return ba(i,Pa)}function on(e,t,n){if("function"!=typeof e)return wi;if(t===w)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function an(e){return ta.call(e,0)}function sn(e,t,n){for(var r=n.length,o=-1,i=ya(e.length-r,0),a=-1,s=t.length,u=Ii(i+s);++a<s;)u[a]=t[a];for(;++o<r;)u[n[o]]=e[o];for(;i--;)u[a++]=e[o++];return u}function un(e,t,n){for(var r=-1,o=n.length,i=-1,a=ya(e.length-o,0),s=-1,u=t.length,l=Ii(a+u);++i<a;)l[i]=e[i];for(var c=i;++s<u;)l[c+s]=t[s];for(;++r<o;)l[c+n[r]]=e[i++];return l}function ln(e,t){return function(n,r,o){var i=t?t():{};if(r=kn(r,o,3),Ps(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(i,u,r(u,a,n),n)}else Ma(n,function(t,n,o){e(i,t,r(t,n,o),o)});return i}}function cn(e){return po(function(t,n){var r=-1,o=null==t?0:n.length,i=o>2?n[o-2]:w,a=o>2?n[2]:w,s=o>1?n[o-1]:w;for("function"==typeof i?(i=on(i,s,5),o-=2):(i="function"==typeof s?s:w,o-=i?1:0),a&&Qn(n[0],n[1],a)&&(i=3>o?w:i,o=1);++r<o;){var u=n[r];u&&e(t,u,i)}return t})}function fn(e,t){return function(n,r){var o=n?Ba(n):0;if(!Jn(o))return e(n,r);for(var i=t?o:-1,a=sr(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function hn(e){return function(t,n,r){for(var o=sr(t),i=r(t),a=i.length,s=e?a:-1;e?s--:++s<a;){var u=i[s];if(n(o[u],u,o)===!1)break}return t}}function pn(e,t){function n(){var o=this&&this!==Xe&&this instanceof n?r:e;return o.apply(t,arguments)}var r=gn(e);return n}function dn(e){return function(t){for(var n=-1,r=yi(oi(t)),o=r.length,i="";++n<o;)i=e(i,r[n],n);return i}}function gn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4])}var n=Ia(e.prototype),r=e.apply(n,t);return $o(r)?r:n}}function vn(e){function t(n,r,o){o&&Qn(n,r,o)&&(r=null);var i=Dn(n,e,null,null,null,null,null,r);return i.placeholder=t.placeholder,i}return t}function mn(e,t){return function(n,r,o){if(o&&Qn(n,r,o)&&(r=null),r=kn(r,o,3),1==r.length){n=ar(n);var i=at(n,r,e,t);if(!n.length||i!==t)return i}return St(n,r,e,t)}}function yn(e,n){return function(r,o,i){if(o=kn(o,i,3),Ps(r)){var a=t(r,o,n);return a>-1?r[a]:w}return Pt(r,o,e)}}function bn(e){return function(n,r,o){return n&&n.length?(r=kn(r,o,3),t(n,r,e)):-1}}function _n(e){return function(t,n,r){return n=kn(n,r,3),Pt(t,n,e,!0)}}function wn(e){return function(){for(var t,n=arguments.length,r=e?n:-1,o=0,i=Ii(n);e?r--:++r<n;){var a=i[o++]=arguments[r];if("function"!=typeof a)throw new Wi(j);!t&&X.prototype.thru&&"wrapper"==Fn(a)&&(t=new X([]))}for(r=t?-1:n;++r<n;){a=i[r];var s=Fn(a),u="wrapper"==s?qa(a):null;t=u&&Zn(u[0])&&u[1]==(O|A|x|L)&&!u[4].length&&1==u[9]?t[Fn(u[0])].apply(t,u[3]):1==a.length&&Zn(a)?t[s]():t.thru(a)}return function(){var e=arguments;if(t&&1==e.length&&Ps(e[0]))return t.plant(e[0]).value();for(var r=0,o=n?i[r].apply(this,e):e[0];++r<n;)o=i[r].call(this,o);return o}}}function En(e,t){return function(n,r,o){return"function"==typeof r&&o===w&&Ps(n)?e(n,r):t(n,on(r,o,3))}}function Cn(e){return function(t,n,r){return("function"!=typeof n||r!==w)&&(n=on(n,r,3)),e(t,n,Yo)}}function Sn(e){return function(t,n,r){return("function"!=typeof n||r!==w)&&(n=on(n,r,3)),e(t,n)}}function Tn(e){return function(t,n,r){var o={};return n=kn(n,r,3),Ot(t,function(t,r,i){var a=n(t,r,i);r=e?a:r,t=e?t:a,o[r]=t}),o}}function An(e){return function(t,n,r){return t=o(t),(e?t:"")+On(t,n,r)+(e?"":t)}}function Pn(e){var t=po(function(n,r){var o=g(r,t.placeholder);return Dn(n,e,null,r,o)});return t}function xn(e,t){return function(n,r,o,i){var a=arguments.length<3;return"function"==typeof r&&i===w&&Ps(n)?e(n,r,o,a):zt(n,kn(r,i,4),o,a,t)}}function $n(e,t,n,r,o,i,a,s,u,l){function c(){for(var b=arguments.length,_=b,E=Ii(b);_--;)E[_]=arguments[_];if(r&&(E=sn(E,r,o)),i&&(E=un(E,i,a)),d||m){var T=c.placeholder,A=g(E,T);if(b-=A.length,l>b){var P=s?nt(s):null,O=ya(l-b,0),L=d?A:null,N=d?null:A,D=d?E:null,I=d?null:E;t|=d?x:$,t&=~(d?$:x),v||(t&=~(C|S));var M=[e,t,n,D,L,I,N,P,u,O],R=$n.apply(w,M);return Zn(e)&&Wa(R,M),R.placeholder=T,R}}var k=h?n:this,F=p?k[e]:e;return s&&(E=rr(E,s)),f&&u<E.length&&(E.length=u),this&&this!==Xe&&this instanceof c&&(F=y||gn(e)),F.apply(k,E)}var f=t&O,h=t&C,p=t&S,d=t&A,v=t&T,m=t&P,y=p?null:gn(e);return c}function On(e,t,n){var r=e.length;if(t=+t,r>=t||!va(t))return"";var o=t-r;return n=null==n?" ":n+"",ci(n,na(o/n.length)).slice(0,o)}function Ln(e,t,n,r){function o(){for(var t=-1,s=arguments.length,u=-1,l=r.length,c=Ii(s+l);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++t];var f=this&&this!==Xe&&this instanceof o?a:e;return f.apply(i?n:this,c)}var i=t&C,a=gn(e);return o}function Nn(e){return function(t,n,r,o){var i=kn(r);return null==r&&i===bt?nn(t,n,e):rn(t,n,i(r,o,1),e)}}function Dn(e,t,n,r,o,i,a,s){var u=t&S;if(!u&&"function"!=typeof e)throw new Wi(j);var l=r?r.length:0;if(l||(t&=~(x|$),r=o=null),l-=o?o.length:0,t&$){var c=r,f=o;r=o=null}var h=u?null:qa(e),p=[e,t,n,r,o,c,f,i,a,s];if(h&&(er(p,h),t=p[1],s=p[9]),p[9]=null==s?u?0:e.length:ya(s-l,0)||0,t==C)var d=pn(p[0],p[2]);else d=t!=x&&t!=(C|x)||p[4].length?$n.apply(w,p):Ln.apply(w,p);var g=h?ja:Wa;return g(d,p)}function In(e,t,n,r,o,i,a){var s=-1,u=e.length,l=t.length;if(u!=l&&!(o&&l>u))return!1;for(;++s<u;){var c=e[s],f=t[s],h=r?r(o?f:c,o?c:f,s):w;if(h!==w){if(h)continue;return!1}if(o){if(!ft(t,function(e){return c===e||n(c,e,r,o,i,a)}))return!1}else if(c!==f&&!n(c,f,r,o,i,a))return!1}return!0}function Mn(e,t,n){switch(n){case W:case V:return+e==+t;case H:return e.name==t.name&&e.message==t.message;case Y:return e!=+e?t!=+t:e==+t;case K:case J:return e==t+""}return!1}function Rn(e,t,n,r,o,i,a){var s=js(e),u=s.length,l=js(t),c=l.length;if(u!=c&&!o)return!1;for(var f=u;f--;){var h=s[f];if(!(o?h in t:Qi.call(t,h)))return!1}for(var p=o;++f<u;){h=s[f];var d=e[h],g=t[h],v=r?r(o?g:d,o?d:g,h):w;if(!(v===w?n(d,g,r,o,i,a):v))return!1;p||(p="constructor"==h)}if(!p){var m=e.constructor,y=t.constructor;if(m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function kn(e,t,n){var r=G.callback||bi;return r=r===bi?bt:r,n?r(e,t,n):r}function Fn(e){for(var t=e.name,n=Na[t],r=n?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function jn(e,t,r){var o=G.indexOf||_r;return o=o===_r?n:o,e?o(e,t,r):o}function Un(e){for(var t=Qo(e),n=t.length;n--;)t[n][2]=Xn(t[n][1]);return t}function qn(e,t){var n=null==e?w:e[t];return No(n)?n:w}function Bn(e,t,n){for(var r=-1,o=n?n.length:0;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ba(t,e+a);break;case"takeRight":e=ya(e,t-a)}}return{start:e,end:t}}function Wn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Qi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Vn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Ui),new t}function Hn(e,t,n){var r=e.constructor;switch(t){case ee:return an(e);case W:case V:return new r(+e);case te:case ne:case re:case oe:case ie:case ae:case se:case ue:case le:var o=e.buffer;return new r(n?an(o):o,e.byteOffset,e.length);case Y:case J:return new r(e);case K:var i=new r(e.source,xe.exec(e));i.lastIndex=e.lastIndex}return i}function zn(e,t,n){null==e||Kn(t,e)||(t=ur(t),e=1==t.length?e:Dt(e,Gt(t,0,-1)),t=Er(t));var r=null==e?e:e[t];return null==r?w:r.apply(e,n)}function Gn(e){return null!=e&&Jn(Ba(e))}function Yn(e,t){return e="number"==typeof e||Le.test(e)?+e:-1,t=null==t?Oa:t,e>-1&&e%1==0&&t>e}function Qn(e,t,n){if(!$o(n))return!1;var r=typeof t;if("number"==r?Gn(n)&&Yn(t,n.length):"string"==r&&t in n){var o=n[t];return e===e?e===o:o!==o}return!1}function Kn(e,t){var n=typeof e;if("string"==n&&we.test(e)||"number"==n)return!0;if(Ps(e))return!1;var r=!_e.test(e);return r||null!=t&&e in sr(t)}function Zn(e){var t=Fn(e);if(!(t in Be.prototype))return!1;var n=G[t];if(e===n)return!0;var r=qa(n);return!!r&&e===r[0]}function Jn(e){return"number"==typeof e&&e>-1&&e%1==0&&Oa>=e}function Xn(e){return e===e&&!$o(e)}function er(e,t){var n=e[1],r=t[1],o=n|r,i=O>o,a=r==O&&n==A||r==O&&n==L&&e[7].length<=t[8]||r==(O|L)&&n==A;if(!i&&!a)return e;r&C&&(e[2]=t[2],o|=n&C?0:T);var s=t[3];if(s){var u=e[3];e[3]=u?sn(u,s,t[4]):nt(s),e[4]=u?g(e[3],U):nt(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?un(u,s,t[6]):nt(s),e[6]=u?g(e[5],U):nt(t[6])),s=t[7],s&&(e[7]=nt(s)),r&O&&(e[8]=null==e[8]?t[8]:ba(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function tr(e,t){e=sr(e);for(var n=-1,r=t.length,o={};++n<r;){var i=t[n];i in e&&(o[i]=e[i])}return o}function nr(e,t){var n={};return $t(e,function(e,r,o){t(e,r,o)&&(n[r]=e)}),n}function rr(e,t){for(var n=e.length,r=ba(t.length,n),o=nt(e);r--;){var i=t[r];e[r]=Yn(i,n)?o[i]:w}return e}function or(e){var t;G.support;if(!p(e)||Zi.call(e)!=Q||!Qi.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return $t(e,function(e,t){n=t}),n===w||Qi.call(e,n)}function ir(e){for(var t=Yo(e),n=t.length,r=n&&e.length,o=!!r&&Jn(r)&&(Ps(e)||Eo(e)),i=-1,a=[];++i<n;){var s=t[i];(o&&Yn(s,r)||Qi.call(e,s))&&a.push(s)}return a}function ar(e){return null==e?[]:Gn(e)?$o(e)?e:Ui(e):Xo(e)}function sr(e){return $o(e)?e:Ui(e)}function ur(e){if(Ps(e))return e;var t=[];return o(e).replace(Ee,function(e,n,r,o){t.push(r?o.replace(Ae,"$1"):n||e)}),t}function lr(e){return e instanceof Be?e.clone():new X(e.__wrapped__,e.__chain__,nt(e.__actions__))}function cr(e,t,n){t=(n?Qn(e,t,n):null==t)?1:ya(+t||1,1);for(var r=0,o=e?e.length:0,i=-1,a=Ii(na(o/t));o>r;)a[++i]=Gt(e,r,r+=t);return a}function fr(e){for(var t=-1,n=e?e.length:0,r=-1,o=[];++t<n;){var i=e[t];i&&(o[++r]=i)}return o}function hr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0>t?0:t)):[]}function pr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gt(e,0,0>t?0:t)):[]}function dr(e,t,n){return e&&e.length?en(e,kn(t,n,3),!0,!0):[]}function gr(e,t,n){return e&&e.length?en(e,kn(t,n,3),!0):[]}function vr(e,t,n,r){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&Qn(e,t,n)&&(n=0,r=o),Tt(e,t,n,r)):[]}function mr(e){return e?e[0]:w}function yr(e,t,n){var r=e?e.length:0;return n&&Qn(e,t,n)&&(t=!1),r?xt(e,t):[]}function br(e){var t=e?e.length:0;return t?xt(e,!0):[]}function _r(e,t,r){var o=e?e.length:0;if(!o)return-1;if("number"==typeof r)r=0>r?ya(o+r,0):r;else if(r){var i=nn(e,t),a=e[i];return(t===t?t===a:a!==a)?i:-1}return n(e,t,r||0)}function wr(e){return pr(e,1)}function Er(e){var t=e?e.length:0;return t?e[t-1]:w}function Cr(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r;if("number"==typeof n)o=(0>n?ya(r+n,0):ba(n||0,r-1))+1;else if(n){o=nn(e,t,!0)-1;var i=e[o];return(t===t?t===i:i!==i)?o:-1}if(t!==t)return h(e,o,!0);for(;o--;)if(e[o]===t)return o;return-1}function Sr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=jn(),o=e.length;++n<o;)for(var i=0,a=e[n];(i=r(t,a,i))>-1;)ca.call(t,i,1);return t}function Tr(e,t,n){var r=[];if(!e||!e.length)return r;var o=-1,i=[],a=e.length;for(t=kn(t,n,3);++o<a;){var s=e[o];t(s,o,e)&&(r.push(s),i.push(o))}return Vt(e,i),r}function Ar(e){return hr(e,1)}function Pr(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Qn(e,t,n)&&(t=0,n=r),Gt(e,t,n)):[]}function xr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0,0>t?0:t)):[]}function $r(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gt(e,0>t?0:t)):[]}function Or(e,t,n){return e&&e.length?en(e,kn(t,n,3),!1,!0):[]}function Lr(e,t,n){return e&&e.length?en(e,kn(t,n,3)):[]}function Nr(e,t,r,o){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(o=r,r=Qn(e,t,o)?null:t,t=!1);var a=kn();return(null!=r||a!==bt)&&(r=a(r,o,3)),t&&jn()==n?v(e,r):Jt(e,r)}function Dr(e){if(!e||!e.length)return[];var t=-1,n=0;e=st(e,function(e){
return Gn(e)?(n=ya(e.length,n),!0):void 0});for(var r=Ii(n);++t<n;)r[t]=ut(e,Bt(t));return r}function Ir(e,t,n){var r=e?e.length:0;if(!r)return[];var o=Dr(e);return null==t?o:(t=on(t,n,4),ut(o,function(e){return lt(e,t,w,!0)}))}function Mr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Gn(n))var r=r?Et(r,n).concat(Et(n,r)):n}return r?Jt(r):[]}function Rr(e,t){var n=-1,r=e?e.length:0,o={};for(!r||t||Ps(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function kr(e){var t=G(e);return t.__chain__=!0,t}function Fr(e,t,n){return t.call(n,e),e}function jr(e,t,n){return t.call(n,e)}function Ur(){return kr(this)}function qr(){return new X(this.value(),this.__chain__)}function Br(e){for(var t,n=this;n instanceof Z;){var r=lr(n);t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function Wr(){var e=this.__wrapped__;return e instanceof Be?(this.__actions__.length&&(e=new Be(this)),new X(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function Vr(){return this.value()+""}function Hr(){return tn(this.__wrapped__,this.__actions__)}function zr(e,t,n){var r=Ps(e)?it:Ct;return n&&Qn(e,t,n)&&(t=null),("function"!=typeof t||n!==w)&&(t=kn(t,n,3)),r(e,t)}function Gr(e,t,n){var r=Ps(e)?st:At;return t=kn(t,n,3),r(e,t)}function Yr(e,t){return rs(e,Ft(t))}function Qr(e,t,n,r){var o=e?Ba(e):0;return Jn(o)||(e=Xo(e),o=e.length),o?(n="number"!=typeof n||r&&Qn(t,n,r)?0:0>n?ya(o+n,0):n||0,"string"==typeof e||!Ps(e)&&Ro(e)?o>n&&e.indexOf(t,n)>-1:jn(e,t,n)>-1):!1}function Kr(e,t,n){var r=Ps(e)?ut:kt;return t=kn(t,n,3),r(e,t)}function Zr(e,t){return Kr(e,Pi(t))}function Jr(e,t,n){var r=Ps(e)?st:At;return t=kn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Xr(e,t,n){if(n?Qn(e,t,n):null==t){e=ar(e);var r=e.length;return r>0?e[Ht(0,r-1)]:w}var o=-1,i=qo(e),r=i.length,a=r-1;for(t=ba(0>t?0:+t||0,r);++o<t;){var s=Ht(o,a),u=i[s];i[s]=i[o],i[o]=u}return i.length=t,i}function eo(e){return Xr(e,Ta)}function to(e){var t=e?Ba(e):0;return Jn(t)?t:js(e).length}function no(e,t,n){var r=Ps(e)?ft:Yt;return n&&Qn(e,t,n)&&(t=null),("function"!=typeof t||n!==w)&&(t=kn(t,n,3)),r(e,t)}function ro(e,t,n){if(null==e)return[];n&&Qn(e,t,n)&&(t=null);var r=-1;t=kn(t,n,3);var o=kt(e,function(e,n,o){return{criteria:t(e,n,o),index:++r,value:e}});return Qt(o,s)}function oo(e,t,n,r){return null==e?[]:(r&&Qn(t,n,r)&&(n=null),Ps(t)||(t=null==t?[]:[t]),Ps(n)||(n=null==n?[]:[n]),Kt(e,t,n))}function io(e,t){return Gr(e,Ft(t))}function ao(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Wi(j);var n=e;e=t,t=n}return e=va(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function so(e,t,n){return n&&Qn(e,t,n)&&(t=null),t=e&&null==t?e.length:ya(+t||0,0),Dn(e,O,null,null,null,null,t)}function uo(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Wi(j);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function lo(e,t,n){function r(){h&&ra(h),u&&ra(u),u=h=p=w}function o(){var n=t-(ds()-c);if(0>=n||n>t){u&&ra(u);var r=p;u=h=p=w,r&&(d=ds(),l=e.apply(f,s),h||u||(s=f=null))}else h=la(o,n)}function i(){h&&ra(h),u=h=p=w,(v||g!==t)&&(d=ds(),l=e.apply(f,s),h||u||(s=f=null))}function a(){if(s=arguments,c=ds(),f=this,p=v&&(h||!m),g===!1)var n=m&&!h;else{u||m||(d=c);var r=g-(c-d),a=0>=r||r>g;a?(u&&(u=ra(u)),d=c,l=e.apply(f,s)):u||(u=la(i,r))}return a&&h?h=ra(h):h||t===g||(h=la(o,t)),n&&(a=!0,l=e.apply(f,s)),!a||h||u||(s=f=null),l}var s,u,l,c,f,h,p,d=0,g=!1,v=!0;if("function"!=typeof e)throw new Wi(j);if(t=0>t?0:+t||0,n===!0){var m=!0;v=!1}else $o(n)&&(m=n.leading,g="maxWait"in n&&ya(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return a.cancel=r,a}function co(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Wi(j);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new co.Cache,n}function fo(e){if("function"!=typeof e)throw new Wi(j);return function(){return!e.apply(this,arguments)}}function ho(e){return uo(2,e)}function po(e,t){if("function"!=typeof e)throw new Wi(j);return t=ya(t===w?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,o=ya(n.length-t,0),i=Ii(o);++r<o;)i[r]=n[t+r];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,n[0],i);case 2:return e.call(this,n[0],n[1],i)}var a=Ii(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=i,e.apply(this,a)}}function go(e){if("function"!=typeof e)throw new Wi(j);return function(t){return e.apply(this,t)}}function vo(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Wi(j);return n===!1?r=!1:$o(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),qe.leading=r,qe.maxWait=+t,qe.trailing=o,lo(e,t,qe)}function mo(e,t){return t=null==t?wi:t,Dn(t,x,null,[e],[])}function yo(e,t,n,r){return t&&"boolean"!=typeof t&&Qn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?_t(e,t,on(n,r,1)):_t(e,t)}function bo(e,t,n){return"function"==typeof t?_t(e,!0,on(t,n,1)):_t(e,!0)}function _o(e,t){return e>t}function wo(e,t){return e>=t}function Eo(e){return p(e)&&Gn(e)&&Zi.call(e)==q}function Co(e){return e===!0||e===!1||p(e)&&Zi.call(e)==W}function So(e){return p(e)&&Zi.call(e)==V}function To(e){return!!e&&1===e.nodeType&&p(e)&&Zi.call(e).indexOf("Element")>-1}function Ao(e){return null==e?!0:Gn(e)&&(Ps(e)||Ro(e)||Eo(e)||p(e)&&$s(e.splice))?!e.length:!js(e).length}function Po(e,t,n,r){n="function"==typeof n?on(n,r,3):w;var o=n?n(e,t):w;return o===w?It(e,t,n):!!o}function xo(e){return p(e)&&"string"==typeof e.message&&Zi.call(e)==H}function $o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oo(e,t,n,r){return n="function"==typeof n?on(n,r,3):w,Rt(e,Un(t),n)}function Lo(e){return Io(e)&&e!=+e}function No(e){return null==e?!1:Zi.call(e)==z?Xi.test(Yi.call(e)):p(e)&&Oe.test(e)}function Do(e){return null===e}function Io(e){return"number"==typeof e||p(e)&&Zi.call(e)==Y}function Mo(e){return p(e)&&Zi.call(e)==K}function Ro(e){return"string"==typeof e||p(e)&&Zi.call(e)==J}function ko(e){return p(e)&&Jn(e.length)&&!!je[Zi.call(e)]}function Fo(e){return e===w}function jo(e,t){return t>e}function Uo(e,t){return t>=e}function qo(e){var t=e?Ba(e):0;return Jn(t)?t?nt(e):[]:Xo(e)}function Bo(e){return yt(e,Yo(e))}function Wo(e,t,n){var r=Ia(e);return n&&Qn(e,t,n)&&(t=null),t?vt(r,t):r}function Vo(e){return Nt(e,Yo(e))}function Ho(e,t,n){var r=null==e?w:Dt(e,ur(t),t+"");return r===w?n:r}function zo(e,t){if(null==e)return!1;var n=Qi.call(e,t);if(!n&&!Kn(t)){if(t=ur(t),e=1==t.length?e:Dt(e,Gt(t,0,-1)),null==e)return!1;t=Er(t),n=Qi.call(e,t)}return n||Jn(e.length)&&Yn(t,e.length)&&(Ps(e)||Eo(e))}function Go(e,t,n){n&&Qn(e,t,n)&&(t=null);for(var r=-1,o=js(e),i=o.length,a={};++r<i;){var s=o[r],u=e[s];t?Qi.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function Yo(e){if(null==e)return[];$o(e)||(e=Ui(e));var t=e.length;t=t&&Jn(t)&&(Ps(e)||Eo(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,i=Ii(t),a=t>0;++r<t;)i[r]=r+"";for(var s in e)a&&Yn(s,t)||"constructor"==s&&(o||!Qi.call(e,s))||i.push(s);return i}function Qo(e){e=sr(e);for(var t=-1,n=js(e),r=n.length,o=Ii(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o}function Ko(e,t,n){var r=null==e?w:e[t];return r===w&&(null==e||Kn(t,e)||(t=ur(t),e=1==t.length?e:Dt(e,Gt(t,0,-1)),r=null==e?w:e[Er(t)]),r=r===w?n:r),$s(r)?r.call(e):r}function Zo(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||Kn(t,e)?[r]:ur(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=t[o];$o(s)&&(o==a?s[u]=n:null==s[u]&&(s[u]=Yn(t[o+1])?[]:{})),s=s[u]}return e}function Jo(e,t,n,r){var o=Ps(e)||ko(e);if(t=kn(t,r,4),null==n)if(o||$o(e)){var i=e.constructor;n=o?Ps(e)?new i:[]:Ia($s(i)?i.prototype:null)}else n={};return(o?rt:Ot)(e,function(e,r,o){return t(n,e,r,o)}),n}function Xo(e){return Xt(e,js(e))}function ei(e){return Xt(e,Yo(e))}function ti(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=ba(t,n)&&e<ya(t,n)}function ni(e,t,n){n&&Qn(e,t,n)&&(t=n=null);var r=null==e,o=null==t;if(null==n&&(o&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,o=!0)),r&&o&&(t=1,o=!1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=Ca();return ba(e+i*(t-e+aa("1e-"+((i+"").length-1))),t)}return Ht(e,t)}function ri(e){return e=o(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function oi(e){return e=o(e),e&&e.replace(Ne,l).replace(Te,"")}function ii(e,t,n){e=o(e),t+="";var r=e.length;return n=n===w?r:ba(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function ai(e){return e=o(e),e&&ve.test(e)?e.replace(de,c):e}function si(e){return e=o(e),e&&Se.test(e)?e.replace(Ce,"\\$&"):e}function ui(e,t,n){e=o(e),t=+t;var r=e.length;if(r>=t||!va(t))return e;var i=(t-r)/2,a=oa(i),s=na(i);return n=On("",s,n),n.slice(0,a)+e+n}function li(e,t,n){return n&&Qn(e,t,n)&&(t=0),Ea(e,t)}function ci(e,t){var n="";if(e=o(e),t=+t,1>t||!e||!va(t))return n;do t%2&&(n+=e),t=oa(t/2),e+=e;while(t);return n}function fi(e,t,n){return e=o(e),n=null==n?0:ba(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function hi(e,t,n){var r=G.templateSettings;n&&Qn(e,t,n)&&(t=n=null),e=o(e),t=gt(vt({},n||t),r,dt);var i,a,s=gt(vt({},t.imports),r.imports,dt),u=js(s),l=Xt(s,u),c=0,h=t.interpolate||De,p="__p += '",d=qi((t.escape||De).source+"|"+h.source+"|"+(h===be?Pe:De).source+"|"+(t.evaluate||De).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(d,function(t,n,r,o,s,u){return r||(r=o),p+=e.slice(c,u).replace(Ie,f),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),p+="';\n";var v=t.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(ce,""):p).replace(fe,"$1").replace(he,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Zs(function(){return ki(u,g+"return "+p).apply(w,l)});if(m.source=p,xo(m))throw m;return m}function pi(e,t,n){var r=e;return(e=o(e))?(n?Qn(r,t,n):null==t)?e.slice(m(e),y(e)+1):(t+="",e.slice(i(e,t),a(e,t)+1)):e}function di(e,t,n){var r=e;return e=o(e),e?(n?Qn(r,t,n):null==t)?e.slice(m(e)):e.slice(i(e,t+"")):e}function gi(e,t,n){var r=e;return e=o(e),e?(n?Qn(r,t,n):null==t)?e.slice(0,y(e)+1):e.slice(0,a(e,t+"")+1):e}function vi(e,t,n){n&&Qn(e,t,n)&&(t=null);var r=N,i=D;if(null!=t)if($o(t)){var a="separator"in t?t.separator:a;r="length"in t?+t.length||0:r,i="omission"in t?o(t.omission):i}else r=+t||0;if(e=o(e),r>=e.length)return e;var s=r-i.length;if(1>s)return i;var u=e.slice(0,s);if(null==a)return u+i;if(Mo(a)){if(e.slice(s).search(a)){var l,c,f=e.slice(0,s);for(a.global||(a=qi(a.source,(xe.exec(a)||"")+"g")),a.lastIndex=0;l=a.exec(f);)c=l.index;u=u.slice(0,null==c?s:c)}}else if(e.indexOf(a,s)!=s){var h=u.lastIndexOf(a);h>-1&&(u=u.slice(0,h))}return u+i}function mi(e){return e=o(e),e&&ge.test(e)?e.replace(pe,b):e}function yi(e,t,n){return n&&Qn(e,t,n)&&(t=null),e=o(e),e.match(t||Me)||[]}function bi(e,t,n){return n&&Qn(e,t,n)&&(t=null),p(e)?Ei(e):bt(e,t)}function _i(e){return function(){return e}}function wi(e){return e}function Ei(e){return Ft(_t(e,!0))}function Ci(e,t){return jt(e,_t(t,!0))}function Si(e,t,n){if(null==n){var r=$o(t),o=r?js(t):null,i=o&&o.length?Nt(t,o):null;(i?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=Nt(t,js(t)));var a=!0,s=-1,u=$s(e),l=i.length;n===!1?a=!1:$o(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=i[s],f=t[c];e[c]=f,u&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__),o=r.__actions__=nt(this.__actions__);return o.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var i=[this.value()];return sa.apply(i,arguments),t.apply(e,i)}}(f))}return e}function Ti(){return d._=Ji,this}function Ai(){}function Pi(e){return Kn(e)?Bt(e):Wt(e)}function xi(e){return function(t){return Dt(e,ur(t),t+"")}}function $i(e,t,n){n&&Qn(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,o=ya(na((t-e)/(n||1)),0),i=Ii(o);++r<o;)i[r]=e,e+=n;return i}function Oi(e,t,n){if(e=oa(e),1>e||!va(e))return[];var r=-1,o=Ii(ba(e,Aa));for(t=on(t,n,1);++r<e;)Aa>r?o[r]=t(r):t(r);return o}function Li(e){var t=++Ki;return o(e)+t}function Ni(e,t){return(+e||0)+(+t||0)}function Di(e,t,n){n&&Qn(e,t,n)&&(t=null);var r=kn(),o=null==t;return o&&r===bt||(o=!1,t=r(t,n,3)),o?ht(Ps(e)?e:ar(e)):Zt(e,t)}d=d?et.defaults(Xe.Object(),d,et.pick(Xe,ke)):Xe;var Ii=d.Array,Mi=d.Date,Ri=d.Error,ki=d.Function,Fi=d.Math,ji=d.Number,Ui=d.Object,qi=d.RegExp,Bi=d.String,Wi=d.TypeError,Vi=Ii.prototype,Hi=Ui.prototype,zi=Bi.prototype,Gi=(Gi=d.window)?Gi.document:null,Yi=ki.prototype.toString,Qi=Hi.hasOwnProperty,Ki=0,Zi=Hi.toString,Ji=d._,Xi=qi("^"+si(Yi.call(Qi)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=qn(d,"ArrayBuffer"),ta=qn(ea&&new ea(0),"slice"),na=Fi.ceil,ra=d.clearTimeout,oa=Fi.floor,ia=qn(Ui,"getPrototypeOf"),aa=d.parseFloat,sa=Vi.push,ua=qn(d,"Set"),la=d.setTimeout,ca=Vi.splice,fa=qn(d,"Uint8Array"),ha=qn(d,"WeakMap"),pa=function(){try{var e=qn(d,"Float64Array"),t=new e(new ea(10),0,1)&&e}catch(n){}return t||null}(),da=qn(Ui,"create"),ga=qn(Ii,"isArray"),va=d.isFinite,ma=qn(Ui,"keys"),ya=Fi.max,ba=Fi.min,_a=qn(Mi,"now"),wa=qn(ji,"isFinite"),Ea=d.parseInt,Ca=Fi.random,Sa=ji.NEGATIVE_INFINITY,Ta=ji.POSITIVE_INFINITY,Aa=4294967295,Pa=Aa-1,xa=Aa>>>1,$a=pa?pa.BYTES_PER_ELEMENT:0,Oa=9007199254740991,La=ha&&new ha,Na={},Da=G.support={};!function(e){var t=function(){this.x=e},n=[];t.prototype={valueOf:e,y:e};for(var r in new t)n.push(r);try{Da.dom=11===Gi.createDocumentFragment().nodeType}catch(o){Da.dom=!1}}(1,0),G.templateSettings={escape:me,evaluate:ye,interpolate:be,variable:"",imports:{_:G}};var Ia=function(){function e(){}return function(t){if($o(t)){e.prototype=t;var n=new e;e.prototype=null}return n||{}}}(),Ma=fn(Ot),Ra=fn(Lt,!0),ka=hn(),Fa=hn(!0),ja=La?function(e,t){return La.set(e,t),e}:wi;ta||(an=ea&&fa?function(e){var t=e.byteLength,n=pa?oa(t/$a):0,r=n*$a,o=new ea(t);if(n){var i=new pa(o,0,n);i.set(new pa(e,0,n))}return t!=r&&(i=new fa(o,r),i.set(new fa(e,r))),o}:_i(null));var Ua=da&&ua?function(e){return new Ze(e)}:_i(null),qa=La?function(e){return La.get(e)}:Ai,Ba=Bt("length"),Wa=function(){var e=0,t=0;return function(n,r){var o=ds(),i=M-(o-t);if(t=o,i>0){if(++e>=I)return n}else e=0;return ja(n,r)}}(),Va=po(function(e,t){return Gn(e)?Et(e,xt(t,!1,!0)):[]}),Ha=bn(),za=bn(!0),Ga=po(function(e){for(var t=e.length,r=t,o=Ii(f),i=jn(),a=i==n,s=[];r--;){var u=e[r]=Gn(u=e[r])?u:[];o[r]=a&&u.length>=120?Ua(r&&u):null}var l=e[0],c=-1,f=l?l.length:0,h=o[0];e:for(;++c<f;)if(u=l[c],(h?Je(h,u):i(s,u,0))<0){for(var r=t;--r;){var p=o[r];if((p?Je(p,u):i(e[r],u,0))<0)continue e}h&&h.push(u),s.push(u)}return s}),Ya=po(function(t,n){n=xt(n);var r=mt(t,n);return Vt(t,n.sort(e)),r}),Qa=Nn(),Ka=Nn(!0),Za=po(function(e){return Jt(xt(e,!1,!0))}),Ja=po(function(e,t){return Gn(e)?Et(e,t):[]}),Xa=po(Dr),es=po(function(e){var t=e.length,n=t>2?e[t-2]:w,r=t>1?e[t-1]:w;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):w,r=w),e.length=t,Ir(e,n,r)}),ts=po(function(e,t){return mt(e,xt(t))}),ns=ln(function(e,t,n){Qi.call(e,n)?++e[n]:e[n]=1}),rs=yn(Ma),os=yn(Ra,!0),is=En(rt,Ma),as=En(ot,Ra),ss=ln(function(e,t,n){Qi.call(e,n)?e[n].push(t):e[n]=[t]}),us=ln(function(e,t,n){e[n]=t}),ls=po(function(e,t,n){var r=-1,o="function"==typeof t,i=Kn(t),a=Gn(e)?Ii(e.length):[];return Ma(e,function(e){var s=o?t:i&&null!=e?e[t]:null;a[++r]=s?s.apply(e,n):zn(e,t,n)}),a}),cs=ln(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),fs=xn(lt,Ma),hs=xn(ct,Ra),ps=po(function(e,t){if(null==e)return[];var n=t[2];return n&&Qn(t[0],t[1],n)&&(t.length=1),Kt(e,xt(t),[])}),ds=_a||function(){return(new Mi).getTime()},gs=po(function(e,t,n){var r=C;if(n.length){var o=g(n,gs.placeholder);r|=x}return Dn(e,r,t,n,o)}),vs=po(function(e,t){t=t.length?xt(t):Vo(e);for(var n=-1,r=t.length;++n<r;){var o=t[n];e[o]=Dn(e[o],C,e)}return e}),ms=po(function(e,t,n){var r=C|S;if(n.length){var o=g(n,ms.placeholder);r|=x}return Dn(t,r,e,n,o)}),ys=vn(A),bs=vn(P),_s=po(function(e,t){return wt(e,1,t)}),ws=po(function(e,t,n){return wt(e,t,n)}),Es=wn(),Cs=wn(!0),Ss=Pn(x),Ts=Pn($),As=po(function(e,t){return Dn(e,L,null,null,null,xt(t))}),Ps=ga||function(e){return p(e)&&Jn(e.length)&&Zi.call(e)==B};Da.dom||(To=function(e){return!!e&&1===e.nodeType&&p(e)&&!Os(e)});var xs=wa||function(e){return"number"==typeof e&&va(e)},$s=r(/x/)||fa&&!r(fa)?function(e){return Zi.call(e)==z}:r,Os=ia?function(e){if(!e||Zi.call(e)!=Q)return!1;var t=qn(e,"valueOf"),n=t&&(n=ia(t))&&ia(n);return n?e==n||ia(e)==n:or(e)}:or,Ls=cn(function(e,t,n){return n?gt(e,t,n):vt(e,t)}),Ns=po(function(e){var t=e[0];return null==t?t:(e.push(pt),Ls.apply(w,e))}),Ds=_n(Ot),Is=_n(Lt),Ms=Cn(ka),Rs=Cn(Fa),ks=Sn(Ot),Fs=Sn(Lt),js=ma?function(e){var t=null==e?null:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Gn(e)?ir(e):$o(e)?ma(e):[]}:ir,Us=Tn(!0),qs=Tn(),Bs=cn(Ut),Ws=po(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=ut(xt(t),Bi);return tr(e,Et(Yo(e),t))}var n=on(t[0],t[1],3);return nr(e,function(e,t,r){return!n(e,t,r)})}),Vs=po(function(e,t){return null==e?{}:"function"==typeof t[0]?nr(e,on(t[0],t[1],3)):tr(e,xt(t))}),Hs=dn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),zs=dn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Gs=An(),Ys=An(!0);8!=Ea(Re+"08")&&(li=function(e,t,n){return(n?Qn(e,t,n):null==t)?t=0:t&&(t=+t),e=pi(e),Ea(e,t||($e.test(e)?16:10))});var Qs=dn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ks=dn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Zs=po(function(e,t){try{return e.apply(w,t)}catch(n){return xo(n)?n:new Ri(n)}}),Js=po(function(e,t){return function(n){return zn(n,e,t)}}),Xs=po(function(e,t){return function(n){return zn(e,n,t)}}),eu=mn(_o,Sa),tu=mn(jo,Ta);return G.prototype=Z.prototype,X.prototype=Ia(Z.prototype),X.prototype.constructor=X,Be.prototype=Ia(Z.prototype),Be.prototype.constructor=Be,ze.prototype["delete"]=Ge,ze.prototype.get=Ye,ze.prototype.has=Qe,ze.prototype.set=Ke,Ze.prototype.push=tt,co.Cache=ze,G.after=ao,G.ary=so,G.assign=Ls,G.at=ts,G.before=uo,G.bind=gs,G.bindAll=vs,G.bindKey=ms,G.callback=bi,G.chain=kr,G.chunk=cr,G.compact=fr,G.constant=_i,G.countBy=ns,G.create=Wo,G.curry=ys,G.curryRight=bs,G.debounce=lo,G.defaults=Ns,G.defer=_s,G.delay=ws,G.difference=Va,G.drop=hr,G.dropRight=pr,G.dropRightWhile=dr,G.dropWhile=gr,G.fill=vr,G.filter=Gr,G.flatten=yr,G.flattenDeep=br,G.flow=Es,G.flowRight=Cs,G.forEach=is,G.forEachRight=as,G.forIn=Ms,G.forInRight=Rs,G.forOwn=ks,G.forOwnRight=Fs,G.functions=Vo,G.groupBy=ss,G.indexBy=us,G.initial=wr,G.intersection=Ga,G.invert=Go,G.invoke=ls,G.keys=js,G.keysIn=Yo,G.map=Kr,G.mapKeys=Us,G.mapValues=qs,G.matches=Ei,G.matchesProperty=Ci,G.memoize=co,G.merge=Bs,G.method=Js,G.methodOf=Xs,G.mixin=Si,G.negate=fo,G.omit=Ws,G.once=ho,G.pairs=Qo,G.partial=Ss,G.partialRight=Ts,G.partition=cs,G.pick=Vs,G.pluck=Zr,G.property=Pi,G.propertyOf=xi,G.pull=Sr,G.pullAt=Ya,G.range=$i,G.rearg=As,G.reject=Jr,G.remove=Tr,G.rest=Ar,G.restParam=po,G.set=Zo,G.shuffle=eo,G.slice=Pr,G.sortBy=ro,G.sortByAll=ps,G.sortByOrder=oo,G.spread=go,G.take=xr,G.takeRight=$r,G.takeRightWhile=Or,G.takeWhile=Lr,G.tap=Fr,G.throttle=vo,G.thru=jr,G.times=Oi,G.toArray=qo,G.toPlainObject=Bo,G.transform=Jo,G.union=Za,G.uniq=Nr,G.unzip=Dr,G.unzipWith=Ir,G.values=Xo,G.valuesIn=ei,G.where=io,G.without=Ja,G.wrap=mo,G.xor=Mr,G.zip=Xa,G.zipObject=Rr,G.zipWith=es,G.backflow=Cs,G.collect=Kr,G.compose=Cs,G.each=is,G.eachRight=as,G.extend=Ls,G.iteratee=bi,G.methods=Vo,G.object=Rr,G.select=Gr,G.tail=Ar,G.unique=Nr,Si(G,G),G.add=Ni,G.attempt=Zs,G.camelCase=Hs,G.capitalize=ri,G.clone=yo,G.cloneDeep=bo,G.deburr=oi,G.endsWith=ii,G.escape=ai,G.escapeRegExp=si,G.every=zr,G.find=rs,G.findIndex=Ha,G.findKey=Ds,G.findLast=os,G.findLastIndex=za,G.findLastKey=Is,G.findWhere=Yr,G.first=mr,G.get=Ho,G.gt=_o,G.gte=wo,G.has=zo,G.identity=wi,G.includes=Qr,G.indexOf=_r,G.inRange=ti,G.isArguments=Eo,G.isArray=Ps,G.isBoolean=Co,G.isDate=So,G.isElement=To,G.isEmpty=Ao,G.isEqual=Po,G.isError=xo,G.isFinite=xs,G.isFunction=$s,G.isMatch=Oo,G.isNaN=Lo,G.isNative=No,G.isNull=Do,G.isNumber=Io,G.isObject=$o,G.isPlainObject=Os,G.isRegExp=Mo,G.isString=Ro,G.isTypedArray=ko,G.isUndefined=Fo,G.kebabCase=zs,G.last=Er,G.lastIndexOf=Cr,G.lt=jo,G.lte=Uo,G.max=eu,G.min=tu,G.noConflict=Ti,G.noop=Ai,G.now=ds,G.pad=ui,G.padLeft=Gs,G.padRight=Ys,G.parseInt=li,G.random=ni,G.reduce=fs,G.reduceRight=hs,G.repeat=ci,G.result=Ko,G.runInContext=_,G.size=to,G.snakeCase=Qs,G.some=no,G.sortedIndex=Qa,G.sortedLastIndex=Ka,G.startCase=Ks,G.startsWith=fi,G.sum=Di,G.template=hi,G.trim=pi,G.trimLeft=di,G.trimRight=gi,G.trunc=vi,G.unescape=mi,G.uniqueId=Li,G.words=yi,G.all=zr,G.any=no,G.contains=Qr,G.eq=Po,G.detect=rs,G.foldl=fs,G.foldr=hs,G.head=mr,G.include=Qr,G.inject=fs,Si(G,function(){var e={};return Ot(G,function(t,n){G.prototype[n]||(e[n]=t)}),e}(),!1),G.sample=Xr,G.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Xr(t,e)}):Xr(this.value())},G.VERSION=E,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){G[e].placeholder=G}),rt(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=F,r=t==R;Be.prototype[e]=function(e,o){var i=this.__filtered__,a=i&&r?new Be(this):this.clone(),s=a.__iteratees__||(a.__iteratees__=[]);return s.push({done:!1,count:0,index:0,iteratee:kn(e,o,1),limit:-1,type:t}),a.__filtered__=i||n,a}}),rt(["drop","take"],function(e,t){var n=e+"While";Be.prototype[e]=function(n){var r=this.__filtered__,o=r&&!t?this.dropWhile():this.clone();if(n=null==n?1:ya(oa(n)||0,0),r)t?o.__takeCount__=ba(o.__takeCount__,n):Er(o.__iteratees__).limit=n;else{var i=o.__views__||(o.__views__=[]);i.push({size:n,type:e+(o.__dir__<0?"Right":"")})}return o},Be.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Be.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),rt(["first","last"],function(e,t){var n="take"+(t?"Right":"");Be.prototype[e]=function(){return this[n](1).value()[0]}}),rt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Be.prototype[e]=function(){return this[n](1)}}),rt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Ft:Pi;Be.prototype[e]=function(e){return this[n](r(e))}}),Be.prototype.compact=function(){return this.filter(wi)},Be.prototype.reject=function(e,t){return e=kn(e,t,1),this.filter(function(t){return!e(t)})},Be.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==w&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Be.prototype.toArray=function(){return this.drop(0)},Ot(Be.prototype,function(e,t){var n=G[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),o=/^(?:first|last)$/.test(t);G.prototype[t]=function(){var t=arguments,i=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof Be,l=t[0],c=u||Ps(a);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=u&&!s;if(o&&!i)return f?e.call(a):n.call(G,this.value());var h=function(e){var r=[e];return sa.apply(r,t),n.apply(G,r)};if(c){var p=f?a:new Be(this),d=e.apply(p,t);if(!o&&(s||d.__actions__)){var g=d.__actions__||(d.__actions__=[]);g.push({func:jr,args:[h],thisArg:G})}return new X(d,i)}return this.thru(h)}}}),rt(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?zi:Vi)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);G.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Ot(Be.prototype,function(e,t){var n=G[t];if(n){var r=n.name,o=Na[r]||(Na[r]=[]);o.push({name:t,func:n})}}),Na[$n(null,S).name]=[{name:"wrapper",func:null}],Be.prototype.clone=We,Be.prototype.reverse=Ve,Be.prototype.value=He,G.prototype.chain=Ur,G.prototype.commit=qr,G.prototype.plant=Br,G.prototype.reverse=Wr,G.prototype.toString=Vr,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Hr,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var w,E="3.9.3",C=1,S=2,T=4,A=8,P=16,x=32,$=64,O=128,L=256,N=30,D="...",I=150,M=16,R=0,k=1,F=2,j="Expected a function",U="__lodash_placeholder__",q="[object Arguments]",B="[object Array]",W="[object Boolean]",V="[object Date]",H="[object Error]",z="[object Function]",G="[object Map]",Y="[object Number]",Q="[object Object]",K="[object RegExp]",Z="[object Set]",J="[object String]",X="[object WeakMap]",ee="[object ArrayBuffer]",te="[object Float32Array]",ne="[object Float64Array]",re="[object Int8Array]",oe="[object Int16Array]",ie="[object Int32Array]",ae="[object Uint8Array]",se="[object Uint8ClampedArray]",ue="[object Uint16Array]",le="[object Uint32Array]",ce=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,he=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39|#96);/g,de=/[&<>"'`]/g,ge=RegExp(pe.source),ve=RegExp(de.source),me=/<%-([\s\S]+?)%>/g,ye=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,we=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ce=/[.*+?^${}()|[\]\/\\]/g,Se=RegExp(Ce.source),Te=/[\u0300-\u036f\ufe20-\ufe23]/g,Ae=/\\(\\)?/g,Pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,$e=/^0[xX]/,Oe=/^\[object .+?Constructor\]$/,Le=/^\d+$/,Ne=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,De=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,Me=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Re=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",ke=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Fe=-1,je={};je[te]=je[ne]=je[re]=je[oe]=je[ie]=je[ae]=je[se]=je[ue]=je[le]=!0,je[q]=je[B]=je[ee]=je[W]=je[V]=je[H]=je[z]=je[G]=je[Y]=je[Q]=je[K]=je[Z]=je[J]=je[X]=!1;var Ue={};Ue[q]=Ue[B]=Ue[ee]=Ue[W]=Ue[V]=Ue[te]=Ue[ne]=Ue[re]=Ue[oe]=Ue[ie]=Ue[Y]=Ue[Q]=Ue[K]=Ue[J]=Ue[ae]=Ue[se]=Ue[ue]=Ue[le]=!0,Ue[H]=Ue[z]=Ue[G]=Ue[Z]=Ue[X]=!1;var qe={leading:!1,maxWait:0,trailing:!1},Be={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},We={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ve={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},He={"function":!0,object:!0},ze={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=He[typeof exports]&&exports&&!exports.nodeType&&exports,Ye=He[typeof module]&&module&&!module.nodeType&&module,Qe=Ge&&Ye&&"object"==typeof global&&global&&global.Object&&global,Ke=He[typeof self]&&self&&self.Object&&self,Ze=He[typeof window]&&window&&window.Object&&window,Je=Ye&&Ye.exports===Ge&&Ge,Xe=Qe||Ze!==(this&&this.window)&&Ze||Ke||this,et=_();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Xe._=et,define(function(){return et})):Ge&&Ye?Je?(Ye.exports=et)._=et:Ge._=et:Xe._=et}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return On.apply(null,arguments)}function t(e){On=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function s(e,t,n,r){return Te(e,t,n,r,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return null==e._pf&&(e._pf=u()),e._pf}function c(e){if(null==e._isValid){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function f(e){var t=s(NaN);return null!=e?a(l(t),e):l(t).userInvalidated=!0,t}function h(e,t){var n,r,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=l(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Nn.length>0)for(n in Nn)r=Nn[n],o=t[r],"undefined"!=typeof o&&(e[r]=o);return e}function p(t){h(this,t),this._d=new Date(+t._d),Dn===!1&&(Dn=!0,e.updateOffset(this),Dn=!1)}function d(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(r=0;o>r;r++)(n&&e[r]!==t[r]||!n&&g(e[r])!==g(t[r]))&&a++;return a+i}function m(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function b(e){for(var t,n,r,o,i=0;i<e.length;){for(o=y(e[i]).split("-"),t=o.length,n=y(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=_(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&v(o,n,!0)>=t-1)break;t--}i++}return null}function _(e){var t=null;if(!In[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Ln._abbr,require("./locale/"+e),w(t)}catch(n){}return In[e]}function w(e,t){var n;return e&&(n="undefined"==typeof t?C(e):E(e,t),n&&(Ln=n)),Ln._abbr}function E(e,t){return null!==t?(t.abbr=e,In[e]||(In[e]=new m),In[e].set(t),w(e),In[e]):(delete In[e],null)}function C(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ln;if(!n(e)){if(t=_(e))return t;e=[e]}return b(e)}function S(e,t){var n=e.toLowerCase();Mn[n]=Mn[n+"s"]=Mn[t]=e}function T(e){return"string"==typeof e?Mn[e]||Mn[e.toLowerCase()]:void 0}function A(e){var t,n,r={};for(n in e)i(e,n)&&(t=T(n),t&&(r[t]=e[n]));return r}function P(t,n){return function(r){return null!=r?($(this,t,r),e.updateOffset(this,n),this):x(this,t)}}function x(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function $(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function O(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),"function"==typeof this[e])return this[e](t);return this}function L(e,t,n){for(var r=""+Math.abs(e),o=e>=0;r.length<t;)r="0"+r;return(o?n?"+":"":"-")+r}function N(e,t,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),e&&(jn[e]=o),t&&(jn[t[0]]=function(){return L(o.apply(this,arguments),t[1],t[2])}),
n&&(jn[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function D(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,r=e.match(Rn);for(t=0,n=r.length;n>t;t++)jn[r[t]]?r[t]=jn[r[t]]:r[t]=D(r[t]);return function(o){var i="";for(t=0;n>t;t++)i+=r[t]instanceof Function?r[t].call(o,e):r[t];return i}}function M(e,t){return e.isValid()?(t=R(t,e.localeData()),Fn[t]||(Fn[t]=I(t)),Fn[t](e)):e.localeData().invalidDate()}function R(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(kn.lastIndex=0;r>=0&&kn.test(e);)e=e.replace(kn,n),kn.lastIndex=0,r-=1;return e}function k(e,t,n){er[e]="function"==typeof t?t:function(e){return e&&n?n:t}}function F(e,t){return i(er,e)?er[e](t._strict,t._locale):new RegExp(j(e))}function j(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)tr[e[n]]=r}function q(e,t){U(e,function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)})}function B(e,t,n){null!=t&&i(tr,e)&&tr[e](t,n._a,n,e)}function W(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function V(e){return this._months[e.month()]}function H(e){return this._monthsShort[e.month()]}function z(e,t,n){var r,o,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(o=s([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function G(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),W(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Y(t){return null!=t?(G(this,t),e.updateOffset(this,!0),this):x(this,"Month")}function Q(){return W(this.year(),this.month())}function K(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[rr]<0||n[rr]>11?rr:n[or]<1||n[or]>W(n[nr],n[rr])?or:n[ir]<0||n[ir]>24||24===n[ir]&&(0!==n[ar]||0!==n[sr]||0!==n[ur])?ir:n[ar]<0||n[ar]>59?ar:n[sr]<0||n[sr]>59?sr:n[ur]<0||n[ur]>999?ur:-1,l(e)._overflowDayOfYear&&(nr>t||t>or)&&(t=or),l(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function J(e,t){var n=!0,r=e+"\n"+(new Error).stack;return a(function(){return n&&(Z(r),n=!1),t.apply(this,arguments)},t)}function X(e,t){fr[e]||(Z(t),fr[e]=!0)}function ee(e){var t,n,r=e._i,o=hr.exec(r);if(o){for(l(e).iso=!0,t=0,n=pr.length;n>t;t++)if(pr[t][1].exec(r)){e._f=pr[t][0]+(o[6]||" ");break}for(t=0,n=dr.length;n>t;t++)if(dr[t][1].exec(r)){e._f+=dr[t][0];break}r.match(Zn)&&(e._f+="Z"),be(e)}else e._isValid=!1}function te(t){var n=gr.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ee(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ne(e,t,n,r,o,i,a){var s=new Date(e,t,n,r,o,i,a);return 1970>e&&s.setFullYear(e),s}function re(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e){return ie(e)?366:365}function ie(e){return e%4===0&&e%100!==0||e%400===0}function ae(){return ie(this.year())}function se(e,t,n){var r,o=n-t,i=n-e.day();return i>o&&(i-=7),o-7>i&&(i+=7),r=Ae(e).add(i,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ue(e){return se(e,this._week.dow,this._week.doy).week}function le(){return this._week.dow}function ce(){return this._week.doy}function fe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function he(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function pe(e,t,n,r,o){var i,a,s=re(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:o,i=o-s+(s>r?7:0)-(o>s?7:0),a=7*(t-1)+(n-o)+i+1,{year:a>0?e:e-1,dayOfYear:a>0?a:oe(e-1)+a}}function de(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ge(e,t,n){return null!=e?e:null!=t?t:n}function ve(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function me(e){var t,n,r,o,i=[];if(!e._d){for(r=ve(e),e._w&&null==e._a[or]&&null==e._a[rr]&&ye(e),e._dayOfYear&&(o=ge(e._a[nr],r[nr]),e._dayOfYear>oe(o)&&(l(e)._overflowDayOfYear=!0),n=re(o,0,e._dayOfYear),e._a[rr]=n.getUTCMonth(),e._a[or]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ir]&&0===e._a[ar]&&0===e._a[sr]&&0===e._a[ur]&&(e._nextDay=!0,e._a[ir]=0),e._d=(e._useUTC?re:ne).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ir]=24)}}function ye(e){var t,n,r,o,i,a,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(i=1,a=4,n=ge(t.GG,e._a[nr],se(Ae(),1,4).year),r=ge(t.W,1),o=ge(t.E,1)):(i=e._locale._week.dow,a=e._locale._week.doy,n=ge(t.gg,e._a[nr],se(Ae(),i,a).year),r=ge(t.w,1),null!=t.d?(o=t.d,i>o&&++r):o=null!=t.e?t.e+i:i),s=pe(n,r,o,a,i),e._a[nr]=s.year,e._dayOfYear=s.dayOfYear}function be(t){if(t._f===e.ISO_8601)return void ee(t);t._a=[],l(t).empty=!0;var n,r,o,i,a,s=""+t._i,u=s.length,c=0;for(o=R(t._f,t._locale).match(Rn)||[],n=0;n<o.length;n++)i=o[n],r=(s.match(F(i,t))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&l(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),jn[i]?(r?l(t).empty=!1:l(t).unusedTokens.push(i),B(i,r,t)):t._strict&&!r&&l(t).unusedTokens.push(i);l(t).charsLeftOver=u-c,s.length>0&&l(t).unusedInput.push(s),l(t).bigHour===!0&&t._a[ir]<=12&&t._a[ir]>0&&(l(t).bigHour=void 0),t._a[ir]=_e(t._locale,t._a[ir],t._meridiem),me(t),K(t)}function _e(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function we(e){var t,n,r,o,i;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)i=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],be(t),c(t)&&(i+=l(t).charsLeftOver,i+=10*l(t).unusedTokens.length,l(t).score=i,(null==r||r>i)&&(r=i,n=t));a(e,n||t)}function Ee(e){if(!e._d){var t=A(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],me(e)}}function Ce(e){var t,o=e._i,i=e._f;return e._locale=e._locale||C(e._l),null===o||void 0===i&&""===o?f({nullInput:!0}):("string"==typeof o&&(e._i=o=e._locale.preparse(o)),d(o)?new p(K(o)):(n(i)?we(e):i?be(e):r(o)?e._d=o:Se(e),t=new p(K(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function Se(t){var i=t._i;void 0===i?t._d=new Date:r(i)?t._d=new Date(+i):"string"==typeof i?te(t):n(i)?(t._a=o(i.slice(0),function(e){return parseInt(e,10)}),me(t)):"object"==typeof i?Ee(t):"number"==typeof i?t._d=new Date(i):e.createFromInputFallback(t)}function Te(e,t,n,r,o){var i={};return"boolean"==typeof n&&(r=n,n=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=o,i._l=n,i._i=e,i._f=t,i._strict=r,Ce(i)}function Ae(e,t,n,r){return Te(e,t,n,r,!1)}function Pe(e,t){var r,o;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ae();for(r=t[0],o=1;o<t.length;++o)t[o][e](r)&&(r=t[o]);return r}function xe(){var e=[].slice.call(arguments,0);return Pe("isBefore",e)}function $e(){var e=[].slice.call(arguments,0);return Pe("isAfter",e)}function Oe(e){var t=A(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*u+36e5*s,this._days=+a+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=C(),this._bubble()}function Le(e){return e instanceof Oe}function Ne(e,t){N(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)})}function De(e){var t=(e||"").match(Zn)||[],n=t[t.length-1]||[],r=(n+"").match(_r)||["-",0,0],o=+(60*r[1])+g(r[2]);return"+"===r[0]?o:-o}function Ie(t,n){var o,i;return n._isUTC?(o=n.clone(),i=(d(t)||r(t)?+t:+Ae(t))-+o,o._d.setTime(+o._d+i),e.updateOffset(o,!1),o):Ae(t).local()}function Me(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Re(t,n){var r,o=this._offset||0;return null!=t?("string"==typeof t&&(t=De(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(r=Me(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!n||this._changeInProgress?Je(this,Ge(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Me(this)}function ke(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Fe(e){return this.utcOffset(0,e)}function je(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Me(this),"m")),this}function Ue(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(De(this._i)),this}function qe(e){return e=e?Ae(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Be(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function We(){if(this._a){var e=this._isUTC?s(this._a):Ae(this._a);return this.isValid()&&v(this._a,e.toArray())>0}return!1}function Ve(){return!this._isUTC}function He(){return this._isUTC}function ze(){return this._isUTC&&0===this._offset}function Ge(e,t){var n,r,o,a=e,s=null;return Le(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(s=wr.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:g(s[or])*n,h:g(s[ir])*n,m:g(s[ar])*n,s:g(s[sr])*n,ms:g(s[ur])*n}):(s=Er.exec(e))?(n="-"===s[1]?-1:1,a={y:Ye(s[2],n),M:Ye(s[3],n),d:Ye(s[4],n),h:Ye(s[5],n),m:Ye(s[6],n),s:Ye(s[7],n),w:Ye(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Ke(Ae(a.from),Ae(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new Oe(a),Le(e)&&i(e,"_locale")&&(r._locale=e._locale),r}function Ye(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ke(e,t){var n;return t=Ie(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Ze(e,t){return function(n,r){var o,i;return null===r||isNaN(+r)||(X(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=Ge(n,r),Je(this,o,e),this}}function Je(t,n,r,o){var i=n._milliseconds,a=n._days,s=n._months;o=null==o?!0:o,i&&t._d.setTime(+t._d+i*r),a&&$(t,"Date",x(t,"Date")+a*r),s&&G(t,x(t,"Month")+s*r),o&&e.updateOffset(t,a||s)}function Xe(e){var t=e||Ae(),n=Ie(t,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,Ae(t)))}function et(){return new p(this)}function tt(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=d(e)?e:Ae(e),+this>+e):(n=d(e)?+e:+Ae(e),n<+this.clone().startOf(t))}function nt(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=d(e)?e:Ae(e),+e>+this):(n=d(e)?+e:+Ae(e),+this.clone().endOf(t)<n)}function rt(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ot(e,t){var n;return t=T(t||"millisecond"),"millisecond"===t?(e=d(e)?e:Ae(e),+this===+e):(n=+Ae(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function it(e){return 0>e?Math.ceil(e):Math.floor(e)}function at(e,t,n){var r,o,i=Ie(e,this),a=6e4*(i.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(o=st(this,i),"quarter"===t?o/=3:"year"===t&&(o/=12)):(r=this-i,o="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?o:it(o)}function st(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(o,"months");return 0>t-i?(n=e.clone().add(o-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(o+1,"months"),r=(t-i)/(n-i)),-(o+r)}function ut(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():M(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ct(t){var n=M(this,t||e.defaultFormat);return this.localeData().postformat(n)}function ft(e,t){return this.isValid()?Ge({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ht(e){return this.from(Ae(),e)}function pt(e,t){return this.isValid()?Ge({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dt(e){return this.to(Ae(),e)}function gt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function vt(){return this._locale}function mt(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yt(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function bt(){return+this._d-6e4*(this._offset||0)}function _t(){return Math.floor(+this/1e3)}function wt(){return this._offset?new Date(+this):this._d}function Et(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ct(){return c(this)}function St(){return a({},l(this))}function Tt(){return l(this).overflow}function At(e,t){N(0,[e,e.length],0,t)}function Pt(e,t,n){return se(Ae([e,11,31+t-n]),t,n).week}function xt(e){var t=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function $t(e){var t=se(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ot(){return Pt(this.year(),1,4)}function Lt(){var e=this.localeData()._week;return Pt(this.year(),e.dow,e.doy)}function Nt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Dt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function It(e){return this._weekdays[e.day()]}function Mt(e){return this._weekdaysShort[e.day()]}function Rt(e){return this._weekdaysMin[e.day()]}function kt(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Ae([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ft(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function jt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ut(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function qt(e,t){N(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Bt(e,t){return t._meridiemParse}function Wt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Vt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ht(e){N(0,[e,3],0,"millisecond")}function zt(){return this._isUTC?"UTC":""}function Gt(){return this._isUTC?"Coordinated Universal Time":""}function Yt(e){return Ae(1e3*e)}function Qt(){return Ae.apply(null,arguments).parseZone()}function Kt(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function Zt(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function Jt(){return this._invalidDate}function Xt(e){return this._ordinal.replace("%d",e)}function en(e){return e}function tn(e,t,n,r){var o=this._relativeTime[n];return"function"==typeof o?o(e,t,n,r):o.replace(/%d/i,e)}function nn(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function rn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function on(e,t,n,r){var o=C(),i=s().set(r,t);return o[n](i,e)}function an(e,t,n,r,o){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return on(e,t,n,o);var i,a=[];for(i=0;r>i;i++)a[i]=on(e,i,n,o);return a}function sn(e,t){return an(e,t,"months",12,"month")}function un(e,t){return an(e,t,"monthsShort",12,"month")}function ln(e,t){return an(e,t,"weekdays",7,"day")}function cn(e,t){return an(e,t,"weekdaysShort",7,"day")}function fn(e,t){return an(e,t,"weekdaysMin",7,"day")}function hn(){var e=this._data;return this._milliseconds=Vr(this._milliseconds),this._days=Vr(this._days),this._months=Vr(this._months),e.milliseconds=Vr(e.milliseconds),e.seconds=Vr(e.seconds),e.minutes=Vr(e.minutes),e.hours=Vr(e.hours),e.months=Vr(e.months),e.years=Vr(e.years),this}function pn(e,t,n,r){var o=Ge(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function dn(e,t){return pn(this,e,t,1)}function gn(e,t){return pn(this,e,t,-1)}function vn(){var e,t,n,r=this._milliseconds,o=this._days,i=this._months,a=this._data,s=0;return a.milliseconds=r%1e3,e=it(r/1e3),a.seconds=e%60,t=it(e/60),a.minutes=t%60,n=it(t/60),a.hours=n%24,o+=it(n/24),s=it(mn(o)),o-=it(yn(s)),i+=it(o/30),o%=30,s+=it(i/12),i%=12,a.days=o,a.months=i,a.years=s,this}function mn(e){return 400*e/146097}function yn(e){return 146097*e/400}function bn(e){var t,n,r=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+12*mn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(yn(this._months/12)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function _n(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function wn(e){return function(){return this.as(e)}}function En(e){return e=T(e),this[e+"s"]()}function Cn(e){return function(){return this._data[e]}}function Sn(){return it(this.days()/7)}function Tn(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function An(e,t,n){var r=Ge(e).abs(),o=ao(r.as("s")),i=ao(r.as("m")),a=ao(r.as("h")),s=ao(r.as("d")),u=ao(r.as("M")),l=ao(r.as("y")),c=o<so.s&&["s",o]||1===i&&["m"]||i<so.m&&["mm",i]||1===a&&["h"]||a<so.h&&["hh",a]||1===s&&["d"]||s<so.d&&["dd",s]||1===u&&["M"]||u<so.M&&["MM",u]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,Tn.apply(null,c)}function Pn(e,t){return void 0===so[e]?!1:void 0===t?so[e]:(so[e]=t,!0)}function xn(e){var t=this.localeData(),n=An(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function $n(){var e=uo(this.years()),t=uo(this.months()),n=uo(this.days()),r=uo(this.hours()),o=uo(this.minutes()),i=uo(this.seconds()+this.milliseconds()/1e3),a=this.asSeconds();return a?(0>a?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||o||i?"T":"")+(r?r+"H":"")+(o?o+"M":"")+(i?i+"S":""):"P0D"}var On,Ln,Nn=e.momentProperties=[],Dn=!1,In={},Mn={},Rn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,kn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fn={},jn={},Un=/\d/,qn=/\d\d/,Bn=/\d{3}/,Wn=/\d{4}/,Vn=/[+-]?\d{6}/,Hn=/\d\d?/,zn=/\d{1,3}/,Gn=/\d{1,4}/,Yn=/[+-]?\d{1,6}/,Qn=/\d+/,Kn=/[+-]?\d+/,Zn=/Z|[+-]\d\d:?\d\d/gi,Jn=/[+-]?\d+(\.\d{1,3})?/,Xn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,er={},tr={},nr=0,rr=1,or=2,ir=3,ar=4,sr=5,ur=6;N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),N("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),k("M",Hn),k("MM",Hn,qn),k("MMM",Xn),k("MMMM",Xn),U(["M","MM"],function(e,t){t[rr]=g(e)-1}),U(["MMM","MMMM"],function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[rr]=o:l(n).invalidMonth=e});var lr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),cr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fr={};e.suppressDeprecationWarnings=!1;var hr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],gr=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=J("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),S("year","y"),k("Y",Kn),k("YY",Hn,qn),k("YYYY",Gn,Wn),k("YYYYY",Yn,Vn),k("YYYYYY",Yn,Vn),U(["YYYY","YYYYY","YYYYYY"],nr),U("YY",function(t,n){n[nr]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var vr=P("FullYear",!1);N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),k("w",Hn),k("ww",Hn,qn),k("W",Hn),k("WW",Hn,qn),q(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=g(e)});var mr={dow:0,doy:6};N("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),k("DDD",zn),k("DDDD",Bn),U(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),e.ISO_8601=function(){};var yr=J("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ae.apply(null,arguments);return this>e?this:e}),br=J("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ae.apply(null,arguments);return e>this?this:e});Ne("Z",":"),Ne("ZZ",""),k("Z",Zn),k("ZZ",Zn),U(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=De(e)});var _r=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var wr=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Er=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ge.fn=Oe.prototype;var Cr=Ze(1,"add"),Sr=Ze(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Tr=J("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),At("gggg","weekYear"),At("ggggg","weekYear"),At("GGGG","isoWeekYear"),At("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),k("G",Kn),k("g",Kn),k("GG",Hn,qn),k("gg",Hn,qn),k("GGGG",Gn,Wn),k("gggg",Gn,Wn),k("GGGGG",Yn,Vn),k("ggggg",Yn,Vn),q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=g(e)}),q(["gg","GG"],function(t,n,r,o){n[o]=e.parseTwoDigitYear(t)}),N("Q",0,0,"quarter"),S("quarter","Q"),k("Q",Un),U("Q",function(e,t){t[rr]=3*(g(e)-1)}),N("D",["DD",2],"Do","date"),S("date","D"),k("D",Hn),k("DD",Hn,qn),k("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],or),U("Do",function(e,t){t[or]=g(e.match(Hn)[0],10)});var Ar=P("Date",!0);N("d",0,"do","day"),N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),N("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),k("d",Hn),k("e",Hn),k("E",Hn),k("dd",Xn),k("ddd",Xn),k("dddd",Xn),q(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:l(n).invalidWeekday=e}),q(["d","e","E"],function(e,t,n,r){t[r]=g(e)});var Pr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),xr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$r="Su_Mo_Tu_We_Th_Fr_Sa".split("_");N("H",["HH",2],0,"hour"),N("h",["hh",2],0,function(){return this.hours()%12||12}),qt("a",!0),qt("A",!1),S("hour","h"),k("a",Bt),k("A",Bt),k("H",Hn),k("h",Hn),k("HH",Hn,qn),k("hh",Hn,qn),U(["H","HH"],ir),U(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),U(["h","hh"],function(e,t,n){t[ir]=g(e),l(n).bigHour=!0});var Or=/[ap]\.?m?\.?/i,Lr=P("Hours",!0);N("m",["mm",2],0,"minute"),S("minute","m"),k("m",Hn),k("mm",Hn,qn),U(["m","mm"],ar);var Nr=P("Minutes",!1);N("s",["ss",2],0,"second"),S("second","s"),k("s",Hn),k("ss",Hn,qn),U(["s","ss"],sr);var Dr=P("Seconds",!1);N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Ht("SSS"),Ht("SSSS"),S("millisecond","ms"),k("S",zn,Un),k("SS",zn,qn),k("SSS",zn,Bn),k("SSSS",Qn),U(["S","SS","SSS","SSSS"],function(e,t){t[ur]=g(1e3*("0."+e))});var Ir=P("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var Mr=p.prototype;Mr.add=Cr,Mr.calendar=Xe,Mr.clone=et,Mr.diff=at,Mr.endOf=yt,Mr.format=ct,Mr.from=ft,Mr.fromNow=ht,Mr.to=pt,Mr.toNow=dt,Mr.get=O,Mr.invalidAt=Tt,Mr.isAfter=tt,Mr.isBefore=nt,Mr.isBetween=rt,Mr.isSame=ot,Mr.isValid=Ct,Mr.lang=Tr,Mr.locale=gt,Mr.localeData=vt,Mr.max=br,Mr.min=yr,Mr.parsingFlags=St,Mr.set=O,Mr.startOf=mt,Mr.subtract=Sr,Mr.toArray=Et,Mr.toDate=wt,Mr.toISOString=lt,Mr.toJSON=lt,Mr.toString=ut,Mr.unix=_t,Mr.valueOf=bt,Mr.year=vr,Mr.isLeapYear=ae,Mr.weekYear=xt,Mr.isoWeekYear=$t,Mr.quarter=Mr.quarters=Nt,Mr.month=Y,Mr.daysInMonth=Q,Mr.week=Mr.weeks=fe,Mr.isoWeek=Mr.isoWeeks=he,Mr.weeksInYear=Lt,Mr.isoWeeksInYear=Ot,Mr.date=Ar,Mr.day=Mr.days=Ft,Mr.weekday=jt,Mr.isoWeekday=Ut,Mr.dayOfYear=de,Mr.hour=Mr.hours=Lr,Mr.minute=Mr.minutes=Nr,Mr.second=Mr.seconds=Dr,Mr.millisecond=Mr.milliseconds=Ir,Mr.utcOffset=Re,Mr.utc=Fe,Mr.local=je,Mr.parseZone=Ue,Mr.hasAlignedHourOffset=qe,Mr.isDST=Be,Mr.isDSTShifted=We,Mr.isLocal=Ve,Mr.isUtcOffset=He,Mr.isUtc=ze,Mr.isUTC=ze,Mr.zoneAbbr=zt,Mr.zoneName=Gt,Mr.dates=J("dates accessor is deprecated. Use date instead.",Ar),Mr.months=J("months accessor is deprecated. Use month instead",Y),Mr.years=J("years accessor is deprecated. Use year instead",vr),Mr.zone=J("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ke);var Rr=Mr,kr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Fr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},jr="Invalid date",Ur="%d",qr=/\d{1,2}/,Br={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Wr=m.prototype;Wr._calendar=kr,Wr.calendar=Kt,Wr._longDateFormat=Fr,Wr.longDateFormat=Zt,Wr._invalidDate=jr,Wr.invalidDate=Jt,Wr._ordinal=Ur,Wr.ordinal=Xt,Wr._ordinalParse=qr,Wr.preparse=en,Wr.postformat=en,Wr._relativeTime=Br,Wr.relativeTime=tn,Wr.pastFuture=nn,Wr.set=rn,Wr.months=V,Wr._months=lr,Wr.monthsShort=H,Wr._monthsShort=cr,Wr.monthsParse=z,Wr.week=ue,Wr._week=mr,Wr.firstDayOfYear=ce,Wr.firstDayOfWeek=le,Wr.weekdays=It,Wr._weekdays=Pr,Wr.weekdaysMin=Rt,Wr._weekdaysMin=$r,Wr.weekdaysShort=Mt,Wr._weekdaysShort=xr,Wr.weekdaysParse=kt,Wr.isPM=Wt,Wr._meridiemParse=Or,Wr.meridiem=Vt,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=J("moment.lang is deprecated. Use moment.locale instead.",w),e.langData=J("moment.langData is deprecated. Use moment.localeData instead.",C);var Vr=Math.abs,Hr=wn("ms"),zr=wn("s"),Gr=wn("m"),Yr=wn("h"),Qr=wn("d"),Kr=wn("w"),Zr=wn("M"),Jr=wn("y"),Xr=Cn("milliseconds"),eo=Cn("seconds"),to=Cn("minutes"),no=Cn("hours"),ro=Cn("days"),oo=Cn("months"),io=Cn("years"),ao=Math.round,so={s:45,m:45,h:22,d:26,M:11},uo=Math.abs,lo=Oe.prototype;lo.abs=hn,lo.add=dn,lo.subtract=gn,lo.as=bn,lo.asMilliseconds=Hr,lo.asSeconds=zr,lo.asMinutes=Gr,lo.asHours=Yr,lo.asDays=Qr,lo.asWeeks=Kr,lo.asMonths=Zr,lo.asYears=Jr,lo.valueOf=_n,lo._bubble=vn,lo.get=En,lo.milliseconds=Xr,lo.seconds=eo,lo.minutes=to,lo.hours=no,lo.days=ro,lo.weeks=Sn,lo.months=oo,lo.years=io,lo.humanize=xn,lo.toISOString=$n,lo.toString=$n,lo.toJSON=$n,lo.locale=gt,lo.localeData=vt,lo.toIsoString=J("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),lo.lang=Tr,N("X",0,0,"unix"),N("x",0,0,"valueOf"),k("x",Kn),k("X",Jn),U("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,n){n._d=new Date(g(e))}),e.version="2.10.3",t(Ae),e.fn=Rr,e.min=xe,e.max=$e,e.utc=s,e.unix=Yt,e.months=sn,e.isDate=r,e.locale=w,e.invalid=f,e.duration=Ge,e.isMoment=d,e.weekdays=ln,e.parseZone=Qt,e.localeData=C,e.isDuration=Le,e.monthsShort=un,e.weekdaysMin=fn,e.defineLocale=E,e.weekdaysShort=cn,e.normalizeUnits=T,e.relativeTimeThreshold=Pn;var co=e;return co}),function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,r,o,i){return function(a,s,u){function l(){var e;if(o.serverTime){var t=(new Date).getTime(),r=t-w+o.serverTime;e=n(r)}else e=n();return e}function c(){g&&(t.clearTimeout(g),g=null)}function f(e){var n=l().diff(e,"day"),r=b&&n>=b;if(r?s.text(e.format(_)):s.text(e.from(l(),m)),y&&!s.attr("title")&&s.attr("title",e.local().format(y)),!r){var o=Math.abs(l().diff(e,"minute")),i=3600;1>o?i=1:60>o?i=30:180>o&&(i=300),g=t.setTimeout(function(){f(e)},1e3*i)}}function h(e){S&&s.attr("datetime",e)}function p(){if(c(),d){var e=r.preprocessDate(d,E,v);f(e),h(e.toISOString())}}var d,g=null,v=i.format,m=o.withoutSuffix,y=o.titleFormat,b=o.fullDateThreshold,_=o.fullDateFormat,w=(new Date).getTime(),E=i.preprocess,C=u.amTimeAgo,S="TIME"===s[0].nodeName.toUpperCase();a.$watch(C,function(e){return"undefined"==typeof e||null===e||""===e?(c(),void(d&&(s.text(""),h(""),d=null))):(d=e,void p())}),e.isDefined(u.amWithoutSuffix)&&a.$watch(u.amWithoutSuffix,function(e){"boolean"==typeof e?(m=e,p()):m=o.withoutSuffix}),u.$observe("amFormat",function(e){"undefined"!=typeof e&&(v=e,p())}),u.$observe("amPreprocess",function(e){E=e,p()}),u.$observe("amFullDateThreshold",function(e){b=e,p()}),u.$observe("amFullDateFormat",function(e){_=e,p()}),a.$on("$destroy",function(){c()}),a.$on("amMoment:localeChanged",function(){p()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,r,o){
this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(r,o){var i=t.locale(r,o);return e.isDefined(r)&&n.$broadcast("amMoment:localeChanged"),i},this.changeTimezone=function(e){o.timezone=e,n.$broadcast("amMoment:timezoneChanged")},this.preprocessDate=function(n,i,a){return e.isUndefined(i)&&(i=o.preprocess),this.preprocessors[i]?this.preprocessors[i](n,a):(i&&r.warn("angular-moment: Ignoring unsupported value for preprocess: "+i),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,a))},this.applyTimezone=function(e,t){return t=t||o.timezone,e&&t&&(e.tz?e=e.tz(t):r.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,r);var o=e(n);return o.isValid()?t.applyTimezone(o).calendar():""}return r.$stateful=n.statefulFilters,r}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,o,i,a,s){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,a);var u=e(n);if(!u.isValid())return"";var l;if("undefined"==typeof r||null===r)l=e();else if(r=t.preprocessDate(r,s),l=e(r),!l.isValid())return"";return t.applyTimezone(u).diff(t.applyTimezone(l),o,i)}return r.$stateful=n.statefulFilters,r}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,o,i){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,o);var a=e(n);return a.isValid()?t.applyTimezone(a,i).format(r):""}return r.$stateful=n.statefulFilters,r}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,r){return"undefined"==typeof t||null===t?"":e.duration(t,n).humanize(r)}return n.$stateful=t.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,o){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,r);var i=e(n);return i.isValid()?t.applyTimezone(i).fromNow(o):""}return r.$stateful=n.statefulFilters,r}])}"function"==typeof define&&define.amd?define(["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?(e(angular,require("moment")),module.exports="angularMoment"):e(angular,window.moment)}(),function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function r(){}function o(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function i(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}function a(e,t){return"onerror"===e?void we.on("error",t):2!==arguments.length?we[e]:void(we[e]=t)}function s(){setTimeout(function(){for(var e,t=0;t<Ee.length;t++){e=Ee[t];var n=e.payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),we.trigger(e.name,e.payload)}Ee.length=0},50)}function u(e,t,n){1===Ee.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:n&&n._id,label:t._label,timeStamp:ye(),error:we["instrument-with-stack"]?new Error(t._label):null}})&&s()}function l(){return new TypeError("A promises callback cannot return that same promise.")}function c(){}function f(e){try{return e.then}catch(t){return Pe.error=t,Pe}}function h(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function p(e,t,n){we.async(function(e){var r=!1,o=h(n,t,function(n){r||(r=!0,t!==n?v(e,n):y(e,n))},function(t){r||(r=!0,b(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,b(e,o))},e)}function d(e,t){t._state===Te?y(e,t._result):t._state===Ae?(t._onError=null,b(e,t._result)):_(t,void 0,function(n){t!==n?v(e,n):y(e,n)},function(t){b(e,t)})}function g(e,n){if(n.constructor===e.constructor)d(e,n);else{var r=f(n);r===Pe?b(e,Pe.error):void 0===r?y(e,n):t(r)?p(e,n,r):y(e,n)}}function v(t,n){t===n?y(t,n):e(n)?g(t,n):y(t,n)}function m(e){e._onError&&e._onError(e._result),w(e)}function y(e,t){e._state===Se&&(e._result=t,e._state=Te,0===e._subscribers.length?we.instrument&&Ce("fulfilled",e):we.async(w,e))}function b(e,t){e._state===Se&&(e._state=Ae,e._result=t,we.async(m,e))}function _(e,t,n,r){var o=e._subscribers,i=o.length;e._onError=null,o[i]=t,o[i+Te]=n,o[i+Ae]=r,0===i&&e._state&&we.async(w,e)}function w(e){var t=e._subscribers,n=e._state;if(we.instrument&&Ce(n===Te?"fulfilled":"rejected",e),0!==t.length){for(var r,o,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?S(n,r,o,i):o(i);e._subscribers.length=0}}function E(){this.error=null}function C(e,t){try{return e(t)}catch(n){return xe.error=n,xe}}function S(e,n,r,o){var i,a,s,u,c=t(r);if(c){if(i=C(r,o),i===xe?(u=!0,a=i.error,i=null):s=!0,n===i)return void b(n,l())}else i=o,s=!0;n._state!==Se||(c&&s?v(n,i):u?b(n,a):e===Te?y(n,i):e===Ae&&b(n,i))}function T(e,t){var n=!1;try{t(function(t){n||(n=!0,v(e,t))},function(t){n||(n=!0,b(e,t))})}catch(r){b(e,r)}}function A(e,t,n){return e===Te?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function P(e,t,n,r){this._instanceConstructor=e,this.promise=new e(c,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&y(this.promise,this._result))):b(this.promise,this._validationError())}function x(e,t){return new $e(this,e,!0,t).promise}function $(e,t){function n(e){v(i,e)}function r(e){b(i,e)}var o=this,i=new o(c,t);if(!me(e))return b(i,new TypeError("You must pass an array to race.")),i;for(var a=e.length,s=0;i._state===Se&&a>s;s++)_(o.resolve(e[s]),void 0,n,r);return i}function O(e,t){var n=this;if(e&&"object"==typeof e&&e.constructor===n)return e;var r=new n(c,t);return v(r,e),r}function L(e,t){var n=this,r=new n(c,t);return b(r,e),r}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(e,n){this._id=Me++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],we.instrument&&Ce("created",this),c!==e&&(t(e)||N(),this instanceof I||D(),T(this,e))}function M(e,t,n){this._superConstructor(e,t,!1,n)}function R(e,t){return new M(Re,e,t).promise}function k(e,t){return Re.all(e,t)}function F(e,t){Ye[qe]=e,Ye[qe+1]=t,qe+=2,2===qe&&Fe()}function j(){var e=process.nextTick,t=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(V)}}function U(){return function(){ke(V)}}function q(){var e=0,t=new He(V),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function B(){var e=new MessageChannel;return e.port1.onmessage=V,function(){e.port2.postMessage(0)}}function W(){return function(){setTimeout(V,1)}}function V(){for(var e=0;qe>e;e+=2){var t=Ye[e],n=Ye[e+1];t(n),Ye[e]=void 0,Ye[e+1]=void 0}qe=0}function H(){try{var e=require,t=e("vertx");return ke=t.runOnLoop||t.runOnContext,U()}catch(n){return W()}}function z(e){var t={};return t.promise=new Re(function(e,n){t.resolve=e,t.reject=n},e),t}function G(e,n,r){return Re.all(e,r).then(function(e){if(!t(n))throw new TypeError("You must pass a function as filter's second argument.");for(var o=e.length,i=new Array(o),a=0;o>a;a++)i[a]=n(e[a]);return Re.all(i,r).then(function(t){for(var n=new Array(o),r=0,i=0;o>i;i++)t[i]&&(n[r]=e[i],r++);return n.length=r,n})})}function Y(e,t,n){this._superConstructor(e,t,!0,n)}function Q(e,t,n){this._superConstructor(e,t,!1,n)}function K(e,t){return new Q(Re,e,t).promise}function Z(e,t){return new Ze(Re,e,t).promise}function J(e,n,r){return Re.all(e,r).then(function(e){if(!t(n))throw new TypeError("You must pass a function as map's second argument.");for(var o=e.length,i=new Array(o),a=0;o>a;a++)i[a]=n(e[a]);return Re.all(i,r)})}function X(){this.value=void 0}function ee(e){try{return e.then}catch(t){return tt.value=t,tt}}function te(e,t,n){try{e.apply(t,n)}catch(r){return tt.value=r,tt}}function ne(e,t){for(var n,r,o={},i=e.length,a=new Array(i),s=0;i>s;s++)a[s]=e[s];for(r=0;r<t.length;r++)n=t[r],o[n]=a[r+1];return o}function re(e){for(var t=e.length,n=new Array(t-1),r=1;t>r;r++)n[r-1]=e[r];return n}function oe(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function ie(e,t){var n=function(){for(var n,r=this,o=arguments.length,i=new Array(o+1),a=!1,s=0;o>s;++s){if(n=arguments[s],!a){if(a=ue(n),a===nt){var u=new Re(c);return b(u,nt.value),u}a&&a!==!0&&(n=oe(a,n))}i[s]=n}var l=new Re(c);return i[o]=function(e,n){e?b(l,e):void 0===t?v(l,n):t===!0?v(l,re(arguments)):me(t)?v(l,ne(arguments,t)):v(l,n)},a?se(l,i,e,r):ae(l,i,e,r)};return n.__proto__=e,n}function ae(e,t,n,r){var o=te(n,r,t);return o===tt&&b(e,o.value),e}function se(e,t,n,r){return Re.all(t).then(function(t){var o=te(n,r,t);return o===tt&&b(e,o.value),e})}function ue(e){return e&&"object"==typeof e?e.constructor===Re?!0:ee(e):!1}function le(e,t){return Re.race(e,t)}function ce(e,t){return Re.reject(e,t)}function fe(e,t){return Re.resolve(e,t)}function he(e){throw setTimeout(function(){throw e}),e}function pe(e,t){we.async(e,t)}function de(){we.on.apply(we,arguments)}function ge(){we.off.apply(we,arguments)}var ve;ve=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var me=ve,ye=Date.now||function(){return(new Date).getTime()},be=Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return r.prototype=e,new r},_e={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){var n,r=i(this);n=r[e],n||(n=r[e]=[]),-1===o(n,t)&&n.push(t)},off:function(e,t){var n,r,a=i(this);return t?(n=a[e],r=o(n,t),void(-1!==r&&n.splice(r,1))):void(a[e]=[])},trigger:function(e,t){var n,r,o=i(this);if(n=o[e])for(var a=0;a<n.length;a++)(r=n[a])(t)}},we={instrument:!1};_e.mixin(we);var Ee=[],Ce=u,Se=void 0,Te=1,Ae=2,Pe=new E,xe=new E,$e=P;P.prototype._validateInput=function(e){return me(e)},P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._init=function(){this._result=new Array(this.length)},P.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,r=0;t._state===Se&&e>r;r++)this._eachEntry(n[r],r)},P.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;n(e)?e.constructor===r&&e._state!==Se?(e._onError=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(Te,t,e))},P.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===Se&&(this._remaining--,this._abortOnReject&&e===Ae?b(r,n):this._result[t]=this._makeResult(e,t,n)),0===this._remaining&&y(r,this._result)},P.prototype._makeResult=function(e,t,n){return n},P.prototype._willSettleAt=function(e,t){var n=this;_(e,void 0,function(e){n._settledAt(Te,t,e)},function(e){n._settledAt(Ae,t,e)})};var Oe=x,Le=$,Ne=O,De=L,Ie="rsvp_"+ye()+"-",Me=0,Re=I;I.cast=Ne,I.all=Oe,I.race=Le,I.resolve=Ne,I.reject=De,I.prototype={constructor:I,_guidKey:Ie,_onError:function(e){we.async(function(t){setTimeout(function(){t._onError&&we.trigger("error",e)},0)},this)},then:function(e,t,n){var r=this,o=r._state;if(o===Te&&!e||o===Ae&&!t)return we.instrument&&Ce("chained",this,this),this;r._onError=null;var i=new this.constructor(c,n),a=r._result;if(we.instrument&&Ce("chained",r,i),o){var s=arguments[o-1];we.async(function(){S(o,i,s,a)})}else _(r,i,e,t);return i},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}},M.prototype=be($e.prototype),M.prototype._superConstructor=$e,M.prototype._makeResult=A,M.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var ke,Fe,je=R,Ue=k,qe=0,Be=({}.toString,F),We="undefined"!=typeof window?window:void 0,Ve=We||{},He=Ve.MutationObserver||Ve.WebKitMutationObserver,ze="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Ge="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Ye=new Array(1e3);Fe=ze?j():He?q():Ge?B():void 0===We&&"function"==typeof require?H():W();var Qe=z,Ke=G,Ze=Y;Y.prototype=be($e.prototype),Y.prototype._superConstructor=$e,Y.prototype._init=function(){this._result={}},Y.prototype._validateInput=function(e){return e&&"object"==typeof e},Y.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},Y.prototype._enumerate=function(){var e=this.promise,t=this._input,n=[];for(var r in t)e._state===Se&&Object.prototype.hasOwnProperty.call(t,r)&&n.push({position:r,entry:t[r]});var o=n.length;this._remaining=o;for(var i,a=0;e._state===Se&&o>a;a++)i=n[a],this._eachEntry(i.entry,i.position)},Q.prototype=be(Ze.prototype),Q.prototype._superConstructor=$e,Q.prototype._makeResult=A,Q.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var Je=K,Xe=Z,et=J,tt=new X,nt=new X,rt=ie,ot=le,it=ce,at=fe,st=he;we.async=Be;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var ut=window.__PROMISE_INSTRUMENTATION__;a("instrument",!0);for(var lt in ut)ut.hasOwnProperty(lt)&&de(lt,ut[lt])}var ct={race:ot,Promise:Re,allSettled:je,hash:Xe,hashSettled:Je,denodeify:rt,on:de,off:ge,map:et,filter:Ke,resolve:at,reject:it,all:Ue,rethrow:st,defer:Qe,EventTarget:_e,configure:a,async:pe};"function"==typeof define&&define.amd?define(function(){return ct}):"undefined"!=typeof module&&module.exports?module.exports=ct:"undefined"!=typeof this&&(this.RSVP=ct)}.call(this),function(){function e(e){var t,n=(e.length+8>>6)+1,r=[];for(t=0;16*n>t;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<24-8*(3&t);return r[t>>2]|=128<<24-8*(3&t),r[16*n-1]=8*e.length,r}function t(e){var t,n="0123456789abcdef",r="";for(t=0;t<4*e.length;t++)r+=n.charAt(e[t>>2]>>8*(3-t%4)+4&15)+n.charAt(e[t>>2]>>8*(3-t%4)&15);return r}function n(e){var t,n,s,u,l,c,f,h,p=[],d=1732584193,g=4023233417,v=2562383102,m=271733878,y=3285377520;for(f=0;f<e.length;f+=16){for(t=d,n=g,s=v,u=m,l=y,h=0;80>h;h++)16>h?p[h]=e[f+h]:p[h]=a(p[h-3]^p[h-8]^p[h-14]^p[h-16],1),c=i(i(a(d,5),r(h,g,v,m)),i(i(y,p[h]),o(h))),y=m,m=v,v=a(g,30),g=d,d=c;d=i(d,t),g=i(g,n),v=i(v,s),m=i(m,u),y=i(y,l)}return[d,g,v,m,y]}function r(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?2400959708:3395469782}function i(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function a(e,t){return e<<t|e>>>32-t}function s(r){return t(n(e(r)))}var u=this;"function"==typeof define?define(function(){return s}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.sha1=s):u.sha1=s}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)}(window,function(n,r){var o,i,a,s,u,l,c,f,h,p,d,g,v,m,y,b;return o=n(r),f=e.call(r,"ontouchstart")>=0,s={horizontal:{},vertical:{}},u=1,c={},l="waypoints-context-id",d="resize.waypoints",g="scroll.waypoints",v=1,m="waypoints-waypoint-ids",y="waypoint",b="waypoints",i=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+u++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[l]=this.id,c[this.id]=this,e.bind(g,function(){var e;return t.didScroll||f?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},r.setTimeout(e,n[b].settings.scrollThrottle))}),e.bind(d,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return n[b]("refresh"),t.didResize=!1},r.setTimeout(e,n[b].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||e.vertical.oldScroll&&e.vertical.newScroll||n[b]("refresh"),n.each(e,function(e,r){var o,i,a;return a=[],i=r.newScroll>r.oldScroll,o=i?r.forward:r.backward,n.each(t.waypoints[e],function(e,t){var n,o;return r.oldScroll<(n=t.offset)&&n<=r.newScroll?a.push(t):r.newScroll<(o=t.offset)&&o<=r.oldScroll?a.push(t):void 0}),a.sort(function(e,t){return e.offset-t.offset}),i||a.reverse(),n.each(a,function(e,t){return t.options.continuous||e===a.length-1?t.trigger([o]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,r,o=this;return r=n.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:r?0:t.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:t.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(e,function(e,t){return n.each(o.waypoints[e],function(e,r){var o,i,a,s,u;return o=r.options.offset,a=r.offset,i=n.isWindow(r.element)?0:r.$element.offset()[t.offsetProp],n.isFunction(o)?o=o.apply(r.element):"string"==typeof o&&(o=parseFloat(o),r.options.offset.indexOf("%")>-1&&(o=Math.ceil(t.contextDimension*o/100))),r.offset=i-t.contextOffset+t.contextScroll-o,r.options.onlyOnScroll&&null!=a||!r.enabled?void 0:null!==a&&a<(s=t.oldScroll)&&s<=r.offset?r.trigger([t.backward]):null!==a&&a>(u=t.oldScroll)&&u>=r.offset?r.trigger([t.forward]):null===a&&t.oldScroll>=r.offset?r.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([d,g].join(" ")),delete c[this.id]):void 0},e}(),a=function(){function e(e,t,r){var o,i;"bottom-in-view"===r.offset&&(r.offset=function(){var e;return e=n[b]("viewportHeight"),n.isWindow(t.element)||(e=t.$element.height()),e-n(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=t,this.enabled=r.enabled,this.id="waypoints"+v++,this.offset=null,this.options=r,t.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,o=null!=(i=this.element[m])?i:[],o.push(this.id),this.element[m]=o}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,r;return(r=e[m])?(t=n.extend({},s.horizontal,s.vertical),n.map(r,function(e){return t[e]})):[]},e}(),p={init:function(e,t){var r;return t=n.extend({},n.fn[y].defaults,t),null==(r=t.handler)&&(t.handler=e),this.each(function(){var e,r,o,s;return e=n(this),o=null!=(s=t.context)?s:n.fn[y].defaults.context,n.isWindow(o)||(o=e.closest(o)),o=n(o),r=c[o[0][l]],r||(r=new i(o)),new a(e,r,t)}),n[b]("refresh"),this},disable:function(){return p._invoke.call(this,"disable")},enable:function(){return p._invoke.call(this,"enable")},destroy:function(){return p._invoke.call(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t>0?e.push(n[t-1]):void 0})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t<n.length-1?e.push(n[t+1]):void 0})},_traverse:function(e,t,o){var i,a;return null==e&&(e="vertical"),null==t&&(t=r),a=h.aggregate(t),i=[],this.each(function(){var t;return t=n.inArray(this,a[e]),o(i,t,a[e])}),this.pushStack(i)},_invoke:function(e){return this.each(function(){var t;return t=a.getWaypointsByElement(this),n.each(t,function(t,n){return n[e](),!0})}),this}},n.fn[y]=function(){var e,r;return r=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[r]?p[r].apply(this,e):n.isFunction(r)?p.init.apply(this,arguments):n.isPlainObject(r)?p.init.apply(this,[null,r]):r?n.error("The "+r+" method does not exist in jQuery Waypoints."):n.error("jQuery Waypoints needs a callback function or handler option.")},n.fn[y].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return n.each(c,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=r.innerHeight)?e:o.height()},aggregate:function(e){var t,r,o;return t=s,e&&(t=null!=(o=c[n(e)[0][l]])?o.waypoints:void 0),t?(r={horizontal:[],vertical:[]},n.each(r,function(e,o){return n.each(t[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),r[e]=n.map(o,function(e){return e.element}),r[e]=n.unique(r[e])}),r):[]},above:function(e){return null==e&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(e){var t;return t=n.extend({},s.vertical,s.horizontal),n.each(t,function(t,n){return n[e](),!0})},_filter:function(e,t,r){var o,i;return(o=c[n(e)[0][l]])?(i=[],n.each(o.waypoints[t],function(e,t){return r(o,t)?i.push(t):void 0}),i.sort(function(e,t){return e.offset-t.offset}),n.map(i,function(e){return e.element})):[]}},n[b]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[n]?h[n].apply(null,e):h.aggregate.call(null,n)},n[b].settings={resizeThrottle:100,scrollThrottle:30},o.on("load.waypoints",function(){return n[b]("refresh")})})}.call(this);